# Шаблонизатор

Шаблонизатор — это инструмент определения степени уникальности различных частей HTML-документа.

## Принцип работы шаблонизатора {#principles}

В шаблонизаторе каждый сегмент (контентный блок) идентифицируется с помощью пары: непосредственно контента и пути сегмента в HTML-дереве. Для упрощения операций использется MD5 от этой пары.

Эффективность работы шаблонизатора растет по мере накопления данных о документах сайта.

Исходя из частотности сегмента вес сегмента вычисляется по формуле `W = log( D / F )`, где:

* `W` — вес;
* `D` — количество документов на сайте, известных шаблонизатору;
* `F` — количество документов на сайте, на которых встречается сегмент.

Вес каждого сегмента документа может быть спроецирован на словопозиции этого сегмента. Таким образом, в результате обработки рассматриваемого документа шаблонизатором вычисляется вес для каждой его словопозиции.
 
Для случая, когда слово в документе встречается несколько раз, его вес принимается равным сумме весов всех его словопозиций.

Вес сегмента, полученный из шаблонизатора, используется как вес слова из этого сегмента в Onrop.

