# Yacofast: быстрый Фокусировщик

## Раздел рассказывает о группе компонентов, условно объединенных под названием Yacofast {#about}

Основной задачей группы компонентов Yacofast, в которую входят Yacofast, YacoRTbinder и Yacotitles, является создание быстрых привязок в режиме реального времени без скачивания содержимого страницы.

Схема ниже описывает процесс формирования быстрых привязок основными компонентами Yacofast.

![](images/yacofast.png)

(1) Каждый раз, когда на странице сайта, входящего в РСЯ, происходит вызов рекламного блока, Баннерокрутилка для показа тематической контекстной рекламы ищет привязки среди присланных Фокусировщиком. Если привязки не найдены, то Баннерокрутилка отправляет в Yacofast запрос с URL-адресом этой страницы. Кроме URL-адреса передается текс: содержание части страницы, которое было загружено браузером пользователя до того, как был вызван код рекламного блока, теги `<title>`, `<h1>`.

(2) FastCGI модуль Yacofast использует приложение [memcached](http://ru.wikipedia.org/wiki/Memcached), которое хранит все привязки, сформированные Yacobot-серверами (10) и YacoRTbinder.

(3) Если для присланного Баннерокрутилкой URL-адреса в memcached есть привязка, то эта привязка передается в FastCGI для передачи в ответе Баннерокрутилке (12).

(4) Если в memcached нет привязки для страницы, то URL-адрес, а также загруженный вместе с ним текст страницы отправляются в YacoRTbinder для создания быстрой привязки в режиме реального времени. Подробно о внутреннем устройстве и взаимодействии Yacofast и YacoRTbinder рассказывается в подразделе [Организация Yacofast и YacoRTbinder](yacofast-yacortbinder.md).

(5-6) Все сформированные YacoRTbinder быстрые привязки отправляются в FastCGI для передачи в ответе Баннерокрутилке (12), а также в memcached для последующего использования.

(7-8) Для формирования быстрых привязок YacoRTbinder использует базу весов сегментов, которая собирается компонентом Yacotitles. Для сборки базы используются данные об URL-адресах и содержании страниц (текст), которые Yacotitles получает от Yacofast. База собирается раз в сутки и передается в YacoRTbinder.

(9) Кроме базы весов сегментов, YacoRTbinder использует словарь ключевых фраз и категорий, который формируется компонентом Yacotools.

(10) Каждый Yacobot-сервер конвертирует сформированные привязки в формат Yacofast (этот процесс отражен на схеме в разделе [Yacobots: скачивание, классификация и привязка](yacobots.md)) и отправляет их в memcached.

(11) Yacofast использует базу зеркал и данные о значимости параметров URL-адресов из таблицы `query_args`, полученные от Master Server, для приведения URL-адресов к нормализованному виду.

