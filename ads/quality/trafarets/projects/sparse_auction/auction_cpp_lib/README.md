В этой части проекта находится реализация нейроаукциона на C++, включающая в себя SparseMAP, энкодер MyersonNet-весов (который по признакам кандидатов выдаёт веса преобразования ставки), и остальные необходимые функции (например, вычисление кликов и платежей кандидатов).

### Как собрать проект
1. Нужно поставить `libtorch`: библиотеку с С++ API Torch. Работать с ней можно почти так же, как с обычным PyTorch, определяя свои модули и их forward/backward. Для установки достаточно скачать и распаковать архив с официального сайта:
    ```(bash)
        wget https://download.pytorch.org/libtorch/cpu/libtorch-shared-with-deps-1.10.0%2Bcpu.zip
        unzip libtorch-shared-with-deps-1.10.0+cpu.zip
    ```
2. Помимо него понадобится `Eigen` — библиотека для линейной алгебры в С++, её нужно поставить в SparseMAP/lib/linalg. Процедура установки такая же, как и с `libtorch`:
    ```(bash)
        wget https://gitlab.com/libeigen/eigen/-/archive/3.4.0/eigen-3.4.0.zip
        unzip eigen-3.4.0.zip
        mv eigen-3.4.0 <Путь к проекту>/SparseMAP/lib/linalg
    ```
3. Нужно установить Python-модули для сборки биндингов, а именно `setuptools` и `pybind11`.
4. Собрать библиотеку:
    ```(bash)
        python setup.py install
    ```
    При этом сначала запустится С++\-компилятор, который соберёт соответствующий код в объектные файлы (на этом этапе может вылезти пара warning-ов, этого не стоит пугаться). Потом из них соберётся Python-пакет в виде egg-файла, который потом можно будет импортировать в любой свой код на Python.

Если всё пройдёт хорошо, в конце должна вывестись надпись `Finished processing dependencies for sparsemap-extension==0.0.0` — после этого библиотека собрана и ей можно пользоваться.
    
### Структура проекта
- SparseMAP
    - lib — файлы с реализацией всех нужных функций. Основные из них: 
        - `optimize` (см. active_set.h) — решает оптимизационную задачу, выдавая вероятности и соответствующие им перестановочные матрицы;
        - `ComputeIncompleteMatchingMaxFlow` (см. active_set.h) — решает задачу max-matching-а с прямоугольной матрицей весов.
    - Также в папке lib/linalg лежит исходный код Eigen-а, на котором это всё написано (для его сборки ничего дополнительно делать не нужно).
- net.h — реализация энкодера, который по признакам кандидатов выдаёт веса MyersonNet-преобразования ставки
- auction.h — реализация основного модуля нейроаукциона
- auxiliary.h — вспомогательные функции, такие как подсчёт кликов и преобразования Torch Tensor <--> Eigen Matrix
- binding.cpp — указаны функции и классы, которые будут доступны снаружи после сборки. По аналогии можно описывать свои, если хочется что-то ещё выставить наружу.
- Notebooks — jupyter-ноутбук с проверкой + необходимый код для сравнения с Python-реализацией.

### Как пользоваться
1. Импортировать библиотеку из Python (помните, находясь в какой директории вы это делаете — возможно, придётся что-то добавить в sys.path, т.к. сама по себе она почему-то не находится):
```(python)
import sparsemap_cpp_lib as smap_lib
```
2. Пользоваться как обычно любыми классами/методами/функциями, описанными в binding.cpp. Если что, есть много примеров в ноутбуке `Check_cpp.ipynb`.