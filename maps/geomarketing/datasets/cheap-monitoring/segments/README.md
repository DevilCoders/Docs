# Определение сегментов
По текущей версии сегментов определяются переменные
для дашборда.
На основании лога сегментов забираются slug-и из Пифии.


### [Nirvana](https://nirvana.yandex-team.ru/flow/0cd76198-66b0-4f2b-a4d1-a75ed8d6c0a7/630bb8bb-a1d8-4aff-aa43-b14ae4c81707/graph)

### Структура и последовательность
- **current** - конфиг текущих сегментов и их атрибутов;
- **tmp_log** - условно "грязный" лог, добавляет к себе текущий конфиг
и для каждой даты обновления оставляет последнее по времени добавление
значение для каждого id сегмента;
- **log** - хранит лог изменения атрибутов сегментов, называем их версиями.
Для каждой версии есть дата начала и окончания.


### Как добавить сегмент
В файле **current** скопировать кортеж значений и ввести его атрибуты.
***Обязательно проставить update_date.***
```
AsStruct(
    'segment_3_0_space' AS id,
    'Сегмент 3_0 Space' AS name,
    '3_0 Купили 1d Space' AS description,
    'Сделки в Space' AS type,
    'no_slug' AS slug,
    'Анкеты с апреля 2022' AS relevance,
    '2022-06-30' AS create_date,
    '2022-06-30' AS update_date
),
```

### Как изменить сегмент
В уже созданном кортеже изменить необходимое значение
и обязательно проставить **update_date**.
- **id** менять нельзя.
- **create_date** менять нежелательно.
