## Как добавить новое задание/пуш

1. Поддержать новое задание в [ЛК](https://a.yandex-team.ru/arc_vcs/maps/doc/proto/yandex/maps/proto/ugc_account/Backoffice.md#добавление-нового-типа-assignment--а-contribution--а)
2. Сгенерировать данные для заливки в личный кабинет. Таблица должна содержать колонки:
   * `uids`: список пользователей, которым будет отправлено задание
   * `assignment_id`: id задания для ЛК
   * `data` - optional: yson с содержимым конкретного задания, формат свой для каждого вида заданий
   * `features` - optional: yson с факторами отбора заданий
3. Сгенерировать данные для отправки пушей. Таблица должна содержать колонки:
   * `uid`: пользователь, которому будет отправлен пуш
   * `assignment_id`: id задания для ЛК
   * `application`: приложение, в которое отправлять пуш
   * `lat`: широта
   * `lon`: долгота
   * `data` - optional: yson с содержимым конкретного задания, формат свой для каждого вида пушей
   * `features` - optional: yson с факторами отбора заданий
4. Аккуратно сложить их на YT: в одной директории должны лежать подпапки. Название подпапки - дата в формате `{YYYY-MM-DD}`. В каждой подпапке лежат таблицы для пушей и заданий.
5. Завести в sandbox таску для сборки данных по аналогии со [шлагбаумами](https://a.yandex-team.ru/arc_vcs/sandbox/projects/nmaps/ugc_assignments/BarriersPushes/__init__.py).
   * удобно наследоваться от [общих параметров](https://a.yandex-team.ru/arc_vcs/sandbox/projects/nmaps/ugc_assignments/common/ugc_pushes_parameters.py?rev=b8341ce3e164b983969033ed17b71f37066f37d8#L41)
   * удобно строить процесс на последовательном запуске каких-то бинарников
6. Настроить scheduler для этой таски, [пример](https://sandbox.yandex-team.ru/scheduler/328491)
7. Добавить поддержку нового типа задания в [скрипт](https://a.yandex-team.ru/arc_vcs/maps/poi/notification/bin/create_ugc_account_tasks) отправки заданий
8. Добавить поддержку нового типу пуша в [скрипт](https://a.yandex-team.ru/arc_vcs/maps/poi/notification/bin/send_pushes) рассылки пушей
9. Настроить scheduler `MAPS_PREPARE_UGC_PUSHES_TASK` для рассылки заданий/пушей, [Пример](https://sandbox.yandex-team.ru/scheduler/696935/view). Он умеет:
   1. Отправить задания в личный кабинет
   2. Отфильтровать пуши перед отправкой:
      * удалить пуши, задания на которые в ЛК полльзователь уже сделал/скипнул
      * удалить пуши, для которых пользователь в течение заданного количества дней нажимал кнопку "Не интересно" в пуше
   3. Отправить пуши на задания
