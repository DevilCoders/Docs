# HTTP-запросы

Библиотека для http-запросов с обработкой ответов в одном потоке на базе [`event_loop`](/arc/trunk/arcadia/maps/analyzer/libs/event_loop).
**ВАЖНО**: Сам по себе класс `MultiSocket` не потокобезопасный, т.е. делать запросы можно только в рамках событийного потока, для реализации многопоточных запросов нужно использовать в связке очереди — [`Queue`](/arc/trunk/arcadia/maps/analyzer/libs/event_loop/include/queue.h). См., как сделано в [примере](example/main.cpp), в очередь можно уже писать многопоточно.

1. [Пример](#пример)
1. [Описание](#описание)
1. [TODO](#todo)

## Пример

См. [`example`](example/main.cpp).

## Описание

Для выполнения http-запросов есть класс [`MultiSocket`](include/multi_socket.h). Он привязан к событийному потоку — [`EventLoop`](/arc/trunk/arcadia/maps/analyzer/libs/event_loop/include/event_loop.h) — и все ответы обрабатывает в его рамках; выполнять запросы также можно лишь в рамках событийного потока.

Реализован на базе `curl_multi_socket`; на события, связанные с сокетами, подписывается обработчик в рамках переданного потока, и т.о. все ответы обрабатываются в его контексте.

## TODO

- Упростить использование, добавив класс `Requests`, который берёт многопоточность на себя?
