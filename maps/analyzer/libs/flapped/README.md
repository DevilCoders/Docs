# Флапподав
Реализация логики флаподава для произвольного упорядоченного целого типа (bool/int/enum)
С аргументами:
* stable-time - время "стабилизации"
* flapping-time - допустимое время флапа
* start-time - начальное время
* default-value - первое стабильное значение

И с несколькими функциями:
* set - записать новое состояние с указанием текущего времени
* get - отдать актуальное "сглаженное" значение на текущий момент времени (или std::nullopt)
* last - отдать последнее значение
* status - отдать текущее состояние (Stable/Unstable/Flapping/NoData)

Логика флаподава такая:
- Состояние считается Stable, если одно и то же значение держится больше stable-time, это же значение и отдается, также называем значение стабильным
- Состояние считается Flapping, если значения меняются дольше flapping-time, тогда отдается худшее состояние (за время flapping-time)
- Cостояние считается NoData, когда в течение flapped-time нет ни одного значения, тогда отдается std::nullopt
- В остальных случаях считаем состояние Unstable, и возвращаем последнее стабильное состояние

Худшее значение выдаётся согласно компаратору, по умолчанию - больше = хуже. Для инверсии можно передать std::greater

Изначально считаем что состояние стабильно и равно default-value, а начальное время равно start-time

Пример:
```cpp
Flapped<int> F(50, 100, 0, 100); // создаем флапподав со stable-time равным 50, а flapping-time равным 100, 0 - текущее стабильное значение
F.set(100, 50);  // во время 100 пришло значение 50
F.set(150, 50); // теперь занчение 50 стабильное
F.get(150);  // вернет 50
F.status(150); // вернет Stable
F.status(250); // вернет NoData
F.set(250, 100); // во время 250 пришло значение 100
F.set(300, 50); // во время 300 пришло значение 50
F.get(300); // вернет 100
F.status(300); // вернет Flapping
```
