Добавление/удаление заметок на группу графиков
===

Утилита позволяет добавить комментарий сразу на все графики, а также упрощает перенос комментариев с одного графика на другой, удаление и скачивание комментариев.<br>
[Список графиков](conf/feeds.json)

Большинство команд принимают как каналы (повторяющийся аргумент `--channel`), так и теги (повторяющийся аргумент `--tag`), определяющие множество каналов, над которыми будет проведена команда. При указании тега (`--tag`) выберутся все каналы, им помеченные.

Для вывода более подробной информации о каждой команде есть аргумент `--help` (например: `./bin/bin create --help`).<br>
Также можно указать аргумент `--dry`, тогда тулза выведет планируемые действия, но ничего не поменяет на графиках.

# Команды

## Создание (`create`)
Создать комментарий:
```bash
./bin/bin create -d 2019-02-25 -t "test text" --color red --tag online
```

NOTE: Если добавить комментарий за дату, которой нет на графике (например, за будущую), то комментарий добавится. Когда данные за эту дату будут посчитаны, он появится. Т.о. можно ставить комментарии заранее.

## Удаление (`delete`)
```bash
./bin/bin delete -b 2019-02-25 -e 2019-02-26 --channel jams/fixprice
```

Затрагиваемые графики можно ограничить по одному или нескольким тегам, например, только `eta`:
```bash
./bin/bin delete -b 2019-02-25 -e 2019-02-26 --tag eta
```

## Перемещение (`move`)
Переместить все комментарии (в диапазоне дат) с одного канала на другие

```bash
./bin/bin move -b 2019-01-01 -e 2020-12-31 --source jams/fixprice --tag eta
```

## Скачивание (`download`)
Скачать комментарии в виде `json`. С флагом `--notes-only` (`-n`) уберёт лишнюю системную информацию (автор комментария, дата создания/модификации, `id`)
```bash
./bin/bin download -b 2019-01-01 -e 2020-12-31 -t eta -n > notes.json
```

## Загрузка (`upload`)
По сути - создание из `json`'ов напрямую (отдельная строка - отдельный `json`, подходит выход команды `download`).
```bash
cat notes.json | ./bin/bin upload
```

В комбинации с `download` позволяет вручную что-то отредактировать и загрузить комментарии обратно.


# Аутентификация
Для аутентификации нужно положить OAuth-токен по пути `~/.charts/token`, или выставить переменную окружения `ALZ_API_CHARTS_TOKEN`.
Заполучить OAuth-токен можно [тут](https://oauth.yandex-team.ru/authorize?response_type=token&client_id=09cea1cc285845b7b4dc3f409fcacad9)
