# Переводы

Все переводы хранятся в сервисе [Танкер](https://tanker.yandex-team.ru/). В картах используется два проекта:

-   [`loris`](https://tanker.yandex-team.ru/?project=loris) — основные переводы интерфейса.
-   [`ymaps-seourl`](https://tanker.yandex-team.ru/?project=ymaps-seourl) — переводы для SEO.

**Важно**: Нельзя изменять существующие ключи. Чтобы поправить существующий ключ, нужно скопировать его с суффиксом `-v2` и делать изменения в новом ключе.

> При заполнении ключа не забывайте про контекст, он нужен переводчикам для понимания.
>
> Можете добавить туда ссылку на скриншот конкретного места интерфейса, или описать словами его использование.

## Запрос на перевод

При использовании `core/i18n/i18n` тикет на перевод проекта `loris` будет автоматически создан и привязан к вашей задаче, как только вы начнете ревью.

В остальных случаях тикет надо создавать вручную, используя [форму](https://wiki.yandex-team.ru/doc-and-loc/l10n/zakazatperevod/localizationrequest/).

> На перевод принято давать 4 дня, поэтому задавайте дедлайн с учетом этого срока.

Если задача на перевод уже создана, а вы решили поменять исходный текст, то не забывайте уведомить об этом переводчиков.

## Использование

В реакте используйте модуль `core/i18n/i18n`, он вернет `React.ReactNode`:

```tsx
import i18n from 'core/i18n/i18n';

const render = (): React.ReactNode => <div>{i18n('keyset', 'key')}</div>;
```

Если вам нужна строка, то используйте перегрузку этой функции:

```ts
import i18n from 'core/i18n/i18n';

const title: string = i18n(config)('keyset', 'key');
```

## Выражения

### var

**Выражение**: `Привет, {{username}}!`

| Использование                                    | Результат          |
| ------------------------------------------------ | ------------------ |
| `i18n('keyset', 'key', {username: 'император'})` | Привет, император! |

### plural

**Выражение**: `{{count}} {{plural count=count one="день" some="дня" many="дней"}} без факапа.`

| Использование                       | Результат          |
| ----------------------------------- | ------------------ |
| `i18n('keyset', 'key', {count: 1})` | 1 день без факапа. |
| `i18n('keyset', 'key', {count: 3})` | 3 дня без факапа.  |
| `i18n('keyset', 'key', {count: 5})` | 5 дней без факапа. |

### if-else

**Выражение**: `{{#if username}}Привет, {{username}}!{{else}}Я вас не знаю!{{/if}}`

| Использование                                  | Результат        |
| ---------------------------------------------- | ---------------- |
| `i18n('keyset', 'key', {username: 'человек'})` | Привет, человек! |
| `i18n('keyset', 'key')`                        | Я вас не знаю!   |

### switch-case

**Выражение**: `Поездка на {{#switch type}}{{case "bus"}}автобусе{{case "undergroud"}}метро{{default}}транспорте{{/switch}}.`

| Использование                                  | Результат              |
| ---------------------------------------------- | ---------------------- |
| `i18n('keyset', 'key', {type: 'bus'})`         | Поездка на автобусе.   |
| `i18n('keyset', 'key', {type: 'underground'})` | Поездка на метро.      |
| `i18n('keyset', 'key', {type: 'unknown'})`     | Поездка на транспорте. |

## HTML-entity

По умолчанию в переводах все HTML-entity эскейпятся, поэтому тексты можно рендерить без `dangerouslySetInnerHTML`.

> Локально вы будете видеть в тексте HTML. Если хотите проверить их, то запускайте проект с переменной окружения `MODE=production`, чтобы явно проверить их. Однако это замедлит пересборку.

Для переносов строки добавляйте в перевод `<br />`, а в стилях – `white-space: pre-wrap;`. При сборке `<br />` заменится на `\n`.

Остальные символы используйте как есть, то есть вместо `&nbsp;` пишите сразу ` `, а вместо `&mdash;` — `—`.

## Эксперименты

Если эксперимент запускается на `yandex.ru/maps`, то для таких случаев переводы не заводим. Просто используйте русский текст в коде.

> При выкатке на 100% не забывайте завести нужные переводы.
