# yandex-geo-utils

### Установка

```sh
npm install --registry=https://npm.yandex-team.ru/ yandex-geo-utils
```

### Доступные методы

#### pointToString
Возвращает строковое представление точки.

| Параметр                   | Тип        | Описание
| -------------------------- | ---------- | --------------------------------
| `point`                    | `Number[]` | Геокоординаты
| `options`                  | `Object`   | Дополнительные параметры
| `options.reverse=false`    | `Boolean`  | Изменить порядок координат
| `options.fractionDigits=6` | `Number`   | Число цифр после десятичной точки

#### stringToPoint
Разбирает строковое представление точки. Возвращает `Number[]`.

| Параметр                   | Тип        | Описание
| -------------------------- | ---------- | --------------------------------
| `str`                      | `Number[]` | Строковое представление точки
| `options`                  | `Object`   | Дополнительные параметры
| `options.reverse=false`    | `Boolean`  | Изменить порядок координат

#### arePointsEqual
Производит сравнение двух точек с заданной точностью. Возвращает `Boolean`.

| Параметр                   | Тип        | Описание
| -------------------------- | ---------- | --------------------------------
| `point1`                   | `Number[]` | Геокоординаты первой точки
| `point2`                   | `Number[]` | Геокоординаты второй точки
| `options`                  | `Object`   | Дополнительные параметры
| `tolerance=1e-6`           | `Number`   | Допуск при сравнении значений

#### geoToPixels
Возвращает геокоординаты в пиксельном представлении. Возвращает `Number[]`.

| Параметр                   | Тип        | Описание
| -------------------------- | ---------- | --------------------------------
| `point`                    | `Number[]` | Геокоординаты точки
| `zoom`                     | `Number`   | Зум
| `spherical=false`          | `Boolean`  | Расчет для сферической проекции. По умолчанию в эллиптической.

#### pixelsToGeo
Возвращает пиксельные координаты в геокоординаты. Возвращает `Number[]`.

| Параметр                   | Тип        | Описание
| -------------------------- | ---------- | --------------------------------
| `point`                    | `Number[]` | Пиксельные координаты точки
| `zoom`                     | `Number`   | Зум
| `spherical=false`          | `Boolean`  | Расчет для сферической проекции. По умолчанию в эллиптической.

#### bearing
Рассчитывает азимут от точки `point1` к точке `point2`.

http://williams.best.vwh.net/avform.htm#Crs
http://en.wikipedia.org/wiki/Great-circle_navigation#Course_and_distance

| Параметр                   | Тип        | Описание
| -------------------------- | ---------- | --------------------------------
| `point1`                   | `Number[]` | Геокоординаты первой точки
| `point2`                   | `Number[]` | Геокоординаты второй точки

#### getPointProjection
Рассчитывает проекцию точки `point` на прямую `[a, b]`.

| Параметр                   | Тип          | Описание
| -------------------------- | ------------ | --------------------------------
| `point`                    | `Number[]`   | Геокоординаты точки
| `[a, b]`                   | `Number[][]` | Геокоординаты начала и конца линии

#### convertPolarToCartesian
Преобразовывает полярные координаты в декартовые. Возвращает `Number[]`.

| Параметр                   | Тип        | Описание
| -------------------------- | ---------- | --------------------------------
| `center`                   | `Number[]` | Полярные координаты
| `radius`                   | `Number`   |
| `angleInDegrees`           | `Number`   |

#### centerAndSpanToBounds
Преобразовывает центр и размер области в прямоугольник. Возвращает `Number[][]`.

| Параметр                   | Тип        | Описание
| -------------------------- | ---------- | --------------------------------
| `options`                  | `Object`   |
| `options.center`           | `Number[]` | Центр области
| `options.span`             | `Number[]` | Размер области

#### boundsToCenterAndSpan
Преобразовывает прямоугольник в центр и размер области. Возвращает `Object` с полями `center` и `span`.

| Параметр                 | Тип          | Описание
| ------------------------ | ------------ | --------------------------------
| `bbox`                   | `Number[][]` | Прямоугольник

#### perpendicularDistance
Возвращает расстояние от точки до прямой. Возвращает `Number`.

| Параметр                   | Тип        | Описание
| -------------------------- | ---------- | --------------------------------
| `point`                    | `Number[]` | Точка
| `lineStart`                | `Number[]` | Начало прямой
| `lineEnd`                  | `Number[]` | Конец прямой

#### simplifyPolyline
Упрощает линию, используя алгоритм РДП. Возвращает `Number[][]`.
https://en.wikipedia.org/wiki/Ramer–Douglas–Peucker_algorithm

| Параметр                  | Тип          | Описание
| ------------------------- | ------------ | --------------------------------
| `points`                  | `Number[][]` | Координаты должны быть в формате `[longitude, latitude]`.
| `options`                 | `Object`     | Свойства
| `options.eps`             | `Number`     | Максимальное отклонение в пикселях на заданном уровне масштаба, при котором не надо убирать точку.
| `options.zoom=0`          | `Number`     | Уровень масштаба.
| `options.minLength`       | `Number`     | Минимальная длина выходного массива.

#### cycleRestrict
Назначает числовое значение для заданного диапазона. Диапазон значений считается замкнутым в кольце. Если значение находится за пределами одного из концов диапазона, дополнительный счетчик отсчитывается по кругу с другого конца. Возвращает `Number`.

| Параметр                  | Тип          | Описание
| ------------------------- | ------------ | --------------------------------
| `points`                  | `Number[][]` | Координаты должны быть в формате `[longitude, latitude]`.
| `options`                 | `Object`     | Свойства

#### getGeoBounds
Возвращает boundingBox для массива координат. Возвращает `Number[][]`.

| Параметр                  | Тип          | Описание
| ------------------------- | ------------ | --------------------------------
| `points`                  | `Number[][]` | Координаты должны быть в формате `[longitude, latitude]`.

#### getPixelsBounds
Возвращает boundingBox для массива координат в пикселях. Возвращает `Number[][]`.

| Параметр                  | Тип          | Описание
| ------------------------- | ------------ | --------------------------------
| `points`                  | `Number[][]` | Координаты должны быть в формате `[longitude, latitude]`.
| `worldSize`               | `Number`     | Размер мира в пикселях.
| `isCycled`                | `Boolean[][]`| Зацикленность мира по [долготе, широте]. По умолчанию: `[true, false]`.

### Contribution

#### Запуск тестов

```sh
npm install
npm test
```
