# Карта и кастомизация карты

## Создание и удаление карты {#add-and-destroy}

Для создания карты предназначен класс `YMap`.
В конструкторе класса необходимо указать:

- HTML-элемент, в котором будет размещена карта;
- координаты центра карты;
- коэффициент масштабирования.

```html
<head>
  <script>
    ymaps3.ready.then(() => {
      // HTML-элемент.
      const moscow_map = new ymaps3.YMap(document.getElementById('#first_map'), {
        location: {
          center: [37.64, 55.76],
          zoom: 10
        }
      });
    });
  </script>
</head>
<body>
  <p>Карта Москвы</p>
  <div id="first_map" style="width:400px; height:300px"></div>
</body>
```

Карта может быть размещена в любом [блочном HTML-элементе](https://www.w3.org/TR/css-display-3/#outer-role) и полностью заполняет занимаемую им прямоугольную область.
Вычисление размеров области производится при помощи [`ResizeObserver`](https://developer.mozilla.org/en-US/docs/Web/API/ResizeObserver).

Для удаления карты из DOM используется метод `destroy()`.

```javascript
// Удаление карты.
moscow_map.destroy();
```

HTML-элемент, который был указан при создании карты, из DOM-дерева не удаляется.

## Слои {#layers}

Чтобы после создания карты на ней что-то отображалось, необходимо добавить слои.

Можно добавить преднастроенные слои. Через них создаются источник данных и слой для отображения схемы с тайлами Яндекса:

```javascript
const layer = new YMapDefaultSchemeLayer();
moscow_map.addChild(layer);
```

[Подробнее про слои](general.md#layers)

## Параметры карты {#map-parms}

Основными параметрами карты являются:

- DOM-элемент, в котором размещается карта;
- участок отображаемой местности;
- режим отображения карты: растровый или векторный.

При создании карты необходимо обязательно задать область картографирования путем указания центра и уровня масштабирования.
В дальнейшем область картографирования можно изменить с помощью метода `setLocation()`.

```javascript
myMap.setLocation({
  center: [37.6, 55.7],
  zoom: 5
});

myMap.setLocation({
  bounds: [
    [37.6, 55.7],
    [37.16, 55.17]
  ]
});
```

Режим карты может быть задан как в конструкторе, так и с помощью метода `setMode()`.

```javascript
// Задание растрового режима в конструкторе.
const map = new YMap(element, {
  // ... остальные опции.
  mode: 'raster'
});

// Задание векторного режима с помощью метода setMode().
map.setMode('vector');
```

## Поведения {#behaviors}

Карта обладает набором поведений, определяющих реакцию карты на действия, производимые пользователем.
Например, при перемещении курсора мыши в области показа при нажатой левой кнопке карта сдвигается вслед за курсором.

При инициализации карты ей присваивается набор поведений, который в дальнейшем можно изменить с помощью метода `setBehaviors()`.
Доступ к поведениям карты предоставляется через поле `behaviors`.

```javascript
const map = new YMap(element, {
  // ... остальные опции
  behaviors: ['drag', 'pinchZoom', 'mouseTilt']
});
map.setBehaviors(['drag', 'pinchZoom']);
```

[Подробнее про элементы управления](controls/controls_index-page.md)

## Кастомизация карты {#map-customization}

Помимо основных настроек карты, вы также можете изменить внешний вид большинства геообъектов на ней.
Например, перекрасить дорогу или дом в другой цвет. Для этого в карту должен быть подключен [слой](general.md#layers).
Настройки кастомизации при этом передаются в поле `customization`.

Пример использования:

```javascript
// Изменение цвета воды на карте в зеленый.
const map = new YMap(element, {
  location: {center: [55.7, 37.6], zoom: 5},
  mode: 'vector'
});

const layer = new YMapDefaultSchemeLayer({
  customization: [
    {
      types: 'polygon',
      elements: 'geometry',
      tags: {
        all: ['water']
      },
      stylers: [
        {
          color: '#00AA00'
        }
      ]
    }
  ]
});
map.addChild(layer);
```
