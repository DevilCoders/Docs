# Подключение API

Для использования API Яндекс.Карт необходимо, чтобы компоненты API были загружены вместе с кодом страницы
как обычный внешний JavaScript-файл. Наиболее распространенным способом подключения внешних скриптов является
использование элемента `script` в заголовке HTML-документа. Например:

```html
<head>
  <script src="https://api-maps.yandex.ru/3.0-beta/?apikey=<ваш API-ключ>&lang=ru_RU" type="text/javascript"></script>
</head>
```

{% note alert "Внимание." %}

API поддерживает только браузеры IE11 и выше.

{% endnote %}

## Параметры загрузки API {#parms}

Для версии API ссылка для загрузки имеет вид:

```plain
https://api-maps.yandex.ru/3.0-beta/?apikey=<ваш API-ключ>&lang=<идентификатор языка>&<дополнительные параметры>
```

В таблице ниже описаны параметры, которые можно указать при загрузке API.

| Параметр    | Описание                                                                                                                                                                                                                                                                                                                                                                                    |
| ----------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `apikey` \* | **Обязательный параметр**. <br/> API-ключ. Получить ключ можно в Кабинете разработчика.                                                                                                                                                                                                                                                                                                     |
| `lang` \*   | **Обязательный параметр**. <br/> Локаль. Задается в виде `lang=language_region`, где: <ul><li>`language` — двузначный код языка. Указывается в формате [ISO 639-1](https://ru.wikipedia.org/wiki/ISO_639-1).</li> <li>`region` — двузначный код страны. Указывается в формате [ISO 3166-1](https://ru.wikipedia.org/wiki/ISO_3166-1).</li><br/>[Подробнее про локализацию](localization.md) |

\* Обязательный параметр.

## Готовность API {#api-readiness}

Компоненты API Яндекс.Карт всегда загружаются асинхронно. Это происходит даже в том случае,
если для подключения API используется элемент `<script>` и никаких специальных действий для асинхронной загрузки не производилось.

Чтобы быть уверенным, что компоненты загружены и готовы к использованию, необходимо использовать промис `ready`.

### Промис ready {#ready}

Пример использования:

```html
<script src="https://api-maps.yandex.ru/3.0-beta/?apikey=<ваш API-ключ>&load=package.full&lang=ru_RU"></script>
<script type="text/javascript">
  ymaps3.ready.then(() => {
    const myMap = new ymaps3.YMap(document.getElementById('YMapsID'), {
      location: {
        center: [37.64, 55.76],
        zoom: 10
      }
    });
  });
</script>
<div id="YMapsID" style="width: 450px; height: 350px;"></div>
```

Возникновение событий загрузки DOM-дерева или документа не сигнализирует об окончании загрузки API.
То есть использование обработчиков событий типа `document.ready`, `window.onload`, `jQuery.ready` и др.
не позволяет определить, готовы ли компоненты для использования.

Для инициализации карты необходимо, чтобы в DOM-дереве находился элемент, в котором она размещается.

Промис `ready` исполняет включенный в нее код после того, как будут загружены компоненты API и DOM-дерево документа.

{% note info "Примечание." %}

В предыдущих версиях JS API были дополнительные способы запуска по мере готовности API. В 3.0 мы намеренно их убрали.

{% endnote %}
