[GEOQ-646](https://st.yandex-team.ru/GEOQ-646) — Сравнение ранжирований
===

Хотим сравнить [ранжирование Справочника на актуализацию]((https://yt.yandex-team.ru/hahn/navigation?path=//home/sprav/assay/common/popularity_weight_snapshot)) с нашим [ранжированием в Static POI]((https://yt.yandex-team.ru/hahn/navigation?path=//home/maps/poi/static_poi/stable/latest)). Для этого смотрим на количество "инвертированных пар в сортировке". Если чуть более подробно:

> У нас есть два ранжирования, сортируем по одному из них и смотрим сколько у нас получается неправильно сортированных пар по второму. Чем меньше доля таких пар, тем ближе два ранжирования.

Результаты с разбивкой по крупным городам (800К+) получились следующие:

[ID города из Геобазы](https://geoadmin.yandex-team.ru) | Город | Количество перевернутых пар | Доля перевернутых пар | Количество пар | Количество поев
--- | --- | --- | --- | --- | ---
66 | Omsk | 151570386 | 0.037832219908918475 | 4006383616 | 63296
65 | Novosibirsk | 549416198 | 0.05810832495998355 | 9455034169 | 97237
56 | Chelyabinsk | 194888002 | 0.05982016532595744 | 3257898084 | 57078
62 | Krasnoyarsk | 175708399 | 0.06102721614131928 | 2879180964 | 53658
172 | Ufa | 160101847 | 0.07042746653303075 | 2273287041 | 47679
50 | Perm | 198900317 | 0.07658779960660972 | 2597023521 | 50961
38 | Volgograd | 120150505 | 0.08401840292203071 | 1430049856 | 37816
109773 | Krasnoye Selo | 313270 | 0.08587209780433651 | 3648100 | 1910
194 | Saratov | 99343505 | 0.0891272897669702 | 1114624996 | 33386
10875 | Lomonosov | 283331 | 0.0936903649027271 | 3024121 | 1739
51 | Samara | 317486969 | 0.09511433950584575 | 3337950625 | 57775
43 | Kazan | 388135130 | 0.09743871353119599 | 3983376996 | 63114
35 | Krasnodar | 454581435 | 0.09759023950408566 | 4658062500 | 68250
26081 | Kolpino | 2084425 | 0.09808089553502948 | 21252100 | 4610
54 | Yekaterinburg | 687922171 | 0.09855947462659043 | 6979767025 | 83545
47 | Nizhny Novgorod | 491155727 | 0.10299207240856773 | 4768869249 | 69057
193 | Voronezh | 245255108 | 0.10397229290598776 | 2358850624 | 48568
39 | Rostov-na-Donu | 334116791 | 0.1073459289841322 | 3112524100 | 55790
114765 | Pavlovsk | 58995 | 0.10744316412332607 | 549081 | 741
98546 | Peterhof | 1064341 | 0.11263492282535031 | 9449476 | 3074
21776 | Kronstadt | 372286 | 0.11439410327382854 | 3254416 | 1804
37180 | Zelenogorsk | 60734 | 0.11913392808103633 | 509796 | 714
102557 | Sestroretsk | 434442 | 0.11983892821834616 | 3625216 | 1904
216 | Zelenograd | 9226494 | 0.12128428687264244 | 76073284 | 8722
20674 | Troitsk | 670011 | 0.12330974107035883 | 5433561 | 2331
10884 | Pushkin | 2317766 | 0.12385015589168398 | 18714276 | 4326
21624 | Zcherbinka | 541948 | 0.1313825754958653 | 4124961 | 2031
2 | Saint Petersburg | 8787115715 | 0.136897098384138 | 64187742609 | 253353
213 | Moscow | 44421613450 | 0.14193884656848935 | 312963043761 | 559431
103817 | Moskovsky | 746350 | 0.14742716049382715 | 5062500 | 2250

То есть, грубо говоря, оба ранжирования очень похожи.
