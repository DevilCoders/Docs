# Пересчет расчетов на Nile за набор дат (из командной строки)
## Параметры запуска
Параметры запуска почти такие же, как у обычных nile-скриптов, но вместо **dates** здесь две опции - **start-date** и **end-date**. Дополнительные опции пробрасываются как есть. Команда создает лог-файл с результатами запуска за каждую дату, и позволяет перезапустить за упавшие даты.

Список всех доступных опций и аргументов можно посмотреть с помощью `$ ./recalc -h` (перед запуском надо собрать её `ya make`).

## Пример использования
Например, мы хотим пересчитать расчет maps/analytics/logs/cooked-appmetrica-log за даты 2020-03-01..2020-06-28. Команда будет выглядеть так:
```
./recalc ~/arc/arcadia/maps/analytics/logs/cooked-appmetrica-log/cooked-appmetrica-log --proxy hahn --start-date 2020-03-01 --end-date 2020-06-28 --scale daily
```

Если пересчет делается за много дат, то рекомендуем использовать screen- или tmux-сессию, чтобы не зависеть от ssh.

## Источник и документация
Утилита была взята из [statbox/python-statinfra](https://a.yandex-team.ru/arc/trunk/arcadia/statbox/python-statinfra/bin/auto_exec.py). Документация на неё есть на [wiki](https://wiki.yandex-team.ru/users/aslonovskiy/autoexec/).

Поскольку пакет python-statinfra может быть не установлен на виртуалке, то сюда был добавлен ya.make, и запуск производится не на системном, а на аркадийном питоне.
