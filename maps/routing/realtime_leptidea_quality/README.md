Realtime Leptidea Quality
=========================

A tool for comparing the local copy of leptidea with realtime user routes.

Description
-----------

This tool uses yt-tables generated by [data_preparation tool for matrix_router](../matrix_router/data_preparation/bin/prepare_data).
In particular, one needs a directory containing tables with slices (storing the correspondence between edges persistent indices and travel times within a given time interval) and intermediate table with filtered routes.

This tool uses [leptidea](../../libs/leptidea) for building alternative routes from source to target edges of user route and calculates travel times for these alternatives as if user was driving them in realtime.

How to run
----------

This tool requires one to have the following datasets locally available:
* `road_graph.fb`
* `edges_persistent_index.fb`
* `l6a_topology.fb.7`
* `l6a_data.fb.7`
* `light_calendar.fb`
* `statistical_data.fb`

1. At first make sure you've rebuilt `realtime_leptidea_quality` if you wish to test the latest changes in local copy of `leptidea`.

2. Generate data and routes with [data preparation tool for matrix router](../matrix_router/data_preparation).

3. Run [prepare_data](./bin/prepare_data) to get tables in required format.

4. Run [time_estimator](./bin/time_estimator).

There is an `example.sh` script with the whole pipeline of getting the resulting time estimations.
