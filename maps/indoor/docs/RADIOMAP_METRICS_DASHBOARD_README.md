[Ссылка на дашборд метрик Indoor-локализации](https://datalens.yandex-team.ru/5txv8mbnkdqoy-kachestvo-radiokart)

# Содержание

1.  [Вкладка "Все процентили"](#link_all_percentiles)
2.  [Вкладки "По device\_type и provider" и "Android-old"](#link_device_type_provider_and_old_android)
    1.  [Вкладка "По device\_type и provider"](#link_device_type_provider)
    2.  [Вкладка "Android-old"](#link_android_old)
3.  [Вкладка "Карта"](#link_map)
4.  [Вкладка "Покрытие по этажам"](#link_levels_coverage)

Основная метрика локализации в индоре - процентили ошибки позиционирования в метрах.

Ошибка рассчитывается по каждому новому обходу уровня индора как расстояние между фактическим положением совершающего обход и результатом локализации по данным, которые получены с его устройства.
Для агрегации данных по обходу считаются значения 50-го, 75-го, 90-го и 95-го процентилей, показывающие на какой доле обхода локализации была точнее этого значения.
Процентили считаются для всех обходов для всех возможных пар DeviceType - LocationProvider.


<a id="link_all_percentiles"></a>

# Вкладка "Все процентили"

На графике отображаются все рассчитываемые значения процентилей ошибки позиционирования в индоре.

Графики отображаются для выбранных

-   индора (селектор indoor\_id)
-   уровня в индоре (level)
-   пары DeviceType - LocationProvider (device\_type and provider).


<a id="link_device_type_provider_and_old_android"></a>

# Вкладки "По device\_type и provider" и "Android-old"

На вкладках отображаются значения 75-ых процентилей ошибки позиционирования для выбранных: индора (селектор indoor\_id) и уровня в индоре (level) для всех актуальных пар DeviceType - LocationProvider.

Возможные значения DeviceType:

-   iOS - ОС, не предоставляющая на данный момент LBS-локализации;
-   Android - актуальная версия Андроида, с троттлингом запросов об окружающий wifi-сетях;
-   Android-old - версия андроида, БЕЗ троттлинга запросов об окружающий wifi-сетях.


<a id="link_device_type_provider"></a>

## Вкладка "По device\_type и provider"

На этой вкладке отображаются 75-е процентили для актуального Андроида и iOS.

Для Android используются:

-   наш Indoor LocationProvider;
-   Google'овый LBS (location based service);
-   и Fused-режим, примешивающий к нашему Indoor-решению решение LBS в разных пропорциях:
    -   fused01 - (Indoor 9 : 1 LBS)
    -   fused05 - (Indoor 1 : 1 LBS)
    -   fused09 - (Indoor 1 : 9 LBS)

Под "актуальным Андроидом" понимается Андроид, в котором есть троттлинг запросов данных об окружающий источниках wifi. Для версии 9 выключить этот троттлинг было вообще невозможно, в версиях 10+ он включён, но можно отключить в девелоперских настройках.

Для iOS единственный доступный на данный момент LocationProvider - наш Indoor.

<a id="link_android_old"></a>

## Вкладка "Android-old"

Для Android-old как и для обычного Android используются:

-   наш Indoor LocationProvider;
-   Google'овый LBS (location based service);
-   и Fused-режим, примешивающий к нашему Indoor-решению решение LBS в разных пропорциях:
    -   fused01 - (Indoor 9 : 1 LBS)
    -   fused05 - (Indoor 1 : 1 LBS)
    -   fused09 - (Indoor 1 : 9 LBS)


<a id="link_map"></a>

# Вкладка "Карта"

На карте указывается значение 75-го процентиля ошибки позиционирования для каждого индора в целом, без разбивки по уровням.


<a id="link_levels_coverage"></a>

# Вкладка "Покрытие по этажам"

На вкладке отображены 2 метрики, характеризующие позиционирование на разных уровнях индоров с разными параметрами DeviceType & LocationProvider.

1.  "Покрытие определения позиции" показывает, на какой части площади уровня индора решение нашего Indoor-LocationProvider вообще сходится.
2.  "Покрытие определение этажа" показывает, какую долю времени обхода решение Indoor-provider'а возвращало верный этаж индора.
