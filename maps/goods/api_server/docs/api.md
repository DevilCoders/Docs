# API

Для авторизации пользователя можно использовать один из способов: OAuth, Tvm User Ticket, сессионная кука.

Формат ошибок - HTTP код + JSON с детализацей:
```json
{
    "code": "PERMISSION_DENIED", // пример строкового идентификатора ошибки
    "message": "Невалидный токен", // пример описания ошибки
    "uid": 2501780996 // пример уникального идентификатора ошибки
}
```
**Общие коды ответов:**
 - 401 - ошибка авторизации
 - 403 - отсутствие доступа к организации (permalink'у)
 - 422 - другие виды ошибок. Подробности в описании ошибки.

**Общие коды ошибок:**

См. ``ERROR_ENUM_REPRESENTATION`` в https://a.yandex-team.ru/arc/trunk/arcadia/maps/goods/lib/error_reporter/error_reporter.cpp#L18

## POST /goods/1.x/photos/url
Загрузить фото товара по URL на сервер и получить его ID, который используется для создания/редактирования товара.

**Запрос**:
```json
{
    "url": "https://somewhere/image.png" // ссылка для скачивания фото
}
```

**Ответ**
```json
{
    "id": "12389", // внутренний ID для передачи в API сервера
    "template_url": "https://avatars.mdst.yandex.net/get-sprav-products/12346/2a00000177bf43c13a169643f371e206d7b3/%s",
    "sizes": [
        "small",
        "medium"
    ]
}
```

## POST /goods/1.x/photos/file
Загрузить фото товара файлом на сервер и получить его ID, который используется для создания/редактирования товара.

**Запрос**:
```
POST /goods/1.x/photos/file HTTP/1.1
Content-Type: multipart/form-data; boundary=-------------573cf973d5228
...
---------------573cf973d5228
Content-Disposition: form-data; name="file"; filename="file.png"
Content-Type: image/png

<binary content>
---------------573cf973d5228--
```

**Ответ**
```json
{
    "id": "12389", // внутренний ID для передачи в API сервера
    "template_url": "https://avatars.mdst.yandex.net/get-sprav-products/12346/2a00000177bf43c13a169643f371e206d7b3/%s",
    "sizes": [
        "small",
        "medium"
    ]
}
```

## GET /goods/1.x/config
Получить глобальный json-конфиг сервера. Поля конфига подробно описаны ниже.

### Units
Cписок всех возможных единиц измерения, распределенный по типам. Каждый тип единиц измерения представлен своим ID,
человекочитаемым названием и списком соответствующих ему единиц измерения. Каждая единица измерения представлена
своим ID и человекочитаемым названием. Существует специальная единица измерения "Другое", которая устанавливается
в некоторых случаях для цен с нестандартным форматом. Цена с такой единицей измерения может быть отображена, но не
может быть задана через API.

**Ответ**
```json
{
    "units": [
        {
            "id": "mass",
            "name": "Масса",
            "units": [
                {
                    "id": "Gram",
                    "name": "г"
                },
                {
                    "id": "Kilogram",
                    "name": "кг"
                },
                {
                    "id": "Ton",
                    "name": "т"
                }
            ]
        },
        {
            "id": "volume",
            "name": "Объем",
            "units": [
                {
                    "id": "CubicCentimeter",
                    "name": "см³"
                },
                {
                    "id": "CubicMeter",
                    "name": "м³"
                }
            ]
        },
        {
            "id": "liquid_volume",
            "name": "Объем жидкости",
            "units": [
                {
                    "id": "Milliliter",
                    "name": "мл"
                },
                {
                    "id": "Liter",
                    "name": "л"
                }
            ]
        },
        {
            "id": "length",
            "name": "Длина",
            "units": [
                {
                    "id": "Millimeter",
                    "name": "мм"
                },
                {
                    "id": "Centimeter",
                    "name": "см"
                },
                {
                    "id": "Meter",
                    "name": "м"
                }
            ]
        },
        {
            "id": "square",
            "name": "Площадь",
            "units": [
                {
                    "id": "SquareCentimeter",
                    "name": "см²"
                },
                {
                    "id": "SquareMeter",
                    "name": "м²"
                }
            ]
        },
        {
            "id": "time",
            "name": "Время",
            "units": [
                {
                    "id": "Minute",
                    "name": "мин"
                },
                {
                    "id": "Hour",
                    "name": "ч"
                },
                {
                    "id": "Lesson",
                    "name": "ак.час"
                },
                {
                    "id": "Day",
                    "name": "д"
                }
            ]
        },
        {
            "id": "unit",
            "name": "Единицы",
            "units": [
                {
                    "id": "Unit",
                    "name": "шт."
                }
            ]
        },
        {
            "id": "other",
            "name": "Другое",
            "units": [
                {
                    "id": "Other",
                    "name": "Другое"
                }
            ]
        }
    ]
}
```


## POST /goods/1.x/company/{company-permalink}/price
Добавление нового товара.

**Запрос**:
```json
{
    "external_info": {
        "item_id": "qe123ad" // внешний иденитификатор в системе партнера, неизменяемый
    },
    "title": "Мужская стрижка",
    "description": "Стрижем ножницами и машинкой",
    "group": { // опционально
        "id": "3454570", // опциональный идентификатор категории товара, при отсутствии заводится новая
        "name": "Новая категория" // применяется только при отсутствии id, создается новая категория
    },
    "price": {
        "type": "ExactNumber", // пока поддерживаем один тип цены
        "currency": "RUB", // пока поддерживаем одну валюту
        "value": 123.20 // значение поля зависит от типа в поле type
    },
    "volume": {
        "unit": "Kilogram", // единицы измерения
        "value": 1.5 // значение поля зависит от типа в поле type
    },
    "photos": [ // если указано, то полностью перезаписывает список
        "123", // ID'шники фотографий
        "321"
    ],
    "is_popular": true, // популярный товар
    "availability": {
        "status": "OutOfStock" // Available - товар доступен, OutOfStock - закончился
    },
    "is_hidden": false, // не отображать
    "market_url": "https://mysite.com/offers/123" // ссылка на товар на сайте пользователя
}
```

**Коды ответов:**
 - 200 - успешно
 - 400 - невалидный JSON. Подробности в описании ошибки.
 - 422 - какой либо из указанных объектов не найден (товар, категория, permalink). Подробности в описании ошибки.

## POST /goods/1.x/company/{company-permalink}/price/{price-id}

Редактирование филиального товара путем его полной перезаписи.
Используется для товаров, у которых `"is_chain": false`

**Запрос**:
Значение полей такое же как в `POST /goods/1.x/company/{company-permalink}/price`.
```json
{
    "title": "Мужская стрижка",
    "description": "Стрижем ножницами и машинкой",
    "group": {
        "id": "3454570", // либо ID существующей группы (приоритетное поле)
        "name": "Новая категория" // либо имя для создания новой группы
    },
    "price": {
        "type": "ExactNumber",
        "currency": "RUB",
        "value": 123.20
    },
    "volume": {
        "unit": "Kilogram",
        "value": 1.5
    },
    "photos": [
        "123",
        "321"
    ],
    "is_popular": true,
    "availability": {
        "status": "OutOfStock"
    },
    "is_hidden": false,
    "market_url": "https://mysite.com/offers/123" // ссылка на товар на сайте пользователя
}
```

**Коды ответов:**
 - 200 - успешно
 - 400 - невалидный JSON. Подробности в описании ошибки.
 - 422 - какой либо из указанных объектов не найден (товар, категория, permalink). Подробности в описании ошибки.

## PATCH /goods/1.x/company/{company-permalink}/chain/pricelist

Частичное редактирование сетевого товара внутри филиала.
Используется для товаров, получаемых через метод `GET /goods/1.x/company/{company-permalink}/chain/pricelist`.
Поля, доступные для редактирования, показаны в примере запроса. (Все поля опциональны. Если поле не указано, используются настройки сети.)

**Запрос:**
```json
[
    {
        "id": "535344", // пермалинк товара
        "is_hidden": true, // скрыть товар в этом филиале
        "is_popular": false, // переопределить популярность в этом филиале
        "price": { // переопределить цену в этом филиале
            "type": "ExactNumber", // пока поддерживаем один тип цены
            "currency": "RUB", // пока поддерживаем одну валюту
            "value": 123.20 // значение поля зависит от типа в поле type
        },
        "availability": { // переопределить доступность в этом филиале
            "status": "OutOfStock"
        }
    },
    ...
]
```

**Коды ответов:**
 - 200 - успешно.
 - 400 - невалидный JSON.
 - 422 - товар с заданым ID или permalink не найден. Подробности в описании ошибки.

----
## GET /goods/1.x/company/{company-permalink}/pricelist
Получение списка товаров организации. По умолчанию возвращаются товары из личного кабинета.
Товары отсортированы по ID от новых к старым (DESC).

**Параметры**:
| **Название** | **тип** | **описание** |
| ------------ | ------- | ------------ |
| is_popular | bool | показать только популярные |
| availability_status | string | показать только товары в выбранном статусе: Available или OutOfStock |
| is_hidden | bool | показать только скрытые |
| with_photos | bool | показать только товары с фотографиями |
| min_price | float | показать товары с ценой не меньше заданной (товары с типом цены, отличным от ExactNumber, исключаются из выборки) |
| max_price | float | показать товары с ценой не больше заданной (товары с типом цены, отличным от ExactNumber, исключаются из выборки) |
| is_chain | bool | показать только сетевые/только филиальные |
| query | string | текстовый поиск по названиям/ценам товаров |
| limit | uint | вернуть не более заданного числа товаров (не более 10000) |
| offset | uint | вернуть товары, начиная с заданного смещения |
| offset_by_item_id | string | пермалинк товара, страницу с которым нужно показать. Размер страницы выбирается исходя из значения `limit`. **Отключает остальные фильтры, кроме: `limit`, `is_chain`, `source`.** |
| group_name | string | названия категорий, товары которых нужно вернуть в ответе. Например: `?group_name=Манипуляторы&group_name=Камеры` (urlEncoded). Не более 100 значений. |
| group_id | uint | идентификаторы категорий, товары которых нужно вернуть в ответе. Например: `?group_id=1&group_id=2`. [OBSOLETE], используйте group_name. Не более 100 значений. |
| exclude_groups | bool | вернуть товары всех категорий, кроме тех, что перечислены в group_name (ВНИМАНИЕ: меняет поведение фильтра group_name!) |
| source | string | показывать товары выбранного фида (см. документацию на API фидов) |
| get_used_feed | bool | если не передан параметр source, вернуть товары из используемого фида, а не из личного кабинета |
| sync_id | uint | показать товары из указанной синхронизации (о синхронизациях см. `synchronizations_api.md`). В случае указания параметра `sync_id` параметр `source` необходимо опустить или указать значение `SYNC` |
| declined_only | bool | вернуть только товары, не прошедшие модерацию |

**Ответ**:
```json
{
    "feed_settings": {
        // текущий реально используемый фид
        // может отличаться от выбранного пользователем (selected_feed), если в выбранном нет товаров
        // если в выбранном есть товары, то совпадает с selected_feed
        // отсутствует, если disable_feeds=true
        "used_feed": "YANDEX_EDA",
        "used_feed_name": "Яндекс.Еда",
        "disable_feeds": false, // все источники выключены
        // выбранный пользователем фид
        // опциональное поле: может отсутствовать, если настройки не заданы
        "selected_feed": "YDO",
        "selected_feed_name": "Яндекс.Услуги"
    },
    "source": {
        "id": "YANDEX_EDA",
        "name": "Яндекс.Еда",
        "items_count": 0,
        // опциональное поле, присутствует если есть/была информация из источника
        "last_update_time": "1970-01-01T00:00:00.000Z",
        // опциональное поле, есть не для всех источников
        "feed_cabinet_url": "https://vendor.eda.yandex/places/12345"
    },
    "pager": {
        "offset": 0,
        "limit": 0,
        "total": 0
    },
    "popular_goods": {
        "max_popular_count": 10, // максимально допустимое число популярных товаров для организации
        "popular_count": 3 // текущее число популярных товаров в организации
    },
    "moderation_info": { // информация о модерации
        "declined_count": 0, // число товаров, не прошедших модерацию
    },
    "items": [
        {
            "id": "535344", // пермалинк товара
            "external_info": {
                "item_id": "qe123ad", // некий внешний иденитификатор в системе партнера
                "source": "YANDEX_EDA" // источник данных
            },
            "group": {
                "id": "3454570", // идентификатор категории товара
                "name": "Стрижки"
            },
            "title": "Мужская стрижка",
            "description": "Стрижем ножницами и машинкой",
            "price": {
                "type": "ExactNumber", // Одно из значений: ExactNumber, Other
                "value": 123.20, // Число в случае ExactNumber и строка, если type=Other
                "currency": "RUB"
            },
            "volume": {
                "unit": "Kilogram", // единицы измерения
                "value": 1.5 // тип value зависит от значения поля unit. Строка для типа Other и число для всех остальных
            },
            "photos": [
                {
                    "id": "123", // внутренний ID фотографии
                    // Поля template_url и size могут отсутствовать, если еще не успели переложить фото в аватарницу.
                    // В таком случае нужно использовать source_url.
                    "template_url": "https://avatars.mdst.yandex.net/get-sprav-products/12346/2a00000177bf43c13a169643f371e206d7b3/%s",
                    "sizes": [
                        "small",
                        "medium",
                        "orig"
                    ],
                    // оригинальная ссылка на изображение. Указывается, если фото было загруженно через URL.
                    "source_url": "https://some.site.ru/image.png"
                },
            ],
            "is_popular": true,
            "availability": {
                "status": "OutOfStock" // Available - товар доступен, OutOfStock - закончился
            },
            "is_hidden": false,
            "moderation": {
                "status": "OnModeration", // "OnModeration" - отправили на модерацию, "Declined" - отклонили, "ReadyForPublishing" и "Published" - товар прошел модерацию
                "message": "", // текстовое описание проблемы в случае, если товар не прошел модерацию
                "update_time": "1970-01-01T00:00:00.000Z"
            },
            "is_chain": false,  // унаследован ли item от сети или нет (локальный филиальный item)
            "overwrites_count": 1  // поле только для сетевых товаров, показывает, сколько есть измененных товаров в филиалах
            "market_url": "https://mysite.com/offers/123" // ссылка на товар на сайте пользователя
        },
        ...
    ]
}
```

**Коды ответов:**
 - 200 - успешно
 - 400 - невалидный формат параметров. Подробности в описании ошибки.
 - 422 - указанные категории или permalink не найдены. Подробности в описании ошибки.

----
## GET /goods/1.x/company/{company-permalink}/prices
Получение товаров организации по их id.

**Параметры**:
| **Название** | **тип** | **описание** |
| ------------ | ------- | ------------ |
| id | uint | идентификаторы товаров, которые нужно вернуть в ответе. Например: `?id=1&id=2` |
| sync_id | uint | показать товары из указанной синхронизации (о синхронизациях см. `synchronizations_api.md`). |

**Ответ**:

Объект items, аналогичный возвращаемому методом `GET /goods/1.x/company/{company-permalink}/pricelist`

**Коды ответов:**
 - 200 - успешно
 - 204 - передан пустой список параметров
 - 422 - невалидный формат параметров или указанные товары не найдены. Подробности в описании ошибки.

----
## GET /goods/1.x/company/{company-permalink}/pricelist/count

Получение количества товаров организации

**Ответ**:
```json
{
    "total": 42
}
```

**Коды ответов:**
 - 200 - успешно
 - 422 - указанный permalink не найден. Подробности в описании ошибки.

----
## DELETE /goods/1.x/company/{company-permalink}/price
Удаление товаров организации по списку ID.

**Параметры**:
| **Название** | **тип** | **описание** |
| ------------ | ------- | ------------ |
| id | uint | удалить выбранные товары по их ID. Например: `?id=1&id=2` |

**Коды ответов:**
 - 200 - успешно
 - 400 - невалидный формат параметров. Подробности в описании ошибки.
 - 422 - указанные товары или permalink не найдены. Подробности в описании ошибки.

----
## DELETE /goods/1.x/company/{company-permalink}/pricelist
Удаление всего списка товаров организации.

**Коды ответов:**
 - 200 - успешно
 - 204 - список товаров пуст
 - 422 - permalink не найден

----
## [OBSOLETE] GET /goods/1.x/company/{company-permalink}/groups
Получение списка групп данной организации

**Параметры**:
| **Название** | **тип** | **описание** |
| ------------ | ------- | ------------ |
| query | string | поисковый запрос |
| limit | uint | ограничение на кол-во групп в ответе (не более 10000) |
| offset | uint | вернуть группы, начиная с заданного смещения |
| source | string | показывать группы выбранного фида (см. документацию на API фидов) |
| get_used_feed | bool | если не передан параметр source, вернуть группы из используемого фида, а не из личного кабинета |
| with_photos | bool | показать только те группы, у товаров которых есть фотографии |

**Ответ**:
```json
[
    {
        "id": "28423",
        "name": "Стрижки",
        "moderation": {
            "status": "Queued", // ["Queued", "Approved", "Declined"]
            "message": "",
            "update_time": "1970-01-01T00:00:00.000+0000"
        }
    },
    ...
]
```

----
## GET /goods/1.1/company/{company-permalink}/groups
Получение списка групп данной организации

**Параметры**:
| **Название** | **тип** | **описание** |
| ------------ | ------- | ------------ |
| query | string | поисковый запрос |
| limit | uint | ограничение на кол-во категорий в ответе (default=100, не более 10000) |
| offset | uint | вернуть группы, начиная с заданного смещения |
| source | string | показывать группы выбранного фида (см. документацию на API фидов) |
| get_used_feed | bool | если не передан параметр source, вернуть группы из используемого фида, а не из личного кабинета |
| with_photos | bool | показать только те группы, у товаров которых есть фотографии |
| sync_id | uint | показать товары из указанной синхронизации (о синхронизациях см. `synchronizations_api.md`). В случае указания параметра `sync_id` параметр `source` необходимо опустить или указать значение `SYNC`, а `get_used_feed` будет проигнорирован |

**Ответ**:
```json
{
    "pager": {
        "limit": 100,
        "offset": 0,
        "total": 10,
    },
    "groups": [
        {
            "id": "28423",
            "name": "Стрижки",
            "moderation": {
                "status": "Queued", // ["Queued", "Approved", "Declined"]
                "message": "",
                "update_time": "1970-01-01T00:00:00.000+0000"
            }
        },
        ...
    ]
}
```

***Примечание:*** *значение в поле ответа `total` равно не реальному количеству групп, а `min(real_total, offset + 10 * limit)`.*
*Это сделано в целях оптимизации запросов к БД.*

----
## [OBSOLETE] GET /goods/1.x/groups/suggest
Поиск по группам. Саджест для пользовательского ввода.

**Параметры**:
| **Название** | **тип** | **описание** |
| ------------ | ------- | ------------ |
| query | string | поисковый запрос |
| limit | uint | ограничение на кол-во категорий в ответе (default=20, не более 10000) |
| offset | uint | вернуть группы, начиная с заданного смещения |

**Ответ**:
Такой же как в `GET /goods/1.x/company/{company-permalink}/groups`

----
## GET /goods/1.1/groups/suggest
Поиск по группам. Саджест для пользовательского ввода.

**Параметры**:
| **Название** | **тип** | **описание** |
| ------------ | ------- | ------------ |
| query | string | поисковый запрос |
| limit | uint | ограничение на кол-во категорий в ответе (default=20, не более 10000) |
| offset | uint | вернуть группы, начиная с заданного смещения |

**Ответ**:
Такой же как в `GET /goods/1.1/company/{company-permalink}/groups`

----
## POST /goods/1.x/company/{company-permalink}/pricelist/import
Импорт прайсов из Excel (и иных) файлов.
В результате запроса выполняется запуск асинхронной задачи.
Запрос представляет из себя multipart

**Запрос**:
```
POST /goods/1.x/12345/pricelist/import HTTP/1.1
Content-Type: multipart/form-data; boundary=-------------573cf973d5228
...
---------------573cf973d5228
Content-Disposition: form-data; name="file"; filename="file.xls"
Content-Type: application/vnd.ms-excel

<binary content>
---------------573cf973d5228--
```

**Коды ответов:**
 - 200 - успешно
 - 409 - предыдущая задача импорта из файла еще не завершена, конфликт.
 - 422 - permalink не найден

----
## GET /goods/1.x/company/{company-permalink}/pricelist/import/status
Получить статус задачи импорта данных.

**Параметры**:
| **Название** | **тип** | **описание** |
| ------------ | ------- | ------------ |
| history_limit | uint | лимит на длину истории, по умолчанию 10 |

**Ответ**:
```json
{
    "status": "Processed", // Статус файла импорта:
        // "Waiting" - в очереди на обработку
        // "InProgress" - в процессе обработки
        // "Processed" - файл успешно обработан, прайслист обновлен.
        // "FailedToProcess" - обработка файла завершилась ошибкой, прайслист не изменился
        // "Cancelled" - пользователь отменил обработку, прайслист не изменился
    "message": "", // Текстовое описание проблем обнаруженных в процессе обработки. Может быть не пустым даже если status=Processed
    "update_time": "1970-01-01T00:00:00.000Z", // время последнего изменения статуса
    "file_type": "Yml", // Тип файла импорта
        // "Excel"
        // "Yml"
    "file_url": "HTTPS://s3.mds.yandex.net/maps-geoapp-goods-imports-stable/example", // s3 url файла
    "is_read": false, // пометка сообщения прочитанным
    "parse_info": { // опциональное поле, может отсутствовать (быть null), если файл ещё не обработан
        "total_items_count": 10,
        "parsed_items_count": 10,
        "items_with_photo_count": 5
    },
    "history": { // история загрузки предыдущих файлов
        "items": [ // загруженные ранее файлы (не более 10 штук), первыми идут загруженные недавно
            {
                ... // все поля, описанные выше, кроме поля history
            },
            ...
        ]
    }
}
```

**Коды ответов:**
 - 200 - успешно
 - 422 - permalink не найден

----
## POST /goods/1.x/company/{company-permalink}/pricelist/import/cancel
Отменить импорт прайсов из Excel (и иных) файлов.

**Коды ответов:**
 - 200 - успешно
 - 204 - нечего отменять, либо очередь файлов на загрузку пуста, либо файл уже взят в обработку
 - 422 - permalink не найден

----
## POST /goods/1.x/company/{company-permalink}/pricelist/import/read
Пометить последнее сообщение об ошибке импорта файла прочитанным.

**Коды ответов:**
 - 200 - успешно
 - 204 - нечего помечать (нет готовых импорт-файлов)
 - 422 - permalink не найден

----
### [TVM restricted] POST /goods/1.x/company
Создать организацию в товароной базе по пермалинку. Если организация уже существует в Справочнике, то новая создаваться не будет.

Специфичный сценарий для Рекламы. **Перед использованием обратитесь к нам для выяснения обстоятельств.**

**Запрос:**
```json
{
    "permalink": 5234123
}
```

**Коды ответов:**
 - 200 - создано или уже существует

# API сетевых организаций

API взаимодействия с сетевыми организациями аналогично соответствующим API филиалов, с точностью до путей методов.
Список аналогичных методов сетевых организаций:

### POST /goods/1.x/chain/{chain-permalink}/{region-id}/price
### POST /goods/1.x/chain/{chain-permalink}/{region-id}/price/{price-id}
### GET /goods/1.x/chain/{chain-permalink}/{region-id}/pricelist
### GET /goods/1.x/chain/{chain-permalink}/{region-id}/prices
### GET /goods/1.x/chain/{chain-permalink}/{region-id}/pricelist/count
### DELETE /goods/1.x/chain/{chain-permalink}/{region-id}/price
### DELETE /goods/1.x/chain/{chain-permalink}/{region-id}/pricelist
### GET /goods/1.1/chain/{chain-permalink}/{region-id}/groups
### GET /goods/1.x/chain/{chain-permalink}/{region-id}/pricelist/import/status
### POST /goods/1.x/chain/{chain-permalink}/{region-id}/pricelist/import/cancel
### POST /goods/1.x/chain/{chain-permalink}/{region-id}/pricelist/import/read

----
### POST /goods/1.x/chain/{chain-permalink}/{region-id}/pricelist/import

Запрос аналогичный `POST /goods/1.x/company/{company-permalink}/pricelist/import` c дополнительными параметрами

**Параметры**:
| **Название** | **тип** | **описание** |
| ------------ | ------- | ------------ |
| force_update | bool | удалить все существующие изменения сетевых товаров внутри филиалов сети |

----
### GET /goods/1.x/chain/{chain-permalink}/regions
Получение списка регионов сети, в которых есть филиалы.

**Ответ:**
```json
[
    {
        "id": "1",
        "name": "Москва и Московская область"
    },
    ...
]
```

----
## GET /goods/1.x/chain/{chain-permalink}/{region-id}/price/{price-id}/overwrites
Получить филиалы, в которых был изменен товар. В случае если таких товаров в данной сети не нашлось, вернется пустой список.

**Параметры**:
| **Название** | **тип** | **описание** |
| ------------ | ------- | ------------ |
| limit | uint | ограничение на кол-во филиалов в ответе (не более 10000) |
| offset | uint | вернуть филиалы, начиная с заданного смещения |

**Ответ**:
```json
{
    "pager": {
        "offset": 0,
        "limit": 10,
        "total": 1
    },
    "companies": [
        {
            "permalink": "1233454123",      // пермалинк филиала
            "address": "ул. Мясницкая д.6", // адрес филиала
            "overwrite": {
                "price": {                  // опциональное поле
                    "type": "ExactNumber",
                    "value": 123.20,
                    "currency": "RUB"
                },
                "availability": {           // опциональное поле
                    "status": "OutOfStock"
                },
                "is_popular": true,         // опциональное поле
                "is_hidden": false          // опциональное поле
            }
       },
       ...
    ]
}
```
