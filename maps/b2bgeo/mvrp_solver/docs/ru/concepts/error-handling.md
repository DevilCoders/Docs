# Обработка ошибок

VRP API Яндекс.Маршрутизации возвращает JSON в ответ на все запросы и использует стандартные коды ответов.

В случае редких проблем на серверах Яндекса, API ответит сообщением с кодом 50х.

Все ошибки, связанные с валидацией данных или бизнес-логикой, описаны в теле ответа с кодом 200, и должны обрабатываться пользователем.

## Повторные запросы
В редких ситуациях могут возникнуть проблемы со связью между вашим приложением и серверами Яндекса, а также кратковременные перебои в работе серверов Яндекса.

На случай проблем со связью рекомендуется настроить время ожидания для запросов и ответов в вашем клиенте. 10 секунд должно быть достаточно для сглаживания большей части возможных проблем.

При возникновении проблем на стороне серверов Яндекса, вы можете получить ошибку HTTP 5xx. Обычно проблемы на стороне сервера исправляются автоматически через несколько секунд. Чтобы ваше приложение работало при возникновении перебоев в связи, мы рекомендуем отправлять повторные запросы с задержкой. Чтобы снизить нагрузку на сервера при повторных запросах, также рекомендуется использовать растущие задержки между запросами.

Чтобы определить количество запросов и паузы между ними, нужно учитывать общее время, необходимое на обработку задачи по оптимизации. Нет общего правила по необходимому количеству повторных запросов, но ниже приведены базовые рекомендации.

Например, для небольшой задачи, занимающей 10 секунд, обычно достаточно посылать повторные запросы с задержкой до 1.5 секунд:

```
initial_delay = 0.1s
backoff_multiplier = 2
max_retries = 4

retry 1: delay 0.1s
retry 2: delay 0.1s * 2 = 0.2s
retry 3: delay 0.1s * 4 = 0.4s
retry 4: delay 0.1s * 8 = 0.8s
```

Для продолжительных задач, занимающих до 30 минут, может понадобится более продолжительная задержка:

```
initial_delay = 1s
backoff_multiplier = 2
max_retries = 32

retry 1: delay 1s
retry 2: delay 1s * 2 = 2s
retry 3: delay 1s * 4 = 4s
retry 4: delay 1s * 8 = 8s
retry 5: delay 1s * 16 = 16s
retry 6: delay 1s * 32 = 32s
...
```


<p class="p"><a href="feedback.html" class="xref button">Написать в службу поддержки</a></p>
