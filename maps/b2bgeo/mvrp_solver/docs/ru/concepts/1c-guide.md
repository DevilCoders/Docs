#  Общая информация о работе с 1С

Сервис Яндекс.Маршрутизация можно связать с приложениями 1С для выгрузки данных в файлы формата XLS (Microsoft Excel). Выгружаются только данные по заказам. Данные по складам, курьерам или машинам необходимо дополнять самостоятельно.

### Поддерживаемые версии 1С

Поддерживаются следующие версии:

* Управление торговлей версий 10.0 и выше, 11.0 и выше и отраслевые на их основе.
* Бухгалтерия предприятия всех версий и отраслевые на их основе.
* Управление нашей фирмой.
* Комплексная автоматизация.
* Управление производственным предприятием и отраслевые на их основе.

В зависимости от конфигурации, данные собираются из соответствующих документов:

* Заказ клиента (УТ, КА).
* Заказ покупателя (УНФ, УПП).
* Реализация товаров и услуг (БУХ).

{% note %}

Такая реализация является типовой и может потребовать доработок в зависимости от изменений в конфигурации клиента и принятых процессов документооборота в каждой конкретной организации.

{% endnote %}

## Начало работы

Чтобы начать работу, скачайте [файл внешней обработки](https://courier.yandex.ru/vrs-doc/Yandex_Routing_version_02.04.2020.epf) и [настройте выгрузку](1c-connection.md).

## Поля в таблице 1С

Поле таблицы | Значение
:---| :---
Координаты (Широта/Долгота) | Не заполняется в типовом модуле. Данные могут храниться в учетной системе клиента в различных местах и виде. Требует доработки под конкретную интеграцию.
Наименование получателя | Наименование контрагента из документа.
Адрес получателя | Фактический адрес грузополучателя. Берется из реквизита документа или контактной информации контрагента, в зависимости от конфигурации.
Временное окно | Время, в которое контрагент готов принять доставку. Как правило, в конфигурации нет таких данных в документах, за исключением УТ. Требует доработки, если подобный реквизит реализован в учётной системе клиента.
Жесткое временное окно | Признак Истина или Ложь. Реквизита в типовых конфигурациях нет. Требует доработки при необходимости.
Время обслуживания, на адрес или на заказ | Количество часов на время обслуживания. Реквизитов в типовых конфигурациях нет. Требует доработки при необходимости.
Вес брутто | Сумма веса всех товаров из табличной части документа. В УПП, УТ и КА хранится в реквизитах упаковки, в УНФ в реквизитах номенклатуры, в Бухгалтерии не представлен.
Количество | Сумма количества товаров из табличной части документа.
Необходимые свойства машины | Реквизита нет в типовых конфигурациях. Требуется доработка при необходимости.
Габариты (ШГВ) | Ширина, глубина, высота товаров. В УПП, УТ и КА хранится в реквизитах упаковки, в УНФ в реквизитах номенклатуры, в Бухгалтерии не представлен.
Штрафы за минуту | Реквизита нет в типовых конфигурациях. Требуется доработка при необходимости.
Штрафы за факт нарушения окна доставки | Реквизита нет в типовых конфигурациях. Требуется доработка при необходимости.
Штрафы за недоставку | Реквизита нет в типовых конфигурациях. Требуется доработка при необходимости.
Тип заказа | Реквизита нет в типовых конфигурациях. Требуется доработка при необходимости.
Место назначения | Реквизита нет в типовых конфигурациях. Требуется доработка при необходимости.
Тип совместимости с другими заказами | Реквизита нет в типовых конфигурациях. Требуется доработка при необходимости.
Время загрузки заказа на складе | Реквизита нет в типовых конфигурациях. Требуется доработка при необходимости.


## Алгоритм работы

Алгоритм обработки таблицы определяется конфигурацией, в которой она открывается. Доступно две формы для работы с управляемыми и обычными формами.

При открытии каждой из них вызывается функция определения текущей конфигурации по вхождениям в имени конфигурации, текущий режим работы сохраняется в глобальной переменной.

В дальнейшем, в зависимости от значения этой переменной, вызывается подходящий запрос, собирающий данные из документов, а также обрабатываюший их при заполнении таблицы. От этой переменной зависит также способ определения адреса.

Заполнение дополнительных полей таблицы на этапе предпроектной эксплуатации не представлено в конфигурации по умолчанию и его нужно реализовать при внедрении в учетную систему клиента индивидуально сотрудником интегратора или штатными специалистами клиента.


<p class="p"><a href="feedback.html" class="xref button">Написать в службу поддержки</a></p>
