# Группировка заказов

При построении заказов часто возникает необходимость доставить несколько заказов одним курьером. Например, если для компании важно, чтобы все заказы были выполнены на одном автомобиле, или при осуществлении цепочек доставки, когда курьеру нужно отвезти заказ на точку, получить там документы о доставке и привезти их в офис.

В Маршрутизаторе есть возможность группировать заказы с помощью опции `location_groups`. Заказы добавляются в группу по их идентификаторам. Порядок заказов, определенный в группе, неважен — при планировании алгоритм может выстроить их в любом порядке.

Каждой группе заказов можно указать название. Это не влияет на маршрутизацию, но позволяет присваивать группам удобные для работы имена.

Свойства групп для настройки планирования:

- `options.location_groups.solid` — значение `true` указывает, что группа неразрывная: заказы в ней должны выполняться без других заказов между ними. Порядок заказов в группе не фиксируется. Это часто используется, например, для грузового такси, которое должно доставить груз из одной точки в другую, и до выгрузки новый заказ в машину добавить нельзя. Значение по умолчанию — `false`.

- `options.location_groups.dependent` — значение `true` определяет, что группа неделимая: все ее заказы должны быть или выполнены, или (если невозможно доставить хотя бы один) сброшены в нераспределенные вместе. Значение по умолчанию — `false`.

**Пример 1**

В этом примере два автомобиля развозят заказы по 8 точкам. Поскольку опция `location_groups` не используется, Маршрутизатор строит оптимальный маршрут.

[Пример Excel](https://courier-admin.s3.yandex.net/doc-examples/example_location_groups1.xlsx) ⋅ [Запрос API (JSON)](https://courier.yandex.ru/vrs/api/v1/log/request/775e6a7-eb529e75-c249f238-4a3d7afc) ⋅ [Ответ API](https://courier.yandex.ru/vrs/api/v1/result/775e6a7-eb529e75-c249f238-4a3d7afc) ⋅ [Открыть на карте](https://courier.yandex.ru/mvrp-map#775e6a7-eb529e75-c249f238-4a3d7afc)

**Пример 2**

В этом примере используются те же вводные данные, что и в примере 1, но заказы с ID 9 и 11 объединены в одну группу. Чтобы оптимизировать доставку, Маршрутизатор добавляет заказы между ними в тот же автомобиль, а прочие заказы в другой. Полученный маршрут менее оптимальный по метрикам, но соответствует требованиям по доставке заказов в одном автомобиле.

[Пример Excel](https://courier-admin.s3.yandex.net/doc-examples/example_location_groups2.xlsx) ⋅ [Запрос API (JSON)](https://courier.yandex.ru/vrs/api/v1/log/request/4a7cedba-677d7ba8-c766f031-d6c98167) ⋅ [Ответ API](https://courier.yandex.ru/vrs/api/v1/result/4a7cedba-677d7ba8-c766f031-d6c98167) ⋅ [Открыть на карте](https://courier.yandex.ru/mvrp-map#4a7cedba-677d7ba8-c766f031-d6c98167)

**Пример 3**

8 заказов разбиты на 3 группы, каждая из которых включает заказы одного клиента. Группы определены как неразрывные: свойство `options.location_groups.solid` установлено в `true`. В построенном маршруте точки разных клиентов не были перемешаны друг с другом: сначала выполняются заказы клиента №2, затем — №3 и в конце — №1.

[Запрос API (JSON)](https://courier.yandex.ru/vrs/api/v1/log/request/14abba91-17715805-3619e19b-18c3074) ⋅ [Ответ API](https://courier.yandex.ru/vrs/api/v1/result/14abba91-17715805-3619e19b-18c3074) ⋅ [Открыть на карте](https://courier.yandex.ru/mvrp-map#14abba91-17715805-3619e19b-18c3074)
