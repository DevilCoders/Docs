| Конфиг | Описание |
--- | ---
[`naviguide.cfg`](naviguide.cfg) | Конфиг "по умолчанию"
[`release`](release) | Версионированные конфиги для каждой версии для возможности вопроизвести старое поведение, см ниже
[`exp/server_probs.cfg`](exp/server_probs.cfg) | Идентичен конфигу "по умолчанию", но с серверными вероятностями, качество значимо не меняется
[`exp/layers.cfg`](exp/layers.cfg) | Включены слои, уменьшает ложные сходы (незначительно увеличиваает время детекции истинного)
[`exp/layers_and_fair_enough.cfg`](exp/layers_and_fair_enough.cfg) | Плюс к слоям включено дополнительный показ честной стрелки, если она "достаточно хорошая" (в N-ый раз алгоритм решает, что нужна честная стрелка). Влияет на показы честных стрелок
[`exp/layers_and_geo_accuracy.cfg`](exp/layers_and_geo_accuracy.cfg) | Пропуск слоёв + новая геометрическая вероятность (с accuracy, шириной дороги и переключением с квадратичной экспоненты на обычную). Даёт -16% ложных сходов, не увеличивая время детекции истинных
[`exp/layers_and_geo_accuracy_and_jump.cfg`](exp/layers_and_geo_accuracy_and_jump.cfg) | Предыдущий + jump. По выборке 10К и отрезанными сходами до/после эталона снижает сходы на 33% по сравнению с дефолтным конфигом
[`exp/layers_geoaccspeed_jumpspeed.cfg`](exp/layers_geoaccspeed_jumpspeed.cfg) | Предыдущий + меньшее доверие геометрической и jump вероятностям на низких скоростях. По выборке 10К снижает сходы ещё на 25% по сравнению с предыдущим конфигом 

### Версионированные конфиги

В [`release/base.cfg`](release/base.cfg) описан базовый конфиг, в котором установлены самые старые значения и все дополнительные фичи отключены. Т.о., накладывая поверх него конфиг конкретной версии, получаем конфиг, который был по умолчанию для указанной версии. Конечно, если поведение библиотеки в каких-то местах не обратно-совместимо, конфигом это не исправишь. Сама версия собирается последняя.<br>
Конфиги конкретных версий накладываются только поверх базового, а не всех предыдущих, поэтому должны содержать кумулятивные изменения. При релизе новой версии можно брать за основу конфиги предыдущей версии.<br>
Если в новой версии какой-то параметр добавлен, он обязательно должен быть добавлен в базовый конфиг со значением по умолчанию и по возможности не меняющим поведение.

Чтобы просмотреть все изменения в конфигах между версиями, можно воспользоваться командой, запускаемой из [`maps/analyzer/libs`](/arc/trunk/arcadia/maps/analyzer/libs):
<pre>
$ ya svn diff -r <previous>:<current> .\guidance\include\config.h .\guidance\impl\config.cpp .\mapmatching_likelihoods\include\likelihoods_config.h
</pre>
где:
* <previous> — ревизия предудыщей версии (см историю [changelog'а](/arc/trunk/arcadia/maps/packages/yandex-mapsmobi-libs-mapkit-analyzer-guidance/debian/changelog)), например `5837696` (`0.1.12-0`)
* <current> — ревизия текущей версии, например `5852162` (`0.1.13-0`)

В выводе будут добавленные параметры и изменённые значения. Добавленные надо занести в `base.cfg`, изменённые добавить в версионированный конфиг с новыми значениями.

### Примечания

Сейчас параметры по умолчанию зашиты в коде, а файлы конфигураций их переопределяют, отсюда есть несколько потенциальных проблем:
* результирующий конфиг зависит от версии библиотеки, с которой он используется; это надо не забывать учитывать
* как следствие, воспроизвести какой-то старый конфиг становится проблематично
* при смене дефолтов конфиги могут поменять своё поведение
