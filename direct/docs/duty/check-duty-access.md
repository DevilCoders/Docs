# Проверка доступов
Перед переходом к активной стадии дежурства при передаче смены необходимо проверить, что приехали/остались доступы до продакшена и ТС, которые могут пригодиться при дежурстве.

{% note alert %}

Если при заступлении на дежурство не хватает прав необходимо незамедлительно обратиться к pe4kin@

{% endnote %}

Большинство действий с продакшеном из консоли делается с 3 серверов, именуемых [ppcback-ами](../jeri/things/ppcback).

## Проверка ssh и sudo на продакшене
Необходимо зайти на любой ppcback01[e,f,i].yandex.ru и с него зайти, например, на соседний ppcback. Если не получилось, проверить:
- ssh-агент настроен
- форвард ключа включен
- доступы проросли

Для проверки sudo выполнить команду `sudo echo ok` находясь на ppcback.

## Проверка доступов к базе
- Проверить, что интерфейс YC(MDB) открывается по [ссылке](https://yc.yandex-team.ru/folders/fooa07bcrr7souccreru/managed-mysql?section=list) , базы видны, можно провалиться в любую.

- С ppcback `sudo dbs-sql pr:ppc:all 'select now()'`

## Проверка доступа в деплое
- Открыть интерфейс [Deploy](https://deploy.yandex-team.ru/)
- Найти проект `direct-production`
- Найти стейдж `direct-logviewer-production` и зайти в него
- Нажать кнопку `Edit` возле его имени или в правом верхнем углу страницы и перейти в режим редактирования
- Найти бокс с именем `logviewer-box` в нем ворклоад `java-diag-tools-workload` и зайти на его редактирование
- Добавить переменную окружения `test<login>` со значением `1`
- Нажать кнопку `Review Changes`
- Опционально:снять галочки обновлений, если будут предложены
- Нажать кнопку `Deploy`, которая запустит обновление
- Дождаться выкладки локации, нажать кнопку `Approve` для подтверждения локации

## Проверка internal_tools
- Проверить, что [интерфейс](https://direct.yandex.ru/internal_tools/#_List) открывается и отображает список
- Провалиться в какой-нибудь, например [про работающую версию инстансов jobs](https://direct.yandex.ru/internal_tools/#hourglass_list_instances)
- `#TODO` поменять пропертю
Для этих операций нужна роль [разработчик](https://docs.yandex-team.ru/direct-dev/guide/qa/qa_kmb/qa_roles#developer) на внешний аккаунт. Если интерфейс не открывается или не хватает прав - необходимо ее запросить.

## Проверка эскалации и даунтайма
- Переключить звонки указав себя app-duty-1 в интерфейсе [переключения звонков](https://duty.mtrs.yandex-team.ru/project/direct/#)
- Зажечь [тестовую проверку](../jeri/guide/test-juggler-check)
- Увидеть сообщение о ней в чате [Direct.Monitoring.Calls](../reference/chats.md#Direct-Monitoring-Calls)
- Поставить даунтайм через телеграм
- Снять даунтайм
- Дождаться звонка
- Остановить эскалацию по телефону

## Проверка ITS (веса в балансерах, анонсы балансеров)
Практически сразу после начала смены начнутся еженедельные [внутренние учения](../jeri/howto-drills.md). На них можно проверить, что хватает прав регулировать веса и снятие анонсов балансеров.
Если учения не будут проводиться, нужно попробовать покрутить веса по [инструкции](../jeri/howto-dc-l7.md)
