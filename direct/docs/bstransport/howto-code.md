# –ö–∞–∫ –Ω–∞–ø–∏—Å–∞—Ç—å –∫–æ–Ω—Ç—É—Ä –≤—ã–≥—Ä—É–∑–∫–∏ –≤ –ë–ö –Ω–∞ –±–∞–∑–µ ESS

–£–ø—Ä–æ—â–µ–Ω–Ω–æ –Ω–æ–≤—ã–π —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç —Å–æ —Å—Ç–æ—Ä–æ–Ω—ã –î–∏—Ä–µ–∫—Ç–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å–ª–µ–¥—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º:
1. —á–µ—Ä–µ–∑ ESS-–∫–æ–Ω—Ç—É—Ä –ø–æ–ª—É—á–∞–µ–º —Å–æ–±—ã—Ç–∏–µ –æ —Ç–æ–º, —á—Ç–æ –æ–±—ä–µ–∫—Ç –∏–∑–º–µ–Ω–∏–ª—Å—è –∏ –µ–≥–æ –Ω–∞–¥–æ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Å –ë–ö;
2. –≤—ã–≥—Ä—É–∂–∞–µ–º –æ–±—ä–µ–∫—Ç –≤ —Ç–∞–±–ª–∏—Ü—É –≤ YT –Ω–∞ `markov` –≤ [/home/adv](https://yt.yandex-team.ru/markov/navigation?path=//home/adv) –∞ —Ç–∞–∫–∂–µ –∑–∞–ø–∏—Å—ã–≤–∞–µ–º —Å–æ–±—ã—Ç–∏–µ –æ–± –∏–∑–º–µ–Ω–µ–Ω–∏–∏ (—Å–æ–∑–¥–∞–Ω–∏–∏, —É–¥–∞–ª–µ–Ω–∏–∏) –≤ CeaSar (TODO: —Å—Å—ã–ª–∫—É –Ω–∞ –æ–ø–∏—Å–∞–Ω–∏–µ) –æ—Ç–∫—É–¥–∞ –µ–≥–æ –ø–æ–¥—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç –ë–ö.

## ESS-–∫–æ–Ω—Ç—É—Ä
–û –Ω–∞–ø–∏—Å–∞–Ω–∏–∏ ESS-–∫–æ–Ω—Ç—É—Ä–∞ –µ—Å—Ç—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∞—è [–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](../ess/howto-code.md)

## –ö–ª–∞—Å—Å—ã —Ä–µ–∞–ª–∏–∑—É—é—â–∏–µ –≤—ã–≥—Ä—É–∑–∫—É –≤ –ë–ö

### –°–µ—Ä–≤–∏—Å
–û—Å–Ω–æ–≤–Ω–æ–µ –º–µ—Å—Ç–æ —Å –ª–æ–≥–∏–∫–æ–π —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞, –∏–º–µ–Ω–Ω–æ —ç—Ç–æ—Ç –∫–ª–∞—Å—Å –±—É–¥–µ—Ç –≤—ã–∑—ã–≤–∞—Ç—å—Å—è ESS Processor'–æ–º –∏–∑ jobs.

* –ø–æ–ª—É—á–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–± –∏–∑–º–µ–Ω–∏–≤—à–∏—Ö—Å—è –æ–±—ä–µ–∫—Ç–∞—Ö;
* –æ–±–æ–≥–∞—â–∞–µ—Ç –µ–µ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ –∏–∑ –ë–î –î–∏—Ä–µ–∫—Ç–∞;
* –≤—ã–∑—ã–≤–∞–µ—Ç YT-—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –≤ YT.

–î–∞–Ω–Ω—ã–µ –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –≤ –≤–∏–¥–µ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã—Ö –º–æ–¥–µ–ª–µ–π, —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ protobuf-—Å—Ö–µ–º–µ (–Ω—É–∂–Ω–æ –¥–ª—è –≤—ã–≥—Ä—É–∑–∫–∏ –≤ CeaSar).

–ú–∞–ø–∏–Ω–≥ –≤ –∏–∑ —Å–æ–æ–±—â–µ–Ω–∏–π ESS (LogicObject) –≤ –º–æ–¥–µ–ª–∏ CeaSar —Ç–∞–∫–∂–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤ —ç—Ç–æ–º –∫–ª–∞—Å—Å–µ.

–ü—Ä–∏–º–µ—Ä [BsExportCampaignService](https://a.yandex-team.ru/arc_vcs/direct/apps/event-sourcing-system/logicprocessor/src/main/java/ru/yandex/direct/logicprocessor/processors/bsexport/campaign/BsExportCampaignService.kt)

### YT-—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
–ö–ª–∞—Å—Å-–Ω–∞—Å–ª–µ–¥–Ω–∏–∫ [BaseBsExportYtRepository](https://a.yandex-team.ru/arc_vcs/direct/libs-internal/bstransport-yt/src/main/java/ru/yandex/direct/bstransport/yt/repository/BaseBsExportYtRepository.java).

–ú—ç–ø–∏—Ç –ø—Ä–æ—Ç–æ–±–∞—Ñ–Ω—ã–µ –º–æ–¥–µ–ª–∏ –≤ –∑–∞–ø–∏—Å–∏ YT.

–û–±–Ω–æ–≤–ª—è–µ—Ç —Ç–∞–±–ª–∏—Ü—É –≤ YT, –∏, —Å –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –ø–æ—Ä, –ø–æ—Å—ã–ª–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ CeaSar.

–û–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –∑–∞–ø–∏—Å—å –≤ YT –∏ CaeSar –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤ –º–µ—Ç–æ–¥–µ [doRequest](https://a.yandex-team.ru/arc/trunk/arcadia/direct/libs-internal/bstransport-yt/src/main/java/ru/yandex/direct/bstransport/yt/repository/BaseBsExportYtRepository.java?rev=r8160788#L104)

–ü—Ä–∏–º–µ—Ä [BaseBannerResourcesYtRepository](https://a.yandex-team.ru/arc_vcs/direct/libs-internal/bstransport-yt/src/main/java/ru/yandex/direct/bstransport/yt/repository/resources/BaseBannerResourcesYtRepository.kt)

### protobuf —Å—Ö–µ–º–∞ –º–æ–¥–µ–ª–µ–π
–û–ø–∏—Å–∞–Ω–∏–µ –º–æ–¥–µ–ª–µ–π –¥–ª—è –æ–±—â–µ–Ω–∏—è —Å CeaSar

–ü—Ä–∏–º–µ—Ä —Ç–∞–∫–∏—Ö —Ñ–∞–π–ª–æ–≤ [proto/banner_resources](https://a.yandex-team.ru/arc_vcs/adv/direct/proto/banner_resources)

–ü–æ –Ω–∏–º –≥–µ–Ω–µ—Ä—è—Ç—Å—è –º–æ–¥–µ–ª–∏ –≤ –≤–∏–¥–µ java-–∫–ª–∞—Å—Å–æ–≤ –≤ –º–æ–º–µ–Ω—Ç —Å–±–æ—Ä–∫–∏ –ø—Ä–æ–µ–∫—Ç–∞ (`ya-ide-idea`)

### –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –æ—Ç—á—ë—Ç –¥–ª—è –ø–µ—Ä–µ–æ—Ç–ø—Ä–∞–≤–∫–∏ –æ–±—ä–µ–∫—Ç–æ–≤ –ø–æ –Ω–æ–º–µ—Ä—É –∫–∞–º–ø–∞–Ω–∏–∏ { #resync-tool }

–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç, –ø–µ—Ä–µ–æ—Ç–ø—Ä–∞–≤–ª—è—é—â–∏–π –æ–±—ä–µ–∫—Ç—ã, —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å –∑–∞–¥–∞–Ω–Ω—ã–º–∏ –∫–∞–º–ø–∞–Ω–∏—è–º–∏, –≤ –ë–ö.

–≠—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–∞–∫:
1. –ø–æ –Ω–æ–º–µ—Ä—É –∫–∞–º–ø–∞–Ω–∏–∏ –∏—â—É—Ç—Å—è –µ—ë –≥—Ä—É–ø–ø—ã, —Ä–µ—Å—É—Ä—Å—ã –±–∞–Ω–Ω–µ—Ä–æ–≤, –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∏, —É—Å–ª–æ–≤–∏—è –ø–æ–∫–∞–∑–∞ –∏ —Ç.–¥.
2. –¥–ª—è —ç—Ç–∏—Ö —Å—É—â–Ω–æ—Å—Ç–µ–π –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è –ª–æ–≥–∏—á–µ—Å–∫–∏–µ –æ–±—ä–µ–∫—Ç—ã –∏ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–º ESS-–ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞–º

–ö–æ–¥ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è [—Ç—É—Ç](https://a.yandex-team.ru/arc/trunk/arcadia/direct/libs-internal/internaltools/src/main/java/ru/yandex/direct/internaltools/tools/ess/sendcampaign),
–∞ –≤–æ—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–º –º–æ–∂–Ω–æ [–∑–¥–µ—Å—å](https://direct.yandex.ru/internal_tools/#ess_send_campaigns_content).

{% note warning %}

–ü—Ä–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ –Ω–æ–≤–æ–≥–æ –∫–æ–Ω—Ç—É—Ä–∞ –æ—Ç—á—ë—Ç –Ω–∞–¥–æ –¥–æ–ø–æ–ª–Ω–∏—Ç—å. –î–ª—è —ç—Ç–æ–≥–æ –Ω—É–∂–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å [CampaignContentRepository](https://a.yandex-team.ru/arc/trunk/arcadia/direct/libs-internal/internaltools/src/main/java/ru/yandex/direct/internaltools/tools/ess/sendcampaign/repository/CampaignContentRepository.kt), –ø—Ä–∏–º–µ—Ä: [CampaignMultipliersRepository](https://a.yandex-team.ru/arc/trunk/arcadia/direct/libs-internal/internaltools/src/main/java/ru/yandex/direct/internaltools/tools/ess/sendcampaign/repository/CampaignMultipliersRepository.kt).

{% endnote %}

## –ö–æ–Ω—Ñ–∏–≥–∏
–î–ª—è —Ä–∞–±–æ—Ç—ã –≤—ã–≥—Ä—É–∑–∫–∏ –≤ YT-—Ç–∞–±–ª–∏—Ü—É, –ø—É—Ç—å –∫ —ç—Ç–æ–π —Ç–∞–±–ª–∏—Ü–µ –Ω–∞–¥–æ —É–∫–∞–∑–∞—Ç—å –≤ [–∫–æ–Ω—Ñ–∏–≥–µ](https://a.yandex-team.ru/arc/trunk/arcadia/direct/libs-internal/config/src/main/resources/common-production.conf?rev=7263479#L579)
–¢–∞–∫–∂–µ –Ω–∞–¥–æ –æ–±–Ω–æ–≤–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥–∏ –¥–ª—è –¥—Ä—É–≥–∏—Ö —Å—Ä–µ–¥.

–ü—Ä–∏–º–µ—Ä [–∫–æ–º–º–∏—Ç–∞](https://a.yandex-team.ru/arc/commit/7263579#file-/trunk/arcadia/direct/libs-internal/config/src/main/resources/common-production.conf:R583)
