# ess-moderation-export-lag
[moderation_export_delay](https://juggler.yandex-team.ru/project/direct.prod/aggregate?service=moderation_export_delay&host=moderation_export&project=direct.prod)

## Описание { #description }
Проверка оставания обработки ess-топиков с событиями модерации соответствующими ess-процессорами. Проверка загорается, если обработка одного из топиков событий модерации отстает больше положенного или сломана.
[Отставание в разрезе по топикам](https://solomon.yandex-team.ru/?project=kikimr&cluster=lbkx&service=pqtabletAggregatedCounters&l.Account=direct&l.host=dc-unknown&l.sensor=CreateTimeLagMsByCommitted&l.ConsumerPath=direct%2Fess%2Fess-consumer&l.Important=1&l.TopicPath=direct%2Fess%2Fadgroup-moderation%7Cdirect%2Fess%2Fasset-moderation-callout%7Cdirect%2Fess%2Fasset-moderation-multicard%7Cdirect%2Fess%2Fasset-moderation-vcard%7Cdirect%2Fess%2Fasset-moderation-video_addition%7Cdirect%2Fess%2Fbanner-button-moderation%7Cdirect%2Fess%2Fbanner-logo-moderation%7Cdirect%2Fess%2Fbanner-moderation-content_promotion%7Cdirect%2Fess%2Fbanner-moderation-cpc_video%7Cdirect%2Fess%2Fbanner-moderation-cpm_banner%7Cdirect%2Fess%2Fbanner-moderation-dynamic%7Cdirect%2Fess%2Fbanner-moderation-image_ad%7Cdirect%2Fess%2Fbanner-moderation-internal_banner%7Cdirect%2Fess%2Fbanner-moderation-mobile_content%7Cdirect%2Fess%2Fbanner-moderation-performance_main%7Cdirect%2Fess%2Fbanner-moderation-text%7Cdirect%2Fess%2Fbannerstorage-creatives-moderation%7Cdirect%2Fess%2Fdisplayhrefs-moderation%7Cdirect%2Fess%2Fimage-moderation%7Cdirect%2Fess%2Fmobile-content-icon-moderation%7Cdirect%2Fess%2Fmoderation-special-campaign-copy%7Cdirect%2Fess%2Fpromoaction-moderation%7Cdirect%2Fess%2Fsitelinks-moderation%7Cdirect%2Fess%2Fturbolandings-moderation&graph=auto&b=1h&e=)

## Диагностика { #diagnostics }
В первую очередь надо найти сломанный ess-процессор. Для этого проще всего взять название ess-топика, например, `banner-moderation-text` и поиском в документации найти раздел про соответствующий ess-процессор (в этом примере `TextBannerEventsProcessor`).
В документации процессора есть ссылки на логи процессора, логи событий, код ess-правила и процессора.
