### –ü—Ä–æ–¥—É–∫—Ç/–ø–æ–¥—Å–∏—Å—Ç–µ–º–∞
GrUT (–µ–¥–∏–Ω–∞—è –±–∞–∑–∞ —Ä–µ–∫–ª–∞–º—ã). –†–µ–ø–ª–∏–∫–∞—Ü–∏—è –∏–∑ MySQL –î–∏—Ä–µ–∫—Ç–∞ –≤ GrUT.


### –†–æ–ª—å –≤ —Ä–∞–±–æ—Ç–µ –ø—Ä–æ–¥—É–∫—Ç–∞/–ø–æ–¥—Å–∏—Å—Ç–µ–º—ã
–í—ã–ø–æ–ª–Ω—è–µ—Ç –¥–≤–µ –∑–∞–¥–∞—á–∏:
- –¥–∞–µ—Ç –ø—Ä–∏–º–µ—Ä—ã –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –¥–∞–ª—å–Ω–µ–π—à–µ–π —á–∞—Å—Ç–∏ —Å–∏—Å—Ç–µ–º—ã (GrUT ‚Üí CaSaR)
- —Å–æ–∑–¥–∞–µ—Ç/–ø–æ–¥–Ω–æ–≤–ª—è–µ—Ç –æ–±—ä–µ–∫—Ç—ã –≤ GrUT (–ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—è –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö) –¥–æ –º–æ–º–µ–Ω—Ç–∞,
–ø–æ–∫–∞ –≤—Å–µ –ø–∏—à—É—â–∏–µ –º–µ—Å—Ç–∞ –î–∏—Ä–µ–∫—Ç–∞ –Ω–µ –Ω–∞—á–∞–ª–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ –∑–∞–ø–∏—Å—ã–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –≤ GrUT


### –î–∞—Ç–∞—Ñ–ª–æ—É
ESS-router –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å—Ä–∞–∑—É –ø–æ –Ω–µ—Å–∫–æ–ª—å–∫–∏–º —Ç–∏–ø–∞–º –æ–±—ä–µ–∫—Ç–æ–≤, –∏ –ø–∏—à–µ—Ç –∏—Ö –≤—Å–µ –≤ –æ–¥–∏–Ω —Ç–æ–ø–∏–∫ —ç—Ç–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞.
–ó–∞—Ç–µ–º –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä:
1. –≤—ã—á–∏—Ç—ã–≤–∞–µ—Ç –ø–∞—á–∫—É –¥–∞–Ω–Ω—ã—Ö
1. –ø—Ä–æ–±—É–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å –µ–µ –≤—Å–µ–º–∏ —Ç–∏–ø–∞–º–∏ `*ReplicationWriter`
([—Å–ø–∏—Å–æ–∫ —Ç—É—Ç](https://a.yandex-team.ru/arc_vcs/direct/apps/event-sourcing-system/logicprocessor/src/main/java/ru/yandex/direct/logicprocessor/processors/mysql2grut/replicationwriter/ReplicationWriterService.kt?rev=r9303069#L19)),
–∫–∞–∂–¥—ã–π –∏–∑ –∫–æ—Ç–æ—Ä—ã—Ö –¥–µ–ª–∞–µ—Ç
([–∫–æ–¥](https://a.yandex-team.ru/arc_vcs/direct/apps/event-sourcing-system/logicprocessor/src/main/java/ru/yandex/direct/logicprocessor/processors/mysql2grut/replicationwriter/BaseReplicationWriter.kt?rev=r9234102#L26))
–ø—Ä–∏–º–µ—Ä–Ω–æ —Å–ª–µ–¥—É—é—â–µ–µ
1. –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤—ã–≤–∞–µ—Ç –≤–Ω—É—Ç—Ä–∏ –∏–∑ –≤—Å–µ–π –ø–∞—á–∫–∏ —Ç–æ–ª—å–∫–æ —Å–≤–æ–∏ –æ–±—ä–µ–∫—Ç—ã
1. –≤—ã–∫–∏–¥—ã–≤–∞–µ—Ç —Ç–µ –æ–±—ä–µ–∫—Ç—ã, –¥–ª—è –∫–æ—Ç–æ—Ä—ã—Ö –≤–Ω—É—Ç—Ä–∏ GrUT'–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–π –æ–±—ä–µ–∫—Ç
1. –ø–∏—à–µ—Ç –≤ GrUT –æ–±—ä–µ–∫—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ –Ω—É–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å –∏–ª–∏ –æ–±–Ω–æ–≤–∏—Ç—å
1. —É–¥–∞–ª—è–µ—Ç –∏–∑ GrUT —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ –æ–±—ä–µ–∫—Ç—ã

–ï—Å–ª–∏ –ª—é–±–æ–π –∏–∑ Writer'–æ–≤ –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —á–∞–Ω–∫–∞ —É–ø–∞–¥–µ—Ç ‚Äî –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä –Ω–∏—á–µ–≥–æ –Ω–µ –∑–∞–∫–æ–º–º–∏—Ç–∏—Ç –≤ –ª–æ–≥–±—Ä–æ–∫–µ—Ä –∏ –Ω–∞ —Å–ª–µ–¥—É—é—â–µ–π –∏—Ç–µ—Ä–∞—Ü–∏–∏ –±—É–¥–µ—Ç –ø–æ–≤—Ç–æ—Ä—è—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É (—ç—Ç–æ—Ç –ø—Ä–æ—Ü–µ—Å—Å –º–æ–∂–µ—Ç –±—ã—Ç—å –±–µ—Å–∫–æ–Ω–µ—á–Ω—ã–º –±–µ–∑ –≤–º–µ—à–∞—Ç–µ–ª—å—Å—Ç–≤–∞ –¥–µ–∂—É—Ä–Ω–æ–≥–æ).


### –°–ø–æ—Å–æ–±—ã –Ω–∞–±–ª—é–¥–µ–Ω–∏—è –∑–∞ —Ç–µ–∫—É—â–∏–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º
- [–≥—Ä–∞—Ñ–∏–∫ –æ—Ç—Å—Ç–∞–≤–∞–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞](https://solomon.yandex-team.ru/?project=direct&cluster=app_java-jobs&service=java-monitoring&l.ess_processor=mysql_to_grut_replication&l.host=CLUSTER&l.sensor=binlog_delay&graph=auto&stack=false&b=6h)
- [Juggler-–ø—Ä–æ–≤–µ—Ä–∫–∞](https://juggler.yandex-team.ru/project/direct.prod/aggregate?host=checks_auto.direct.yandex.ru&service=jobs.Mysql2GrutReplicationProcessor.working.production&project=direct.prod)
- [–õ–æ–≥–∏](https://direct.yandex.ru/logviewer/#~(logType~'messages~form~(fields~(~'log_time~'host~'service~'method~'trace_id~'span_id~'prefix~'log_level~'class_name~'message)~conditions~(service~'direct.jobs~method~'mysql2grut.Mysql2GrutReplicationProcessor)~limit~100~offset~0~reverseOrder~true~showTraceIdRelated~false))$)


### –ö–∞–∫–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –ø–æ—Å—Ç—Ä–∞–¥–∞–µ—Ç –æ—Ç –æ—Ç–∫–∞–∑–∞ –¥–∂–æ–±—ã
–ú–æ–≥—É—Ç –Ω–∞—á–∞—Ç—å—Å—è –æ—à–∏–±–∫–∏ (–æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞) –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –æ–±—ä–µ–∫—Ç–æ–≤ –∏–∑ –ú–∞—Å—Ç–µ—Ä–∞ –∫–∞–º–ø–∞–Ω–∏–π (—Ç–∞–º –¥–∞–Ω–Ω—ã–µ –ø–∏—à—É—Ç—Å—è –≤ —Ç–æ–º —á–∏—Å–ª–µ –≤ GrUT) –¥–ª—è –Ω–æ–≤—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤.

–í –±–ª–∏–∂–∞–π—à–µ–π –ø–µ—Ä–ø–µ—Å–∫—Ç–∏–≤–µ (–∏–ª–∏ —É–∂–µ): GrUT –±—É–¥–µ—Ç –ø–µ—Ä–≤–æ–∏—Å—Ç–æ—á–Ω–∏–∫–æ–º –¥–ª—è –ø–æ–∫–∞–∑–∞ –æ–±—ä—è–≤–ª–µ–Ω–∏–π –∏–∑ –ú–∞—Å—Ç–µ—Ä–∞.

–ï—Å–ª–∏ –¥–æ–ª–≥–æ (\~—Å—É—Ç–∫–∏) –Ω–µ —á–∏–Ω–∏—Ç—å –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä, –º–æ–≥—É—Ç –ø—Ä–∏–π—Ç–∏ –¥–µ–∂—É—Ä–Ω—ã–µ —Å–æ —Å—Ç–æ—Ä–æ–Ω—ã –ª–æ–≥–±—Ä–æ–∫–µ—Ä–∞ —Å —Ç–µ–º —á—Ç–æ —É –Ω–∞—Å important-consumer –Ω–µ –≤—ã—á–∏—Ç—ã–≤–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ.


### –ö–∞–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ (–∏–ª–∏ –∫–æ–º–∞–Ω–¥–∞) –∑–∞–º–µ—Ç—è—Ç –ø—Ä–æ–±–ª–µ–º—É –∏ —á–µ—Ä–µ–∑ –∫–∞–∫–æ–µ –≤—Ä–µ–º—è
–ö–ª–∏–µ–Ω—Ç—ã ‚Äî –ø–æ –æ—à–∏–±–∫–∞–º –≤ –º–∞—Å—Ç–µ—Ä–µ (–µ—Å–ª–∏ –∫–ª–∏–µ–Ω—Ç –Ω–æ–≤—ã–π –∏ –Ω–µ —É—Å–ø–µ–ª/–Ω–µ —Å–º–æ–≥ –ø—Ä–∏–µ—Ö–∞—Ç—å –ø–æ —Ä–µ–ø–ª–∏–∫–∞—Ü–∏–∏ ‚Äî —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∑–∞—è–≤–æ–∫ –±—É–¥–µ—Ç –ø–∞–¥–∞—Ç—å).

–†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∏ ‚Äî –ø–æ –æ—Ç—Å—Ç–∞–≤–∞–Ω–∏—é ESS.


### –ö–æ–Ω—Ç–∞–∫—Ç—ã —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ –∏ –º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤

–†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∏:
- [a-beliakov](https://staff.yandex-team.ru/a-beliakov)
- [elwood](https://staff.yandex-team.ru/elwood)
- [mspirit](https://staff.yandex-team.ru/mspirit)
- [ppalex](https://staff.yandex-team.ru/ppalex)

–ï—Å–ª–∏ –Ω—É–∂–Ω–æ –ø–æ–º–æ—á—å —Å –ø—Ä–∏–æ—Ä–∏—Ç–µ–∑–∞—Ü–∏–µ–π/—ç–∫—Å–ø–µ—Ä—Ç–∞–º–∏ ‚Äî [poldnev](https://staff.yandex-team.ru/poldnev).


### –ñ–µ–ª–∞—Ç–µ–ª—å–Ω–æ–µ –≤—Ä–µ–º—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤ —Å–ª—É—á–∞–µ –ø–æ–ª–æ–º–∫–∏
–†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–ø–ª–∏–∫–∞—Ü–∏—é –∫–ª–∏–µ–Ω—Ç–æ–≤ –∂–µ–ª–∞—Ç–µ–ª—å–Ω–æ –±—ã—Å—Ç—Ä–æ (–ø–æ–ª—á–∞—Å–∞), —á—Ç–æ–±—ã –Ω–µ –ª–æ–º–∞–ª—Å—è –º–∞—Å—Ç–µ—Ä –∫–∞–º–ø–∞–Ω–∏–π.  
–ë–æ–ª–µ–µ –¥–µ—Ç–∞–ª—å–Ω–∞—è –ø–æ—á–∏–Ω–∫–∞ –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Ä–µ–ø–ª–∏–∫—Ü–∞—Ü–∏–∏ –æ—Å—Ç–∞–ª—å–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤ ‚Äî –¥–µ–Ω—å-–Ω–µ—Å–∫–æ–ª—å–∫–æ.


### –°–ø–æ—Å–æ–±—ã —Ä–µ–≥—É–ª–∏—Ä–æ–≤–∞–Ω–∏—è —Ä–∞–±–æ—Ç—ã –¥–∂–æ–±—ã
_–ü—Ä–æ–ø–µ—Ä—Ç–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä—É—é—Ç—Å—è –≤ [—Ç—É–ª–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Å–≤–æ–π—Å—Ç–≤](https://direct.yandex.ru/internal_tools/#set_typed_ppc_property)._

#### –û—Ç–∫–ª—é—á–µ–Ω–∏–µ —Ä–µ–ø–ª–∏–∫–∞—Ü–∏–∏
–î–ª—è –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–∞ –æ–±—ä–µ–∫—Ç–æ–≤ –µ—Å—Ç—å —Å–≤–æ–∏ –ø—Ä–æ–ø–µ—Ä—Ç–∏, –ø–æ–∑–≤–æ–ª—è—é—â–∏–µ –ø–æ—à–∞—Ä–¥–æ–≤–æ –æ—Ç–ª—é—á–∞—Ç—å (=–ø—Ä–æ–ø—É—Å–∫–∞—Ç—å) –æ–±—Ä–∞–±–æ—Ç–∫—É –æ–±—ä–µ–∫—Ç–æ–≤ —ç—Ç–æ–≥–æ —Ç–∏–ø–∞:
- `grut_skip_campaigns_replication_shards`
- `grut_skip_adgroups_replication_shards`
- `grut_skip_banners_replication_shards`
- `grut_skip_biddable_show_condition_replication_shards`
- `grut_skip_minus_phrases_replication_shards`
- `grut_skip_mobile_content_replication_shards`
- `grut_skip_vcards_replication_shards`
- –≤–æ–∑–º–æ–∂–Ω–æ –ø–æ—Å–ª–µ –Ω–∞–ø–∏—Å–∞–Ω–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –ø–æ—è–≤—è—Ç—Å—è –∏ –¥—Ä—É–≥–∏–µ (–¥–ª—è –Ω–æ–≤—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤), —Å —Ç–µ–º –∂–µ –ø—Ä–µ—Ñ–∏–∫—Å–æ–º

–í –∫–∞—á–µ—Å—Ç–≤–µ –∑–Ω–∞—á–µ–Ω–∏—è –Ω—É–∂–Ω–æ —É–∫–∞–∑—ã–≤–∞—Ç—å –Ω–æ–º–µ—Ä–∞ —à–∞—Ä–¥–æ–≤ —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é, –∏–ª–∏ `all` –¥–ª—è –æ—Ç–∫–ª—é—á–µ–Ω–∏—è —Å—Ä–∞–∑—É –≤–æ –≤—Å–µ—Ö.  
–¢–∞–∫–∂–µ –¥–ª—è —Ç–æ—á–µ—á–Ω–æ–≥–æ –ø—Ä–æ–ø—É—Å–∫–∞ –ø–ª–æ—Ö–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–±—â–∏–π –º–µ—Ö–∞–Ω–∏–∑–º [{#T}](../../../guide/jeri/howto-ess-blacklist.md).

#### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ä–µ–ø–ª–∏–∫–∞—Ü–∏–∏
–ï—Å—Ç—å —Ç—Ä–∏ –ø—Ä–æ–ø–µ—Ä—Ç–∏, –æ—Ç–≤–µ—á–∞—é—â–∏–µ –∑–∞ —á–∞–Ω–∫–æ–≤–∞–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ GrUT'—É:
- `grut_replication_create_or_update_batch_size`
- `grut_replication_delete_batch_size`
- `grut_replication_get_batch_size`


{% note warning %}

–ù–µ—Å–º–æ—Ç—Ä—è –Ω–∞ –Ω–∞–∑–≤–∞–Ω–∏–µ, –º–æ–≥—É—Ç –≤–ª–∏—è—Ç—å –Ω–µ —Ç–æ–ª—å–∫–æ –Ω–∞ –¥–∂–æ–±—É —Ä–µ–ø–ª–∏–∫–∞—Ü–∏–∏.

{% endnote %}

–ö—Ä–æ–º–µ —Ç–æ–≥–æ, –¥–∞–Ω–Ω—ã–µ –≤ –æ—á–µ—Ä–µ–¥—å —Ä–µ–ø–ª–∏–∫–∞—Ü–∏–∏ –º–æ–∂–µ—Ç –ø–∏—Å–∞—Ç—å –≤–∞–Ω—à–æ—Ç Mysql2GrutReplicationOneshot.
–°–∫–æ—Ä–æ—Å—Ç—å —Ä–∞–±–æ—Ç—ã –≤–∞–Ω—à–æ—Ç–∞ —Ä–µ–≥—É–ª–∏—Ä—É–µ—Ç—Å—è –ø—Ä–æ–ø–µ—Ä—Ç—è–º–∏:
- `mysql2grut_oneshot_chunk_size`
- `mysql2grut_oneshot_relax_time_sec`

–ü—Ä–æ–≤–µ—Ä–∏—Ç—å, –∑–∞–ø—É—â–µ–Ω –ª–∏ –≤–∞–Ω—à–æ—Ç –º–æ–∂–Ω–æ –Ω–∞ c—Ç—Ä–∞–Ω–∏—Ü–µ –∑–∞–ø—É—Å–∫–æ–≤ –≤–∞–Ω—à–æ—Ç–æ–≤: https://direct.yandex.ru/internal_tools/#oneshot_launches
 
### –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã –ø–æ–ª–æ–º–æ–∫
#### —Ç–∞–π–º–∞—É—Ç—ã –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ GrUT'—É
–ú–æ–∂–µ—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å –≤ –ª–æ–≥–∞—Ö –∫–∞–∫ —Å–æ–æ–±—â–µ–Ω–∏–µ
`ru.yandex.grut.object_api.client.GrutGrpcDeadlineExceededException: io.grpc.StatusRuntimeException: DEADLINE_EXCEEDED: deadline exceeded after 4.999949951s`

–ú–æ–∂–Ω–æ –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –ø–æ–∫—Ä—É—Ç–∏—Ç—å —Ä–∞–∑–º–µ—Ä —á–∞–Ω–∫–∞.  
–ñ–µ–ª–∞—Ç–µ–ª—å–Ω–æ —Å–¥–∞–º–ø–∏—Ç—å —Ç–µ–∫—Å—Ç –∏—Å–∫–ª—é—á–µ–Ω–∏—è –≤ —Ç–∏–∫–µ—Ç, —á—Ç–æ–±—ã –∏–º–µ—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø–æ request_id / trace_id / span_id / address / host –ø–æ—Ç–æ–º —Ä–∞–∑–¥–µ–±–∞–∂–∏—Ç—å –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ ORM –ø—Ä–∏—á–∏–Ω—É —Ç–æ—Ä–º–æ–∑–æ–≤.


#### –ª–µ–∂–∏—Ç –≥—Ä—É—Ç
ü§∑‚Äç‚ôÇÔ∏è, –Ω–∞–ø–∏—à–∏—Ç–µ [–¥–µ–∂—É—Ä–Ω–æ–º—É GrUT'–∞](https://abc.yandex-team.ru/services/grut/duty/?interval=P1M)

### —Ä–∞—Å—Ç–µ—Ç –ª–∞–≥ —Ä–µ–ø–ª–∏–∫–∞—Ü–∏–∏
ü§∑‚Äç‚ôÇÔ∏è, –Ω–∞–ø–∏—à–∏—Ç–µ [–¥–µ–∂—É—Ä–Ω–æ–º—É GrUT'–∞](https://abc.yandex-team.ru/services/grut/duty/?interval=P1M)


#### –æ—Ç–ª–∏—á–∞—é—â–∏–π—Å—è parent –æ–±—ä–µ–∫—Ç–∞
–í—ã–≥–ª—è–¥–∏—Ç –∫–∞–∫ –æ—à–∏–±–∫–∞ _Provided parent key <NN> is different from existing <MM>_.
–ü—Ä–∏–º–µ—Ä:
```
ru.yandex.grut.object_api.client.YtGenericException:
'Error executing transactional request; transaction aborted'
<== 'Failed to check the parent key for minus phrase 15699309'
<== 'Provided parent key 31830584 is different from existing 53848217'
```

–í–æ–∑–º–æ–∂–Ω–æ –∏–∑-–∑–∞ –±–∏—Ç—ã—Ö –¥–∞–Ω–Ω—ã—Ö –≤ –Ω–∞—à–µ–π –±–∞–∑–µ (–¥—É–±–ª–∏ –ø–æ id) ‚Äî –Ω—É–∂–Ω–æ –∏—Å–ø—Ä–∞–≤–ª—è—Ç—å –¥–∞–Ω–Ω—ã–µ.  
–í –∫–∞—á–µ—Å—Ç–≤–µ "–ø–æ–¥–æ—Ä–æ–∂–Ω–∏–∫–∞" ‚Äî –ø—Ä–æ–ø—É—Å–∫–∞—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –æ–±—ä–µ–∫—Ç —á–µ—Ä–µ–∑ ess –∏–ª–∏ –æ—Ç–∫–ª—é—á–∞—Ç—å –≤—Å—é —Ä–µ–ø–ª–∏–∫–∞—Ü–∏—é —Ç–∏–ø–∞ –≤ —ç—Ç–æ–º —à–∞—Ä–¥–µ.


#### –∏—Å–∫–ª—é—á–µ–Ω–∏—è –≤ –∫–æ–¥–µ
–ú–æ–≥—É—Ç –±—ã—Ç—å –æ—à–∏–±–∫–∏ –Ω–∞ —á—Ç–µ–Ω–∏–∏ –∏ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö –∏–∑ –±–∞–∑—ã (—á—Ç–æ-—Ç–æ –Ω–µ –ø—Ä–µ–¥—É—Å–º–æ—Ç—Ä–µ–ª–∏ –∏–ª–∏ –±–∞–≥ –≤ –∫–æ–¥–µ).

–ó–¥–µ—Å—å —Å–∫–æ—Ä–µ–µ –Ω—É–∂–Ω–æ —á–∏–Ω–∏—Ç—å –∫–æ–¥, –≤ –∫–∞—á–µ—Å—Ç–≤–µ "–ø–æ–¥–æ—Ä–æ–∂–Ω–∏–∫–∞" ‚Äî –ø—Ä–æ–ø—É—Å–∫–∞—Ç—å –æ–±—ä–µ–∫—Ç (ESS-blacklist) –∏–ª–∏ –æ—Ç–∫–ª—é—á–∞—Ç—å —Ä–µ–ø–ª–∏–∫–∞—Ü–∏—é —ç—Ç–æ–≥–æ —Ç–∏–ø–∞ –æ–±—ä–µ–∫—Ç–æ–≤ (–≤–æ –≤—Å–µ—Ö —à–∞—Ä–¥–∞—Ö –∏–ª–∏ –æ–¥–Ω–æ–º, —Å–º–æ—Ç—Ä–∏ –ø—Ä–æ–ø–µ—Ä—Ç–∏ –≤—ã—à–µ).


### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ: —Ç–æ–Ω–∫–æ—Å—Ç–∏ –∏ –ø–æ–¥–≤–æ–¥–Ω—ã–µ –∫–∞–º–Ω–∏
#### –ö–∞–∫ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å trace –∑–∞–ø—Ä–æ—Å–∞ –≤ GrUT'–µ
–î–ª—è —ç—Ç–æ–≥–æ –µ—Å—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å [Jaeger UI](https://jaeger.yt.yandex-team.ru/grut/search) ‚Äî —Ç–∞–º (–≤ –ø—Ä–∞–≤–æ–º —É–≥–ª—É) –µ—Å—Ç—å –ø–æ–∏—Å–∫ "Lookup by Trace ID".

–°–∞–º trace_id –º–æ–∂–Ω–æ –¥–æ–±—ã—Ç—å –¥–≤—É–º—è —Å–ø–æ—Å–æ–±–∞–º–∏:
1. –ø–æ–ª—É—á–∏—Ç—å –∏–∑ —Ç–µ–∫—Å—Ç–∞ –æ—à–∏–±–∫–∏,

   {% cut "–Ω–∞–ø—Ä–∏–º–µ—Ä –∏–∑ —Å–æ–æ–±—â–µ–Ω–∏—è" %}

   `Job Mysql2GrutReplicationProcessor shard_24 threw Exception:
   ru.yandex.grut.object_api.client.YtGenericException: 'Error executing transactional request; transaction aborted' <== 'Error fetching data' <== 'Internal RPC call failed' <== 'Chunk data is not preloaded yet'; full error:{"code"=1;"message"="Error executing transactional request; transaction aborted";"attributes"={"address"="end6xkibsird3i2g.sas.yp-c.yandex.net:8090";"method"="CreateObjects";"realm_id"="0-0-0-0";"request_id"="601343f8-650e8a71-ce38ffb2-a556d4d7";"service"="NGrut.NClient.NApi.NProto.ObjectService";"timeout"=4999;"host"="end6xkibsird3i2g.sas.yp-c.yandex.net";"pid"=8;"tid"=2688112837607664097u;"fid"=18446450125620019486u;"datetime"="2022-04-04T15:00:15.373785Z";"trace_id"="d12ec700-0-3a8b9e5e-c8a089c7";"span_id"=5796702458140037413u};"inner_errors"=[{"code"=1;"message"="Error fetching data";"attributes"={"host"="end6xkibsird3i2g.sas.yp-c.yandex.net";"pid"=8;"tid"=5194623260488245463u;"fid"=18446450125613934211u;"datetime"="2022-04-04T15:00:15.373448Z";"trace_id"="d12ec700-0-3a8b9e5e-c8a089c7";"span_id"=5796702458140037413u};"inner_errors"=[{"code"=1;"message"="Internal RPC call failed";"attributes"={"address"="myt0-2525-rpc-proxy-nash.myt.yp-c.yandex.net:9013";"connection_id"="9b62ba35-48705c3b-726f8576-12a729a6";"method"="VersionedLookupRows";"realm_id"="0-0-0-0";"request_id"="97cdfdb-b4f38b92-c1c354e5-f44eaed8";"service"="ApiService";"timeout"=5009u;"host"="myt0-2525-rpc-proxy-nash.myt.yp-c.yandex.net";"pid"=865609;"tid"=14133337292894385343u;"fid"=18435521298187025446u;"datetime"="2022-04-04T15:00:15.371669Z";"trace_id"="d12ec700-0-3a8b9e5e-c8a089c7";"span_id"=17968384373963170016u};"inner_errors"=[{"code"=1;"message"="Chunk data is not preloaded yet";"attributes"={"address"="sas1-2496-node-seneca-sas.sas.yp-c.yandex.net:9012";"chunk_id"="4c54e-5446a5-3ee0064-4f23ad03";"connection_id"="d1a0487e-730a2de4-ff54a0d-5e52aa48";"method"="Multiread";"realm_id"="0-0-0-0";"request_id"="9e271b7a-67fbab6-8787c1cd-bc99a390";"service"="QueryService";"store_id"="4c54e-5446a5-3ee0064-4f23ad03";"table_path"="//home/grut/stable/db/schemas";"tablet_id"="49762-10d351-3ee02be-fab0c6fe";"timeout"=5009;"host"="sas1-2496-node-seneca-sas.sas.yp-c.yandex.net";"pid"=282;"tid"=11366205603471980480u;"fid"=18446440720490208886u;"datetime"="2022-04-04T15:00:15.365673Z";"trace_id"="d12ec700-0-3a8b9e5e-c8a089c7";"span_id"=2048234220288699412u}}]}]}]}	at ru.yandex.grut.object_api.client.ErrorsKt.getException(Errors.kt:63) ~[java-client.jar:?]`

   {% endcut %}

   trace_id —ç—Ç–æ ‚Äî `d12ec700-0-3a8b9e5e-c8a089c7`
2. —Å–∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –¥–∏—Ä–µ–∫—Ç–æ–≤—ã–π trace_id (—á–∏—Å–ª–æ–≤–æ–π) —Å–∫—Ä–∏–ø—Ç–æ–º –∏–∑ –∫–æ—Ä–Ω—è –∞—Ä–∫–∞–¥–∏–∏. –ø—Ä–∏–º–µ—Ä:
   ```sh
   arcadia % ./grut/deploy/script/trace_id_decode.py  4218639605892680135
   d12ec700-0-3a8b9e5e-c8a089c7
   ```
   –∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞—Ç—å —Å–∫—Ä–∏–ø—Ç –∏–ª–∏ —Å–æ–±–∏—Ä–∞—Ç—å –Ω–µ –Ω–∞–¥–æ, —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–∞–∫. –Ω–∞—à trace_id –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –∞—Ä–≥—É–º–µ–Ω—Ç–æ–º –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏

–ü–æ–ª—É—á–µ–Ω–Ω—ã–π id –º–æ–∂–Ω–æ –≤–±–∏—Ç—å –≤ –ø–æ–∏—Å–∫ –∏–ª–∏ —Å—Ä–∞–∑—É –æ—Ç–∫—Ä—ã—Ç—å –ø–æ —Å—Å—ã–ª–∫–µ [https://jaeger.yt.yandex-team.ru/grut/trace/<–ø–æ–¥—Å—Ç–∞–≤—å_trace_id>](https://jaeger.yt.yandex-team.ru/grut/trace/d12ec700-0-3a8b9e5e-c8a089c7).

#### –ö–∞–∫ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –¥–∞–Ω–Ω—ã–µ –≤ GrUT
–î–æ—Å—Ç—É–ø –≤ —Å–∞–º–∏ YT —Ç–∞–±–ª–∏—Ü—ã –Ω–µ –¥–∞—é—Ç (–ø–æ –≤–æ–ø—Ä–æ—Å–∞–º –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏), –≤–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ –ø—Ä–µ–¥–ª–∞–≥–∞—é—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–æ–Ω—Å–æ–ª—å–Ω—É—é —É—Ç–∏–ª–∏—Ç—É **grut-orm**
–∏–ª–∏ —Å–º–æ—Ç—Ä–µ—Ç—å –≤ –±–µ–∫–∞–ø—ã —Ç–∞–±–ª–∏—Ü (–ª–µ–∂–∞—Ç [–Ω–∞ –•–∞–Ω–µ –≤ //home/grut/backups/stable/latest/db](https://yt.yandex-team.ru/hahn/navigation?offsetMode=key&path=//home/grut/backups/stable/latest/db)).

–î—ã—Ä–∫–∏ –µ—Å—Ç—å —Å ppcdev.
–°–Ω–∞—á–∞–ª–∞ —É—Ç–∏–ª–∏—Ç—É –Ω—É–∂–Ω–æ —Å–æ–±—Ä–∞—Ç—å (–∏–∑ –∫–æ—Ä–Ω—è –∞—Ä–∫–∞–¥–∏–∏): `ya make --checkout grut/tools/cli/orm/`.
–ó–∞—Ç–µ–º –º–æ–∂–Ω–æ –¥–µ–ª–∞—Ç—å –∑–∞–ø—Ä–æ—Å—ã (get –∏–ª–∏ select).
–ü—Ä–∏–º–µ—Ä:
```sh
./grut/tools/cli/orm/grut-orm get campaign 72746886 --address=stable  --selector='/spec' --format=yson --no-tabular
```
–ü–æ–¥—Ä–æ–±–Ω–µ–µ –≤ [README –Ω–∞ —É—Ç–∏–ª–∏—Ç—É](https://a.yandex-team.ru/arc/trunk/arcadia/grut/tools/cli/orm/README.md), –∏–ª–∏ —Å–ø—Ä–∞—à–∏–≤–∞—Ç—å –ø–æ–º–æ—â–∏ –≤ —á–∞—Ç–∏–∫–µ GrUT'–∞.

