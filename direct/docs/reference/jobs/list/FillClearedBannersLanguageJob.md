## FillClearedBannersLanguageJob

### Продукт/подсистема

Определения языка баннера.

Известные кейсы использования языка:
- язык отправляется в БК
- валидация совместимости гео группы объявлений с языком баннеров


### Роль в работе продукта/подсистемы

Поле, хранящее язык объявления, - `ppc.banners.language` должно пересчитываться при любом изменении текста баннера. Логика определения языка лежит в java и из перла в него не удобно ходить. Поэтому в перле решили просто затирать язык и добавлять баннер в очередь на заполнение языка.



### Датафлоу

- Читает очередь из таблицы `ppc.banners_to_fill_language_queue`
- Вычисляет язык
- Обновляет язык в `ppc.banners.language`.

(Возможно еще чтение из каких-то таблиц ppc/ppcdict для получения доп. инфы).


### Способы наблюдения за текущим состоянием

- [Juggler-проверка](https://juggler.yandex-team.ru/check_details/?host=checks_auto.direct.yandex.ru&service=jobs.FillClearedBannersLanguageJob.working.production&query=&last=1DAY)
- [Логи](https://direct.yandex.ru/logviewer/short/Yz20WmaK3nwp4k) - не забудьте исправить даты!


### Какая функциональность пострадает от отказа джобы

Если язык баннера будет отсутствовать в базе, то транспорт в БК будет ходить за языком в java-intapi. На сколько это критично, сказать сложно, зависит от количества пострадавших баннеров.


### Как пользователи (или команда) заметят проблему и через какое время

Теоретически поломка со временем может привести к увеличению нагрузки на java-intapi и замедлить транспорт.


### Контакты разработчиков и менеджеров

Разработчики: [Сергей Димитров](https://staff.yandex-team.ru/dimitrovsd), [Игорь Гердлер](https://staff.yandex-team.ru/gerdler)


### Желательное время исправления в случае поломки

2-3 дня


### Способы регулирования работы джобы

Отсутствуют.


### Известные причины поломок

Отсутствуют.


### Дополнительно: тонкости и подводные камни

Отсутствуют.
