## ReceiveOrganizationStatusChangesJob

### Продукт/подсистема

Реклама Организаций


### Роль в работе продукта/подсистемы

Обрабатывает изменение статуса опубликованности организации.


### Датафлоу

1. Получает события изменений статусов из топика `sprav/altay/publishing-status-changes`
2. Обновляет `organizations.status_publish` самым свежим статусом
3. Сбрасывает статусы модерации и синхронизации с БК у объявлений, где привязана изменённая организация

### Способы наблюдения за текущим состоянием

- [Juggler-проверка](https://juggler.yandex-team.ru/check_details/?host=checks_auto.direct.yandex.ru&service=jobs.ReceiveOrganizationStatusChangesJob.working.production)
- [Логи](https://nda.ya.ru/t/6oFLW0dK3rRQys)


### Какая функциональность пострадает от отказа джобы

- (критично) Будем показывать клиенту неправильный статус. Не отправим объявления в БК после публикации организации в Справочнике. При этом показов по распубликованным организациям не будет — БК отдельно проверяет статус опубликованности, когда забирает данные из Справочника


### Как пользователи (или команда) заметят проблему и через какое время

- Пользователи заметят, что объявления показываются без данных организации

### Контакты разработчиков и менеджеров

Разработчики: [Максим Логунов](https://staff.yandex-team.ru/maxlog), [Игорь Гердлер](https://staff.yandex-team.ru/gerdler)


### Желательное время исправления в случае поломки

Дни

