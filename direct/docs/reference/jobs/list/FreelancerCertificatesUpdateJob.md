## FreelancerCertificatesUpdateJob

### Продукт/подсистема

Фрилансеры в Директе.

Фрилансер - частный предприниматель, прошедший сертификацию в Яндексе на знание инструментов Директа и возмездно помогающий другим клиентам настраивать рекламные кампании в Директе.

Карточка фрилансера - информация о фрилансере, содержащая его самоописание, фотографию и контактные данные. Карточка фрилансера не может изменяться после прохождения модерации, может быть создана только новая версия.


### Роль в работе продукта/подсистемы

Синхронизирует сертификаты фрилансеров из Сертификатницы в Директ и проставляет фрилансерам статус видимости на странице фрилансеров.


### Датафлоу

- Ручка сертификатницы - `http://expert-api.commerce-int.yandex.ru/v1/certificates/findByUids`
- Столбцы `certificates` и `is_searchable` в таблице [ppc.freelancers](https://direct-dev.yandex-team.ru/db/ppc/tables/freelancers.html).


### Способы наблюдения за текущим состоянием

- [Juggler-проверка](https://juggler.yandex-team.ru/check_details/?host=checks_auto.direct.yandex.ru&service=jobs.FreelancerCertificatesUpdateJob.working.production&query=&last=1DAY)
- [Логи](https://direct.yandex.ru/logviewer#~(logType~'messages~form~(fields~(~'log_time~'service~'method~'span_id~'message)~conditions~(service~'direct.jobs~method~'certimport.FreelancerCertificatesUpdateJob)~limit~100~offset~0~reverseOrder~true~showTraceIdRelated~false))$)


### Какая функциональность пострадает от отказа джобы

У фрилансеров, прошедших тест на новый сертификат, он не прорастёт в интерфейсе. Если до этого фрилансер был исключён из списка фрилансеров из-за отсутствия действующих сертификатов, то он так и не вернётся на страницу фрилансеров. И наоборот, фрилансеры с истекшим сертификатом продолжат показываться в списке фрилансеров.


### Как пользователи (или команда) заметят проблему и через какое время

В интерфейсе у фрилансеров перестанут появляться новые сертификаты, а фрилансеры, пересдавшие сертификат, так и не вернуться на страницу фрилансеров.


### Контакты разработчиков и менеджеров

Разработчики: [Антон Тухватулин](https://staff.yandex-team.ru/ajkon), [Максим Логунов](https://staff.yandex-team.ru/maxlog)


### Желательное время исправления в случае поломки

Дни. Фрилансеров мало (десятки), пересдача сертификатов обычно делается заранее. Значимо страдать (не получать новых клиентов со страницы поиска фрилансеров в Директе) будут только фрилансеры допустившие истекание своего предыдущего сертификата, в результате чего они были убраны со страницы фрилансеров.


### Способы регулирования работы джобы




### Известные причины поломок




### Дополнительно: тонкости и подводные камни
