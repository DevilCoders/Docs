# Релизы canvas

## Запуск по новой схеме
Запуск регрессии canvas теперь осуществляется [в рамках регрессии dna](regression-assessors.md). При необходимости можно запустить только регрессию canvas, выбрав сьют canvas_regression в лаунчере на шаге 10

## Запуск по старой схеме

1. **Создать тикет** в очереди DIRECTAS [по шаблону](https://st.yandex-team.ru/createTicket?template=6686&queue=DIRECTAS). Компонента **canvas** у тикета должна быть уже выставлена.  
Если шаблон недоступен, добавьте его себе кликнув [по этой ссылке](https://st.yandex-team.ru/settings/templates/issues?name=Регрессия%20релизов%20canvas&owner=1120000000014295&queue=DIRECTAS)

   {% cut "скрин добавленного шаблона" %}

   ![alt text](https://jing.yandex-team.ru/files/sonick/2021-03-12_11-32-40.png "скрин добавленного шаблона")

   {% endcut %}

1. В названии тикета указать актуальную **версию релиза**
1. В поле **Assignee** тикета указать себя
1. После того как тикет создан и все готово для запуска задания асессорам, нажимаем кнопку **Run testing by Assessors** — тикет перейдет в статус _Ready For Assessors_ и появится комментарий от робота со ссылкой на конфигурацию.
**Переходим по ссылке**

   {% cut "скрин комментария в тикете" %}

   ![alt text](https://jing.yandex-team.ru/files/sonick/2021-03-12_16-57-54.png "скрин комментария в тикете")

   {% endcut %}

1. В блоках "Информация про стенд" и "Кого призвать в тикет" нмичего не меняем, в них уже выставлены дефолтные значения "Стенд есть в тикете" и "Взять из конфига" соответственно

   {% cut "скриншот" %}

   ![alt text](https://jing.yandex-team.ru/files/sonick/2022-01-14_14-47-50.png "скрин информация про стенд и кого призывать")

   {% endcut %}

1. Выбрать **Проверить РЕГРЕСС**

   {% cut "скрин запуск регрессии" %}

   ![alt text](https://jing.yandex-team.ru/files/sonick/2021-03-12_17-01-55.png "скрин запуск регрессии")

   {% endcut %}

1. Вводим дополнительные условия, если нужно, чтобы асессоры дополнительно обратили на что-то внимание при тестировании (опционально)

   {% cut "скрин доп условия" %}

   ![alt text](https://jing.yandex-team.ru/files/sonick/2021-03-12_17-02-17.png "скрин доп условия")

   {% endcut %}

1. Как запустить регресс -> **Указать сьюты**, чек-бокс **"Создать тикет в асессорской очереди"** должен быть деактивирован

   {% cut "скрин" %}

   ![alt text](https://jing.yandex-team.ru/files/sonick/2021-10-25_14-38-57.png "скрин сьюты")

   {% endcut %}

1. Имя версии в TestPalm - **Использовать имя по-умолчанию**, Хотите ввести код доступа к рану? - **Нет, код на старт не нужен**, Длительность выполнения регресса - 1. Все значения дефолтные - не изменяем

   {% cut "скрин настройки версии и рана" %}

   ![alt text](https://jing.yandex-team.ru/files/sonick/2022-01-14_15-12-54.png "скрин настройки версии и рана")

   {% endcut %}

1. Наполняем таблицу сьютами, должно быть выбрано 5 сьютов: **cpc_video, cpm_video, rmp_video, rmp_add, video_add**.
В дропдауне "Окружение" для всех сьютов будут выставлены дефолтные значения **Browser**, значения менять не нужно.
В поле брони для всех сьютов выбираем **Использовать бронь из файла** - в дропдаун подставится регулярная бронь для регрессии Директа _a4fca47c-9d6a-4fc0-b7d0-cc07f22d76b4_ 

    Сверить регулярные брони можно [в Бронировщике](https://booking.yandex-team.ru/#/bookings?type=regular). Если нет доступа к брони, запросите роль через IDM по [инструкции в Бронировщике](https://booking.yandex-team.ru/#/help?section=quota-control).


   {% cut "скрин списка выбранных сьютов" %}

   ![alt text](https://jing.yandex-team.ru/files/sonick/2022-01-14_15-14-46.png "скрин список сьютов")

   {% endcut %}

1. Нажать на кнопку в конце "Закончить конфигурацию".

   {% cut "скрин завершения конфигурации" %}

   ![alt text](https://jing.yandex-team.ru/files/sonick/2022-01-14_15-22-07.png "скрин завершения конфигурации")

   {% endcut %}

1. Перевести тикет DIRECTAS в статус _Testing_ 

1. В релизный тикет комментарием пишем _"Создан тикет на регрессию асессорами"_ и прикладываем ссылку на этот тикет.

1. Как только асессоры выполнят регрессию, робот призовет вас в тикет. Разбираем созданные ими баги по правилам, описанным [в документации по разбору](assessors-bugs-resolution.md). Баги можно будет найти в тикете из п.1. или [на релизной борде](https://st.yandex-team.ru/dashboard/50158)
   - Передаем найденные баги в разработку: создаем их в очереди DIRECT (не переносим!!! это важно для статистики команды асессоров). Чиним баги ТС в релизе, процесс тут не меняется.
   - **Проблемы в кейсах и тестовых данных чиним в приоритетном порядке до старта следующей регрессии, чтобы в следующем запуске кейсы выполнились.**

За процессом выполнения можно следить:
- в Хитмане по полю "Статус" <https://hitman.yandex-team.ru/projects/testing_direct/testing_direct/?jobCreationTimeQuery=YEAR&jobPage=1&pageSize=20>  

   {% cut "скрин статуса в Хитмане" %}

   ![alt text](https://jing.yandex-team.ru/files/sonick/2021-03-12_11-43-52.png "скрин статуса в Хитмане")

   {% endcut %}

- или в TestPalm тоже по полю "Status" <https://testpalm.yandex-team.ru/direct-assessors/testruns>

   {% cut "скрин статуса в TestPalm" %}

   ![alt text](https://jing.yandex-team.ru/files/sonick/2021-03-12_11-45-35.png "скрин статуса в TestPalm")

   {% endcut %}

1. После окончания разбора всех багов, созданных асессорами, закрыть тикет на регрессию очереди DIRECTAS из п.1.
