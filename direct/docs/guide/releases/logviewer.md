# Релизы logviewer


## Сборка 

Сборка логвьювера происходит в [NewCI](https://a.yandex-team.ru/projects/direct/ci/releases/timeline?dir=direct%2Flogviewer&id=deploy-release). 
Инструкцию по сборке в NewCI можно [почитать тут](release-newci.md).

## Тестирование { #testing }

Убедиться, что в челисте автоматически проставились галки:
1. Юнит-тесты
2. Автотесты
3. Тикеты "Тестировать"
4. Тикеты "Разобраться"
5. devtest/dev7

Если это не так, пройтись по тикетам "Тестировать" и "Разобраться" из комментария "Главное про релиз" ([пример комментария](https://st.yandex-team.ru/DIRECT-159244#61b8baf8746a795d01d9631b)), и написать исполнителям, чтобы они подготовили свои тикеты к релизу.

После того, как первые 5 пунктов чеклиста будут выполнены, проверить работоспособность приложения logviewer на ТС.

Для этого под пользователем с ролью super или superreader:

1. открыть страницу <https://test.direct.yandex.ru/logviewer>
2. выполнить выборку из `messages` за последний час  
ожидание: запрос не упадёт и вернёт сообщения, начиная с указанного времени
3. добавить фильтрацию по `service:direct.web`  
ожидание: не падает и возвращает только записи с указанным `service`
4. перейти через "лупу" в колонке `span_id` в лог `nginx_access`  
ожидание: открывается новая страница с правильным фильтром и данными
5. на странице с `messages` логами в выпадашке "Columns" выбрать только `service` и кликнуть галочку справа от "Show stats"  
ожидание: покажется агрегированная статистика
6. скачать одну из предыдущих выборок в xls

По результату тестирования в релизном тикете оставить комментарий вида:
```
Проверил на ТС:
- приложение работает
- логи отображаются
- фильтрация работает
- агрегация работает
- переход в другой лог работает
- выгрузка в xls работает
```

При завершении тестирования нужно пойти в граф релиза и нажать на кубике "Manual testing finished" кнопку подтверждения ([инструкция](https://docs.yandex-team.ru/direct-dev/guide/releases/release-newci#testirovanie-reliza)).  Статус релизного тикета изменится на `RM Acceptance`.

## Ссылки { #links }

- logviewer-test в ЯДеплое: <https://deploy.yandex-team.ru/stage/direct-logviewer-test>
