# Получить доступ к данным Директа в YT (сервис direct-analytics)

Доступ к данным Дирета в YT делаем через специальный abc-сервис: <https://abc.yandex-team.ru/services/direct-analytics/>

Если тебе надо получить доступ к выгрузке БД, логам Директа и т.д., не надо делать запросы в idm на чтение конкретных таблиц/каталогов. 

Запрашивай роль Аналитик в сервисе direct-analytics.
Роль должна быть именно "Аналитик", другая не сработает. Запросить роль: [**можно по этой ссылке**](https://idm.yandex-team.ru/#rf-role=aGDxYKp0#abc/services/meta_search/ad/productsforadvertisers/direct/direct-analytics/*/4(fields:()),rf-expanded=aGDxYKp0,rf=1) или на странице сервиса в abc в шапке нажать большой плюс рядом с "Команда — M человек и N роботов", там форма из двух полей.

Если доступ к данным нужен не навсегда, а на период эксперимента/внедрения, заказывай временную роль. Роль на квартал/полгода/год лучше, чем вечная.

Зааппрувить роль попроси:

- для комдепа: [Анну Кожанову](https://staff.yandex-team.ru/kozhanova), [Александра Салтыкова](https://staff.yandex-team.ru/saltykov)
- для Геосервисов: [Алексея Сикорского](https://staff.yandex-team.ru/asikorsky)
- для продуктовых проектов с Директом: [Дмитрия Суворова](https://staff.yandex-team.ru/dmsuvorov)
- в сложных случаях: [Романа Кухту](https://staff.yandex-team.ru/kuhtich) или [Александра Дуплищева](https://staff.yandex-team.ru/ppalex)

Актуальный список аппруверов есть в шапке сервиса в abc. 

## Частный случай: доступ к home/direct/db для роботов { #home-direct-db-for-robots }
Из-за особенностей организации выгрузки, доступ нужно запрашивать в директорию `//home/direct/db-archive`.


Не в `//home/direct/db` (это симлинк, YT не разрешит),
и не в `//home/direct/db-archive/YYYY-MM-DD` (эта директория живет ограниченное время).

## Частный случай: доступ к home/direct/mysql-sync/current
Здесь ситуация аналогичная: доступ нужно запрашивать в директорию `//home/direct/mysql-sync`.

## Для аппруверов: что подтверждать, что нет

- аппрувить только роль Аналитик
- задача/проект, ради которых делается доступ, должна быть полезной
- TODO: что нельзя аппрувить
- если данные нужны для конечного проекта (не для постоянного процесса), роль надо выдавать временную (месяц, квартал, полгода)
- с вопросами приходи к [Роману Кухте](https://staff.yandex-team.ru/kuhtich)


## Воркфлоу { #workflow }

Если эта страница переезжает, надо обновить ссылку в README в YT, см. пример в тикете <https://st.yandex-team.ru/DIRECTADMIN-8948>


## Почему мой запрос был отклонен? { #why-declined }
- в запросе не был указан тикет про решаемую задачу
- в тикет нет доступа (у `ppalex` / `kuhtich`)
- в тикете не сказано какие именно данные будут использоваться, нет примера YQL-запросов
- запрос сделан в "текущую" директорию с выгрузкой, например
   - `//home/direct/db-archive/2019-02-30`
   - `//home/direct/db`
   - `//home/direct/mysql-sync/v16.3`
   - `//home/direct/mysql-sync/current`
- запрос вечного (без ограничения по времени) доступа в конкретную директорию _(касается доступов для людей через IDM, а не ABC)_
