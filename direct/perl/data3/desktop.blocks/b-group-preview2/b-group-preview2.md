r109458
#b-group-preview2#

##Описание##
Это блок попапа превью группы (содержит превьюшки баннеров группы)

###Автор###
[cyn](https://staff.yandex-team.ru/cyn)

###Ответственный###
[cyn](https://staff.yandex-team.ru/cyn)

###Где используется###
Используется на страницах кампании/редактирования группы/статистики
например в блоке `b-group-preview2-opener`

###Описание###
* dm либо берётся существующее,
    либо vm создаёт пустую dm, и дёргает метод `requestGroupDataAndUpdate` который ходит на сервер за данными, и наполняет ими dm
* vm попапа групп заполняется из dm групп (пока `m-group`/`dm-dynamic-group`) и при их изменениях обновляется соответствующие поля
* у блока есть табы, это как вид превью (модификаторы `view` блока `b-banner-preview2`),
    так и способ фильтрации баннеров группы (например на табе РСЯ-постер не будет баннеров без картинки)
    "Архив" тоже является табом
    фильтрация осуществляется в методе `_getBannersFilteredByTabName`
* есть действия которые меняют dm группы, такие как архивация/удаление, эти действия выполняются по принципу
    * действия пользователя обрабатываются в блоке и вызывают методы vm
    * методы vm вызывают методы dm группы (методы возвращают promise), по выполнению которых мы пересчитываем поля vm, и обновляем основное поле `shownBannersData`
    * на изменение `shownBannersData` подписан блок, который вызывает перерисовку
* в статистике мы иногда открываем попап групп с одним баннером, для этого передаётся параметр `bid` в метод `showGroupPopup`

##API
по сути основной метод `showGroupPopup`

###Модели###
Для работы dm-ов с попапом групп, нам нужно чтобы они наследовались от `dm-base-group` и `dm-base-banner` (так описаны методы, и поля которые нужны попапу групп)

View модель (`b-group-preview2`)
Дата модель (`m-group`/`dm-dynamic-group`) - отвечает за хранение данных и взаимодействие с сервером

##Roadmap & known issues##
Известные проблемы и планы по развитию блока

##Пример##
```
BEM.blocks['b-group-preview2'].showGroupPopup({
    clientId: 123,
    groupId: 123,
    groupType: 'text',
    bid: 222,
    owner: e.block.domElem
});
```
