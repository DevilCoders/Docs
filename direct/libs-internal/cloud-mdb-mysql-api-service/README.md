# cloud-mdb-mysql-api-service - Сервис для взаимодействия с cloud mdb mysql api

### Что делает
Реализует два метода [cloud mdb mySQL api](https://docs.yandex-team.ru/cloud/managed-mysql/api-ref/grpc/) по протоколу gRPC:
1. Получение списка кластеров облака (Только имена, идентификаторы, тип окружение, здоровье и статусы)
2. Получение исходных записей логов заданного типа для указанного кластера

Для создания бина сервиса для работы с api Яндекс.Облака для кластеров mySQL типа `ICloudMdbMySqlApi`
в спринге (`@Bean`) нужно вызвать метод `CloudMdbMySqlApiService.create()`,
передав ему ветку конфига Директа с параметрами соединения с api облака (типа секции `cloud`) и поставщика
iam-токенов Яндекс.Облака (типа `IIamTokenProvider`). Как создать поставщика iam-токенов [описано в readme.md](https://a.yandex-team.ru/arc_vcs/direct/libs-internal/cloud-iam-service/README.md)
библиотеки `libs-internal/cloud-iam-service`.

Таким образом с помощью метода `CloudMdbMySqlApiService.create()` можно создать несколько экземпляров сервисов по работе
с api Яндекс.Облака для кластеров mySQL с разными поставщиками iam-токенов. Это может потребоваться, например, для разграничения прав доступа.

Объекты сервиса корректно освобождают все ресурсы при завершении работы.
