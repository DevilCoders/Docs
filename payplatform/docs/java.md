Java библиотеки
===============

Здесь собраны внутренние библиотеки для разработки микросервисов на базе фреймворка [micronaut](https://micronaut.io). Также для удобства настройки сборки проектов некоторые параметры и зависимости зафиксированы в подключаемых файлах (`*.inc`), описанных ниже.

Подключаемый файл common.inc
----------------------------

Данный файл описывает основные версии зависимостей, которые будут использоваться в проектах. Обновление зависимостей производится централизованно для всех проектов путем изменения версии в `common.inc`. Зависимости, для которых есть `bom` (aka `ya.dependency_management.inc`), нужно подключать именно через него, это позволяет не менеджить версии всех модулей конкретной библиотеки.

Также `common.inc` подключает (при помощи `peerdir`) некоторые общие библиотеки:

- [jetbrains-annotations](https://github.com/JetBrains/java-annotations) - библиотека позволяет добавлять размечать код аннотациями, которые дают больше информации для `IDEA` и позволяют ей проводить дополнительный анализ.
- [lombok](https://projectlombok.org) - библиотека позволяет убрать большую часть java-бойлерплейта, крайне рекомендуется к использованию.
- [streamex](https://projectlombok.org) - библиотека расширяющая возможности `java streams`. Рекомендуется использовать вместо стандартных стримов.
- [slf4j-api](http://www.slf4j.org) - библиотека предоставляет фасад для логеров.

Помимо зависимостей, `common.inc` выставляет некоторые параметры сборки:

- `CHECK_JAVA_DEPS(yes)` - включает проверку дубликатов классов в `classpath`.
- Секция `JAVA_DEPENDENCIES_CONFIGURATION` запрещает использовать дефолтные версии зависимостей, а также явное указание версий в `peerdir`. Все версии должны быть прописаны в секции `DEPENDENCY_MANAGEMENT`.
- `LINT(extended)` - включает расширенную проверку code-style.
- Отключены все санитайзеры.
- Включено сохранение имен параметров методов в байткоде (`-parameters`).
- Включен `Werror` - все ворнинги трактуются как ошибки.
- Включены все опциональные диагностики `javac`.
- Включен `annotation processor` для `lombok`, теперь его больше не нужно включать вручную во всех проектах.

Подключаемый файл test.inc
----------------------------

Данный файл позволяет подключить все необходимые сторонние библиотеки в проект тестов (через `peerdir`).

{% note alert %}

`test.inc` уже включает `common.inc`, поэтому не нужно подключать его вручную.

{% endnote %}
