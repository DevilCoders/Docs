## Эксперименты

### Как создать эксперимент
1. Запустить `npx expflags` и завести новый флаг
2. Создать директорию с именем экспериментального флага внутри `./src/experiments/exp-flags`
3. Внутри директории с именем экспериментального флага создать директорию `registries`
4. Внутри директории `registries` создать TS модуль, с именем `touch` и/или `desktop`, в зависимости от требуемой платформы для проведения эксперимента
5. Экспортировать из этого модуля инстанс класса `Registry` со свойством `id=defaultRegistry()` из пакета `@bem-react/di`.<br/>
`defaultRegistry` нужно импортировать из модуля `registry`.<br/>
Экспорт должен быть именованным, имя свойства, которое хранит инстанс `Registry` должно быть `registry`.<br/>
6. Собрать и запустить проект
7. Открыть любую страницу с параметром `&srcflag=HEALTH::<flag-name>`.
8. Также можно увидеть эксперимент с помощью параметра `&test-id=<testId>`, если есть `testId` для флага

### Как это работает
Все экспериментальные модули, попадающие под маску `./src/experiments/exp-flags/<exp-name>/registries/(desktop|touch)` будут собраны в отдельные бандлы, содержащие все зависимости, указанные в модуле.<br/>
При поступлении запроса, серверная часть шаблонов достанет список экспериментальных флагов из данных и попробует заимпортить экспериментальный модуль для каждого флага.<br/>
Все реестры, экспортируемые из экспериментальных модулей буду собраны и замержены в основной реестр приложения. Таким образом, на уровне экспериментального модуля можно переопределить любой компонент из основного реестра приложения.

### Предполагаемая структура директорий
```
\- experiments
--\- exp-flags
----\- <exp-name>
------\- registries
--------\- desktop.ts - модуль, экспортирующий реестр, с переопределениями компонентов на уровне desktop
--------\- touch.ts - модуль, экспортирующий реестр, с переопределениями компонентов на уровне touch
------\- components - экспериментальные react компоненты, имеющие такую же структуру директорий, как в основном коде приложения
```
