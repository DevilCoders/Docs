# Локализация

[Наш проект в танкере](https://tanker.yandex-team.ru/?project=mssngr_web&branch=master)

[Документация танкера](https://doc.yandex-team.ru/Tanker/general-info/concepts/theory.html)

[Документация API танкера](https://doc.yandex-team.ru/Tanker/api-reference/concepts/about.html)

[Документация tanker-kit](https://github.yandex-team.ru/search-interfaces/frontend/blob/master/packages/tanker-kit/doc/overview.md)

## Права на доступ в танкер:

https://idm.yandex-team.ru -> запросить роль -> система -> Танкер -> Проект -> Messenger Web ->
Общие для проекта -> Разработчик проекта

## Загрузка переводов из танкера

* `npm run i18n:pull` - выгрузка переводов с настройкой конфига и процесса выгрузки.
Позволяет указать определенные ключи для выгрузки, отключить проверку по языку и тп.
* `npm run i18n:pull:default` - выгрузить все переводы с дефолтными настройками: выгружает
всю ключи и языки во всех статусах, требует подтверждения изменений.

## Добавление исходных текстов:

Для того, чтобы добавить новые исходные тексты (например для нового компонента),
идем в [наш проект в танкере](https://tanker.yandex-team.ru/?project=mssngr_web&branch=master).
В зависимости от проекта, для которого нужны тексты, выбираем кейсет и жмем "Добавить ключи",
где нам нужно заполнить 3 поля:
* **ID** ключа имеет вид типа "chat.chat_list_empty_text", где "chat" задает неймспейс,
а значение после точки - непосредсвенно ключ. Посмотреть структуру, и прикинуть неймспейс
для ключа можно в файлике ru.json соответствующего проекта. Не рекомендуется делать вложенность больше 2х.
* **Контекст** ключа - обязательное поле. Они нужны редакторам и переводчикам, чтобы подобрать
наиболее подходящий перевод для ключа. Обычно это текст с описанием того, где используется ключ,
но также очень желательно добавлять к описанию скриншот. Скриншоты должны быть достаточно большими,
чтобы можно было однозначно определить интерфейс, в котором ключ появляется. Ключи без контекста
не переводятся, поэтому при появлении нового ключа, обязательно добавьте ему контекст.
* **Текст на исходном языке**

## Вычитка и перевод исходных текстов
Вновь добавленные ключи должны проходить редактуру и переводиться на другие языки.
Сейчас в проекте подключены автотикеты. Каждый понедельник заводится тикет на вычитку всех ключей
в статусе `translated`, каждую среду - тикет на перевод.
Если необходимо создать тикет на вычитку/перевод вручную, можно использовать руководства:

[Подробное руководство по заказу переводов](https://wiki.yandex-team.ru/users/alenmax/Kak-zakazat-perevod-kljuchejj/#zakazatperevodkljuchejj)

[Форма для создания заявок на вычитку и перевод](https://wiki.yandex-team.ru/doc-and-loc/l10n/tools/tanker/?from=%252Fportal%252Finternational%252Ftanker%252F#otpravitzajavkunaperevod)

## Влитие пул-реквестов

Если в пул-реквесте были добавлены новые ключи, то в нём же необходимо добавить ключи в файлы переводов
всех поддерживаемых языков. Возможно использовать фолбеки на русский и английский язык в соответствующих
языках.
Не допускается влитие без переводов на русский и английский, а так же пустых переводов.
