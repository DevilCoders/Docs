# Миграция кастомного СSS

## Мотивация
1. При рефакторинге/переписывании блоков может меняться DOM, соответсвенно нужен механизм для миграции CSS паблишеров.
2. Так как задача в большинстве случаев выходит за рамки префиксирования классов, парсинг реализован на основе AST, что дает более широкие возможности.

## Почему не postcss
С postcss проще работать в плане написания плагинов, однако разбиение ast не достаточно мелкое для преобразований (идет по правилам и селекторам, однако селекторы не разбиваются). Приходится использовать регулярки, а регулярками код становится читать сложнее, поэтому испозьзуем csstree. [Формат AST](https://github.com/csstree/csstree/blob/master/docs/ast.md) достаточно подробный, что позволяет больше оперировать сущностями.

## Разработка

1. Скачать css c похостовых

```
YQL_TOKEN=token node import-css
```
2. Запустить миграцию

```
node migrate
```

Имеется базовый класс `BaseParser`, который имеет статические методы простого префиксирования классов и выбора классов с селектороами, соответсвующих заданной регулярке. Все последующие парсеры должны наследоваться от него.
