# Тестирование в dev сборки в продакшене через прокси

1. Установить charles https://www.charlesproxy.com/download/
2. Подключаемся к сети PDAS для того чтоб телефон и ноут были в одной сети(при выборе проверки авторизации, выбирайте с сертификатом)
3. Идем в настройки charles и включаем [ssl проксирование](#как-включить-ssl-проксирование)
4. Открываем телефон и настраиваем [прокси](#как-настроить-прокси-на-телефоне)
5. Устанавливаем сертификат charles. Для этого переходим сюда [https://chls.pro/ssl] с телефона. Дальше все само
6. Настраиваем роутинг прода на [локальную версию](#как-смапить-прод-турбо-на-локальную-версию)
7. Подключаем по шнуру телефон и заходим и находим его с ноутбука для дебага

## Дебажим дзен
1. Открываем Ябро на телефоне и ноуте и находим телефон в инспекторе (`browser://inspect/#devices`)
2. Открываем дзен(свайп вверх на главной странице браузера) и начинаем листать ленту, когда отработает prerender вкладка покажется в списке, заходим на нее инспектором
3. После чего кликаем по снипету и радостно дебажим

## Как включить ssl проксирование
1. Идем в настройки [ssl](https://jing.yandex-team.ru/files/birhoff/Charles_4.2.1_-_Session_1__2018-03-29_11-27-34.png)
2. Включаем ssl и жмем [добавить ключ](https://jing.yandex-team.ru/files/birhoff/SSL_Proxying_Settings_2018-03-29_11-28-42.png)
3. Ставим `*:*` и жмем [OK](https://jing.yandex-team.ru/files/birhoff/Edit_Location_2018-03-29_11-29-45.png). Это вклчает https, для всех, если хотите выборочно, то настраивайте сами.
4. Говорим OK, https проксирование включено. 


## Как настроить прокси на телефоне
1. получаем IP адресс своего ноутбка (`ifconfig | grep "inet " | grep -v 127.0.0.1`)
2. Открываем настройки WiFi своего телефона, и на наужной сети добавлем проксю (YOUR_IP:8888). Обычно в настройки можно зайти через длинный тап по сети

## Как смапить прод турбо на локальную версию
1. Запускаем локально турбо с --public, и копируем урл
2. Заходим в [настройку мапингов](https://jing.yandex-team.ru/files/birhoff/Charles_4.2.1_-_Session_1__2018-03-29_11-37-46.png)
3. Размечаем мапинги как показано [тут](https://jing.yandex-team.ru/files/birhoff/Map_Remote_Settings_2018-03-29_11-39-03.png)
