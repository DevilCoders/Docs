Сериальный навигатор
====================

СН разделяется на 2 составляющие - логика и представление. Эти составляющие максимально изолированы друг от друга, чтобы предотвратить различные коллизии. Логика представлена контроллером - единственный для всех видов СН. Представлений может быть несколько и они реализуются темами СН. Для того чтобы мы могли безболезненно поменять тему, никак не сломав логику, логика ничего не знает о конечных контроллах, используемых системой. Вместо этого он (контроллер) общается с ними через медиаторы (series-navigator-control с различными модификаторами). Если во всех темах какая-либо функциональность представлена одним и тем же контроллом, то контроллер может общаться с ним напрямую.

Тема реализует конкретный вид сериального навигатора и подключает необходимые контроллы (управляет контроллами контроллер). Тема реализует шаблоны, управление внешним видом СН (например, при ресайзе) и стили. Тема знает о конкретных контроллах и может общаться с ними напрямую.

СТРУКТУРА

* **Контроллер series-navigator2.js**

Здесь будет заключена логика следующего плана:

- хранит состояние
- отсутствует взаимодействие с темами(см. ниже)
- взаимодействие только с медиаторами
- показать/скрыть кнопку "Следующая серия"
- показать/скрыть кнопку "Последняя серия"
- формирование урлов
- перенаправления
- счетчики

Этот скрипт НЕ подлежит переопределению, он несет в себе функцию глобального контроллера на всех платформах. Вся дополнительная логика должна храниться в темах. Здесь НЕЛЬЗЯ напрямую обращаться к компонентам или устанавливать логику, связанную с темой.

Публичных медов нет.

* **series-navigator2.priv.js**

Здесь определяется состояние СН. Чтобы не перенагружать парсинг всей структуры, они записываются в data-атрибуты блока и на клиенте парсятся, только те сезоны, которые выбрал пользователь.

* **Модификаторы**

**_theme** - каждая тема представляет собой отдельный внешний вид СН, которая содержит: deps.js + bemhtml.js + priv.js(если нужно) + client.js(если нужно)

Тема знает, какие контроллы она подключает и может обращаться к ним напрямую.

Если возникают случаи когда для темы необходимо добавить дополнительный модификатор, например, при маленьких разрешениях добавить отступ некоторым контроллам, то создаем файл типа theme_NAME-size_small. Если же ресайз влияет на верстку СН, то необходимо создать новую тему и перестраивать весь СН.

На отдельной платформе, там где должен вставляться СН, обязятельно должна быть указана тема.

* **Медиатор**

Поскольку контроллы для выбора сезонов и серий могут быть реализованы различными блоками, для их общения с контроллером СН используются блок-медиатор series-navigator-control, который помимо обеспечения этого взаимодействия занимается подготовкой (нормализацией) данных, необходимых для контрола.
