# stream-provider

Провайдер данных эфира.

## API

Блок является синглтоном, инстанс можно получить вызвав `BEM.blocks['stream-provider'].getInstance()`.

**Методы инстанса**
* `getChannels() => IChannel[]|undefined` - возвращает отфильтрованный и отсортированный список каналов. В случае если
информация о каналах ещё не загружена возвращает `undefined`.

**События**
* `channels:loaded` - загружен список каналов;
* `current_episode:changed` - у ряда каналов сменилась транслируемая в данный момент программа. Список этих каналов
передаётся в данных события.

## Конфиги
* `backend-url` - файл с базовым url ручек Эфира;
* `channels_allowed/ru.js` - белый список разрешённых для показа каналов. Отсортирован в порядке следования каналов в
каруселях Эфира.
* `channels_allowed/by.js` - белый список разрешённых для показа каналов для Белоруссии. Отсортирован в порядке следования каналов в
каруселях Эфира.

## Периодичность обновления данных
* _список каналов_ - загружается 1 раз в момент загрузки статики блока;
* _расписание эпизодов_ - загружается 1 раз в час для всех каналов;
* _проверка текущего эпизода_ - производится каждую минуту по расписанию эпизодов.
