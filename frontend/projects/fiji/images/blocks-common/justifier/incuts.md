# Вставка дополнительных блоков в сетку

## Тип `cross-column`

Используется в вертикальном выравнивании. Добавляет горизонтальную вставку в вертикальную сетку

> Внимание
>
> * Содержимое данной вставки должно быть фиксированной высоты
> * Для вставки используется `IntersectionObserver`

### Алгоритм

I. Формирование DOM
1. В момент, когда происходит вставка в выровненную выдачу, в колонки вставляются блоки пустышки для формирования ровной линии вставки
2. Пустышки маркируются порядковым номером текущей вставки и номером колонки
3. Сама вставка переносится в первую колонку и растягивается на всю доступную ширину

II. Расчет высоты пустышек
1. При добавлении линии пустышек и вставки в HTML выровненной выдачи:
    * Если на текущей странице нет других типов вставок -  получаем линию пустышек, у которой еще не производился расчет высот
    * Если на текущей странице есть другие типы вставок - дожидаемся добавление в дом последней из них(используется `IntersectionObserver`), после чего получаем линию пустышек, у которой еще не производился расчет высот
2. В момент когда все пустышки из линии были добавлены в выровненную выдачу(используется `IntersectionObserver`) запоминаем высоты колонок до пустышек
3. Выбираем самую высокую колонку из отображенных и устанавливаем высоты пустышек так, чтобы высоты колонок стали одинаковыми
4. Добавляем во все пустышки, кроме той что находится в первой колонке, значение высоты вставки

