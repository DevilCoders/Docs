# FaviconSprite

Данный набор компонентов предназначен для отображения фавикон с помощью спрайтов из [фавиконницы](https://wiki.yandex-team.ru/robot/favicon/).

Набор представлен тремя компонентами:
* `FaviconSpriteProvider` - специальный провадер контекста фавиконок, который объединяет запрошенные фавиконки в спрайт, контролирует дублирование и минимизирует количество сетевых запросов за спрайтами.
* `FaviconSpriteSprite` - компонент для вставки инлайн стилей спрайта.
* `FaviconSpriteIcon` - компонент для отображения одной фавиконки для заданного домена.

## Использование

Все компоненты `FaviconSpriteIcon` **обязательно** должны быть обёрнуты в `FaviconSpriteProvider`. `FaviconSpriteProvider` предоставляет низлежащему дереву контекст, которые используется внутри `FaviconSpriteIcon` для получения правильно имени класса по домену.

Кроме того, любое добавление новых фавиконок внутри вложенного в `FaviconSpriteProvider` дерева приведёт к загрузке нового спрайта, если хотя бы одной иконки не хватает для отображения.

## Использование с SSR

При первом рендере все вложенные `FaviconSpriteIcon` собираются в отдельные спрайты и синхронно добавляются в конец вложенного в `FaviconSpriteProvider` дерева.
При последующих рендерах начальный набор спрайтов считается "замороженным", то есть при добавлении новых иконок будут запрашиваться новые спрайты.
Для SSR важно совпадение рендера на сервере и на клиенте, поэтому в провайдер необходимо передавать один и тот же уникальный `seed` - он используется для генерации уникальных по всей странице имён классов чанков.

## Пример использования

```tsx
// get seed from server

<FaviconSpriteProvider seed={seed}>
    <FaviconSpriteIcon
        domain="https://yandex.ru/"
        size={16}
        stub
    />
</FaviconSpriteProvider>
```
