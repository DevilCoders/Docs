Файлы конфигурации
==================

## Описание файлов
* **version** - актуальная версия песочницы (просто текст)
* **sandboxes.js** - конфиг с условиями выбора песочницы для конкретного содержимого
* ***[deprecated]*** **hostings.json** - список хостингов, поддержанных в песочнице

## Формат sandboxes.js

**sandboxes** - JS-файл c включённым в него JSON-кодом (между комментариями `JSON begin` и `JSON end`). JS-формат
файла выбран для оптимизации минификации конфига при подключении его в клиентском коде интерфейса. Код между комментариями 
`JSON begin` и `JSON end` должен быть валидным JSON, потому что парсится бэкендом.

**Формат конфига**
```json
{
    "sandbox": "youtube",
    "condition": {
        "id": {
            "equal": "youtube"
        }
    }
},
{
    "sandbox": "iframe-default",
    "condition": {
        "html": {
            "contains": "<iframe",
            "!contains": "<script"
        }
    }
},
{
    "sandbox": "yandex",
    "noRequired": true,
    "condition": {
        "id": {
            "equal": "vh"
        }
    },
},
{
    "sandbox": "default",
    "default": true
}
```

**Описание полей:**
* *sandbox {string}* - название песочницы
* *noRequired {boolean}* - песочница не требуется, плеер нужно подключить напрямую  
* *condition {object}* - условие выбора песочницы
* *default {boolean}* - дефолтная песочница, выбирается если не подходит ни одна другая 

**Формат условия выбора песочницы (condition):** "поле данных *{string}*": "условие для проверки соответствия *{object}*"

**Виды полей данных:**
* *id* - идентификатор контента (например плеера)
* *html* - html-код контента

**Поля условий выбора:**
* *equal* - данные равны указаному значению
* *!equal* - данные не равны указаному значению
* *contains* - данные содержат указаное значение
* *!contains* - данные не содержат указаное значение

Песочница выбирается, если все условия в ***condition*** истины (объединение через AND) или у неё стоит поле ***default*** 
и не выбрана ни одна другая песочница. Если полям данных соответствует несколько песочниц, то выбирается первая из конфига.
