# Расширенный поиск
#### Ответственный: [Артём Семёнов](https://staff.yandex-team.ru/xxxxxxx)
##### Знатоки: -

Расширенный поиск - это форма, с помощью которой пользователь может уточнить свой запрос.

## Форма
* На планшетах не должно быть формы РП
* Должна работать анимация при раскрытии/закрытии формы
* Форма РП находится в центральной колонке
* Правая и левая границы формы должны совпадать с границами поля в желтой стрелки
* При раскрытии формы, отодвигаются и центральная,  и правая колонки
* При открытии формы должен скрываться блок с интентами
* При открытии формы необходимо чтобы она оказалась в видимой части экрана,
* При закрытии формы, фильтры сбрасываются, но запоминаются.
  Если пользователь вновь откроет форму РП, то фильтры должны быть выставлены так же, как до закрытия.
* Выпадающие элементы не должны перекрывать поисковую стрелку
* Изменение значений формы не обновляет выдачу (обновление происходит по кнопке "Найти")
* При закрытии формы все фильтры сбрасываются, при повторном открытии значения восстанавливаются
* Форма РП должна открываться при загрузке страницы, если в адресе есть параметры расширенного поиска
* При сбросе фильтра соответствующий параметр удаляется из адреса страницы

### Внешний вид
* Показывать желтую рамку у текстовых полей при фокусе
* Активные фильтры должны быть заполнены желтым цветом

### Эксперименты
* Под экспериментом `adv_search_input`, кнопка открытия РП перемещается из правой части в поле поиска.

## Фильтры
### Регион
* Фильтр представляет из себя чекбокс с возможностью редактирования.
* По умолчанию в нем прописывается текущий регион пользователя из настроек
* При нажатии на кнопку-чекбокс в адрес добавляется параметр **&rstr=-`id региона`**
* Справа от чекбокса есть кнопка, переключающая его в инпут, в котором можно ввести другой регион.
* При вводе региона должен показываться саджест ([описание][1]).
* Введенное значение запоминаем и подставляем в следующий раз вместо дефолтного (через куку `yp` и саб-куку `advsr`)

### Язык
* Выбор языка добавляет в адрес параметр **&lang=`выбранные языки через запятую`**
* Значения выбранных языков добавляются через запятую к адресу страницы
* Слева показываются два чекбокса с самыми популярными языками для текущей зоны (TLD)
* Остальные языки остаются в выпадушке и должны быть отсортированы по алфавиту

### Дата
* Радио-группа с пред-установленными значениями.
* При выборе из радио-группы в адрес добавляется параметр **&within=`выбранное значение`**

## Счетчики
* При открытии формы `/head/advanced-search`, vars=`action=open`
* При закрытии формы `/head/advanced-search`, vars=`action=close`
* При нажатии на "Очистить" `/head/advanced-search/clear`
* При нажатии на "Отправить" `/head/advanced-search/submit`

[1]: http://doc.yandex-team.ru/tune/api-reference/concepts/operations-geo.xml
