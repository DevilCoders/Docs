# Микс для блоков, обновляющихся через AJAX
Блок serp предназначен для обновления контента блока через AJAX
по событию изменения URL страницы (проверяется через History API).

См. [Wiki](https://beta.wiki.yandex-team.ru/search-interfaces/ajax/)

Чтобы блок обновлялся, нужно добавить его в список `BEM.blocks['serp'].blocks`,
а так же на сервере в `blocks['serp-request__handlers']`. **Важно:** к нему нужно примешать блок `serp` с параметром
`uniqId: search` следующим образом: `mix: { block: 'serp', js: { uniqId: 'search' } }`. Последнее необходимо
для группировки всех блоков `serp` в единственный инстанс и предотвращения множественной инициализации.

Ключ данных может быть передан в параметре блока `ajaxKey`, если он не передан, в качестве ключа используется
имя блока.

Можно определить в блоке, к которому примешивается `serp`, следующие методы:
```js
BEM.decl('foo', {
    /**
     * Функция, возвращающая данные для отправки на сервер
     * @returns {Object}
     */
    getAjaxData: function() {},

    /**
     * Хук подготовки к запросу
     */
    onAjaxPrepare: function() {},

    /**
     * Колбэк успешного завершения запроса
     * @param {Object} data Ответ сервера
     */
    onAjaxSuccess: function(data) {},

    /**
     * Колбэк ошибки
     * @param {Object} err Объект ошибки
     */
    onAjaxError: function(err) {}
});
```

## Примечание
Проконсультироваться по поводу блока и позвать на ревью можно [andre487@](http://staff/andre487)
