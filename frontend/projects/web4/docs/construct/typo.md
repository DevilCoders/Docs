# Типографика

Набор стилей про шрифт и ``line-height``. Под капотом использует [css константы](https://a.yandex-team.ru/arc_vcs/frontend/projects/web4/blocks-common/css-const/css-const.md). Сами константы лежат в блоке блок [typo](https://a.yandex-team.ru/arc_vcs/frontend/projects/web4/blocks-common/typo/typo.scss) (для проведения экспериментов имена констант можно брать отсюда)

## Зачем?

Для того, чтобы иметь систему для унификации стилей текста, и оперировать не значениями в пикселях, а размерами(такими как ``s``, ``m``, ``l``, ``xl``).

**Типографика позволяет:**

0. **Исключить "дрожание" похожих стилей текста на выдаче (12 и 13px, 18 и 19px).** Например, если у нас в нескольких местах используются собственные текстовые блоки, которые семантически представляют собой абзацы стандартного текста - они должны иметь одинаковые ``font-size`` и ``line-height``. Для этого в константах типографики определяются единые значения для всех текстовых блоков со стандартным размером текста (например 13px для десктопов).
0. **Централизовано менять настройки текста под разные экраны (media query).** Положительный эффект от работы новых css констант под капотом.
0. **Ввести единую терминологию размерностей текста, понятную и дизайнерам, и разработчикам.** Фиксированный набор комбинаций значений ``font-size`` и ``line-height`` призван сделать выбор более простым и понятным.
0. **Удобные эксперименты.** Типографика позволяет легко экспериментировать с текстовыми константами выдачи и при повсеместном использовании гарантирует полное покрытие выдачи экспериментом.

## Как?

#### Если вы пишите новый блок

Для работы с типографикой есть блок [typo](https://a.yandex-team.ru/arc_vcs/frontend/projects/web4/blocks-common/typo/typo.scss). Для того чтобы использовать нужно примиксовать его к вашему блоку.

Например:
```js
    block: 'my-block',
    mix: { block: 'typo', mods: { text: 'm', line: 's' } }
```

Доступные значения модификатора ``text`` и ``line``: ``s``, ``m``, ``l``, ``xl``.

Такой подход позволяет инкапсулировать типографику и ее комбинации значений. В дальнейшем предполагается проведение большого количества экспериментов с константами типографики и залогом их успешности является понимание того, что типографика используется везде одинаково. А это значит, что константы, определяющие ``font-size`` и ``line-height``, используются только в тех комбинациях, которые заданы в блоке ``typo``. Поэтому использование непосредственно самих css констант для определения ``font-size`` и ``line-height`` (как показано ниже) - **запрещено!**
```css
    /* Так делать не правильно! Правильно миксовать блок typo */
    .my-block
    {
        font-size: var(--text-m),
        line-height: var(--text-m-line-s)
    }
```

Базовые **инлайновые** текстовые блоки (такие как **link**) не имеют собственных значений типографики, а наследуют их у родительского блока.

#### Если в существующем блоке необходимо поддержать другие размеры типографики
Например, есть блок использующий типографику. Вы в своём коде хотели бы использовать этот блок и он вам подходит всем, кроме значений типографики. В этой ситуации правильным будет расширение блока новым модификатором или API (например ``size=s|m^|l``), в котором будет примиксовано нужное значение типографики.

Подобную ситуацию можно разобрать на примере блока ``serp-title``.
Как известно, у него есть модификатор ``type``, который может принимать 3 значения: ``title``, ``supertitle`` и ``subtitle``. Для каждого из них заголовок должен выглядеть по разному. Соответственно, для каждого из них нужно выбрать подходящую константу типографики.
Подобрали следующим образом:
* ``title`` - ``text: 'l', line: 'm'``
* ``supertitle`` - ``text: 'xl', line: 'm'``
* ``subtitle`` - ``type: 'greenurl'`` (специальная комбинация для гринурла)

Теперь эти константы можно примиксовать блоку ``serp-title`` на основе модификатора ``type``.

Выглядит это так:
```js
    block: 'serp-title',
    // Размечаем блок типографикой
    mix: {
        block: 'typo',
        mods: {
            title: { text: 'l', line: 'm' },
            supertitle: { text: 'xl', line: 'm' },
            subtitle: { type: 'greenurl' }
        }[type] // где type - значение модификатора
    }
```
#### Важное замечание про доступность значений Typo из адаптеров
**Значениями типографики блока НЕЛЬЗЯ управлять из адаптера!** Если вам очень нужно семантическое ответвление от блока с другими значениями типографики - добавляйте модификатор и в нем миксуйте это значение. Реализовывать в блоках API для передачи значений модификаторов типографики из адаптера ЗАПРЕЩЕНО! Это необходимо для того, чтобы сохранить типографику "под капотом" и иметь возможность влиять на нее только через апи блоков.

#### Если вам нужны нестандартные значения типографики
Если ваш блок **особенный** и для него нужны специфические значения типографики, которых нет в текущей реализации, необходимо обратиться в команду Красоты и **согласовать** добавление новых значений. Это касается font-size, line-height, font-family.
Если необходимость будет обоснована, тогда можно будет добавить новый набор значений и см. предыдущий пункт.

#### Если вам нужен новый шрифт с новыми значениями
Чтобы начать использовать новый шрифт, необходимо в блок `typo` добавить новый модификатор `type` для группы шрифтов. Например `type: 'serif'`. Допускается, что в зависимости от шрифта могут меняться размеры s, m, l — хотя все шрифты одного направления (например, без засечек: ариал, сан франциско, робото, гельветика) стараются по абсолютам быть похожими друг на друга.

### N.B.
Стиль начертания (font-style:italic, font-weight: bold) указывается в самом блоке и отношения блоку `typo` не имеет.

### N.B.
В deps.js блок писать не нужно, он приезжает по умолчанию для всех.

#### Исключения в типографике
Для гринурла и текста капсом (например, в таббаре) используются особые значения. Сложилось исторически из-за сниппетного угара. Таких "особых" констант больше не хочется, но эти нужны.

#### Частные случаи использования
Бывают ситуации, когда какое-либо css свойство в блоке должно зависеть от ``font-size`` или ``line-height`` этого блока. Например, мы хотим задать ``height`` равный ``line-height`` блока. При этом блок использует типографику и соответственно его ``line-height`` определяется значением модификатора типографики. В таком случае можно определить из какой константы блок ``typo`` будет брать значение для ``line-height`` и ипользовать непосредственно саму константу.

Например, в блоке используется типографика со следующими значениями модификаторов:
```js
    block: 'my-block',
    mix: { block: 'typo', mods: { text: 'm', line: 's' } }
```
Это означает, что в качестве значения ``line-height`` будет использована константа ``var(--text-m-line-s)``.

Используем ее для выставления высоты равной высоте строки:
```css
    .my-block
    {
        height: var(--text-m-line-s)
    }
```
Очевидно, что такое прямое использование констант типографики допустимо **только** при выполнении следующих требований:

0. константа используется для свойств отличных от ``font-size`` и ``line-height``
0. блок миксует в себя типографику
0. используемая константа соответствует заданной комбинации модификаторов типографики

#### Эксперименты с типографикой
Имена констант типографики для проведения экспериментов можно посмотреть в файлах по уровням переопределения: [desktop](https://a.yandex-team.ru/arc_vcs/frontend/projects/web4/blocks-desktop/css-const/__common/css-const__common.css) и [touch-phone](https://a.yandex-team.ru/arc_vcs/frontend/projects/web4/blocks-touch-phone/css-const/__common/css-const__common.css).


#### P.S.
С вопросами можете обращаться в контур "Красота" (v-team Beauty).
