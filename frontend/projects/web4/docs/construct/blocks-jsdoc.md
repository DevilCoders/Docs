# Блоки. Документирование

Помимо общего для всего Серпа [стайлгайда](https://wiki.yandex-team.ru/search-interfaces/jsdocs/) у нас есть несколько правил которые хотелось бы выделить особенно:

## Правила

**1.** Документация обязательна. Всегда. Для всего. Без исключений.

**2.** API используемое в блоке должно быть понятным образом задокументировано обязательно с помощью своего собственного ```@typedef``` который может наследовать либо примиксовывать часть поведения. Текстовое описание для блока рекомендуется описывать в typedef'е, а не в JSDoc для функции.

**3.** ```@typedef``` для блока пишется в конце самого файла блока, либо в отдельном файле ```blockname.typedefs.js``` в папке вместе с блоком.

**4.** Имя типа должно полностью повторять имя блока в СamelCase.

**example:**
```js
/* Блок */
/**
 * @typedef {Object} MyBlock
 * ...
 */

```

**5.** Если в блоке используется [supply](./supply.md) - необходимо примиксовать класc ему соответствующий.

**6.** Для описания полей вложеных в объект нужно  создавать отдельный тайпдеф, чтобы они корректно отображались в документации. *Нотацию с точкой использовать нельзя*

**example:**
```js
/**
 * @typedef {Object} MyBlock
 *
 * @property {MyBlockField} [enframed] - Индикатор того, что ссылка должна быть открыта в iframe
 */

/**
 * @typedef {MyBlockField}
 *
 * @property {String} a - первое поле
 * @property {String} b - второе поле
 */

```

## FAQ

### Зачем существуют миксы вида `@mixes Block` ?
Тайпдефы с такими миксами нужны в случае если блок используется в API, в поле, в котором может прийти несколько различных блоков. Понятнее станет из следующего примера.

Предположим, у нас есть такое API.
```js
/**
 * @typedef {Object} MyBlock
 *
 * @property {CheckButton|Button} awesome - Может прийти либо обычная кнопка, либо check-button,
 *     Если не указано явно, то считаем что пришла Button.
 */
```
Теперь попробуем воспользоваться этим API, передав в поле `awesome` `check-button`.
```js
{
    awesome: {
        block: 'check-button',
        /* API check-button */
    }
}
```
В этот момент, чтобы явно указать, что в поле используем `check-button` а не `button`, мы вынужденны явно написать: `block: 'check-button'`. И именно для того, чтобы описать такое вот использование API, нам и нужен `@mixes Block`, который может выглядеть следующим образом:
```
@typedef {Object} CheckButton

@mixes Block

@property ...
```
