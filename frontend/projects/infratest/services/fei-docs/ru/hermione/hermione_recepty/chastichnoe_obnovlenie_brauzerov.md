# –ß–∞—Å—Ç–∏—á–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±—Ä–∞—É–∑–µ—Ä–æ–≤

## –û –ø—Ä–æ–±–ª–µ–º–µ

–ü—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –±—Ä–∞—É–∑–µ—Ä–æ–≤ –ø—Ä–∏—Ö–æ–¥–∏—Ç—Å—è —Å—Ç–∞–ª–∫–∏–≤–∞—Ç—å—Å—è —Å–æ —Å–ª–µ–¥—É—é—â–∏–º–∏ –ø—Ä–æ–±–ª–µ–º–∞–º–∏:

- –ø–µ—Ä–µ—Å–Ω—è—Ç–∏–µ –±–æ–ª—å—à–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Å–∫—Ä–∏–Ω—à–æ—Ç–æ–≤ –¥–µ–ª–∞–µ—Ç—Å—è –¥–æ–ª–≥–æ, –∞ –≤–ª–∏–≤–∞–Ω–∏–µ —Ç–∞–∫–æ–≥–æ –ø—É–ª–ª-—Ä–µ–∫–≤–µ—Å—Ç–∞ - –µ—â—ë –¥–æ–ª—å—à–µ
- —Ö–∞–∫–∏, —Å–¥–µ–ª–∞–Ω–Ω—ã–µ –¥–ª—è –æ–¥–Ω–∏—Ö –±—Ä–∞—É–∑–µ—Ä–æ–≤, –ª–æ–º–∞—é—Ç—Å—è –¥–ª—è –¥—Ä—É–≥–∏—Ö
- –¥–ª—è —Å–≤–µ–∂–µ–≥–æ –±—Ä–∞—É–∑–µ—Ä–∞ –º–æ–≥—É—Ç –ø–æ–Ω–∞–¥–æ–±–∏—Ç—å—Å—è —Å–≤–æ–∏ —Ö–∞–∫–∏
- v-team, –∫–æ—Ç–æ—Ä—ã–π —Ö–æ—á–µ—Ç –ø–µ—Ä–µ–π—Ç–∏ –Ω–∞ –Ω–æ–≤—ã–π –±—Ä–∞—É–∑–µ—Ä, –≤—ã–Ω—É–∂–¥–µ–Ω –ø–µ—Ä–µ–≤–æ–¥–∏—Ç—å –Ω–∞ –Ω–µ–≥–æ –≤–µ—Å—å –ø—Ä–æ–µ–∫—Ç

## –†–µ—à–µ–Ω–∏–µ

### –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –≤–µ—Ä—Å–∏–∏ –±—Ä–∞—É–∑–µ—Ä–∞ –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ç–µ—Å—Ç–∞/—Å—å—é—Ç–∞

–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å —è–¥—Ä–∞ hermione, –∫–æ—Ç–æ—Ä–∞—è –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –≤–µ—Ä—Å–∏—é –±—Ä–∞—É–∑–µ—Ä–∞ –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ç–µ—Å—Ç–∞ –∏–ª–∏ —Å—å—é—Ç–∞, —è–≤–ª—è–µ—Ç—Å—è –±–∞–∑–æ–π –¥–ª—è —Ä–µ—à–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º—ã. –û–Ω–∞ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —á–µ—Ä–µ–∑ [—Ö–µ–ª–ø–µ—Ä](https://doc.yandex-team.ru/si-infra/hermione/hermione.html#version-browserversion):

```js
// –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è–µ–º –≤–µ—Ä—Å–∏—é –±—Ä–∞—É–∑–µ—Ä–∞ –¥–ª—è –≤—Å–µ–≥–æ —Å—ä—é—Ç–∞
hermione.browser('chrome-desktop').version('70.3');
describe('suite', function() {
    it('test 1', function() {...});

    // –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è–µ–º –≤–µ—Ä—Å–∏—é –±—Ä–∞—É–∑–µ—Ä–∞ –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ç–µ—Å—Ç–∞
    hermione.browser('chrome-desktop').version('70.1');
    it('test 2', function() {...});
});
```

### –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –≤–µ—Ä—Å–∏–∏ –±—Ä–∞—É–∑–µ—Ä–∞ –¥–ª—è –≥—Ä—É–ø–ø—ã —Ç–µ—Å—Ç–æ–≤

–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∑–∞–º–µ–Ω–∞ –≤–µ—Ä—Å–∏–π –±—Ä–∞—É–∑–µ—Ä–∞ –¥–ª—è —Ç–µ—Å—Ç–æ–≤, –æ–±–ª–∞–¥–∞—é—â–∏—Ö –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–º –ø—Ä–∏–∑–Ω–∞–∫–æ–º, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è –ø–ª–∞–≥–∏–Ω–æ–º [hermione-browser-version-changer](https://doc.yandex-team.ru/si-infra/hermione/hermione_plaginy/hermione-browser-version-changer.html):

```js
module.exports = {
    // ...
    system: {
        plugins: {
            'hermione-browser-version-changer': {
                enabled: true,
                initStore: async () => {
                    // –ü–æ–¥–≥–æ—Ç–∞–≤–ª–∏–≤–∞–µ–º —Å–ª–æ–≤–∞—Ä—å —Å –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω—ã–º–∏ –ø—Ä–∏–∑–Ω–∞–∫–∞–º–∏ –¥–ª—è —Ä–∞–∑–º–µ—Ç–∫–∏.
                    return {
                        'title-test1': 'tag1',
                        'title-test2': 'tag1',
                        'title-test3': 'tag2',
                    }
                }
                browsers: {
                    chrome: {
                        // –ö–ª—é—á '70.1' - –≤–µ—Ä—Å–∏—è –±—Ä–∞—É–∑–µ—Ä–∞, –∑–Ω–∞—á–µ–Ω–∏–µ - –ø—Ä–µ–¥–∏–∫–∞—Ç
                        // –ï—Å–ª–∏ —Ñ—É–Ω–∫—Ü–∏—è –≤–µ—Ä–Ω–µ—Ç –∏—Å—Ç–∏–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ, –¥–ª—è –±—Ä–∞—É–∑–µ—Ä–∞ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –¥–∞–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è
                        '70.1': (test, version, store) => {
                            // test - —Ç–µ–∫—É—â–∏–π —Ç–µ—Å—Ç
                            // version - –ø—Ä–µ–¥–ª–∞–≥–∞–µ–º–∞—è –≤–µ—Ä—Å–∏—è '70.1'
                            // store - —Å–ª–æ–≤–∞—Ä—å, –∫–æ—Ç–æ—Ä—ã–π –±—ã–ª –ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω –≤ –º–µ—Ç–æ–¥–µ initStore

                            // –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å 70.1 –≤–µ—Ä—Å–∏—é –±—Ä–∞—É–∑–µ—Ä–∞ –µ—Å–ª–∏ —Ç–µ—Å—Ç –æ—Ç–Ω–æ—Å–∏—Ç—Å—è –∫ "tag1"
                            return store[test.title] === 'tag1';
                        },
                        '80': (test, version, store) => {
                            return store[test.title] === 'tag2';
                        },
                    },
                }
            }
        }
    },
    //...
}
```

## –ü—Ä–∏–º–µ—Ä—ã

### –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –≤–µ—Ä—Å–∏–∏ –±—Ä–∞—É–∑–µ—Ä–∞ –¥–ª—è v-team –≤ web4

–ù–∞–¥ web4 —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ v-team, –∏ –¥–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã –∫–æ–º–∞–Ω–¥—ã –º–æ–≥–ª–∏ –æ–±–Ω–æ–≤–ª—è—Ç—å –±—Ä–∞—É–∑–µ—Ä—ã –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ, –±—ã–ª–∞ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —Å–ª–µ–¥—É—é—â–∞—è —Å—Ö–µ–º–∞:

- [–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è](https://github.yandex-team.ru/serp/web4/blob/dev/hermione/config.common.js#L351) –ø–ª–∞–≥–∏–Ω [hermione-browser-version-changer](https://doc.yandex-team.ru/si-infra/hermione/hermione_plaginy/hermione-browser-version-changer.html)
- –≤ `initStore` –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —á—Ç–µ–Ω–∏–µ v-team –∏–∑ yml-–æ–ø–∏—Å–∞–Ω–∏–π —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ –ø—Ä–∏ –ø–æ–º–æ—â–∏ [–º–æ–¥—É–ª—è](https://a.yandex-team.ru/arc_vcs/frontend/projects/infratest/packages/palmsync-specs-reader) –∏ —Å–æ–∑–¥–∞–Ω–∏–µ —Å–ª–æ–≤–∞—Ä—è "—Ç–µ—Å—Ç => v-team".
- –≤ –ø—Ä–µ–¥–∏–∫–∞—Ç–µ –¥–ª—è –±—Ä–∞—É–∑–µ—Ä–∞ –ø—Ä–æ–≤–µ—Ä—è–µ–º, –æ—Ç–Ω–æ—Å–∏—Ç—Å—è –ª–∏ —Ç–µ—Å—Ç –∫ –Ω—É–∂–Ω–æ–º—É v-team

–ò—Ç–∞–∫, –∫–∞–∫–∏–µ —à–∞–≥–∏ –Ω—É–∂–Ω–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –∫–æ–Ω—Ç—É—Ä—É –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –±—Ä–∞—É–∑–µ—Ä–∞?

1. –û—Ç—Ä–µ–±–µ–π–∑–∏—Ç—å –ø—Ä–æ–µ–∫—Ç –∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–≤–µ–∂–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (–¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –ø–æ—Å–ª–µ–¥–Ω–∏—Ö —Ñ–∏—á, —É–ø—Ä–æ—â–∞—é—â–∏—Ö –ø—Ä–æ—Ü–µ—Å—Å –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å–∫—Ä–∏–Ω—à–æ—Ç–æ–≤)
2. –í [–∫–æ–Ω—Ñ–∏–≥–µ hermione](https://a.yandex-team.ru/arc_vcs/frontend/projects/web4/hermione/config.common.js?rev=7312958#L374-382) –¥–æ–±–∞–≤–∏—Ç—å –Ω–µ–æ–±—Ö–æ–¥–∏–º—É—é –≤–µ—Ä—Å–∏—é –±—Ä–∞—É–∑–µ—Ä–∞, –Ω–∞ –∫–æ—Ç–æ—Ä—É—é —Å–æ–±–∏—Ä–∞–µ—Ç–µ—Å—å –ø–µ—Ä–µ–≤–µ—Å—Ç–∏ –≤–∞—à `v-team` (–∏–ª–∏ –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫—É —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π –≤–µ—Ä—Å–∏–∏). –ù–∞–ø—Ä–∏–º–µ—Ä, –µ—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ –ø–µ—Ä–µ–≤–µ—Å—Ç–∏ —Ç–µ—Å—Ç—ã –∫–æ–Ω—Ç—É—Ä–æ–≤ `Velocity` –∏ `Beauty` –Ω–∞ firefox@79, —Ç–æ –¥–∏—Ñ—Ñ –±—É–¥–µ—Ç —Ç–∞–∫–æ–π:
![](https://jing.yandex-team.ru/files/sipayrt/2020-09-15T14%3A16%3A43Z.png)

   ‚ö†Ô∏è  –í–ê–ñ–ù–û: –Ω–∞–∑–≤–∞–Ω–∏—è `v-team`-–æ–≤ –¥–æ–ª–∂–Ω—ã —Å–æ–≤–ø–∞–¥–∞—Ç—å —Å —É–∫–∞–∑–∞–Ω–Ω—ã–º–∏ –≤ yml-–∞—Ö:
   ![](https://jing.yandex-team.ru/files/sipayrt/2020-09-15T14%3A41%3A30Z.png)

3. –ó–∞–ø—É—Å—Ç–∏—Ç—å –Ω—É–∂–Ω—ã–µ —Ç–µ—Å—Ç—ã —Å –ø–æ–º–æ—â—å—é gui –∫–æ–º–∞–Ω–¥–æ–π `npm run hermione:gui -- path/to/test/file.hermione.js --retry 1 --play --vteam=<vteamName>`
4. –ü—Ä–æ–≤–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å –ø–∞–¥–µ–Ω–∏—è —Ç–µ—Å—Ç–æ–≤ –∏ –ø—Ä–∏–Ω—è—Ç—å –Ω–æ–≤—ã–µ —Å–∫—Ä–∏–Ω—à–æ—Ç—ã

   –ï—Å–ª–∏ —Å—Ä–µ–¥–∏ –∑–∞–ø—É—â–µ–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤ –µ—Å—Ç—å —Ç–µ—Å—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ —Å—Ö–æ–¥—É –Ω–µ –º–æ–≥—É—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –Ω–∞ –Ω–æ–≤–æ–π –≤–µ—Ä—Å–∏–∏, —Ç–æ —Ç–∞–∫–∏–µ —Ç–µ—Å—Ç—ã –º–æ–∂–Ω–æ –æ—Å—Ç–∞–≤–∏—Ç—å –∑–∞–ø—É—Å–∫–∞—Ç—å—Å—è –Ω–∞ —Å—Ç–∞—Ä–æ–π —Å –ø–æ–º–æ—â—å—é —Ö–µ–ª–ø–µ—Ä–∞ `hermione.browser('firefox').version('67');`:
   ![](https://jing.yandex-team.ru/files/sipayrt/2020-09-15T14%3A57%3A45Z.png)

   –°—Ç–∞—Ä—É—é –≤–µ—Ä—Å–∏—é –±—Ä–∞—É–∑–µ—Ä–∞ –º–æ–∂–Ω–æ —É–∑–Ω–∞—Ç—å –≤ —Ñ–∞–π–ª–µ [browsers.js](https://a.yandex-team.ru/arc_vcs/frontend/projects/web4/browsers.js) –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞

   –î–ª—è —Ç–µ—Å—Ç–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ –ø–æ–ª—É—á–∏–ª–æ—Å—å —Å—Ä–∞–∑—É –ø–µ—Ä–µ–≤–µ—Å—Ç–∏ –Ω–∞ —Å–≤–µ–∂—É—é –≤–µ—Ä—Å–∏—é, –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∑–∞–≤–µ—Å—Ç–∏ –∑–∞–¥–∞—á—É –≤ startrek-–µ –≤ –æ—á–µ—Ä–µ–¥—å –≤–∞—à–µ–≥–æ –∫–æ–Ω—Ç—É—Ä–∞, –ø–æ–º–µ—Ç–∏–≤ –µ–µ —Ç–µ–≥–æ–º `need_update`. –≠—Ç–æ –Ω—É–∂–Ω–æ –¥–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä–æ–≤–∞—Ç—å –ø–µ—Ä–µ–≤–æ–¥ —Ç–µ—Å—Ç–æ–≤ –Ω–∞ –Ω–æ–≤—ã–µ –≤–µ—Ä—Å–∏–∏ –∏ –Ω–µ –∑–∞–±—ã–≤–∞—Ç—å –ø—Ä–æ –ø–æ—á–∏–Ω–∫—É –ø—Ä–æ–±–ª–µ–º–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤. –î–∞–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏ –±—É–¥—É—Ç —á–∞—Å—Ç—å—é –Ω–∞–ª–æ–≥–æ–≤–æ–π —Ü–µ–ª–∏ ["–ü–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏"](https://goals.yandex-team.ru/filter?user=21529&importance=0&goal=88387)


## –ö–∞–∫ –ø–æ–¥–∫–ª—é—á–∏—Ç—å —Å–µ–±–µ

 1. –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –≤–µ—Ä—Å–∏—è hermione `v3.8.0` –∏–ª–∏ –≤—ã—à–µ.
 1. –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –≤–µ—Ä—Å–∏—è html-reporter `6.0.0-alpha.12` –∏–ª–∏ –≤—ã—à–µ.
 1. –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –±—Ä–∞—É–∑–µ—Ä –¥–æ—Å—Ç—É–ø–µ–Ω –≤ –≥—Ä–∏–¥–µ –∏ –¥–æ–±–∞–≤–ª–µ–Ω –≤ –∫–æ–Ω—Ñ–∏–≥–µ (–ø—Ä–∏–º–µ—Ä [web4](https://github.yandex-team.ru/serp/web4/blob/dev/.hubby.conf.js))
 1. –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –ø–æ—Å–ª–µ–¥–Ω–∏–π —Å—Ç–∞–±–∏–ª—å–Ω—ã–π —Ä–µ—Å—É—Ä—Å `SELENIUM_PLATFORM_CONFIG` —Å–æ–¥–µ—Ä–∂–∏—Ç –¥–µ–∫–ª–∞—Ä–∞—Ü–∏—é –Ω—É–∂–Ω–æ–≥–æ –±—Ä–∞—É–∑–µ—Ä–∞. –ï—Å–ª–∏ –Ω–µ—Ç, —Ç–æ –Ω—É–∂–Ω–æ [–ø–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å](https://wiki.yandex-team.ru/search-interfaces/infra/grid-in-sandbox/#kakprotestirovatnovyjjobraz) —Ä–µ—Å—É—Ä—Å.
 1. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å [—Ö–µ–ª–ø–µ—Ä](https://github.com/gemini-testing/hermione#versionbrowserversion) –≤ —Ç–µ—Å—Ç–∞—Ö –∏–ª–∏ [–ø–ª–∞–≥–∏–Ω](https://github.com/gemini-testing/hermione-browser-version-changer) –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏.
 1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏ –ø–æ–¥–∫–ª—é—á–∏—Ç—å [–ø–ª–∞–≥–∏–Ω](https://a.yandex-team.ru/arc_vcs/frontend/projects/infratest/packages/hermione-vteams-runner) –Ω–∞ –ø—Ä–æ–µ–∫—Ç –¥–ª—è –∑–∞–ø—É—Å–∫–∞ hermione c –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º `v-team`.
 1. üéâ –ì–æ—Ç–æ–≤–æ!
