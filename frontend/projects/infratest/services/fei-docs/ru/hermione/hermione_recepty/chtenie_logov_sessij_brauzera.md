# Чтение логов сессий браузера

id сессии можно посмотреть в html-отчете в разделе `Meta`:

![id сессии](https://jing.yandex-team.ru/files/sipayrt/2021-02-01T16%3A46%3A35Z.png)

По этому id мы можем разобраться что именно происходило в браузере (какие команды выполнялись, какие были запросы, какие были ошибки при выполнении команд и т.д.).

Логи параллельно пишутся непосредственно на машине в гриде (можно смотреть сразу во время прогона, хранятся примерно день) и в **yt** (прорастают через некоторое время, хранятся вечно).

## Логи в реальном времени
**Логи на машине** можно смотреть по ручке `https://selenium.yandex-team.ru/logs/some_session_id`. Например, https://selenium.yandex-team.ru/logs/4f5b8aa85281ba9c50a1ea19d7785ce114479630ca11d69fcc91b0566227e228 (ссылка скоро протухнет)

## Логи в yt
**Логи в yt** хранятся [в двух каталогах](https://yt.yandex-team.ru/arnold/navigation?path=//home/logfeller/logs/selenium-session-log) - чанки по 30 минут и по дням. Выбираем нужный день и выполняем запрос через `yql`. Пример [yql-запроса](https://yql.yandex-team.ru/Operations/XZ8ggGim9ZMFw7kXlABDcB2BpyR1z0-glMvhdwfkTR8=).

## Если в отчете не оказалось id сессии

Если тест упал, а id сессии в отчете нет (например, в отчете ошибка `Couldn't connect to selenium server`), то причиной может быть ошибка получения сессии со стороны грида. Логи получения сессий можно смотреть в [kibana](https://nda.ya.ru/t/2b9tdWJi3ic7aA).
Для удобства мы помечаем запросы сессий мета-информацией - к запросу браузера добавляются поля `user` и `taskId`. Например, [запросы из конвейера за последние 15 минут](https://nda.ya.ru/t/2b9tdWJi3ic7aA).

Фильтры добавляются в единственный на странице инпут или накликиваются по существующим полям кнопкой `Add a filter` под инпутом:
![](https://jing.yandex-team.ru/files/sipayrt/kibana_2.png)

Также нужно не забывать указывать за какой период нужно искать логи:
![](https://jing.yandex-team.ru/files/sipayrt/kibana_1.png)

Пример фильтра с браузерами, у которых была [ошибка получения сессий](https://nda.ya.ru/t/kN4VB3SR3icAcZ).
