# Yappy-квоты

Для деплоя бет необходим предварительно выделенный объем железа, который разбивается на слоты с предопределенными настройками окружения, в которые беты и деплоятся (один слот - одна бета). Yappy-квота характеризуется числом таких слотов (емкость, максимальное количество бет, которое может быть одновременно поднято в этой квоте) и конфигурацией няня-сервисов, в которых слоты размещаются.

Для сервисов в [монорепе frontend](https://a.yandex-team.ru/arc_vcs/frontend) заведена общая квота [`report-renderer-templates`](https://yappy.z.yandex-team.ru/q/report-renderer-templates) без каких-то особых дополнительных кастомизаций renderer или окружения.

В случае необходимости добавить какие-либо специфические значения в общей квоте (например, в опции renderer `service-properties` или переменных окружения) или для заведения отдельной квоты с особой конфигурацией окружения/рендерера и прочего, следует обратиться к дежурному renderer с обоснованием через [форму infraduty](https://wiki.yandex-team.ru/infraduty/form/), указав инструмент "Деплой бет". Также, если вы только въезжаете в квоту, и особых кастомизаций для ваших шаблонов не требуется, но вы ожидаете существенный объем одновременно открытых пулл-реквестов (15 и более), об этом тоже следует написать в infraduty. Здесь от вас может потребоваться предоставить железо для заведения отдельной квоты. В среднем на 20-30 бет без репликации требуется 1 ядро, 40 Гб памяти, 175 Гб hdd и 15 Мб/с hdd io, но конкретные значения для конкретных шаблонов могут отличаться.

## Репликация бет

Для квоты может быть предусмотрена ее "реплика" - еще одна квота с такой же емкостью и конфигурацией, но с железом (и, соответственно, слотами) в другом ДЦ, что позволяет обеспечить устойчивость функциональности деплоя бет к потере одного из ДЦ, а также доступность бет, за счет наличия реплик в разных ДЦ, обе из которых фиксируются на уровне стокерной записи беты, а также наличия перезапросов.

## Изменение квоты

Информацию про шаги, необходимые для изменения квоты отражена в [`faq`](./faq.html#kak-zamenit-kvotu).
