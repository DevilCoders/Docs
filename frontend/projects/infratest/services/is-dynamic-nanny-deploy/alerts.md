## Разбор алертов

### non_dynamic_updates_dmmm

Возникает, когда сервис отвечает ошибкой "есть нединамические изменения".

По плану такая ошибка должно возникать только в случае, когда пользователь сам внёс такие изменения.

Однако сейчас nanny при применении тикета [может добавлять дефолты](https://st.yandex-team.ru/SWAT-7685) (новые поля в конфигурации сервиса), которые сервисом is-dynamic-deploy считаются нединамическими.

Как правило, nanny выкатывает новый код и все сервисы, которые подключили себе is-dynamic-deploy при деплое релиза получают ошибку: nanny добавляет новые поля, а is-dynamic-deploy их блокирует.

Алерт non_dynamic_updates_dmmm нужен как раз для того, чтобы избежать таких массовых проблем.
При первом обнаружении новых дефолтов от nanny нужно:
* убедиться, что сервис с такими изменениями можно прокатить с высоким operating_degrade_level; об этом написано в [пользовательской документации](../README.md)
* добавить новые дефолты в [файл defaults](https://deploy.yandex-team.ru/stages/is-dynamic-deploy-main/edit/du-main#disks)
* прокатить изменения в сервисе обычным способом
* вернуться к деплою на дашборде в nanny и на кубике http_request прожать "start" – это повторит запрос к сервису is-dynamic-deploy
* убедиться, что теперь кубик не красный. Если это не так, то вернуться к добавлению дефолтов, которые были забыты.

После того, как пользователь перестал страдать, пофиксить генератор.
Раз появился новый дефолт, значит [генератор](https://a.yandex-team.ru/arc_vcs/frontend/projects/infratest/packages/renderer-service-generator) про них не знает. Нужно завести тикет на обновление генератора, например [такой](https://st.yandex-team.ru/FEI-25162). Проследить, чтобы этот тикет сделали (либо сделать самому, там на опыте минут 10-15 нужно).

Пример разбора:
1) [Смотрим логи](../is-dynamic-nanny-deploy#posmotretь-logi)
2) Так как мы не знаем какой релиз упал, ищем самую позднюю ошибку: `message=non-dynamic` в поиске
3) В остальном можно следовать той же доке

# Добавление инструкции для нового алерта

### no_instructions

Добавь новую инструкцию, как это написано в [доке к renderer](../../packages/renderer/docs/alerts.md#noinstructions). Инструкцию, разумеется, нужно добавлять в этот файл. А все алерты для бет создаются из [специального скрипта](https://a.yandex-team.ru/arc_vcs/frontend/projects/infratest/packages/infra-yasm-templates/alerts/is-dynamic-deploy/template.jinja2), в который и нужно будет прописать созданную инструкцию.
