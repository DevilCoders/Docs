# expflags-cli

> `expflags-cli` ‚Äî –∫–æ–Ω—Å–æ–ª—å–Ω–∞—è —É—Ç–∏–ª–∏—Ç–∞ (npm-–ø–∞–∫–µ—Ç, Node.js) –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –¥–µ–∫–ª–∞—Ä–∞—Ü–∏–∏ —Ñ–ª–∞–≥–æ–≤ —Å —Ö—Ä–∞–Ω–∏–ª–∏—â–µ–º —Ñ–ª–∞–≥–æ–≤ –≤ AB.

## –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

* [–ì–∞–π–¥—ã –ø–æ –º–∏–≥—Ä–∞—Ü–∏–∏ –Ω–∞ –Ω–æ–≤—ã–µ –≤–µ—Ä—Å–∏–∏](./docs/migrations.md)

## –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

* Node.js 8.6+
* npm

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
# –ì–ª–æ–±–∞–ª—å–Ω–æ
npm install -g @yandex-int/si.ci.expflags-cli --registry=https://npm.yandex-team.ru

# —Ç–µ–∫—É—â–∏–π –ø—Ä–æ–µ–∫—Ç devDependencies
npm install -D @yandex-int/si.ci.expflags-cli --registry=https://npm.yandex-team.ru
```

## –ó–∞–ø—É—Å–∫

–î–ª—è –∑–∞–ø—É—Å–∫–∞ –∫–æ–º–∞–Ω–¥ –ø–æ—Ç—Ä–µ–±—É—é—Ç—Å—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è, —Å–æ–¥–µ—Ä–∂–∞—â–∏–µ —Ç–æ–∫–µ–Ω—ã –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –≤ API —Å–µ—Ä–≤–∏—Å–æ–≤. –ù–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —Ç–æ–∫–µ–Ω—ã —Å–º–æ—Ç—Ä–∏—Ç–µ –≤ –æ–ø–∏—Å–∞–Ω–∏–∏ –∫ –∫–æ–º–∞–Ω–¥–µ, –∏—Å–ø–æ–ª—å–∑—É—è –∫–æ–º–∞–Ω–¥—É `expflags-cli [command] --help`.

> :book: –ß–∏—Ç–∞–π—Ç–µ [FAQ](#faq) –¥–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã —É–∑–Ω–∞—Ç—å –≥–¥–µ –ø–æ–ª—É—á–∏—Ç—å —Ç–æ–∫–µ–Ω—ã.

### –ó–∞–ø—É—Å–∫ –ø–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏

```bash
AB_EXPERIMENTS_TOKEN=token

expflags-cli upload ./expflags/*.json --dry-run
```

### –ó–∞–ø—É—Å–∫ –±–µ–∑ —É—Å—Ç–∞–Ω–æ–≤–∫–∏

–í —ç—Ç–æ–º —Å–ª—É—á–∞–µ %%npx%% —Å–Ω–∞—á–∞–ª–∞ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç —É—Ç–∏–ª–∏—Ç—É –∏ –≤—Å–µ –µ—ë –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏, –∞ –ø–æ—Ç–æ–º –∑–∞–ø—É—Å—Ç–∏—Ç –µ—ë.

```bash
NPM_CONFIG_REGISTRY=https://npm.yandex-team.ru
TESTPALM_OAUTH_TOKEN=token

npx @yandex-int/si.ci.expflags-cli upload ./expflags/*.json --dry-run
```

## –ö–æ–º–∞–Ω–¥—ã

### –ö–æ–º–∞–Ω–¥–∞ `upload`. –°–æ–∑–¥–∞–Ω–∏–µ —Ñ–ª–∞–≥–æ–≤

–ö–æ–º–∞–Ω–¥–∞ –∑–∞–ø—É—Å–∫–∞–µ—Ç —Å–æ–∑–¥–∞–Ω–∏–µ —Ñ–ª–∞–≥–æ–≤, –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏—Ö –≤ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ —Ñ–ª–∞–≥–æ–≤ –≤ AB. –ü–æ–¥—Ä–æ–±–Ω–µ–µ –æ —Ñ–æ—Ä–º–∞—Ç–µ [–¥–µ–∫–ª–∞—Ä–∞—Ü–∏–π —Ñ–ª–∞–≥–æ–≤](#–î–µ–∫–ª–∞—Ä–∞—Ü–∏—è-—Ñ–ª–∞–≥–∞).

#### –ü—Ä–∏–º–µ—Ä—ã

–ü—Ä–∏–º–µ—Ä –∑–∞–ø—É—Å–∫–∞ –∫–æ–º–∞–Ω–¥—ã –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ñ–ª–∞–≥–æ–≤, –∏–º–µ—é—â–∏—Ö JSON-–¥–µ–∫–ª–∞—Ä–∞—Ü–∏–∏ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `./expflags`:

```console
expflags-cli upload ./expflags/*.json --dry-run
```

–ü—Ä–∏–º–µ—Ä –∑–∞–ø—É—Å–∫–∞ –∫–æ–º–∞–Ω–¥—ã –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ñ–ª–∞–≥–æ–≤, –¥–µ–∫–ª–∞—Ä–∞—Ü–∏–∏ –∫–æ—Ç–æ—Ä—ã—Ö —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –æ–¥–Ω–æ–º —Ñ–∞–π–ª–µ:

```console
expflags-cli upload ./service/expflags.flags.json --dry-run
```

#### –ê—Ä–≥—É–º–µ–Ω—Ç—ã

* `--creator` ‚Äî –õ–æ–≥–∏–Ω –∞–≤—Ç–æ—Ä–∞, —Å–æ–∑–¥–∞–≤–∞–µ–º—ã—Ö —Ñ–ª–∞–≥–æ–≤.
* `--common-flag` ‚Äî –®–∞–±–ª–æ–Ω —Å–æ–∑–¥–∞–≤–∞–µ–º—ã—Ö —Ñ–ª–∞–≥–æ–≤. –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –≤—Å–µ –ø–æ–ª—è [–¥–µ–∫–ª–∞—Ä–∞—Ü–∏–π —Ñ–ª–∞–≥–æ–≤](#–î–µ–∫–ª–∞—Ä–∞—Ü–∏—è-—Ñ–ª–∞–≥–∞).
* `--options` ‚Äî –û–ø—Ü–∏–∏ –∑–∞–ø—É—Å–∫–∞ –∫–æ–º–∞–Ω–¥—ã.
  * `--options.validation.requireVteam` ‚Äî –¢—Ä–µ–±–æ–≤–∞—Ç—å –Ω–∞–ª–∏—á–∏—è –∫–æ–º–∞–Ω–¥—ã –≤ –ø–æ–ª–µ `vteam`.
  * `--options.validation.validateValuesType` ‚Äî –í–∫–ª—é—á–∞–µ—Ç –≤–∞–ª–∏–¥–∞—Ü–∏—é –∑–Ω–∞—á–µ–Ω–∏–π –≤ –ø–æ–ª–µ `values`.
* `--dry-run` ‚Äî –í—ã–ø–æ–ª–Ω—è—Ç—å —Ä–∞–±–æ—Ç—É, –Ω–æ –Ω–∏—á–µ–≥–æ –Ω–µ —Å–æ–∑–¥–∞–≤–∞—Ç—å –≤ —Å–µ—Ä–≤–∏—Å–∞—Ö —Å–º–µ–∂–Ω–∏–∫–æ–≤ (AB).

### –ö–æ–º–∞–Ω–¥–∞ `update`. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ñ–ª–∞–≥–æ–≤

–ö–æ–º–∞–Ω–¥–∞ –∑–∞–ø—É—Å–∫–∞–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ñ–ª–∞–≥–æ–≤, –¥–∞–Ω–Ω—ã–µ –æ –∫–æ—Ç–æ—Ä—ã—Ö —É—Å—Ç–∞—Ä–µ–ª–∏ –≤ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ —Ñ–ª–∞–≥–æ–≤ –≤ AB.

#### –ü—Ä–∏–º–µ—Ä—ã

–ü—Ä–∏–º–µ—Ä –∑–∞–ø—É—Å–∫–∞ –∫–æ–º–∞–Ω–¥—ã –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ñ–ª–∞–≥–æ–≤, –∏–º–µ—é—â–∏—Ö JSON-–¥–µ–∫–ª–∞—Ä–∞—Ü–∏–∏ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `./expflags`:

```console
expflags-cli update ./expflags/*.json --dry-run
```

–ü—Ä–∏–º–µ—Ä –∑–∞–ø—É—Å–∫–∞ –∫–æ–º–∞–Ω–¥—ã –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ñ–ª–∞–≥–æ–≤, –¥–µ–∫–ª–∞—Ä–∞—Ü–∏–∏ –∫–æ—Ç–æ—Ä—ã—Ö —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –æ–¥–Ω–æ–º —Ñ–∞–π–ª–µ:

```console
expflags-cli update ./service/expflags.flags.json --dry-run
```

#### –ê—Ä–≥—É–º–µ–Ω—Ç—ã

* `--creator` ‚Äî –õ–æ–≥–∏–Ω –∞–≤—Ç–æ—Ä–∞, —Å–æ–∑–¥–∞–≤–∞–µ–º—ã—Ö —Ñ–ª–∞–≥–æ–≤.
* `--common-flag` ‚Äî –®–∞–±–ª–æ–Ω —Å–æ–∑–¥–∞–≤–∞–µ–º—ã—Ö —Ñ–ª–∞–≥–æ–≤. –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –≤—Å–µ –ø–æ–ª—è [–¥–µ–∫–ª–∞—Ä–∞—Ü–∏–π —Ñ–ª–∞–≥–æ–≤](#–î–µ–∫–ª–∞—Ä–∞—Ü–∏—è-—Ñ–ª–∞–≥–∞).
* `--options` ‚Äî –û–ø—Ü–∏–∏ –∑–∞–ø—É—Å–∫–∞ –∫–æ–º–∞–Ω–¥—ã.
  * `--options.validation.requireVteam` ‚Äî –¢—Ä–µ–±–æ–≤–∞—Ç—å –Ω–∞–ª–∏—á–∏—è –∫–æ–º–∞–Ω–¥—ã –≤ –ø–æ–ª–µ `vteam`.
  * `--options.validation.validateValuesType` ‚Äî –í–∫–ª—é—á–∞–µ—Ç –≤–∞–ª–∏–¥–∞—Ü–∏—é –∑–Ω–∞—á–µ–Ω–∏–π –≤ –ø–æ–ª–µ `values`.
* `--dry-run` ‚Äî –í—ã–ø–æ–ª–Ω—è—Ç—å —Ä–∞–±–æ—Ç—É, –Ω–æ –Ω–∏—á–µ–≥–æ –Ω–µ —Å–æ–∑–¥–∞–≤–∞—Ç—å –≤ —Å–µ—Ä–≤–∏—Å–∞—Ö —Å–º–µ–∂–Ω–∏–∫–æ–≤ (AB).

### –ö–æ–º–∞–Ω–¥–∞ `mark-as-removed-from-code`. –£–¥–∞–ª–µ–Ω–∏–µ —Ñ–ª–∞–≥–æ–≤

–ö–æ–º–∞–Ω–¥–∞ –ø–æ–º–µ—á–∞–µ—Ç –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã–µ –µ–π —Ñ–ª–∞–≥–∏ –∫–∞–∫ ¬´—É–¥–∞–ª—ë–Ω–Ω—ã–µ –∏–∑ –∫–æ–¥–∞¬ª. –≠—Ç—É –∫–æ–º–∞–Ω–¥—É –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤–∑–∞–º–µ–Ω –¥–µ–π—Å—Ç–≤–∏—è ¬´–¥–µ–ø—Ä–µ–∫–µ–π—Ç¬ª. –¢–∞–∫–æ–π –ø–æ–¥—Ö–æ–¥ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å—Ç—Ä–∞—Ö–æ–≤–∞—Ç—å—Å—è –æ—Ç –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Å—Ç–∞—Ä—ã—Ö —Ñ–ª–∞–≥–æ–≤. –§–ª–∞–≥, –ø–æ–º–µ—á–µ–Ω–Ω—ã–π ¬´—É–¥–∞–ª—ë–Ω–Ω—ã–º –∏–∑ –∫–æ–¥–∞¬ª –±—É–¥–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–¥–µ–ø—Ä–µ–∫–µ–π—á–µ–Ω –∞–≤—Ç–æ–º–∞—Ç–∏–∫–æ–π –≤–Ω—É—Ç—Ä–∏ AB, –∫–æ–≥–¥–∞ —Å—Ä–∞–±–æ—Ç–∞–µ—Ç –∏—Ö —ç–≤—Ä–∏—Å—Ç–∏–∫–∞.

#### –ü—Ä–∏–º–µ—Ä—ã

–ü—Ä–∏–º–µ—Ä –∑–∞–ø—É—Å–∫–∞ –∫–æ–º–∞–Ω–¥—ã, –ø–æ–º–µ—á–∞—é—â–∏–π —Ñ–ª–∞–≥–∏ —Å –∏–º–µ–Ω–∞–º–∏ `flag_name_0` –∏ `flag_name_1` (—Ç–æ–ª—å–∫–æ –¥–ª—è —Ö—ç–Ω–¥–ª–µ—Ä–∞ `WEB`) ¬´—É–¥–∞–ª—ë–Ω–Ω—ã–º–∏ –∏–∑ –∫–æ–¥–∞¬ª –¥–ª—è —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è `web4`.

```console
expflags-cli mark-as-removed-from-code flag_name_0 flag_name_1 --source web4 --handler WEB --dry-run
```

#### –ê—Ä–≥—É–º–µ–Ω—Ç—ã

* `--source` ‚Äî –ò—Å—Ç–æ—á–Ω–∏–∫ —Ñ–ª–∞–≥–∞. –¢—Ä–µ–±—É–µ—Ç—Å—è –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∏—Å—Ç–æ—á–Ω–∏–∫–∞ –∏—Å—Ç–∏–Ω—ã (–º–µ—Å—Ç–æ –ø–µ—Ä–≤–∏—á–Ω–æ–π –¥–µ–∫–ª–∞—Ä–∞—Ü–∏–∏). –ö–∞–∫ –ø—Ä–∞–≤–∏–ª–æ, –Ω–∞–∑–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è.
* `--handler` ‚Äî –•—ç–Ω–¥–ª–µ—Ä —Ñ–ª–∞–≥–∞. –£–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è, —Ç–∞–∫ –∫–∞–∫ —Ñ–ª–∞–≥ —Å –æ–¥–Ω–∏–º –∏–º–µ–Ω–µ–º –º–æ–∂–µ—Ç –ø—Ä–∏—Å—É—Ç—Å—Ç–≤–æ–≤–∞—Ç—å —Å—Ä–∞–∑—É –≤ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Ö—ç–Ω–¥–ª–µ—Ä–∞—Ö.
* `--dry-run` ‚Äî –í—ã–ø–æ–ª–Ω—è—Ç—å —Ä–∞–±–æ—Ç—É, –Ω–æ –Ω–∏—á–µ–≥–æ –Ω–µ —Å–æ–∑–¥–∞–≤–∞—Ç—å –≤ —Å–µ—Ä–≤–∏—Å–∞—Ö —Å–º–µ–∂–Ω–∏–∫–æ–≤ (AB).

### –ö–æ–º–∞–Ω–¥–∞ `search`. –ü–æ–∏—Å–∫ —Ñ–ª–∞–≥–æ–≤

–ö–æ–º–∞–Ω–¥–∞ –ø–æ–∏—Å–∫–∞ —Ñ–ª–∞–≥–æ–≤ –≤ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ —Ñ–ª–∞–≥–æ–≤ —Å–µ—Ä–≤–∏—Å–∞ AB.

#### –ü—Ä–∏–º–µ—Ä—ã

–ü—Ä–∏–º–µ—Ä –∑–∞–ø—É—Å–∫–∞ –∫–æ–º–∞–Ω–¥—ã, –≤—ã–ø–æ–ª–Ω—è—é—â–µ–π –ø–æ–∏—Å–∫ —Ñ–ª–∞–≥–æ–≤ —Å —Ç–µ–≥–æ–º `expflags-cli` –¥–ª—è —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è `web4`. –†–µ–∑—É–ª—å—Ç–∞—Ç–æ–º –±—É–¥–µ—Ç –º–∞—Å—Å–∏–≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏—Ö —Ñ–ª–∞–≥–æ–≤ —Å –ø–æ–ª—è–º–∏ `name` –∏ `handler`.

```console
expflags-cli search --source web4 --tag expflags-cli --field name --field handler
```

#### –ê—Ä–≥—É–º–µ–Ω—Ç—ã

* `--source` ‚Äî –ò—Å—Ç–æ—á–Ω–∏–∫ —Ñ–ª–∞–≥–∞. –¢—Ä–µ–±—É–µ—Ç—Å—è –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∏—Å—Ç–æ—á–Ω–∏–∫–∞ –∏—Å—Ç–∏–Ω—ã (–º–µ—Å—Ç–æ –ø–µ—Ä–≤–∏—á–Ω–æ–π –¥–µ–∫–ª–∞—Ä–∞—Ü–∏–∏). –ö–∞–∫ –ø—Ä–∞–≤–∏–ª–æ, –Ω–∞–∑–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è.
* `--tag` ‚Äî –¢–µ–≥ —Ñ–ª–∞–≥–∞. –ü–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–ª—É—á–∏—Ç—å —Ñ–ª–∞–≥–∏ —Å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏ –ø–æ–ª—è `tags`.
* `--field` ‚Äî –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –ø–æ–ª–µ–π, –∫–æ—Ç–æ—Ä—ã–µ –±—É–¥—É—Ç —Å–æ—Å—Ç–∞–≤–ª—è—Ç—å —Ä–µ–∑—É–ª—å—Ç–∏—Ä—É—é—â–∏–µ —Ñ–ª–∞–≥–∏. –û—Å—Ç–∞–ª—å–Ω—ã–µ –ø–æ–ª—è –±—É–¥—É—Ç —É–¥–∞–ª—è—Ç—å—Å—è.

### –ö–æ–º–∞–Ω–¥–∞ `search-local`. –ü–æ–∏—Å–∫ —Ñ–ª–∞–≥–æ–≤ –Ω–∞ FS

–ö–æ–º–∞–Ω–¥–∞ –ø–æ–∏—Å–∫–∞ —Ñ–ª–∞–≥–æ–≤ –Ω–∞ FS.

#### –ü—Ä–∏–º–µ—Ä—ã

–ü—Ä–∏–º–µ—Ä –∑–∞–ø—É—Å–∫–∞ –∫–æ–º–∞–Ω–¥—ã, –≤—ã–ø–æ–ª–Ω—è—é—â–µ–π –ø–æ–∏—Å–∫ —Ñ–ª–∞–≥–æ–≤ —Å –∏–º–µ–Ω–µ–º `flag_name` –∏ —Ö—ç–Ω–¥–ª–µ—Ä–æ–º `WEB`. –†–µ–∑—É–ª—å—Ç–∞—Ç–æ–º –±—É–¥–µ—Ç –º–∞—Å—Å–∏–≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏—Ö —Ñ–ª–∞–≥–æ–≤ —Å –ø–æ–ª—è–º–∏ `name` –∏ `handler`.

```console
expflags-cli '*.json' --name flag_name --handler WEB --field name --field handler
```

#### –ê—Ä–≥—É–º–µ–Ω—Ç—ã

* `--name` ‚Äî –ò–º–µ–Ω—è —Ñ–ª–∞–≥–æ–≤ –¥–ª—è –ø–æ–∏—Å–∫–∞, —Ä–∞–∑–¥–µ–ª—ë–Ω–Ω—ã–µ –∑–∞–ø—è—Ç–æ–π.
* `--handler` ‚Äî –•—ç–Ω–¥–ª–µ—Ä –∏—Å–∫–æ–º—ã—Ö —Ñ–ª–∞–≥–æ–≤.
* `--exclude-manual` ‚Äî –ò—Å–∫–ª—é—á–∏—Ç—å `manual` —Ñ–ª–∞–≥–∏ –∏–∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø–æ–∏—Å–∫–∞.
* `--field` ‚Äî –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –ø–æ–ª–µ–π, –∫–æ—Ç–æ—Ä—ã–µ –±—É–¥—É—Ç —Å–æ—Å—Ç–∞–≤–ª—è—Ç—å —Ä–µ–∑—É–ª—å—Ç–∏—Ä—É—é—â–∏–µ —Ñ–ª–∞–≥–∏. –û—Å—Ç–∞–ª—å–Ω—ã–µ –ø–æ–ª—è –±—É–¥—É—Ç —É–¥–∞–ª—è—Ç—å—Å—è.

## –î–µ–∫–ª–∞—Ä–∞—Ü–∏—è —Ñ–ª–∞–≥–∞

–í –∫–∞—á–µ—Å—Ç–≤–µ –∏–º–µ–Ω–∏ —Ñ–ª–∞–≥–∞ –≤—ã—Å—Ç—É–ø–∞–µ—Ç –Ω–∞–∑–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–∞ (—Å–ª—É—á–∞–π [—Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–µ–∫–ª–∞—Ä–∞—Ü–∏–π –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏](#–î–µ–∫–ª–∞—Ä–∞—Ü–∏—è-—Ñ–ª–∞–≥–æ–≤-–≤-–¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏)), –ª–∏–±–æ –∫–ª—é—á –æ–±—ä–µ–∫—Ç–∞ (—Å–ª—É—á–∞–π [—Ö—Ä–∞–Ω–µ–Ω–∏—è –≤ —Ñ–∞–π–ª–µ –º–Ω–æ–∂–µ—Å—Ç–≤–∞ –¥–µ–∫–ª–∞—Ä–∞—Ü–∏–π](#–î–µ–∫–ª–∞—Ä–∞—Ü–∏—è-—Ñ–ª–∞–≥–æ–≤-–≤-–æ–¥–Ω–æ–º-—Ñ–∞–π–ª–µ)).

–ù–∏–∂–µ —É–∫–∞–∑–∞–Ω–∞ –¥–µ–∫–ª–∞—Ä–∞—Ü–∏—è —Ñ–ª–∞–≥–∞ —Å –ø–æ—è—Å–Ω–µ–Ω–∏—è–º–∏ –ø–æ –ø–æ–ª—è–º. –í—Å–µ —É–∫–∞–∑–∞–Ω–Ω—ã–µ –Ω–∏–∂–µ –ø–æ–ª—è —É—á–∞—Å—Ç–≤—É—é—Ç –ø—Ä–∏ —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–∏ —Ñ–ª–∞–≥–∞, –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º–æ–≥–æ –≤ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ —Ñ–ª–∞–≥–æ–≤ –≤ AB. –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è, –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —Å–µ—Ä–≤–∏—Å—É **–Ω–µ —É—á–∞—Å—Ç–≤—É—é—Ç –≤ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏**, –Ω–æ –∏ –Ω–µ –∑–∞–ø—Ä–µ—â–µ–Ω—ã, —á—Ç–æ–±—ã –∏–º–µ—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Ö—Ä–∞–Ω–∏—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é.

```json
{
  // –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è, –∫–∞–∫ –∑–∞–≥–æ–ª–æ–≤–æ–∫ —Ñ–ª–∞–≥–∞
  "description": "<description>",
  // –ò–¥–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä—É–µ—Ç –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã—Ö –ª—é–¥–µ–π –∑–∞ —Ñ–ª–∞–≥.
  "manager": "<value>" | ["<value>"],
  // –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è, –∫–∞–∫ —Ö—ç–Ω–¥–ª–µ—Ä —Ñ–ª–∞–≥–∞.
  // –ï—Å–ª–∏ —É–∫–∞–∑–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ö—ç–Ω–¥–ª–µ—Ä–æ–≤, —Ç–æ —á–∏—Å–ª–æ —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö —Ñ–ª–∞–≥–æ–≤ –±—É–¥–µ—Ç —Ä–∞–≤–Ω–æ –∏—Ö —á–∏—Å–ª—É. –û–¥–∏–Ω —Ñ–ª–∞–≥ ‚Äî –æ–¥–∏–Ω —Ö—ç–Ω–¥–ª–µ—Ä.
  "handlers": ["handler"],
  // –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è, –∫–∞–∫ –∏—Å—Ç–æ—á–Ω–∏–∫ —Ñ–ª–∞–≥–∞.
  // –ö–∞–∫ –ø—Ä–∞–≤–∏–ª–æ, —É–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ –∞—Ä–≥—É–º–µ–Ω—Ç `--common-flag` –∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –∏–º–µ–Ω–∏ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è, –≤ –∫–æ—Ç–æ—Ä–æ–º —Ö—Ä–∞–Ω–∏—Ç—Å—è –¥–µ–∫–ª–∞—Ä–∞—Ü–∏—è, –ª–∏–±–æ –∏–º—è —Å–µ—Ä–≤–∏—Å–∞ (—É–Ω–∏–∫–∞–ª—å–Ω–æ–µ).
  "source": "<value>",
  // –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è, –∫–∞–∫ —Ç–∏–ø –∑–Ω–∞—á–µ–Ω–∏—è —Ñ–ª–∞–≥–∞.
  "validation_type": "<value>",
  // –ù–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π. –ò–¥–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä—É–µ—Ç —Å–µ—Ä–≤–∏—Å—ã, –∫ –∫–æ—Ç–æ—Ä—ã–º –æ—Ç–Ω–æ—Å–∏—Ç—Å—è —Ñ–ª–∞–≥. –ù–∞–ø—Ä–∏–º–µ—Ä, `images` –∏–ª–∏ `video`.
  "service": "<value>" | ["<value>"],
  // –ù–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π. –ò–¥–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä—É–µ—Ç –∫–æ–º–∞–Ω–¥—ã, –∫ –∫–æ—Ç–æ—Ä—ã–º –æ—Ç–Ω–æ—Å–∏—Ç—Å—è —Ñ–ª–∞–≥. –ù–∞–ø—Ä–∏–º–µ—Ä, `REPORT` –∏–ª–∏ `YABS_PROXY`.
  "component": "<value>" | ["<value>"],
  // –ù–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π, –µ—Å–ª–∏ –Ω–µ –≤–∫–ª—é—á–µ–Ω–∞ –æ–ø—Ü–∏—è `requireVteam`. –ò–¥–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä—É–µ–º –∫–æ–º–∞–Ω–¥—É, –æ—Ç–≤–µ—á–∞—é—â—É—é –∑–∞ —Ñ–ª–∞–≥.
  "vteam": "<value>" | ["<value>"],
  // –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –ø–æ–¥ —Ñ–ª–∞–≥–æ–º –∑–∞–≤–∏—Å–∏–º–æ–π –æ—Ç –¥–∞–Ω–Ω—ã—Ö, –∫–æ—Ç–æ—Ä—ã–µ —Ç–∞–∫ –∂–µ –≤–∫–ª—é—á–∞—é—Ç—Å—è —Ñ–ª–∞–≥–æ–º.
  "dataDependent": true | false,
  // –ù–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π. –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç, —á—Ç–æ —Ñ–ª–∞–≥ —Å–∏—Å—Ç–µ–º–Ω—ã–π –∏ –Ω–µ —É—á–∞—Å—Ç–≤—É–µ—Ç –≤ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞—Ö. –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é `false`.
  "system": true | false,
  // –ù–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π. –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä —Ç–æ–≥–æ, —á—Ç–æ —Ñ–ª–∞–≥ –±—É–¥–µ—Ç —É—á–∞—Å—Ç–≤–æ–≤–∞—Ç—å –≤ –≤–∞–ª–∏–¥–∞—Ü–∏–∏, –Ω–æ —Å–æ–∑–¥–∞–Ω–∏—è –∏–ª–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ñ–ª–∞–≥–∞ –Ω–µ –±—É–¥–µ—Ç.
  "manual": true | false
}
```

## –•—Ä–∞–Ω–µ–Ω–∏–µ –¥–µ–∫–ª–∞—Ä–∞—Ü–∏–π —Ñ–ª–∞–≥–æ–≤

–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –¥–≤–∞ –ø–æ–¥—Ö–æ–¥–∞ –∫ —Ö—Ä–∞–Ω–µ–Ω–∏—é —Ñ–ª–∞–≥–æ–≤.

### –î–µ–∫–ª–∞—Ä–∞—Ü–∏—è —Ñ–ª–∞–≥–æ–≤ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏

–û–¥–∏–Ω —Ñ–∞–π–ª ‚Äî –æ–¥–∏–Ω —Ñ–ª–∞–≥.

–§–∞–π–ª–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞:

```console
dir/
‚îú‚îÄ‚îÄ flag-0.json
‚îî‚îÄ‚îÄ flag-1.json
```

–°–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–ª–∞–≥–æ–≤:

```json
{
  "key": <value>
}
```

### –î–µ–∫–ª–∞—Ä–∞—Ü–∏—è —Ñ–ª–∞–≥–æ–≤ –≤ –æ–¥–Ω–æ–º —Ñ–∞–π–ª–µ

–û–¥–∏–Ω —Ñ–∞–π–ª ‚Äî –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ñ–ª–∞–≥–æ–≤. –ò–º—è —Ñ–∞–π–ª–∞ –¥–æ–ª–∂–Ω–æ –∑–∞–∫–∞–Ω—á–∏–≤–∞—Ç—å—Å—è –Ω–∞ `.flags.json`.

–°–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–ª–∞–≥–æ–≤:

```json
{
  "flag-0": {
    "key": <value>
  },
  "flag-1": {
    "key": <value>
  }
}
```

## –í–∞–ª–∏–¥–∞—Ç–æ—Ä—ã

* `FlagSourceRule` ‚Äî –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, —á—Ç–æ —Ñ–ª–∞–≥ –≤ —Å–µ—Ä–≤–∏—Å–µ –∏–º–µ–µ—Ç —Ç–∞–∫–æ–π –∂–µ –∏—Å—Ç–æ—á–Ω–∏–∫ –≤ –ø–æ–ª–µ `source`, –∫–∞–∫ –∏ —Ñ–ª–∞–≥ –≤ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ —Ñ–ª–∞–≥–æ–≤ –≤ AB.
* `ManualFlagExistRule` ‚Äî –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, —á—Ç–æ —Ñ–ª–∞–≥, –ø–æ–º–µ—á–µ–Ω–Ω—ã–π –º–∞—Ä–∫–µ—Ä–æ–º `manual`, —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –≤ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ —Ñ–ª–∞–≥–æ–≤ –≤ AB.
* `RemoteFlagCreatorConflictRule` ‚Äî –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, —á—Ç–æ —Ñ–ª–∞–≥ –≤ —Å–µ—Ä–≤–∏—Å–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –æ–±–Ω–æ–≤–ª—ë–Ω –∏–∑ –ø–æ–¥ —Ç–µ–∫—É—â–µ–≥–æ —Ä–æ–±–æ—Ç–∞.
* `ValuesTypeRule` ‚Äî –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, —á—Ç–æ –∑–Ω–∞—á–µ–Ω–∏—è –≤ –ø–æ–ª–µ `values` —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç —Ç–∏–ø—É, —É–∫–∞–∑–∞–Ω–Ω–æ–º—É –≤ –ø–æ–ª–µ `validation_type`.
* `VTeamRule` ‚Äî –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, —á—Ç–æ –ø–æ–ª–µ `vteam` –∏–º–µ–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ.

## FAQ

### –ì–¥–µ –ø–æ–ª—É—á–∏—Ç—å —Ç–æ–∫–µ–Ω—ã?

* [OAuth-—Ç–æ–∫–µ–Ω –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å AB](https://wiki.yandex-team.ru/serp/experiments/adminka/api/) ‚Äî `AB_EXPERIMENTS_TOKEN`

### –ö–∞–∫ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è, —á—Ç–æ —Ñ–ª–∞–≥ —É—Å—Ç–∞—Ä–µ–ª –∏ –µ–≥–æ –ø–æ—Ä–∞ –æ–±–Ω–æ–≤–∏—Ç—å?

–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø—Ä–∏ —Å—Ä–∞–≤–Ω–µ–Ω–∏–∏ –ª–æ–∫–∞–ª—å–Ω–æ–π –¥–µ–∫–ª–∞—Ä–∞—Ü–∏–∏ —Ñ–ª–∞–≥–∞ –∏ –µ–≥–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –µ–≥–æ —Å–æ–∑–¥–∞–Ω–∏—è –≤ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ —Ñ–ª–∞–≥–æ–≤ –≤ AB –Ω–∞ –æ—Å–Ω–æ–≤–µ –∑–∞—Ä–∞–Ω–µ–µ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–≥–æ –Ω–∞–±–æ—Ä–∞ –ø–æ–ª–µ–π. –ï—Å–ª–∏ –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ–ª–µ–π –∏–ª–∏ –∏—Ö —á–∏—Å–ª–æ —Ä–∞—Å—Ö–æ–¥–∏—Ç—Å—è, —Ç–æ —Ç–∞–∫–æ–π —Ñ–ª–∞–≥ —Å—á–∏—Ç–∞–µ—Ç—Å—è —É—Å—Ç–∞—Ä–µ–≤—à–∏–º.

> üìñ –ï—Å–ª–∏ –∑–Ω–∞—á–µ–Ω–∏–µ–º –ø–æ–ª—è —è–≤–ª—è–µ—Ç—Å—è —Å—Ç—Ä–æ–∫–∞, —Ç–æ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –æ–ø–µ—Ä–∞—Ü–∏–∏ `.trim()`  –Ω–∞–¥ –Ω–µ–π.

–°–ø–∏—Å–æ–∫ –ø–æ–ª–µ–π, —É—á–∞—Å—Ç–≤—É—é—â–∏—Ö –≤ —Å—Ä–∞–≤–Ω–µ–Ω–∏–∏:

```js
name
title
owners
components
services
handler
source
validation_type
is_system
is_used_in_frontend
is_deprecated
backend_teams
```
