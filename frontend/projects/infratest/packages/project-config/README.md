# Project config

[![oko health](https://oko.yandex-team.ru/badges/pkg.svg?pkgName=@yandex-int/project-config)](https://oko.yandex-team.ru/pkg/@yandex-int/project-config)

Пакет для работы с конфигурационным файлом проекта `.yproject`.

## Мотивация

Разные проекты хранят конфигурации утилит в различных папках. Из-за этой особенности утилиты вынуждены искать конфигурацию по нескольким разным путям.

## Принцип работы

Каждый проект в корне создаёт файл конфигурации проекта `.yproject` - файл в формате `json`.
По ключу `paths` находится объект с путями до конфигурационных файлов утилит.

Например:
```json
{
    "name": "web4",
    "paths": {
        "archon": ".config/archon.js",
        "castle": ".config/castle.js"
    }
}
```

В этом файле также может храниться информация, необходимая для разных утилит, такая как адрес репозитория проекта.

## API

### `load`

Ищет файл конфигурации проекта, начиная с указанной папки. Если в указанной папке его нет, то поиск продолжается уровнем выше и так далее до корня файловой системы.

Убеждается, что в файле конфигурации содержится объект, и что по ключу `paths` также находится объект. Если ключа `paths` нет, то ему будет присвоен пустой объект.

Модуль добавляет к конфигурации два свойства:
* `root` - полный путь до папки с конфигурацией проекта
* `filepath` - полный путь до файла с конфигурацией проекта

Пример возвращаемого конфига:
```json
{
    "root": "/path/to/project/root",
    "filepath": "/path/to/project/root/.yproject",
    "paths": {}
}
```

## Пример использования
```javascript
const projectConfig = require('@yandex-int/project-config').load(process.cwd());
const archonDir = path.resolve(projectConfig.root, projectConfig.paths.archon);
```
