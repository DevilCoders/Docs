# Поддержка еxpectation в синтаксисе

Каждый шаг (`step`) в testpalm может содержать список ожидаемых эффектов (`expect`). Такой формат удобен и привычен для пользователей.
Поддержка еxpectation в синтаксисе означает, что действия (`do`) будут записаны как отдельные шаги,
а проверки (`assert`) и скриншотные проверки (`screenshot`) будут добавлены к шагу в блок `expect`, если это возможно. 
При этом служебные слова `do`, `assert`, `screenshot` удаляются из текста.

Рассмотрим следующее описание теста:
```yml
# path/to/file/еxpectation-syntax.testpalm.yml
  Работа с колдунщиком картинок:
    - do: |
        на устройстве с размером экрана больше 320х571 px получить выдачу по запросу "foreverdata"
        проскроллить выдачу вниз до колдунщика картинок
        кликнуть в первую картинку
    - assert: открылся просмотрщик картинок
    - assert: баннер с рекламой скрылся
    - screenshot: внешний вид просмотрщика картинок [viewer]
    - do: нажать в крестик, закрывающий просмотрщик картинок
    - assert: просмотрщик картинок скрылся
    - assert: появился баннер с рекламой
```

Если использовать форматтер по умолчанию, то в тесте будет 7 шагов и 1 скриншот в еxpectation:

![without-expectation-syntax](./images/without-expectation-syntax.png)

Если использовать форматтер c поддержкой еxpectation в синтаксисе (`formatter` === `withExpectationSyntax`), то в тесте будет 2 шага, а остальные пункты - в еxpectation:

![with-expectation-syntax](./images/with-expectation-syntax.png)

Для проверки того, что тескт-кейсы удовлетворяют еxpectation синтаксису используйте валидацию [required-step-before-expect](./configuration.md#validationOpts).