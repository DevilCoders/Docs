# @yandex-lego/ts-docgen

Утилита для сбора документации bem-react компонентов.

## Использование

#### 1. Подготовка

Для захвата описания компонента и свойств, компонент должен быть помечен `jsdoc` директивой `param`, аргументом которой должно быть название интерфейса или типа.

Название интерфейса или типа должно обязательно содержать слово `Props`.

```tsx
type ComponentProps = {
    /**
     * Описание.
     * @default 'empty'
     */
    prop: string
}

/**
 * Описание.
 * @param {ComponentProps} props
 */
const Component = () => null
```

#### 2. Разметка в markdown

Файл документации должен быть назван `README.md` либо `<ComponentName>.md`.

В файле необходимо шаблонами разметить секции, в которые будут вставляться сгенерированные блоки:

```md
<!-- placeholder:start -->
<!-- placeholder:end -->
```

Поддерживаются следующие шаблоны:

* **`description`** — Описание компонента
* **`props`** — Список свойств компонента
* **`modifiers`** — Список модификаторов компонента

#### 3. Запуск генерации

```
ts-docgen generate --src=src/components
```

##### Аргументы

- **`src`** — Путь до компонент
- **`components`** — Список компонент, для которых нужно собрать документацию

## Разработка

#### Запуск unit-тестов

```
npm run test
```

## TODO

- [ ] Собирать файлы через `glob` вместо `bem-walk` (т.к. нам нужны только файлы, без сущностей)
- [ ] Разбить парсер на два модуля (парсер — который возвращает описание типов + адаптер — который формирует данные и группирует по БЭМ)
- [ ] Генерировать описание для элементов
- [ ] Делать свертку для boolean типа из union `false | true -> boolean`
- [ ] Формировать список ссылок на гит, сторибук, трекер с фильтром
