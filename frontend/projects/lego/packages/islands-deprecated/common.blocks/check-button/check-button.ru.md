# check-button

**Статус блока**: deprecated.

**NB** Рекомендуется перейти на блок [`button2`](../button2/).

Блок `check-button` («чекбаттон») используется для создания независимого переключателя в виде кнопки. Применяется для управления параметром
с двумя состояниями включено/выключено, по аналогии с обычным чекбоксом, или для выбора нескольких вариантов из списка — группа чекбаттонов. Наследуется от блока [checkbox](../checkbox/checkbox.ru.md).


## Обзор

<a name="mods"></a>
### Модификаторы блока

|Модификатор                 | Допустимые значения          | Способы установки | Описание |
| -------------------------- | ---------------------------- | ------------------| ---------|
| [theme](#mods-theme)       |`normal`, `pseudo`, `clear`   | BEMJSON, JS | **Обязательный**. Стилевое оформление блока. |
| [size](#mods-size)         |	`xs`, `s`, `m`, `l`, `head`  | BEMJSON, JS | **Обязательный**. Размер блока. |
| [pale](#mods-pale)         |	`yes`                        | BEMJSON, JS | Полупрозрачный текст подписи на чекбаттоне. |
| [checked](#mods-checked)   | `yes`                        | BEMJSON, JS | Чекбаттон выбран.      |
| [disabled](#mods-disabled) |`yes`                         | BEMJSON, JS | Неактивное состояние. |
| [focused](#mods-focused)   | `yes`                        | BEMJSON, JS | Фокус на блоке.      |
| [pressed](#mods-pressed)   | `yes`                        |  —          |  Чекбаттон нажат.        |
| [hovered](#mods-hovered)   | `yes`                        |  —          | Наведение курсора. Доступен на desktop-уровне. |


<a name="fields-short"></a>
### BEMJSON-поля блока

| Поле                      | Тип     | Описание
| ------------------------- | ------- | ----------------------------------------------
| `name`                    | String  | **Обязательное**. Значение HTML-атрибута `name` для нативного чекбокса (`<input type="checkbox" name="имя" атрибуты>`). |
| `value`                   | String  | Значение HTML-атрибута `value`.  |
| `id`                      | String  | Значение HTML-атрибута `id`. Генерируется автоматически.  |
| `tabindex`                | String  | Значение HTML-атрибута `tabindex`. |
| `controlAttrs`            | BEMJSON | Атрибуты блока, преобразуемы в HTML-атрибуты нативного чекбокса. |
| [content](#fields-content)| String, BEMJSON | Содержимое блока. Используется как для задания текста подписи на чекбаттоне, так и для гибкого формирования содержимого с помощью [элементов блока](#elems).


<a name="elems"></a>
### Элементы блока

| Элемент             | Описание
| ------------------- | -----------------------------------------------
| [text](#elems-text) | Обрамление текста чекбаттона. Используется для сдвига текста без смещения рядом стоящего текста, если чекбаттон нажат.
| [icon](#elems-icon) | Иконка чекбаттона.  Может располагаться рядом с текстом или самостоятельно (необходимо указать модификатор `only-icon`).
| `control`           | Вспомогательный элемент, позволяющий использовать функциональность нативного чекбокса. Автоматически добавляется в шаблоне к содержимому блока.

<a name="params"></a>
### JS-параметры блока

| Параметр             | Тип        | Значение по умолчанию | Описание                  |
| -------------------- | ---------- | --------------------- | ------------------------- |
| [live](#params-live) | Boolean    | `false`               | Включить отложенную инициализацию. |

## Подробнее

### Модификаторы блока

<a name="mods-theme"></a>
#### Модификатор `theme`

**Обязательный**.<br>
Задает стилевое оформление кнопки блока `check-button`. Необходимо использовать совместно с модификатором [size](#mods-size).

Способ установки: BEMJSON, JS. <br>

| Допустимые значения | Описание
| ------------------- | ---------------------------------------
| `normal`            | Обычная кнопка.
| `pseudo`            | Прозрачная кнопка.
| `clear`             | Невидимая кнопка (без рамки). Используется для активных элементов интерфейса с функциональностью кнопки, но без видимых границ, например, иконки.


**normal**

```js
{
    block: 'check-button',
    value: 'm',
    mods: {size: 'm'},
    content: 'normal'
}
```

**pseudo**

```js
{
    block: 'check-button',
    mods: {size: 'm', theme: 'pseudo'},
    content: 'pseudo'
}
```

**clear**

```js
{
    block: 'check-button',
    mods: {size: 'm', theme: 'clear', checked: 'yes'},
    content: 'clear'
}
```

<a name="mods-size"></a>
#### Модификатор `size`

**Обязательный**.<br>
Задает размер кнопки блока `check-button`. Необходимо использовать совместно с модификатором [theme](#mods-theme).

Способ установки: BEMJSON, JS. <br>
Доступные значения: `xs`, `s`, `m`, `l`, `head` (экспериментальный, реализован на уровне `desktop`; используется в шапке).

Таблица размеров кнопки с различными темами оформления

|  Размер кнопки |  Высота кнопки| Размер шрифта
|----------------|---------------|-------------
|xs              |          24px | 13px
|s               |          28px | 13px
|m               |          32px | 15px
|l               |          38px | 18px

При необходимости вы можете доопределить нужный размер на уровне проекта. [Кастомный размер](../button/button.ru.md#customsize).

```js
{
    content: ['l', 'm', 's', 'xs'].map(function(size) {
        return {
            block: 'check-button',
            mods: { size: size, type: 'check', theme: 'normal'},
            value: size,
            content: 'Размер ' + size + '&nbsp;&nbsp;'
         }
     })
 }
```

<a name="mods-pale"></a>
#### Модификатор `pale`

Делает текст на блоке `check-button` полупрозрачным.

Способ установки: BEMJSON, JS. <br>
Доступные значения: `yes`.

<a name="mods-checked"></a>
#### Модификатор `checked`

Используется для выбора блока `check-button` (визуально вдавлен).
Если блок в фокусе, то ему можно установить состояние выбран/не выбран с помощью клавиши **Space**.

Способ установки: BEMJSON, JS. <br>
Доступные значения: `yes`.

```js
{
   block: 'check-button',
   value: 's',
   mods: {size: 's', checked: 'yes', theme: 'normal'},
   content: 'Checked'
}
```

<a name="mods-disabled"></a>
#### Модификатор `disabled`

Отвечает за  неактивное состояние блока `check-button`, при котором он виден, но недоступен для действий пользователя. Неактивное состояние можно изменить программно.

Способ установки: BEMJSON, JS. <br>
Доступные значения: `yes`.

```js
{
   block: 'check-button',
   value: 's',
   mods: {size: 's', disabled: 'yes', theme: 'normal'},
   content: 'Disabled'
}
```

<a name="mods-focused"></a>
#### Модификатор `focused`

Блок находится в фокусе. Выставляется автоматически при получении чекбаттоном фокуса.

Переход по чекбаттонам в группе, в состоянии **в фокусе** одного из них, может осуществляться клавишей **Tab**.

Способ установки: BEMJSON, JS. <br>
Доступные значения: `yes`.

```js
{
   block: 'check-button',
   value: 's',
   mods: {size: 's', focused: 'yes', theme: 'normal'},
   content: 'Focused'
}
```


<a name="mods-pressed"></a>
#### Модификатор `pressed`

Описывает визуальное нажатие блока, когда чекбаттон не выбран. В нажатом состоянии текст в кнопке чекбаттона смещается на 1px вниз.

Доступные значения: `yes`.

<a name="mods-hovered"></a>
#### Модификатор `hovered`

Кнопка блока при наведении курсора мыши. Выставляется блоку автоматически, когда курсор мыши находится в пределах контрола. Снимается, когда курсор выходит за пределы контрола.

Доступные значения: `yes`. <br>
Уровень переопределения: desktop.

### BEMJSON-поля блока


<a name="fields-content"></a>
#### Поле `content`

Тип: String.

Определяет текст на копке чекбаттона. В шаблоне помещается в [элемент блока text](#elems).

Если поле `content` отсутствует или содержит пустое значение, чекбаттон отобразится без содержимого с размерами, заданными в модификаторе `size`.

```javascript
{
    block: 'check-button',                // имя блока
    name: 'test',                         // имя контрола для его идентификации обработчиком формы
    value: '1',                           // значение, отправляемое на сервер при выборе контрола
    mods: {size: 's', theme: 'normal'},   // модификаторы блока.
    content: '1'                          // текст кнопки
}
```


### Элементы блока

<a name="elems-icon"></a>
#### Элемент `icon`

Определяет иконку для чекбаттона, которая отображается с помощью блока [image](../image/image.ru.md). Иконка может размещаться как самостоятельно, так и рядом с текстом.

Чтобы отобразить иконку, нужно в BEMJSON блока смиксовать элемент чекбаттона `icon` с блоком иконки [image](../image/image.ru.md).

```javascript
{
    block: 'image',
    mix: [{block: 'check-button', elem: 'icon', elemMods: {'16': 'bus'}}],
    alt: 'Bus'
}
```
Изображение иконки задается c помощью модификатора элемента `icon` блока `check-button` (произвольная пара «ключ:значение», в CSS которого находится путь к изображению).

Чекбаттон с иконкой и текстом

```js
{
    block: 'check-button',
    value: 'serp-icon',
    mods: {size: 'm', checked: 'yes', theme: 'normal'},
    content: [
        {
            block: 'image',
            mix: [{block: 'check-button', elem: 'icon', elemMods: {'16': 'metro'}}],
            alt: 'Metro'
        },
        'Чекбаттон с иконкой'
    ]
}
```

##### Модификатор элемента `only_icon`

Определяет иконку без текста.

Способы установки: BEMJSON. <br>
Допустимые значения: `yes`

```js
{
    block: 'check-button',
    value: 'icon',
    mods: {size: 'm', 'only-icon': 'yes', theme: 'normal'},
    content: {
        block: 'image',
        mix: [{block: 'check-button', elem: 'icon', elemMods: {'16': 'bus'}}],
        alt: 'Bus'
    }
}
```


### JS-параметры блока

<a name="params-live"></a>
#### Параметр `live`

Тип: Boolean.<br>
Значение по умолчанию: `false` (автоматическая инициализация блока при загрузке страницы, то есть при наступлении события `domReady`).

Включает отложенную инициализацию чекбаттона. Используется для уменьшения нагрузки на браузер при большом количестве контролов, которые не все могут потребоваться пользователю.

Отложенную инициализацию можно включить следующими способами:

* **Локально** — для конкретного экземпляра блока `check-button`.
Достаточно в BEMJSON-декларации блока указать JS-параметр `live` со значением `true`.

 ```javascript
 {
     block: 'check-button',
     js: { live: true }
     ...
 }
 ```

* **Глобально** — для всех блоков `check-button` проекта.
В этом случае, на уровне своего проекта нужно доопределить шаблон блока.

**BEMHTML** в `check-button/check-button.bemhtml.js`

```javascript
block('check-button').js()(function() {
    return this.extend({live: true}, this.ctx.js);
});
```

**BH** в `check-button/check-button.bh.js`

```javascript
module.exports = function(bh) {
    bh.match('check-button', function(ctx) {
        ctx.js(ctx.extend({live: true}, ctx.js()));
    });
};
```

Все блоки `check-button` проекта станут инициализироваться отложено, кроме блоков с явно отключенной live-инициализацией в BEMJSON через JS-параметр `live: false`:

 ```javascript
 {
     block: 'select',
     js: { live: false }
     ...
 }
 ```

В этих случаях блок инициализируется сразу.
