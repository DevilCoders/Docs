## Описание
**user-menu-update** – вспомогательный блок для блока пользователя [user](../user/user.ru.md). Получает количество непрочитанных писем из export-ручки  и обновляет счетчик в пункте [меню](../user/user.ru.md#%D0%9C%D0%B5%D0%BD%D1%8E-%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D1%82%D0%B5%D0%BB%D1%8F) почты. Не имеет DOM-представления.

## Техническое описание
Блок получает количество новых писем из [ручки Почты](https://beta.wiki.yandex-team.ru/users/jkennedy/api2/#counters)
с помощью AJAX-запроса, который выполняется в момент инициализации блока.
Адрес ручки по умолчанию: `http://mail.yandex.ru/api/v2/{caller}/counters?silent`.
`{caller}` — опциональный идентификатор потребителя, определяется js-параметром `caller`.
Должен быть согласован с разработчиками ручки.
Блок `user` с модификаторами `menu_yes` и `menu_multiauth` прокидывает этот параметр из своего поля `mailCallerId`. 

В зависимости от результата запроса, в блоке `user` сформируется конечный вид заголовка меню почты, с полученным значением.  

По умолчанию в блоке установлено максимальное число для отображения в счетчике. Значение по умолчанию: `99`. Если число новых писем больше максимального, то отобразится сокращенная запись `99+`. Если новых писем нет, то блок не содержит значения.

При необходимости максимальное значение можно переопределить на уровне сервиса.

