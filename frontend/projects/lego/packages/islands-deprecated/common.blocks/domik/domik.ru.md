## Описание

**Статус блока**: **deprecated**

Блок устарел, рекомендуется перейти на [решение из Паспорта](https://clubs.at.yandex-team.ru/passport/2579/).

Блок `domik` («домик») декорирует форму авторизации (блок [auth](../auth/auth.ru.md)) в стиле Яндекса. Домик
может располагаться как на странице, так и внутри всплывающего окна. Блок позволяет разместить произвольный пояснительный текст на домике.

Домик на уровне `touch-phone` не появляется, а выполняется перенаправление на [Яндекс.Паспорт](http://doc.yandex-team.ru/Passport/passport-modes/concepts/about.xml).

В данной реализации блок `domik` строится из блока [user](../user/user.ru.md). Также домик может использоваться независимо от блока `user`.

### Элементы  блока
#### explain: пояснительный текст на домике

Необязательный элемент.

Пояснительный текст задается несколькими способами.

* В блоке `domik` добавляется элемент `explain`, в поле `content` которого помещается нужный текст:


```js
{
    block: 'domik',
    mods: {type: 'page', logo: 'ru'},
    content: [
        {
            elem: 'explain',
            content: 'Пояснительный текст'
        },
        {
            block: 'auth',
            mods: {content: 'auto'}
        }
    ]
}
```

* В блоке [user](../user/user.ru.md) через специальное поле `explain` JS-параметра `domikJs`:

```js
{
    block: 'user',
    js: {
        domikMods: {logo: 'ru'},
        domikJs: {
            explain: 'Текст' // задание пояснительного текста в **user**
        }
    },
    content: {elem: 'enter'}
}
```

Подробное описание [JS-параметров блока user для домика](../user/user.ru.md#js-%D0%BF%D0%B0%D1%80%D0%B0%D0%BC%D0%B5%D1%82%D1%80%D1%8B).

### Модификаторы блока

#### Модификатор `type`
Модификатор `type` задает тип домика.

Допустимые значения:

* `page` –  домик на странице. Отображается на странице непосредственно после загрузки.
* `popup` – всплывающий домик. Отображается внутри окна, которое вызывается по клику.

**Домик на странице** устанавливается декларацией BEMJSON. В декларации необходимо выставить модификатор `type` со значением `page` и поместить в поле `content` содержимое, например, форму авторизации.

```js
{
    block: 'domik',
    mods: { type: 'page', logo: 'ru' },
    content: {
        block: 'auth',
        mods: {
            content: 'auto'
        }
    }
}
```

**Всплывающий домик** строится на клиенте. BEMJSON домика формируется в зависимости от значений заданных в JS-параметрах блока `user` – `domikMods` и `domikJS`.


```js
{
    block: 'user',
    js: {
        domikMods: {logo: 'ru'},
        domikJs: {
            explain: 'Пояснительный текст'
        }
    },
    content: {elem: 'enter'}
}
```

#### Модификатор `logo`
Необязательный модификатор.

Устанавливает язык логотипа для домика.

Допустимые значения:
* `en` –  латинская буква `Y` на логотипе;
* `ru` –  кириллическая буква `Я` на логотипе.

Изображение логотипа в формате – SVG. Для браузеров не поддерживающих данный формат выполняется деградация в PNG. Фон логотипа прозрачный.

Если модификатор не используется, логотип определяется по значению параметра `lang` блока [i-global](../i-global/i-global.ru.md):

* `Я` для `lang: 'ru'`;
* `Y` для `lang: 'en'`, `'tr'`, 'hy', 'ka' или 'az'

Также нужный логотип можно явно установить в блоке `user`:

```js
{
    block: 'user',
    js: {
        domikMods: { logo: 'en' }
    },
    content: {elem: 'enter'}
}
```

---
**NB** В сборку попадают оба логотипа – `Я` и `Y`. Это обусловлено тем, что многие сервисы собирают один CSS для всех поддерживаемых языков (КУБР и Турции).

---

Если один из логотипов не нужен, можно отменить его подключение в сборку. Для этого используется `noDeps` на уровне переопределения проекта `common.blocks/domik/domik.js`:

```javascript
({
    noDeps:[
        {block: 'domik', mods: {logo: 'en'}}
    ]
})
```

### Использование в JavaScript

#### Создание домика
Чтобы создать домик и вызвать его в окне, нужно создать объект класса `domik_type_popup` и вызвать у этого объекта метод `open()`.

```javascript
var domik = BEM.create('domik_type_popup', {mods: {logo:'ru'}});
    domik.open();
```

DOM-узлы будут созданы при первом вызове метода `open()`.

Если необходимо создать домик заранее (до открытия), например, для получения объекта формы авторизации, то нужно вызвать метод `create()` вручную.

Получить объект формы из созданного домика можно методом `getFormBlock()`.

#### Произвольное содержимое
**Всплывающему домику** можно указать произвольное содержимое. Для этого необходимо на уровне проекта переопределить статический метод `_buildTypePopup()`, который создаст DOM-дерево для домика внутри окна.

#### Закрытие домика
Закрывается домик при помощи метода `close()`.

#### Состояние домика
Метод `isOpened()` возвращает состояние домика.

<a name="jsparams"></a>
#### JS-параметры

* `{String} id` — идентификатор блока домика;
* `{Object} mods` — модификаторы, которые позднее будут у созданного домика.
