**Статус блока**: deprecated.

В связи с появлением второй версии белой шапки [header2](../header2/header2.ru.md), развитие текущего блока `header` больше не осуществляется.
На проектах рекомендуется перейти на использование новой версии блока [header2](../header2/header2.ru.md).

**NB** Блок `header` будет удален из библиотеки, вместе с блоками `slide` и `paranja`, в один из следующих мажорных релизов.

## Описание

Блок `header` – шапка сервиса, тянущаяся на всю ширину экрана. Содержит набор блоков, определяющих ее вид. Раскладка шапки формируется из трех основных столбцов: левый – область зарезервированная для логотипа, центральный – для обычной или поисковой стрелки, правый – для меню пользователя.
Для планшетов на уровне `touch-pad.blocks` используются медиа-запросы (`@media`).

Блок доступен для программ экранного доступа. ARIA-атрибут шапки: `role=banner`.

**NB** В islands 4.х блок перестал зависеть от блоков `logo`, `user`, `search` и модификатора `arrow_type_search`. Зависимость стала опциональной. Добавьте эти зависимости при необходимости.

### Элементы блока
* `main` – область шапки, служащая контейнером для основного содержимого шапки.
* `logo` – левая часть шапки, предназначенная для [логотипа](../logo/logo.ru.md).
* `search` – центральная, поисковая часть шапки, содержит блок [arrow](../arrow/arrow.ru.md).
* `nav` – правая, навигационная часть шапки.
Служит оберткой для кнопок, вызывающих табло сервисов и панель настроек, а также навигационной панели пользователя на основе блока [user](../user/user.ru.md) (круглый аватар с количеством уведомлений и имя авторизованного пользователя, или кнопка «Войти» – для неавторизованного).

  Для портретной ориентации планшетов, при ширине экрана меньше `1024px`, элементы навигационной части шапки сворачиваются в кнопку с многоточием. При нажатии на эту кнопку, стрелка укорачивается и появляются все иконки навигационной части. Тап в любое место вне блока иконок сворачивает их обратно в многоточие.

* `action` – кнопка в шапке. В HTML преобразуется в тег `<a>` с основным ARIA-атрибутом `role=button`.
Модификатор элемента `_type` –  определяет тип кнопки. Допустимые значения:
  * `adv` – кнопка расширенного поиска или настроек.
  * `srv` – кнопка, раскрывающая табло сервисов. Реализована локализованная подсказка – «Табло сервисов».

  При отключенном JS кнопки будут работать как ссылки, то есть будет осуществляться переход на страницу. Иконки кнопок – фоновые изображение в формате SVG.

* `under` – область раскрывающаяся на всю ширину экрана, расположенная под основной областью шапки. Предназначена для размещения выезжающих панелей реализованных на основе блока [slide](../slide/slide.ru.md) и появляющихся при нажатии соответствующей кнопки из навигационной части шапки. Может смещать содержимое страницы под шапкой или показываться поверх него. Высота и содержимое может быть произвольным.

---
**NB** Обратите внимание, что в islands 4.х на уровне `touch-phone` элементы `main`, `logo`, `search`, `nav`, `project-name` стали опциональные.

_При использовании опциональных сущностей подключите нужные в зависимости блока._

---

#### Модификаторы блока
Шапка может быть фиксированной, только для уровня `desktop`. Для этого достаточно добавить
модификатор блока `fixed` со значением `yes` .

```javascript
{
    block: 'header',
    js: true,
    mix: [{block: 'layout', mods: {type: 'serp'}}],
    mods: {fixed: 'yes'},
    content: [
        {/* */}
    ]
    ...
}
```

---
**NB** На winPhone 7.5 в IE9 не работает свойство `position: fixed`. Модификатор `_fixed` будет работать некорректно.

---

### API блока
#### BEMJSON (входные данные)

Рекомендуемая структура входных данных шапки:

```js
{
    block: 'header',
    js: true,
    mix: [{block: 'layout', mods: {type: 'serp'}}],
    content: [
        {
            elem: 'main', // основной «этаж» шапки
            content: [
                {
                    elem: 'logo', // левый столбец
                    content: {
                        block: 'logo' // логотип
                    }
                },
                {
                    elem: 'search', // центральный столбец со стрелкой
                    content: {
                        block: 'arrow', // стрелка, обычная или поисковая
                        content: {/*...*/}
                    }
                },
                {
                    elem: 'nav', // правый столбец, навигационный
                    content: [
                        {   // кнопка раскрывающая настройки
                            block: 'header',
                            elem: 'action',
                            elemMods: {type: 'adv'},
                            js: { // JS-параметры кнопки
                                releaseByHeaderOutsideClick: false,
                                releaseByDocumentScroll: false
                            }
                        },
                        {  // кнопка раскрывающая табло сервисов
                            block: 'header',
                            elem: 'action',
                            elemMods: {type: 'srv'}
                        },
                        {  // меню пользователя
                            block: 'user',
                            js: {mail: 101},
                            mods: {menu: 'yes'},
                            content: [
                                {elem: 'icon'},
                                {elem: 'name'}
                            ]
                        }
                    ]
                }
            ]
        },
        { // второй «этаж» шапки
            elem: 'under',
            content: [
                { // выезжающая панель настроек с произвольным содержимым
                    block:  'slide',
                    js: {
                        rel: [
                            {elem: '.header__action_type_adv', event: 'pressed', method: 'open'},
                            {elem: '.header__action_type_adv', event: 'released', method: 'close'}
                        ]
                    },
                    content: {
                        block: 'b-block',
                        attrs: {style: 'width: 600px; height: 200px; background: #eee; margin: 15px auto;'},
                        content: 'Здесь может быть любой контент'
                    }
               },
               { // выезжающая панель содержащая табло сервисов
                   block:  'slide',
                   js: {
                       rel: [
                           {elem: '.header__action_type_srv', event: 'pressed', method: 'open'},
                           {elem: '.header__action_type_srv', event: 'released', method: 'close'}
                       ]
                   },
                   content: {
                       block: 'services-table',
                       mods: {type: 'turkish'}
                   }
               }
           ]
       }
   ]
}
```

#### JS-параметры

JS-параметры элемента `action`:

* `{Boolean} releaseByHeaderOutsideClick` – отслеживает БЭМ-событие `click` вне шапки. Если выставлен в `true`, клик вне шапки закроет слайдер.  По умолчанию: `true`.
* `{Boolean} releaseByDocumentScroll` – отслеживает прокрутку страницы. Если выставлен в `true`, то при прокрутке страницы закроется слайдер. По умолчанию: `true`.
