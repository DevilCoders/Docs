# i-ua

Служебный блок для сбора данных о браузере пользователя.

Визуального представления на странице не имеет. Используется только внутри блока `b-page`, самостоятельно не применяется.

Блок подключает в HTML инлайновый скрипт, который добавляет тегу `<html>` CSS-классы, указывающие, различные характеристики браузера: включен ли JavaScript, поддерживаемые CSS-свойства, теги и тому подобное. В зависимости от этих классов можно при помощи CSS задавать блокам разное оформление.

Если данные классы проекту не нужны, можно переопределить BEMHTML-шаблон блока `i-ua` на уровне переопределения проекта:

```javascript
block('i-ua').tag()('');
```

## Обзор
### Модификаторы блока

Модификатор	         | Допустимые значения          | Способы установки | Описание
-------------------- | ---------------------------- | ----------------  | -----------------------
`browser`            | `opera`, `chrome`, `safari`  | —                 | Браузер. Уровень: `touch`.
`ios`                |  —                           | —                 | Версия iOS (major). Уровень: `touch`.
`android`            |  —                           | —                 | Версия Android. Уровень: `touch`.
`ios-subversion`     |  —                           | —                 | Под версия iOS. Уровень: `touch`.
`screen-size`        |  —                           | —                 | Размер экрана. Уровень: `touch`.
`android-vowels-hack`| `yes`                        | —                 | Версия Android в диапазоне (>= 3.0 и < 3.2) или (>= 4.0 и  < 4.0.3). Уровень: `touch`.


### Элементы блока

| Элемент                 | Описание                                                   |
| ----------------------- | ---------------------------------------------------------- |
| [input](#elems-input)   | Проверяет поддержку браузером атрибута `placeholder` для поля ввода. |
| [orient](#elems-orient) | Проверяет ориентацию экрана устройства (альбомная/портретная). |
| [retina](#elems-retina) | Проверяет retina-экран у устройства. |
| [svg](#elems-svg)       | Проверяет поддержку браузером формата SVG. |
| [object-fit](#elems-object-fit) | Проверяет поддержку браузером CSS свойства object-fit. |

## Подробнее

<a name="elems"></a>
### Элементы блока

<a name="elems-input"></a>
#### Элемент `input`

Добавляет инлайновый скрипт, который определяет поддержку браузером атрибута `placeholder` для поля ввода. Если атрибут поддерживается браузером, тегу `<html>` выставляется класс `i-ua_placeholder_yes`,  иначе — `i-ua_placeholder_no`.

<a name="elems-iorient"></a>
#### Элемент `orient`

Добавляет странице инлайновый скрипт, который при загрузке страницы, в зависимости от ориентации экрана устройства, выставляет тегу `<html>` CSS-класс `i-ua_orient_portrait` (портретная) или `i-ua_orient_landscape` (альбомная).

Кроме этого, для поддержки обратной совместимости с islands 4.х и ниже, в элемент была перенесена логика, которая дополнительно устанавливает блоку `i-ua` статические свойства:

* `height` — высота страницы;
* `width` — ширина страницы;
* `landscape` — признак, выставляющийся при width > height.

Если вы на сервисе используете в JS-коде блоков `BEM.blocks['i-ua'].height`, `BEM.blocks['i-ua'].width` или `BEM.blocks['i-ua'].landscape`, добавьте в зависимости элемент `orient` на проектном уровне.

```javascript
// some-block.deps.js
({
    mustDeps: [
        {block: 'i-bem', elem: 'dom'},
        {block: 'i-ua', elem: 'orient'}
    ]
})
// some-block.css
.i-ua_orient_portrait .some-block {
    display: block;
}
```

> **NB** Старые Android-устройства, а так же мобильные браузеры на Chromium, содержат ошибку определения высоты и ширины
окна. Поэтому не получается правильно определить ориентацию экрана устройства при появлении экранной клавиатуры. Если вы найдёте
универсальный способ исправить эту ошибку браузеров средствами JavaScript, сообщите нам об этом.

<a name="elems-retina"></a>
#### Элемент `retina`

Добавляет странице инлайновый скрипт, который при загрузке страницы выставляет тегу `<html>` CSS-класс `i-ua_retina_yes`, если пиксельное соотношение (pixel ratio) больше единицы.

Для поддержки обратной совместимости с islands 4.х и ниже, в элемент была перенесена логика, которая дополнительно устанавливает блоку `i-ua` статические свойства:

* `dpr` — числовое значение пиксельного соотношения;
* `hiDpi` — признак, выставляющийся при dpr > 1.

Если вы на сервисе используете в JS-коде блоков `BEM.blocks['i-ua'].hiDpi` или `BEM.blocks['i-ua'].dpr`, добавьте в зависимости элемент `retina` на проектном уровне.


```javascript
// some-block.deps.js
({
    mustDeps: [
        {block: 'i-bem', elem: 'dom'},
        {block: 'i-ua', elem: 'retina'}
    ]
})
// some-block.css
.i-ua_retina_yes .some-block {
    background-image: url(hires.png);
}
```

<a name="elems-svg"></a>
#### Элемент `svg`

Инлайновый скрипт, который определяет поддержку браузером SVG, [элементы](https://developer.mozilla.org/ru/docs/Web/SVG/Элемент) которого используются для отображения изображений и иконок.

Если SVG поддерживается, для `<html>` выставляется класс `i-ua_svg_yes`, иначе — класс `i-ua_svg_no`.

Кроме этого, устанавливается класс `i-ua_inlinesvg_yes`/`i-ua_inlinesvg_no` в зависимости от возможности использовать тег `<svg/>` в HTML.

<a name="elems-object-fit"></a>
#### Элемент `object-fit`

Инлайновый скрипт, который определяет поддержку браузером CSS свойства `object-fit`.

Если `object-fit` не поддерживается, для `<html>` выставляется класс `i-ua_object-fit_no`, иначе не выставляется ничего и считается, что `object-fit` поддерживается браузером.

Кроме этого, чтобы проверить наличие свойства из JS, в элементе присутствует логика, которая дополнительно устанавливает блоку `i-ua` статическое свойство `objectFit`.
Значением данного свойства будет `true`, если свойство `objectFit` поддерживается, иначе — `false`.
