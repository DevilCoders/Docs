# b-statcounter

Используется для установки счетчиков систем учета посетителей.

> **Примечание.** Чтобы установить счетчик, необходимо добавить соответствующий элемент в поле `content`. Узнать код счетчика для нового сервиса можно на рассылке [internet-measurement@](https://ml.yandex-team.ru/lists/internet-measurement/).

## Обзор

### Элементы блока

| Элемент | Описание |
| ------- | -------- |
| [metrika](#elem-metrika) | Счетчик Яндекс.Метрики. |
| [tns](#elem-tns) | Счетчик TNS. |
| [gemius](#elem-gemius) | Счетчик Gemius. |

## Подробное описание

### Элементы блока

<a name="elem-metrika"></a>

#### Элемент `metrika`

Определяет счетчик [Яндекс.Метрики](https://yandex.ru/support/metrika/).

> **Примечание.** Рекомендуется использовать счетчик с JS-представлением (модификатор `type` в значении `'js'`).

**Модификаторы элемента**

| Модификатор | Допустимые значения | Способы установки | Описание |
| ----------- | ------------------- | ----------------- | -------- |
| `type` | `'js'` | `BEMJSON` | Счетчик с JS-представлением. |

**Поля элемента**

| Поле | Тип | Описание |
| ---- | --- | -------- |
| `counter` (req) | `String`, `Number` | Номер счетчика. |
| `js`  | `BEMJSON` | [Параметры инициализации](https://yandex.ru/support/metrika/code/counter-initialize.xml) счетчика. |
| `_noindex` | `String`, `Number` | [Запрет отправки на индексацию](https://yandex.ru/support/metrika/code/stop-indexing.xml) страниц сайта. |

req — обязательное поле.

```js
{
    block: 'b-statcounter',
    content: {
        elem: 'metrika',
        elemMods: { type: 'js' },
        counter: '153438',
        js:  {
            /* Параметры счетчика */
        }
    }
}
```

> **Примечание.** Если не установлен модификатор `type`, то код счетчика можно установить в виде изображения `<img alt="" src="//mc.yandex.ru/watch/153438">`.

<a name="elem-tns"></a>

#### Элемент `tns`

Определяет счетчик [TNS](http://tns-counter.ru).

> **Примечание.** Необходим для всех проектов. Рекомендуется использовать счетчик с JS-представлением (модификатор `type` в значении `'js'`).

**Модификаторы элемента**

| Модификатор | Допустимые значения | Способы установки | Описание |
| ----------- | ------------------- | ----------------- | -------- |
| `type` | `'js'` | `BEMJSON` | Счетчик с JS-представлением. |

**Поля элемента**

| Поле | Тип | Описание |
| ---- | --- | -------- |
| `id` (req) | `String` | ID счетчика (например, `'yandex_lego'`). |

req — обязательное поле.

```js
{
    block: 'b-statcounter',
    content: {
        elem: 'tns',
        mods: { type: 'js' },
        id: 'yandex_lego'
    }
}
```

> **Примечание.** Если не установлен модификатор `type`, то код счетчика можно установить в виде изображения `<i style="background: url(//www.tns-counter.ru/V13a****yandex_ru/ru/UTF-8/tmsec=yandex_lego/153438)"></i>`.

<a name="elem-gemius"></a>

#### Элемент `gemius`

Определяет счетчик [Gemius](http://www.gemius.com/).

> **Примечание.** Актуален только для Украины (запросы на `yandexgaua.hit.gemius.pl`) и Беларуси (запросы на домен `yandexgaby.hit.gemius.pl`). Рекомендуется использовать счетчик с JS-представлением (модификатор `type` в значении `'js'`).

**Модификаторы элемента**

| Модификатор | Допустимые значения | Способы установки | Описание |
| ----------- | ------------------- | ----------------- | -------- |
| `type` | `'js'` | `BEMJSON` | Счетчик с JS-представлением. |

**Поля элемента**

| Поле | Тип | Описание |
| ---- | --- | -------- |
| `ua` | `String` | Номер счетчика для Украины. |
| `by` | `String` | Номер счетчика для Беларуси. |

Регион пользователя нужно определять на уровне сервиса по IP или геонастройкам пользователя (приоритетнее) — город выбранный на [yandex.ru/tune](https://yandex.ru/tune). Домен сервиса не учитывается. Например, пользователь с украинским IP, который зашел на [yandex.ru](https://www.yandex.ru) считается украинским пользователем.

```js
{
    block: 'b-statcounter',
    content: {
        elem: 'gemius',
        elemMods: { type: 'js' },
        by: '12345678'
    }
}
```

> **Примечание.** Если не установлен модификатор `type`, то код счетчика можно установить в виде изображения `<img alt="" src="//yandexgaby.hit.gemius.pl/redot.gif?id=153438">`.
