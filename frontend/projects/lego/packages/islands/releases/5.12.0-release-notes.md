# islands 5.12.0

Изменения, вошедшие в релиз islands 5.12.0, разделены на группы:

* [минорные изменения](#Минорные-изменения) — задачи, в рамках которых произошло расширение API блоков;
* [исправлено и улучшено](#Исправлено-и-улучшено) — различные исправления, не затрагивающие API блоков.

Все важные изменения подробно описаны [ниже](#Пояснения).

## Минорные изменения

| Заголовок                                                         | Задача     | PR      |
| :---------------------------------------------------------------- | :--------- | :------ |
| [checkbox, radiobox: Разработать в новом дизайне](#ISL-4281)      | [ISL-4281] | [#2614] |
| [user2: Разработать меню пользователя в новом дизайне](#ISL-3840) | [ISL-3840] | [#2429] |

## Исправлено и улучшено

| Заголовок                                                                        | Задача     | PR      |
| :------------------------------------------------------------------------------- | :--------- | :------ |
| attach: В блоке нельзя ограничить длину имени файла                              | [ISL-3661] | [#2638] |
| button2.react: Нет примеров для контрола в новом дизайне                         | [ISL-4248] | [#2657] |
| button2: Кнопка типа link переходит в состояние focused                          | [ISL-3990] | [#2648] |
| popup2 _autoclosable.react: Неправильно работает с селектом внутри               | [ISL-4169] | [#2624] |
| popup2.react: popup autoclosable считает клик не по anchor внешним кликом        | [ISL-4212] | [#2605] |
| suggest2-counter: Сделать отложенную инициализацию блока                         | [ISL-4279] | [#2643] |
| tabbar: Кнопка Еще не обрабатывает действия с клавиатуры                         | [ISL-4135] | [#2619] |
| [user2.react: параметр actionsMenu не обрабатывается](#ISL-4221)                 | [ISL-4221] | [#2656] |
| user2: Некорректно формируется URL на Паспорт                                    | [ISL-4195] | [#2628] |

## Пояснения

<a name="ISL-4281"></a>
### [checkbox, radiobox: Разработать в новом дизайне][ISL-4281]

Реализован новый дизайн для блоков `checkbox` и `radiobox`.

<a name="ISL-4221"></a>
### [user2.react: параметр actionsMenu не обрабатывается][ISL-4221]

Для `react`-реализации блока `user2` добавлена возможность передавать пользовательское меню с помощью параметра `actionsMenu`. Принимается массив объектов, каждый из которых рассматривается как пункт меню.

Набор по умолчанию:

```
actionsMenu: [
    {action: 'mail'},
    {action: 'passport'},
    {action: 'exit'}
]
```

<a name="ISL-3840"></a>
### [user2: Разработать меню пользователя в новом дизайне][ISL-3840]

* Реализована поддержка нового дизайна в блоке `user2`;
* Блоку `user-account` добавлен элемент `__logout` и модификатор `_has-logout`. Используется в составе меню мультиавторизации блока `user2`. В значении `yes` добавляет иконку выхода для авторизованного пользователя. По умолчанию имеет значение `false`;
Блоку `user2` добавлен модификатор `has-logout`. В значении `yes` добавляет аккаунтам авторизованных пользователей в меню мультиавторизации элемент `__logout`. При клике по элементу `__logout` блок `user2` вызывает событие `logout-click`;
* В новом дизайне не поддерживается разбиение меню на группы. Для сохранения совместимости реализована логика сбора все пунктов меню в одну группу.

[DOC-3783]: https://st.yandex-team.ru/DOC-3783
[#2607]: https://github.yandex-team.ru/lego/islands/pull/2607
[DOC-3947]: https://st.yandex-team.ru/DOC-3947
[#2662]: https://github.yandex-team.ru/lego/islands/pull/2662
[ISL-3661]: https://st.yandex-team.ru/ISL-3661
[#2638]: https://github.yandex-team.ru/lego/islands/pull/2638
[ISL-4240]: https://st.yandex-team.ru/ISL-4240
[#2634]: https://github.yandex-team.ru/lego/islands/pull/2634
[ISL-4241]: https://st.yandex-team.ru/ISL-4241
[#2635]: https://github.yandex-team.ru/lego/islands/pull/2635
[ISL-4242]: https://st.yandex-team.ru/ISL-4242
[#2640]: https://github.yandex-team.ru/lego/islands/pull/2640
[ISL-4248]: https://st.yandex-team.ru/ISL-4248
[#2657]: https://github.yandex-team.ru/lego/islands/pull/2657
[ISL-3990]: https://st.yandex-team.ru/ISL-3990
[#2648]: https://github.yandex-team.ru/lego/islands/pull/2648
[ISL-4281]: https://st.yandex-team.ru/ISL-4281
[#2614]: https://github.yandex-team.ru/lego/islands/pull/2614
[ISL-3942]: https://st.yandex-team.ru/ISL-3942
[#2630]: https://github.yandex-team.ru/lego/islands/pull/2630
[ISL-4169]: https://st.yandex-team.ru/ISL-4169
[#2624]: https://github.yandex-team.ru/lego/islands/pull/2624
[ISL-4212]: https://st.yandex-team.ru/ISL-4212
[#2605]: https://github.yandex-team.ru/lego/islands/pull/2605
[ISL-4279]: https://st.yandex-team.ru/ISL-4279
[#2643]: https://github.yandex-team.ru/lego/islands/pull/2643
[ISL-4135]: https://st.yandex-team.ru/ISL-4135
[#2619]: https://github.yandex-team.ru/lego/islands/pull/2619
[ISL-4221]: https://st.yandex-team.ru/ISL-4221
[#2656]: https://github.yandex-team.ru/lego/islands/pull/2656
[ISL-4195]: https://st.yandex-team.ru/ISL-4195
[#2628]: https://github.yandex-team.ru/lego/islands/pull/2628
[ISL-3840]: https://st.yandex-team.ru/ISL-3840
[#2429]: https://github.yandex-team.ru/lego/islands/pull/2429
