# islands 5.6.0

Изменения, вошедшие в релиз islands 5.6.0, разделены на группы:

* [минорные изменения](#minor) — задачи, в рамках которых произошло расширение API блоков;
* [исправлено и улучшено](#patch) — различные исправления, не затрагивающие API блоков;
* [lego-on-react](#lego-on-react) — задачи, касающиеся lego-on-react;
* [дополнительно](#extra) — задачи, не касающиеся кода блоков (документация, инфраструктура и т.д.).

Все важные изменения подробно описаны [ниже](#notes).
<a name="minor"></a>
## Минорные изменения

| Заголовок                                                                                     | Задача     | PR      |
| :-------------------------------------------------------------------------------------------- | :--------- | :------ |
| domik: Показывать логотип с буквой «Y» для азербайджанского языка                             | [ISL-3735] | [#2321] |
| [i-bem__dom: Добавить возможность проброса data в bindTo](#ISL-3299)                          | [ISL-3299] | [#2267] |
| [i-tanker__dynamic: Добавить переводы на индонезийский](#ISL-3733)                            | [ISL-3733] | [#2319] |
| [meccano: Перенести m-suggest с уровня desktop на уровень common](#ISL-3636)                  | [ISL-3636] | [#2276] |
| [meccano: Перенести общие блоки с уровня desktop на уровень common](#ISL-3595)                | [ISL-3595] | [#2266] |
| [Добавить переводы на Азербайджанский](#ISL-3629)                                             | [ISL-3629] | [#2310] |
<a name="patch"></a>
## Исправлено и улучшено

| Заголовок                                                                 | Задача     | PR      |
| :------------------------------------------------------------------------ | :--------- | :------ |
| checkbox: Починить мертвую зону                                           | [ISL-3444] | [#2287] |
| header2__logo: Удалить ошибочные переводы для hy и ka языков              | [ISL-3734] | [#2320] |
| i-geolocation: В Edge перестаёт работать геолокация после первого запрета | [ISL-3668] | [#2316] |
| popup: Сломался z-index после дружбы с popup2                             | [ISL-3663] | [#2297] |
| social-brocker: Не закрывается по кнопке Close                            | [ISL-3701] | [#2307] |
| [tooltip: Добавить padding для многострочных сообщений](#ISL-3589)        | [ISL-3589] | [#2280] |
<a name="lego-on-react"></a>
## lego-on-react

| Заголовок                                                           | Задача     | PR      |
| :------------------------------------------------------------------ | :--------- | :------ |
| TextArea: Пропущен экспорт                                          | [ISL-3590] | [#2265] |
| attach: Портировать на React                                        | [ISL-2868] | [#2222] |
| [checkbox.react: Поправить propTypes у checkbox](#ISL-3544)         | [ISL-3544] | [#2295] |
| input_suggest_yes: Портировать на React                             | [ISL-3345] | [#2252] |
| [react: Локализовать компоненты](#ISL-3657)                         | [ISL-3657] | [#2284] |
| tooltip: Портировать на React                                       | [ISL-3591] | [#2296] |
| tumbler.react: Блок не реагирует на нажатие стрелочек на клавиатуре | [ISL-3547] | [#2285] |
| [Уникальные ID для React компонент](#ISL-3616)                      | [ISL-3616] | [#2313] |
<a name="extra"></a>
## Дополнительно

| Заголовок                                                           | Задача     | PR      |
| :------------------------------------------------------------------ | :--------- | :------ |
| [button2: Добавить assert для _width_max с icon](#ISL-3630)         | [ISL-3630] | [#2270] |

<a name="notes"></a>
## Пояснения

<a name="ISL-3299"></a>
### [i-bem__dom: Добавить возможность проброса data в bindTo ][ISL-3299]

В `i-bem__dom` добавлена возможность прокидывать данные в bindTo*

```javascript
this.
    .bindTo('dblclick', data, this._handler1)
    .bindTo('elem', 'dblclick', data, this._handler2)
    .bindTo(this.elem('elem'), 'dblclick', data, this._handler3)
    .bindToWin('winevent', data, this._handler4)
    .bindToDoc('docevent', data, this._handler5);
    .bindTo({ 'mousedown' : this._handler1 }, data)
    .bindTo('elem', { 'mousedown' : this._handler2 }, data)
    .bindTo(this.elem('elem'), { 'mousedown' : this._handler3 }, data)
    .bindToWin({ 'winevent2' : this._handler4 }, data)
    .bindToDoc({ 'docevent2' : this._handler5 }, data);
```

<a name="ISL-3733"></a>
### [i-tanker__dynamic: Добавить переводы на индонезийский][ISL-3733]

В `i-tanker__dynamic` добавлены переводы для индонезийского языка (код `id`).

<a name="ISL-3636"></a>
### [meccano: Перенести m-suggest с уровня desktop на уровень common][ISL-3636]

Перенесли блоки `m-suggest`, `m-suggest-item` и `m-suggest-group`с уровня `desktop` на уровень `common`.

<a name="ISL-3595"></a>
### [meccano: Перенести общие блоки с уровня desktop на уровень common][ISL-3595]

Перенесли с уровня desktop на уровень common следующие блоки:
`m-date`
`mi-date`
`mi-helpers`
`mi-storage`
`m-username`

<a name="ISL-3629"></a>
### [Добавить переводы на Азербайджанский][ISL-3629]

В блоки `auth`, `copyright`, `header2`, `i-services`, `user` добавлена поддержка азербайджанского языка.

<a name="ISL-3589"></a>
### [tooltip: Добавить padding для многострочных сообщений][ISL-3589]

В блоке `tooltip` исправлены стили `line-height` и `padding` для поддержки многострочных сообщений.

**Было:**
![](https://jing.yandex-team.ru/files/koreil/tooltip__desktop__v5.5.0__islands__Biblioteki__Lego_2017-03-10_18-28-22.png)

**Стало:**
![](https://jing.yandex-team.ru/files/koreil/Primery_bloka_tooltip_2017-03-10_18-27-31.png)

<a name="ISL-3544"></a>
### [checkbox.react: Поправить propTypes у checkbox][ISL-3544]

В `propTypes` блока `checkbox` добавлены `array` и `element`.

<a name="ISL-3657"></a>
### [react: Локализовать компоненты][ISL-3657]

Следующие `BEM-React` компоненты были локализованы:

* `attach`
* `b-statcounter`
* `copyright`
* `footer`
* `i-services`
* `lang-switcher`
* `logo`
* `search2`
* `ticker`
* `tumbler`
* `user2`

В пакете `lego-on-react` предоставлены следующие языки:

* `ru`
* `en`
* `be`
* `id`
* `kk`
* `tr`
* `tt`
* `uk`

<a name="ISL-3616"></a>
### [Уникальные ID для React компонент][ISL-3616]

Вызов `this.generateId` стал возвращать уникальный идентификатор для инстанса блока.
Возвращаемое значение постоянно внутри компонента. Этот хелпер можно использовать в функции `render`.
Также возвращаемое значение единообразно между клиентом и сервером.

Если вы хотите получить второй уникальный идентификатор, передайте ключ: `this.generateId('second')`.

<a name="ISL-3630"></a>
### [button2: Добавить assert для _width_max с icon][ISL-3630]

Добавили assert на одновременное использование полей `icon`, `text` и `button2` — оно некорректно и не поддерживается.

[ISL-3590]: https://st.yandex-team.ru/ISL-3590
[#2265]: https://github.yandex-team.ru/lego/islands/pull/2265
[ISL-2868]: https://st.yandex-team.ru/ISL-2868
[#2222]: https://github.yandex-team.ru/lego/islands/pull/2222
[ISL-3630]: https://st.yandex-team.ru/ISL-3630
[#2270]: https://github.yandex-team.ru/lego/islands/pull/2270
[ISL-3544]: https://st.yandex-team.ru/ISL-3544
[#2295]: https://github.yandex-team.ru/lego/islands/pull/2295
[ISL-3444]: https://st.yandex-team.ru/ISL-3444
[#2287]: https://github.yandex-team.ru/lego/islands/pull/2287
[ISL-3735]: https://st.yandex-team.ru/ISL-3735
[#2321]: https://github.yandex-team.ru/lego/islands/pull/2321
[ISL-3734]: https://st.yandex-team.ru/ISL-3734
[#2320]: https://github.yandex-team.ru/lego/islands/pull/2320
[ISL-3299]: https://st.yandex-team.ru/ISL-3299
[#2267]: https://github.yandex-team.ru/lego/islands/pull/2267
[ISL-3668]: https://st.yandex-team.ru/ISL-3668
[#2316]: https://github.yandex-team.ru/lego/islands/pull/2316
[ISL-3733]: https://st.yandex-team.ru/ISL-3733
[#2319]: https://github.yandex-team.ru/lego/islands/pull/2319
[ISL-3345]: https://st.yandex-team.ru/ISL-3345
[#2252]: https://github.yandex-team.ru/lego/islands/pull/2252
[ISL-3636]: https://st.yandex-team.ru/ISL-3636
[#2276]: https://github.yandex-team.ru/lego/islands/pull/2276
[ISL-3595]: https://st.yandex-team.ru/ISL-3595
[#2266]: https://github.yandex-team.ru/lego/islands/pull/2266
[ISL-3663]: https://st.yandex-team.ru/ISL-3663
[#2297]: https://github.yandex-team.ru/lego/islands/pull/2297
[ISL-3657]: https://st.yandex-team.ru/ISL-3657
[#2284]: https://github.yandex-team.ru/lego/islands/pull/2284
[ISL-3701]: https://st.yandex-team.ru/ISL-3701
[#2307]: https://github.yandex-team.ru/lego/islands/pull/2307
[ISL-3589]: https://st.yandex-team.ru/ISL-3589
[#2280]: https://github.yandex-team.ru/lego/islands/pull/2280
[ISL-3591]: https://st.yandex-team.ru/ISL-3591
[#2296]: https://github.yandex-team.ru/lego/islands/pull/2296
[ISL-3547]: https://st.yandex-team.ru/ISL-3547
[#2285]: https://github.yandex-team.ru/lego/islands/pull/2285
[ISL-3629]: https://st.yandex-team.ru/ISL-3629
[#2310]: https://github.yandex-team.ru/lego/islands/pull/2310
[ISL-3653]: https://st.yandex-team.ru/ISL-3653
[#2290]: https://github.yandex-team.ru/lego/islands/pull/2290
[ISL-3616]: https://st.yandex-team.ru/ISL-3616
[#2313]: https://github.yandex-team.ru/lego/islands/pull/2313
