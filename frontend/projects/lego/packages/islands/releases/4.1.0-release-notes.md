# islands 4.1.0

Основная цель релиза — привести внешний вид портальных блоков к [новой версии дизайнерских гайдов](https://guide.yandex-team.ru) (версии 3.5).

Кроме этого, в релиз `islands 4.1.0` вошли задачи по рефакторингу блоков, исправлению ошибок, разработке и исправлению документации.

Изменения, вошедшие в релиз `islands 4.1.0` разделены на группы:

* [Минорные изменения в дизайне](#Минорные-изменения-в-дизайне) — задачи, которые
  были решены в рамках приведения внешнего вида блоков к актуальным дизайнерским гайдам.
  В рамках этих задач был также произведен рефакторинг некоторых блоков, напрямую к дизайну не относящийся;
* [Другие минорные изменения](#Другие-минорные-изменения) — задачи, в которых выполнено расширение API блоков, не затрагивающее дизайн;
* [Исправления и улучшения](#Исправлеия-и-улучшеия) — задачи, решение которых не привело к изменению API блоков;
* [Дополнительные изменения](#Дополнительные-изменения) — задачи, которые не касаются кода блоков: разработка документации, инфраструктура и так далее.

Все минорные изменения подробно описаны в конце соответствующих разделов.

## Минорные изменения в дизайне

| Заголовок                                                            | Задача     | PR     |
|:---------------------------------------------------------------------|:-----------|:-------|
| [button: Доработать внешний вид блока](#isl-1638)                    | [ISL-1638] | [#440] |
| [button2: Доработать внешний вид блока](#isl-1623)                   | [ISL-1623] | [#439] |
| [check-button: Рефакторинг и новый дизайн](#isl-1678)                | [ISL-1678] | [#486] |
| [checkbox: Рефакторинг и новый дизайн](#isl-1624)                    | [ISL-1624] | [#689] |
| [input: Доработать внешний вид блока](#isl-1625)                     | [ISL-1625] | [#422] |
| [link: Рефакторинг и новый дизайн](#isl-1626)                        | [ISL-1626] | [#426] |
| [popup_theme_ffffff: Изменить цвет рамки](#isl-1684)                 | [ISL-1684] | [#487] |
| [popup2_theme_normal: Изменить цвет рамки](#isl-1685)                | [ISL-1685] | [#476] |
| [radio-button: Рефакторинг и новый дизайн](#isl-1680)                | [ISL-1680] | [#501] |
| [radiobox: Доработать внешний вид блока](#isl-1627)                  | [ISL-1627] | [#420] |
| [slider: Рефакторинг и новый дизайн](#isl-1686)                      | [ISL-1686] | [#670] |
| [tumbler: Рефакторинг и новый дизайн](#isl-2055)                     | [ISL-2055] | [#747] |
| [user: Доработать внешний вид блока](#isl-1631)                      | [ISL-1631] | [#477] |
| [search2: Сделать пример с обновленным инпутом и кнопкой](#isl-1628) | [ISL-1628] | [#685] |
| [auth__social-link: Перейти на использование link](#isl-1744)        | [ISL-1744] | [#440] |

<a name="isl-1638"></a>
### button

В блоке `button` обновлен внешний вид и произведен рефакторинг.

__Дизайн__

- У кнопки с темой `action` удалена рамка;
- У кнопки с темой `action`  клавиатурный фокус теперь подсвечивается пульсирующим фоном;
- В темах normal, pseudo и clear клавиатурный фокус изменен на плоскую внутреннюю рамку, с толщиной 2px. Рамка не влияет на отступы и размеры блока.

__Логика__

- Убрали неоправданное разделение стилей для IE8 и других браузеров.
  Теперь кнопка в IE8 корректно реагирует на смену всех состояний.
- Удалены стили, переопределяющие выравнивание в IE8.
  Кнопка выровнена по базовой линии во всех браузерах;
- Блоку button можно установить иконки c помощью блока icon, аналогично `button2`.
  В блоке не реализована поддержка специальных полей `iconLeft`, `iconRight` и `icon`. Чтобы  применять эти поля,  используйте `button2`.
- Удален модификатор `_focus_thin`   в пользу плоской  фокус-рамки.  Использовался в качестве временной замены старой фокус -рамки,  для кнопок в шапке.
  Теперь, когда появилась плоская фокус-рамка, он больше не нужен.
- Модификатор `only-icon` больше не содержит стили и шаблоны.
  Все его стили реализованы отдельно для каждого размера кнопки.

__Миграция__

Удалите из проектного кода все, что связанно с модификаторами `_focus_thin` и `_only-icon_yes`.

<a name="isl-1623"></a>
### button2

В блоке `button2` обновлен внешний вид:
- У кнопки с темой `action` удалена рамка;
- У кнопки с темой `action` индикация клавиатурного фокуса теперь выражается пульсирующим фоном;
- - В темах `normal`, `pseudo` и `clear`  клавиатурный фокус изменен на плоскую внутреннюю  рамку, с толщиной 2px. Рамка не влияет на отступы и размеры блока.

<a name="isl-1678"></a>
### check-button

__Дизайн__

- Теперь для подсветки клавиатурного фокуса используется плоская рамка, c толщиной в 2px.

__Логика__

- Убрали изоляцию основных стилей от IE8. Теперь `check-button` корректно реагирует на смену состояний в IE8.
- Убрали стили, переопределяющие выравнивание в IE8.
  Теперь `check-button` выравнивается по базовой линии во всех браузерах;
- Добавили возможность определять иконки с помощью блока `icon`;
- Модификатор `only-icon` больше не содержит свои стили и шаблоны.
  Все его стили реализованы отдельно для каждого размера `check-button`.

__Миграция__

Удалите из проектного кода все, что связанно с модификатором `_only-icon_yes`.

<a name="isl-1624"></a>
### checkbox

В блоке `checkbox` произведены обновление дизайна и рефакторинг кода.

__Дизайн__

- Незначительно изменился отступ лейбла. Теперь это 5px для размера `s` и 7px для размера `m`.
  Раньше был 2px + 0.4em (sic) для любого размера.
- Изменился цвет элемента  `label` в состоянии `disabled` c непрозрачного `#999` на такой же, но с прозрачностью `opacity: .5`.
- Добавлены стили для состояния `pressed`.
- Фокус поменялся с `box-shadow` на бордер `#ffdb4d` шириной в 2px.
- Появились стили для _pressed
- На desktop-уровне при переходе между состояниями изменение цвета рамки и фона стали более плавными за счет анимаций.

__Логика__

- Элемент `tick` (галочка) теперь позиционируется абсолютно.
- Стили для фокуса теперь показываются только если фокус был получен с клавиатуры.
- Упрощен способ установки размеров для `checkbox__box`. Теперь их можно задать явно в стилях модификатора `size`.
- Убрана возможность выделять текст в чекбоксе (`user-select:none`).
- Раньше правильное выравнивание по базовой линии у чекбоксов без текста, определялось косвенно через элемент `tick`.
  Теперь это делается явно, через псевдоэлемент `after` у `checkbox__box`.
- Удален приватный метод `_isControlFocused` в пользу метода `isFocused`, который реализует `i-jquery__dom`.
- Добавлено BEM-событие `click`, которое генерируется в момент клика по чекбоксу (синхронно).
- В BEMJSON API добавлено поле `text`.
  Поле `text` используется в простом случае, для определения текста лейбла (экранируется).
  В более сложном случае — для доопределения BEMJSON элемента `label`.
  Если вы используете `text`, не забудьте подключить в зависимости элемент `label`, по умолчанию он не подключается.
- В BEMJSON API добавлено поле `box`.
  Поле `box` используется для доопределения BEMJSON элемента `box`.

__Миграция__

- Мы окончательно отказались от установки темы по умолчанию (`theme:normal`). Теперь тему нужно обязательно задавать в BEMJSON блока.
- Модификатор `focused_yes` выставляется и блоку и элементу `box`.
  Выставлять модификатор `focused_yes` элементу `box` избыточно, мы удалим эту логику в 5.0.
  Проверьте свой код, если вы где-то используете `__box_focused_yes`,
  исправьте на `checkbox_focused_yes checkbox__box`. Аналогично с модификатором `checked`.

<a name="isl-1625"></a>
### input

Мы произвели рефакторинг и обновили дизайн в блоке `input`.

##### Новое

- По наведению курсора мыши теперь устанавливается модификатор `hovered_yes`.
  Рамка инпута становится чуть темнее.
- Добавлен модификатор `pin`, позволяющий скруглять углы и срезать стороны инпута.
  Он нужен для стыковки инпута с другими блоками в составе общей группы.
  Значение модификатора формируется по аналогии с [`button2`](https://lego.yandex-team.ru/libs/islands/v4.x/desktop/button2/#mods-pin):
  два ключевых значения через `-`: например `input_pin_clear-round`.
- Добавлен размер `xs` (модификатор `size_xs`), соответствующий размеру `S` в портальном гайде.

##### Изменения

- Изменились размеры отступов в текстовых полях `input` и `input_type_textarea`;
- Для модификатора `theme_normal` изменились стили при установке фокуса. Теперь инпут в фокусе обрамляется жёлтой рамкой
  толщиной 2px;
- Изменилась реализация отступов у элемента `control`. Раньше отступы у `input__control`задавались с помощью свойства
  `padding`. При этом в IE8 padding у `control` обнулялся и устанавливался у элемента `box`,
  а для IE9+ заменялся на `border` чтобы исправить [баг](ISLCOMPONENTS-865).
  Это вызывало сложности при переопределении отступа и увеличивало размер CSS.
  Теперь отступы во всех браузерах реализованы с помощью `border`.
- Убран `text-overflow: ellipsis`. В новом дизайне текст в поисковой строке не обрезается многоточием.
- Удалён модификатор `focus_thin`. Его можно было использовать в поисковой форме в шапке, в качестве замены «свечению» по фокусу.
  В соответствии с текущим дизайном, в шапке следует использовать обычный стиль по фокусу из `theme_normal`.

<a name="isl-1626"></a>
### link

Мы произвели рефакторинг и обновили дизайн в блоке `link`.

__Дизайн__

- Цвет ссылки в `_theme_normal` для desktop- и touch-pad-сборок изменился с `#22c` на `#04b`.<br>
  <img height=25 src="https://jing.yandex-team.ru/files/karamadjong/link_theme_normal-redesign.png" />
- Для touch-phone-сборок цвет ссылки остался прежним – `#0670c1`.
- Цвет ссылки для `_hovered_yes` во всех темах поменялся с `#d00` на `#c00`.<br>
  <img height=25 src="https://jing.yandex-team.ru/files/karamadjong/link_hovered_yes-redesign.png" />
- Добавлена тема __ghost__ (`color: #999`)<br>
  <img height=25 src="https://jing.yandex-team.ru/files/karamadjong/link_theme_ghost.png" />
- Добавлена тема __strong__ (`font-weight: 700`)<br>
  <img height=25 src="https://jing.yandex-team.ru/files/karamadjong/link_theme_strong.png" />
- Добавлена тема __black__ (`color: #000`)<br>
  <img height=25 src="https://jing.yandex-team.ru/files/karamadjong/link_theme_black.png" />
- Стили для `_focused_yes` поменялись со стандартного `outline` на `outline: 2px solid #fc0`.<br>
  <img height=32 src="https://jing.yandex-team.ru/files/karamadjong/link_focused_yes-redesign.png" />

__Логика__

Блок `link` теперь наследуется от блока `control`. Это изменило поведение блока следующим образом:
- Стал выставляться `_focused_yes` при получении фокуса.
- Немного изменилась логика работы с атрибутом `tabindex` при снятии/установке `_disabled`.
  Раньше блок при переключении в `_disabled_yes` выставлял `tabindex: -1`, теперь атрибут `tabindex` просто удаляется.
- При выставлении `_disabled_yes` теперь также выставляется свойство `disabled`.

Ряд небольших исправлений и улучшений:
- Теперь нельзя выставить одновременно `_pressed_yes` и `_disabled_yes`.
- Для нормализации навигации по табу в различных браузерах,
  атрибут `tabindex` теперь по умолчанию выставляется в 0.
- При получении `_disabled_yes` у ссылки удаляется атрибут `href`. Это устраняет возможность перехода по ссылке
  через контекстное меню и решает проблему в Opera 12, которая не понимает CSS-свойство `pointer-events:none`.
- JS-параметр, через который на клиент пробрасывалось оригинальное значение `tabindex`
  изменился с `origTabindex` на `_tabindex`. Это нужно для блока `control`.
  Параметр `origTabindex` оставлен для обратной совместимости, и будет удален в версии 5.0.
- Добавлена возможность указать атрибут `name` через одноименное поле в `BEMJSON`.
- Атрибут `href` не выставляется только при отсутствии поля `url`  (`url === undefined`).
  Раньше использовалось приведение типа, пустые строки и прочие falsy-значения рассматривались как отсутствующий `url`.
- В BEMJSON API добавилось поле `text`, через которое можно передать текст ссылки.
  Отличается от передачи через `content` тем, что простые строки экранируются.
- Стили для `_focused_yes` применяются только при клавиатурном фокусе.
- Приватный метод `_onKeyUp` в `link_pseudo_yes.js` переименован в `_onKeyup`.
- Исправлена проблема с двойным срабатыванием BEM-события `click` по нажатию ENTER на псевдо ссылке.
- Добавлена логика про отмену прокрутки окна по нажатию пробела на сфокусированной псевдо ссылке.
- В момент нажатия клавишами ENTER и SPACE на псевдо ссылке выставляется модификатор `_pressed_yes`.

__Миграция__

Все изменения, которые мы произвели, обратно совместимые.
Но вам лучше прямо сейчас отказаться от устаревшего API, чтобы не иметь проблем в будущем.

1. Поменяйте все эпизоды использования JS-параметра `origTabindex` на JS-параметр `_tabindex`.
2. Обязательно  задавайте ссылкам тему (модификатор `theme`) в BEMJSОN.
   Обратите внимание, что вместо `_outer_yes` следует использовать `_theme_outer`,
   а __вместе__ с `_pseudo_yes` следует использовать `_theme_pseudo`.
3. Если вы вставляете в ссылки иконки, обязательно задавайте блоку с изображением микс `link__icon`.
4. Передавайте значение для атрибута `tabindex` в специализированном поле `tabindex`, а не  в объекте `attrs`.
5. В обычной ссылке для задания текста вместо поля `content` используйте поле `text`.
   Оно более безопасно, так как автоматически экранирует переданное значение.
   Поле `content` лучше использовать для более сложных случаев, например для ссылок с картинками.

<a name="isl-1684"></a>
### popup

В блоке `popup` , согласно новому гайду,  изменился цвет рамки в теме `popup_theme_ffffff`.

<a name="isl-1685"></a>
### popup2

В блоке `popup2` , согласно новому гайду,  изменился цвет рамки в теме `popup2_theme_normal`.

<a name="isl-1680"></a>
### radio-button

Мы произвели небольшой рефакторинг и обновили дизайн в блоке `radio-button`.

Обновление дизайна заключается в добавлении новых стилей для фокуса (оранжевая рамка шириной 2px).
Кроме того, фокус теперь показывается только при установке с клавиатуры клавишей Tab или программно.

__Миграция__

- Мы объявили устаревшей логику про выставление темы по умолчанию (`theme:normal`).
  В  4.1.0 отказались от установки темы по умолчанию (`theme:normal`).  Теперь обязательно задавайте тему (модификатор `theme`)  для радиокнопок.

<a name="isl-1627"></a>
### radiobox

- Изменился внешний вид фокус-рамки;
- Добавлено состояние `pressed`;
- Переработаны стили всех состояний, на desktop добавлена анимация переходов между состояниями;
- Добавлен элемент `text`, который является  оберткой для текстового контента блока `radiobox`. Понадобился, чтобы сделать блок полупрозрачным в состоянии `disabled`.

<a name="isl-1686"></a>
### slider

Мы произвели рефакторинг и обновили дизайн в блоке `slider`.

__Логика__

Шаблоны элемента `runner` («ползунок») вынесены в отдельный файл.
Сам элемент `runner` теперь реализуется с помощью блока `button2`.

Элемент `runner` был частью внутренней реализации блока, поэтому
никаких конфликтов на проектном уровне возникнуть не должно.

Ключевые изменения:
- Теперь используется DOM-элемент `<button>` вместо `<a>`.
- Атрибут `aria-disabled` не добавляется, если у блока нет модификатора `disabled`.
  Раньше добавлялся со значением `"false"`.
- Атрибут `hidefocus`, за ненадобностью, больше на используется.
- На элементе `runner` больше не выставляется модификатор `hovered`,
  чтобы не дублировать логику из `button2`.

__Дизайн__

- Клавиатурное перемещение ползунка теперь происходит плавно, с использованием CSS-свойства `transition`.
- У смежных ползунков уголки общей стороны теперь не скругляются.
- У ползунка появилась реакция на нажатие (модификатор `pressed`), обновился фокус, и, в целом,
  поведение и дизайн у него стали теми же, что у кнопок.
- Добавлен размер `xs`.

<a name="isl-2055"></a>
### tumbler

Мы произвели рефакторинг и обновили дизайн в блоке `tumbler`.

__Дизайн__

- У ползунка появилась реакция на нажатие (модификатор `pressed_yes`), обновился фокус.
- Размеры и цвета блока приведены в соответствие с портальным гайдом.
- Добавлен размер `xs` (модификатор `size_xs`), соответствующий размеру `s` в портальном гайде.

__Логика__

Блок `tumbler` теперь наследуется от блока `control`. Это значит:
- К ползунку (элемент `button`) теперь примиксован элемент `control`.
- Немного изменилась логика работы с атрибутом `tabindex` при снятии/установке `_disabled`.
  Раньше блок при переключении в `_disabled_yes` выставлял `tabindex: -1`, теперь атрибут `tabindex` просто удаляется.
- При выставлении `_disabled_yes` теперь также выставляются свойство `disabled` и атрибут `aria-disabled`.

- В BEMJSON добавлено кастомное поле `tabindex`.
- Методы `isChecked`, `check`, `uncheck`, `toggle` объявлены устаревшими.
  Вместо их использования следует работать напрямую с модификатором `checked`.
- Вместо `isDisabled` следует проверять наличие модификатора `disabled`.
- Модификатор `hovered` теперь выставляется на уровне `desktop`.
  Кроме того, изменилась логика: при наведении указателя мыши на элемент `button` модификатор снимается с блока
  `tumbler` и устанавливается на элемент.
- Тумблер перестал переключаться при отпускании клавиши мыши, при условии, что она была нажата за его пределами.
- Тумблер в состоянии `disabled` теперь можно переключать программно установкой модификатора `checked`.

<a name="isl-1631"></a>
### user

- Изменилась стандартная аватарка;
- Убрана тонкая обводка аватарки;
- Ссылки меню теперь подсвечиваются красным при наведении;
- Незначительные изменения: исправлены цвета разделителей в меню, доработан внешний вид в IE8.

<a name="isl-1628"></a>
### search2

Пример добавлен в [документацию блока](https://lego.yandex-team.ru/libs/islands/v4.x/touch-pad/search2/#Варианты-использования-блока-3).
Для правильной работы табуляции в примере, в блоке `search2` поменялись местами элементы `input` и `button`.

<a name="#isl-1744"></a>
### auth__social-link

Начали использовать блок `link` в элементе для социальной авторизации — цвет приведен в соответствие с гайдами (`#d00` → `#c00`).


## Другие минорные изменения

| Заголовок                                                                      | Задача     | PR     |
|:-------------------------------------------------------------------------------|:-----------|:-------|
| [i-flashcookie: Удалять флэш-плеер после установки куки](#isl-1779)            | [ISL-1779] | [#694] |
| [i-services: Добавить новый сервис id: 'display'](#isl-1953)                   | [ISL-1953] | [#669] |
| [i-global: Сбрасывать параметры переданные блоку ранее](#isl-1844)             | [ISL-1844] | [#642] |
| [radiobox, radio-button: Добавить значения в данные события change](#isl-2098) | [ISL-2098] | [#768] |
| [service-icon: Добавить иконку Кассы](#isl-2035)                               | [ISL-2035] | [#729] |
| [slider: Реализовать возможность задавать контент самостоятельно](#isl-2106)   | [ISL-2106] | [#757] |

<a name="#isl-1779"></a>
### `i-flashcookie`: Удалять флэш-плеер после установки куки

Команда Яндекс.Браузера обнаружила интересную особенность в браузерах (Chromium, FF, Opera). Оказывается, наличие flash на странице способно заметно замедлять переходы по ссылкам внутри домена. Подробности [здесь](https://clubs.at.yandex-team.ru/performance/1302).

Чтобы исправить это мы добавили в `i-flashcookie` специальный callback, который удаляет флеш-плеер после выставления coockie. Таким образом к моменту перехода по ссылке его уже не будет на странице.

После обновления библиотеки на сервисе проблема будет устранена автоматически.

<a name="#isl-1953"></a>
### `i-services`: Добавить новый сервис id: 'display'

В блоке  `i-services`  добавлены ссылки на русский и турецкий набор сервисов.

<a name="#isl-1844"></a>
### `i-global`: Сбрасывать параметры переданные, блоку ранее

Блок `i-global` теперь сбрасывает параметры, переданные в него ранее.

В версиях islands-* 3.0 и ниже параметры передаваемые в поле params блока `i-global` хранились в объекте, доступном из разных вызовов шаблонизатора, что [приводит к утечкам данных](https://frgt.at.yandex-team.ru/10).

Для устранения уязвимости, необходимо было контролировать, что для всех пользователей в блок передавался одинаковый набор параметров и данные одного пользователя полностью перезаписали данные другого.

Теперь блок `i-global` сбрасывает значения, переданные через поле `params` ранее.
Значения по умолчанию и значения переданные при инициализации шаблонизатора
(внутри `oninit()` для `BEMHTML`, снаружи `bh.match()` для `bh`) при этом сохраняются.
Если по какой-то причине нужно сохранить старое поведение, в BEMJSON следует выставить поле `reset: false`.
Это может понадобиться, например, если на странице используется более одного блока `i-global`.
В этом случае `reset: false` следует выставить для всех блоков кроме первого.

<a name="#isl-2098"></a>
### `radiobox`, `radio-button`: Добавить значения в данные события change

Теперь в данных события `change` для `radiobox` и `radio-button` передаются старое (`prevVal`) и
новое (`currentVal`) значения контрола.

Кроме этого, нормализовалось пустое значение для полей `current` и `prev` (отсутствие активированного или
деактивированного `radiobox`). Теперь это пустая jQuery-коллекция. Ранее им мог быть либо `undefined`, либо
пустая jQuery-коллекция.

<a name="#isl-2035"></a>
### `service-icon`: Добавить иконку Кассы

Новая иконка доступна под значением `_kassa` модификатора `_color`. Добавлен перевод «Кассы» на английский. Актуализирована ссылка на главную страницу «Кассы».

<a name="#isl-2106"></a>
### `slider`: Возможность задавать контент самостоятельно

В BEMJSON API блока `slider` добавлено поле `extendContent`.
Если задать в нем значение `false`, то все, что вы передадите в поле `content`, никак меняться и дополняться не будет.

Используя это поле можно более гибко определять контент блока:

```js
({
    block: 'slider',
    mods: {theme: 'normal', size: 'm', orientation: 'horiz'},
    extendContent: false, // <---
    content: [
        {
            block: 'my-wrapper',
            content: {
                block: 'slider',
                elem: 'info',
                elemMods: {preset: 'inline'},
                content: [/* ... */]
            }
        },
        {
            block: 'my-wrapper',
            content: {
                block: 'slider',
                elem: 'body',
                mods: {origin: 'x'},
                content: {
                    block: 'slider',
                    elem: 'click'
                }
            }
        }
    ]
});
```

## Исправления и улучшения


| Заголовок                                                                                      | Задача     | PR     |
|:-----------------------------------------------------------------------------------------------|:------------|:------|
| i-services: Обновить данные                                                                    | [ISL-1430] | [#677] |
| attach: Не происходит события change при выборе файла с таким же названием, <br> как у предыдущего  | [ISL-1839] | [#631] |
| b-keyboard-popup: Добавить переводы для казахского и татарского                                | [ISL-1860] | [#625] |
| b-page__css: На touch уровне некорректно реализована логика про ie:true                        | [ISL-1847] | [#650] |
| b-statcounter__metrika_type_js: ошибка шаблонизации bem-xjst@next                              | [ISL-2011] | [#704] |
| button2: Возможность передавать tag в bemjson                                                  | [ISL-2036] | [#718] |
| button2: Добавить подписку на dblcklick в IE8                                                  | [ISL-1578] | [#700] |
| button2: Портировать решения по дизайну из button                                              | [ISL-2077] | [#735] |
| button: Удалить атрибут role=&quot;button&quot;                                                | [ISL-1840] | [#629] |
| country-flag: Добавить размеры 32 и 64 для флага en                                            | [ISL-1250] | [#702] |
| header: В ff action кнопка не всегда получает hover после нажатия                              | [ISL-2139] | [#577] |
| i-geolocation: Невозможно пробросить нулевое значение кеша позиции                             | [ISL-1429] | [#643] |
| i-global: В bh шаблонах не реализована логика public-params                                    | [ISL-2140] | [#646] |
| i-services: Локализовать ссылку ВНО                                                            | [ISL-2002] | [#698] |
| i-user-info: Заменить http на относительный протокол                                           | [ISL-1856] | [#622] |
| icon: Усовершенствовать логику обработки поля url                                              | [ISL-1950] | [#665] |
| input: Добавить transition для обводки                                                         | [ISL-1999] | [#691] |
| input: На iOS при вставке из буфера длинного текста в инпут курсор мигает <br> поверх крестика      | [ISL-2024] | [#713] |
| input: На WP в примере size_m текст и placeholder двигаются <br>  при обновлении страницы            | [ISL-1992] | [#712] |
| input: Поправить стили                                                                         | [ISL-2051] | [#724] |
| input: Починить gemini тесты в ie11                                                            | [ISL-1858] | [#627] |
| input: При удалении символов по событию change input.val() <br> возвращает старое значение          | [ISL-1790] | [#621] |
| link_theme_ghost: Цвет по hover должен быть черным                                             | [ISL-2017] | [#707] |
| modal: в Firefox под Windows не воспроизводится флеш <br> в модальном окне с анимацией              | [ISL-1941] | [#725] |
| pointerevents__click: Событие pointerclick отрабатывает дважды на WP                           | [ISL-1959] | [#675] |
| radiobox__radio: При снимании _checked у __control не убирается свойство checked               | [ISL-1851] | [#626] |
| service-table: detele Market's link for turkish localization                                   | [ISL-1705] | [#545] |
| share-dropdown: Исправить переводы для «ВКонтакте»                                             | [ISL-1857] | [#641] |
| share-dropdown: проверять наличие meta-тега description                                        | [ISL-2141] | [#742] |
| slider: Методы min, max, range позволяют выставить некорректные значения                       | [ISL-1824] | [#756] |
| suggest-item: Убрать из шаблона указание протокола                                             | [ISL-1785] | [#623] |
| suggest-item__ellipsis-text: Не экранирует содержимое                                          | [ISL-1997] | [#695] |
| tooltip: Исправить неверную проверку условия в BEMHTML-шаблоне                                 | [ISL-2052] | [#723] |
| Заменить во всех блоках явные коды клавиш на константы блока keycodes                          | [ISL-1170] | [#743] |
| Исправить зависимости элементов от блоков                                                      | [ISL-1709] | [#604] |
| Не экранируются url и description в share-dropdown                                             | [ISL-2118] | [#741] |
| Отказаться от использования hasOwnProperty в шаблонах <br> в пользу проверки на undefined           | [ISL-1750] | [#607] |
| Сделать ревизию блоков на предмет правильного вызова __base() из live()                        | [ISL-1063] | [#772] |
| tabs-menu: Опечатка в названии метода                                                          | [ISL-1799] | [#632] |

## Дополнительные изменения

| Заголовок                                                                   | Задача     | PR     |
|:----------------------------------------------------------------------------|:-----------|:-------|
| b-statcounter: Поправить описание определения региона пользователя счетчика | [ISL-1811] | [#630] |
| i-global: Обновить документацию после изменения API                         | [ISL-1882] | [#706] |
| link: Обновить документацию после рефакторинга                              | [ISL-1996] | [#745] |
| slider: Добавить в документацию параметр runnerWidth                        | [ISL-1205] | [#750] |


[ISL-1623]: https://st.yandex-team.ru/ISL-1623
[ISL-1638]: https://st.yandex-team.ru/ISL-1638
[ISL-1678]: https://st.yandex-team.ru/ISL-1678
[ISL-1624]: https://st.yandex-team.ru/ISL-1624
[ISL-1625]: https://st.yandex-team.ru/ISL-1625
[ISL-1626]: https://st.yandex-team.ru/ISL-1626
[ISL-1685]: https://st.yandex-team.ru/ISL-1685
[ISL-1684]: https://st.yandex-team.ru/ISL-1684
[ISL-1680]: https://st.yandex-team.ru/ISL-1680
[ISL-1627]: https://st.yandex-team.ru/ISL-1627
[ISL-1628]: https://st.yandex-team.ru/ISL-1628
[ISL-1686]: https://st.yandex-team.ru/ISL-1686
[ISL-2055]: https://st.yandex-team.ru/ISL-2055
[ISL-1631]: https://st.yandex-team.ru/ISL-1631
[ISL-1779]: https://st.yandex-team.ru/ISL-1779
[ISL-1744]: https://st.yandex-team.ru/ISL-1744
[ISL-1953]: https://st.yandex-team.ru/ISL-1953
[ISL-1844]: https://st.yandex-team.ru/ISL-1844
[ISL-2098]: https://st.yandex-team.ru/ISL-2098
[ISL-2035]: https://st.yandex-team.ru/ISL-2035
[ISL-2106]: https://st.yandex-team.ru/ISL-2106
[ISL-1884]: https://st.yandex-team.ru/ISL-1884
[ISL-1430]: https://st.yandex-team.ru/ISL-1430
[ISL-1839]: https://st.yandex-team.ru/ISL-1839
[ISL-1860]: https://st.yandex-team.ru/ISL-1860
[ISL-1847]: https://st.yandex-team.ru/ISL-1847
[ISL-2011]: https://st.yandex-team.ru/ISL-2011
[ISL-2036]: https://st.yandex-team.ru/ISL-2036
[ISL-1578]: https://st.yandex-team.ru/ISL-1578
[ISL-2077]: https://st.yandex-team.ru/ISL-2077
[ISL-1840]: https://st.yandex-team.ru/ISL-1840
[ISL-1250]: https://st.yandex-team.ru/ISL-1250
[ISL-1429]: https://st.yandex-team.ru/ISL-1429
[ISL-2002]: https://st.yandex-team.ru/ISL-2002
[ISL-1856]: https://st.yandex-team.ru/ISL-1856
[ISL-1950]: https://st.yandex-team.ru/ISL-1950
[ISL-1999]: https://st.yandex-team.ru/ISL-1999
[ISL-2024]: https://st.yandex-team.ru/ISL-2024
[ISL-1992]: https://st.yandex-team.ru/ISL-1992
[ISL-2051]: https://st.yandex-team.ru/ISL-2051
[ISL-1858]: https://st.yandex-team.ru/ISL-1858
[ISL-1790]: https://st.yandex-team.ru/ISL-1790
[ISL-2017]: https://st.yandex-team.ru/ISL-2017
[ISL-1941]: https://st.yandex-team.ru/ISL-1941
[ISL-1959]: https://st.yandex-team.ru/ISL-1959
[ISL-1851]: https://st.yandex-team.ru/ISL-1851
[ISL-1705]: https://st.yandex-team.ru/ISL-1705
[ISL-1857]: https://st.yandex-team.ru/ISL-1857
[ISL-2139]: https://st.yandex-team.ru/ISL-2139
[ISL-2140]: https://st.yandex-team.ru/ISL-2140
[ISL-2141]: https://st.yandex-team.ru/ISL-2141
[ISL-1824]: https://st.yandex-team.ru/ISL-1824
[ISL-1785]: https://st.yandex-team.ru/ISL-1785
[ISL-1997]: https://st.yandex-team.ru/ISL-1997
[ISL-2052]: https://st.yandex-team.ru/ISL-2052
[ISL-1170]: https://st.yandex-team.ru/ISL-1170
[ISL-1709]: https://st.yandex-team.ru/ISL-1709
[ISL-2118]: https://st.yandex-team.ru/ISL-2118
[ISL-1750]: https://st.yandex-team.ru/ISL-1750
[ISL-1063]: https://st.yandex-team.ru/ISL-1063
[ISL-1811]: https://st.yandex-team.ru/ISL-1811
[ISL-1882]: https://st.yandex-team.ru/ISL-1882
[ISL-1996]: https://st.yandex-team.ru/ISL-1996
[ISL-1205]: https://st.yandex-team.ru/ISL-1205
[ISL-1799]: https://st.yandex-team.ru/ISL-1799

[#439]: https://github.yandex-team.ru/lego/islands/pull/439
[#440]: https://github.yandex-team.ru/lego/islands/pull/440
[#486]: https://github.yandex-team.ru/lego/islands/pull/486
[#689]: https://github.yandex-team.ru/lego/islands/pull/689
[#422]: https://github.yandex-team.ru/lego/islands/pull/422
[#426]: https://github.yandex-team.ru/lego/islands/pull/426
[#476]: https://github.yandex-team.ru/lego/islands/pull/476
[#487]: https://github.yandex-team.ru/lego/islands/pull/487
[#501]: https://github.yandex-team.ru/lego/islands/pull/501
[#420]: https://github.yandex-team.ru/lego/islands/pull/420
[#685]: https://github.yandex-team.ru/lego/islands/pull/685
[#670]: https://github.yandex-team.ru/lego/islands/pull/670
[#747]: https://github.yandex-team.ru/lego/islands/pull/747
[#477]: https://github.yandex-team.ru/lego/islands/pull/477
[#694]: https://github.yandex-team.ru/lego/islands/pull/694
[#620]: https://github.yandex-team.ru/lego/islands/pull/620
[#669]: https://github.yandex-team.ru/lego/islands/pull/669
[#642]: https://github.yandex-team.ru/lego/islands/pull/642
[#768]: https://github.yandex-team.ru/lego/islands/pull/768
[#729]: https://github.yandex-team.ru/lego/islands/pull/729
[#757]: https://github.yandex-team.ru/lego/islands/pull/757
[#673]: https://github.yandex-team.ru/lego/islands/pull/673
[#677]: https://github.yandex-team.ru/lego/islands/pull/677
[#631]: https://github.yandex-team.ru/lego/islands/pull/631
[#625]: https://github.yandex-team.ru/lego/islands/pull/625
[#650]: https://github.yandex-team.ru/lego/islands/pull/650
[#704]: https://github.yandex-team.ru/lego/islands/pull/704
[#718]: https://github.yandex-team.ru/lego/islands/pull/718
[#700]: https://github.yandex-team.ru/lego/islands/pull/700
[#735]: https://github.yandex-team.ru/lego/islands/pull/735
[#629]: https://github.yandex-team.ru/lego/islands/pull/629
[#702]: https://github.yandex-team.ru/lego/islands/pull/702
[#577]: https://github.yandex-team.ru/lego/islands/pull/577
[#643]: https://github.yandex-team.ru/lego/islands/pull/643
[#646]: https://github.yandex-team.ru/lego/islands/pull/646
[#698]: https://github.yandex-team.ru/lego/islands/pull/698
[#622]: https://github.yandex-team.ru/lego/islands/pull/622
[#665]: https://github.yandex-team.ru/lego/islands/pull/665
[#691]: https://github.yandex-team.ru/lego/islands/pull/691
[#713]: https://github.yandex-team.ru/lego/islands/pull/713
[#712]: https://github.yandex-team.ru/lego/islands/pull/712
[#724]: https://github.yandex-team.ru/lego/islands/pull/724
[#627]: https://github.yandex-team.ru/lego/islands/pull/627
[#621]: https://github.yandex-team.ru/lego/islands/pull/621
[#707]: https://github.yandex-team.ru/lego/islands/pull/707
[#725]: https://github.yandex-team.ru/lego/islands/pull/725
[#675]: https://github.yandex-team.ru/lego/islands/pull/675
[#626]: https://github.yandex-team.ru/lego/islands/pull/626
[#641]: https://github.yandex-team.ru/lego/islands/pull/641
[#742]: https://github.yandex-team.ru/lego/islands/pull/742
[#756]: https://github.yandex-team.ru/lego/islands/pull/756
[#623]: https://github.yandex-team.ru/lego/islands/pull/623
[#695]: https://github.yandex-team.ru/lego/islands/pull/695
[#723]: https://github.yandex-team.ru/lego/islands/pull/723
[#743]: https://github.yandex-team.ru/lego/islands/pull/743
[#604]: https://github.yandex-team.ru/lego/islands/pull/604
[#741]: https://github.yandex-team.ru/lego/islands/pull/741
[#607]: https://github.yandex-team.ru/lego/islands/pull/607
[#772]: https://github.yandex-team.ru/lego/islands/pull/772
[#630]: https://github.yandex-team.ru/lego/islands/pull/630
[#706]: https://github.yandex-team.ru/lego/islands/pull/706
[#745]: https://github.yandex-team.ru/lego/islands/pull/745
[#750]: https://github.yandex-team.ru/lego/islands/pull/750
[#632]: https://github.yandex-team.ru/lego/islands/pull/632
[#545]: https://github.yandex-team.ru/lego/islands/pull/545
