# islands 6.2.0

Изменения, вошедшие в релиз islands 6.2.0, разделены на группы:

* [минорные изменения](#Минорные-изменения) — задачи, в рамках которых произошло расширение API блоков
* [исправлено и улучшено](#Исправлено-и-улучшено) — различные исправления, не затрагивающие API блоков
* [дополнительно](#Дополнительно) — задачи, не касающиеся кода блоков (документация, инфраструктура и т.д.)

Все важные изменения подробно описаны [ниже](#Пояснения).

## Минорные изменения

| Заголовок                                                                                 | Задача     | PR      |
| :---------------------------------------------------------------------------------------- | :--------- | :------ |
| [popup2: Добавить события afterOpen и afterClose](#ISL-4192)                              | [ISL-4192] | [#4958] |
| [tableau-iframe: Добавить ссылку на Яндекс для бизнеса в подвал блока](#ISL-5901)         | [ISL-5901] | [#4957] |
| [i-ua: Добавить определение FireFox](#ISL-4507)                                           | [ISL-4507] | [#4861] |
| [textinput: Событие clear при очистке input](#ISL-6126)                                   | [ISL-6126] | [#4905] |

## Исправлено и улучшено

| Заголовок                                                                                     | Задача     | PR               |
| :-------------------------------------------------------------------------------------------- | :--------- | :--------------- |
| Проверить наличие переводов на uz                                                             | [ISL-6334] | [#5151]          |
| [attach.react: Поддержать новый дизайн](#ISL-5423)                                            | [ISL-5423] | [#5092]          |
| Не крутится спиннер при открытии оверлея в Серпе на iOS 11+                                   | [ISL-6342] | [#5123]          |
| radio-button: view='default' ломается если не передано первичное значение                     | [ISL-5759] | [#5089]          |
| Перейти с js: function(){} на js: { inited: function(){} }                                    | [ISL-6211] | [#5033], [#5035] |
| Ошибка в Header (lego-on-react) 2.0                                                           | [ISL-6209] | [#5022]          |
| user2: Убрать transform: translateZ(0) для user-pic                                           | [ISL-5066] | [#4978]          |
| user2: Не делать запрос в БК при инициализации                                                | [ISL-5632] | [#4999]          |
| popup2.react: Если менять контент popup2 по клику внутри, popup2 считает это ou…              | [ISL-5284] | [#4844]          |
| [dropdown2.react: Исправить передачу параметра zIndexGroupLevel в popup](#ISL-6147)           | [ISL-6147] | [#4923]          |
| popup2.react: Поставить гард на проверку current и попытаться это воспроизвести               | [ISL-5935] | [#4935]          |
| attach.react: не проставляется tabIndex                                                       | [ISL-4987] | [#3524]          |
| Добавить в typings Props наследование от  CommonBemProps (lego-on-react)                      | [ISL-6121] | [#4873]          |
| Ошибка в Header (lego-on-react)                                                               | [ISL-6075] | [#4872]          |
| popup2.react: Починить позиционирование внутри модального окна                                | [ISL-5794] | [#4513]          |
| Убрать методы i-common из input_tap-ahead и b-autocomplete-item_type_nav                      | [ISL-6057] | [#4805]          |
| textinput.react: Событие onKeyDown срабатывает дважды                                         | [ISL-5502] | [#4794]          |
## Дополнительно

| Заголовок                                                  | Задача     | PR               |
| :--------------------------------------------------------- | :--------- | :--------------- |
| [contribs: linter conventional commit](#ISL-6183)          | [ISL-6183] | [#4989]          |         |
| icon: Добавить информацию про размеры                      | [ISL-6006] | [#4884], [#4875] |

## Пояснения

<a name="ISL-5423"></a>
### [attach.react: Поддержать новый дизайн][ISL-5423]

В блок `attach` теперь можно прокинуть `size: n`, `theme`, `tone`.

<a name="ISL-6183"></a>
### [contribs: linter conventional commit][ISL-6183]

В репозитории `islands` поменялись сценарии `git-hooks`: теперь используются `lint-staged` и `husky`.
Чтобы у вас заработали новые проверки, вам необходимо выполнить `npm i`, а в некоторых случаях удалить `.git/hooks`.
`commit messages` теперь оформляются по стандартам [`conventionalcommits`](https://www.conventionalcommits.org/en/v1.0.0-beta.3/).
Поддержаны следующие типы: `build`, `chore`, `ci`, `docs`, `feat`, `fix`, `perf`, `refactor`, `revert`, `style`, `test`.
Подробнее о типах можно прочесть в [the Angular convention](https://github.com/angular/angular/blob/22b96b9/CONTRIBUTING.md#type).

<a name="ISL-4192"></a>
### [popup2: Добавить события afterOpen и afterClose][ISL-4192]

В блоке `popup2` появились события `afterOpen` и `afterClose`, которые генерируются после открытия/закрытия. Если на блоке `popup2` есть анимация открытия/закрытия события генерируются после ее проигрывания.

<a name="ISL-5901"></a>
### [tableau-iframe: Добавить ссылку на Яндекс для бизнеса в подвал блока][ISL-5901]

В пакете `services` добавлен сервис Яндекс для бизнеса

<a name="ISL-6147"></a>
### [dropdown2.react: Исправить передачу параметра zIndexGroupLevel в popup][ISL-6147]

В кастомный `popup` блока `dropdown2` теперь можно передать параметр `zIndexGroupLevel` в React-версии.

<a name="ISL-4507"></a>
### [i-ua: Добавить определение FireFox][ISL-4507]

Блок `i-ua` теперь может определять браузер Firefox.

<a name="ISL-6126"></a>
### [textinput: Событие clear при очистке input][ISL-6126]

Блоки `textinput` и `textarea` в `i-bem`-реализации теперь генерируют БЭМ-событие `clear` по клику на очищающий крестик.

[PATENTS-32]: https://st.yandex-team.ru/PATENTS-32
[#5103]: https://github.yandex-team.ru/lego/islands/pull/5103
[LEGO-2366]: https://st.yandex-team.ru/LEGO-2366
[#5161]: https://github.yandex-team.ru/lego/islands/pull/5161
[ISL-6122]: https://st.yandex-team.ru/ISL-6122
[#4900]: https://github.yandex-team.ru/lego/islands/pull/4900
[SERP-77184]: https://st.yandex-team.ru/SERP-77184
[#5149]: https://github.yandex-team.ru/lego/islands/pull/5149
[ISL-6334]: https://st.yandex-team.ru/ISL-6334
[#5151]: https://github.yandex-team.ru/lego/islands/pull/5151
[ISL-5423]: https://st.yandex-team.ru/ISL-5423
[#5092]: https://github.yandex-team.ru/lego/islands/pull/5092
[IMAGESUI-9623]: https://st.yandex-team.ru/IMAGESUI-9623
[#5102]: https://github.yandex-team.ru/lego/islands/pull/5102
[ISL-6342]: https://st.yandex-team.ru/ISL-6342
[#5123]: https://github.yandex-team.ru/lego/islands/pull/5123
[DOC-4382]: https://st.yandex-team.ru/DOC-4382
[#5131]: https://github.yandex-team.ru/lego/islands/pull/5131
[ISL-6203]: https://st.yandex-team.ru/ISL-6203
[#5018]: https://github.yandex-team.ru/lego/islands/pull/5018
[SERP-73908]: https://st.yandex-team.ru/SERP-73908
[#5113]: https://github.yandex-team.ru/lego/islands/pull/5113
[#5078]: https://github.yandex-team.ru/lego/islands/pull/5078
[SERP-50937]: https://st.yandex-team.ru/SERP-50937
[#5053]: https://github.yandex-team.ru/lego/islands/pull/5053
[ISL-6045]: https://st.yandex-team.ru/ISL-6045
[#5090]: https://github.yandex-team.ru/lego/islands/pull/5090
[#4967]: https://github.yandex-team.ru/lego/islands/pull/4967
[ISL-6310]: https://st.yandex-team.ru/ISL-6310
[#5082]: https://github.yandex-team.ru/lego/islands/pull/5082
[ISL-5321]: https://st.yandex-team.ru/ISL-5321
[#5084]: https://github.yandex-team.ru/lego/islands/pull/5084
[ISL-6183]: https://st.yandex-team.ru/ISL-6183
[#4989]: https://github.yandex-team.ru/lego/islands/pull/4989
[ISL-5939]: https://st.yandex-team.ru/ISL-5939
[#4917]: https://github.yandex-team.ru/lego/islands/pull/4917
[SERP-77070]: https://st.yandex-team.ru/SERP-77070
[#4946]: https://github.yandex-team.ru/lego/islands/pull/4946
[ISL-5759]: https://st.yandex-team.ru/ISL-5759
[#5089]: https://github.yandex-team.ru/lego/islands/pull/5089
[SERP-79923]: https://st.yandex-team.ru/SERP-79923
[#5055]: https://github.yandex-team.ru/lego/islands/pull/5055
[ISL-6309]: https://st.yandex-team.ru/ISL-6309
[#4876]: https://github.yandex-team.ru/lego/islands/pull/4876
[ISL-6280]: https://st.yandex-team.ru/ISL-6280
[#5073]: https://github.yandex-team.ru/lego/islands/pull/5073
[ISL-5980]: https://st.yandex-team.ru/ISL-5980
[#5047]: https://github.yandex-team.ru/lego/islands/pull/5047
[SERP-78300]: https://st.yandex-team.ru/SERP-78300
[#5063]: https://github.yandex-team.ru/lego/islands/pull/5063
[ISL-6112]: https://st.yandex-team.ru/ISL-6112
[#4862]: https://github.yandex-team.ru/lego/islands/pull/4862
[ISL-6211]: https://st.yandex-team.ru/ISL-6211
[#5033]: https://github.yandex-team.ru/lego/islands/pull/5033
[#5035]: https://github.yandex-team.ru/lego/islands/pull/5035
[ISL-6094]: https://st.yandex-team.ru/ISL-6094
[#4977]: https://github.yandex-team.ru/lego/islands/pull/4977
[ISL-6244]: https://st.yandex-team.ru/ISL-6244
[#5051]: https://github.yandex-team.ru/lego/islands/pull/5051
[ISL-4192]: https://st.yandex-team.ru/ISL-4192
[#4958]: https://github.yandex-team.ru/lego/islands/pull/4958
[ISL-6191]: https://st.yandex-team.ru/ISL-6191
[#4996]: https://github.yandex-team.ru/lego/islands/pull/4996
[LEGO-2318]: https://st.yandex-team.ru/LEGO-2318
[#4877]: https://github.yandex-team.ru/lego/islands/pull/4877
[SERP-77793]: https://st.yandex-team.ru/SERP-77793
[#5030]: https://github.yandex-team.ru/lego/islands/pull/5030
[#4971]: https://github.yandex-team.ru/lego/islands/pull/4971
[LEGO-2308]: https://st.yandex-team.ru/LEGO-2308
[#4926]: https://github.yandex-team.ru/lego/islands/pull/4926
[SERP-78385]: https://st.yandex-team.ru/SERP-78385
[#5025]: https://github.yandex-team.ru/lego/islands/pull/5025
[ISL-6209]: https://st.yandex-team.ru/ISL-6209
[#5022]: https://github.yandex-team.ru/lego/islands/pull/5022
[ISL-5066]: https://st.yandex-team.ru/ISL-5066
[#4978]: https://github.yandex-team.ru/lego/islands/pull/4978
[SERP-79685]: https://st.yandex-team.ru/SERP-79685
[#4995]: https://github.yandex-team.ru/lego/islands/pull/4995
[ISL-5632]: https://st.yandex-team.ru/ISL-5632
[#4999]: https://github.yandex-team.ru/lego/islands/pull/4999
[SERP-78601]: https://st.yandex-team.ru/SERP-78601
[#4889]: https://github.yandex-team.ru/lego/islands/pull/4889
[SERP-77406]: https://st.yandex-team.ru/SERP-77406
[#4947]: https://github.yandex-team.ru/lego/islands/pull/4947
[ISL-5284]: https://st.yandex-team.ru/ISL-5284
[#4844]: https://github.yandex-team.ru/lego/islands/pull/4844
[ISL-5901]: https://st.yandex-team.ru/ISL-5901
[#4957]: https://github.yandex-team.ru/lego/islands/pull/4957
[ISL-6160]: https://st.yandex-team.ru/ISL-6160
[#4940]: https://github.yandex-team.ru/lego/islands/pull/4940
[ISL-6147]: https://st.yandex-team.ru/ISL-6147
[#4923]: https://github.yandex-team.ru/lego/islands/pull/4923
[ISL-5935]: https://st.yandex-team.ru/ISL-5935
[#4935]: https://github.yandex-team.ru/lego/islands/pull/4935
[ISL-4987]: https://st.yandex-team.ru/ISL-4987
[#3524]: https://github.yandex-team.ru/lego/islands/pull/3524
[ISL-4507]: https://st.yandex-team.ru/ISL-4507
[#4861]: https://github.yandex-team.ru/lego/islands/pull/4861
[ISL-6154]: https://st.yandex-team.ru/ISL-6154
[#4929]: https://github.yandex-team.ru/lego/islands/pull/4929
[ISL-6148]: https://st.yandex-team.ru/ISL-6148
[#4920]: https://github.yandex-team.ru/lego/islands/pull/4920
[ISL-6069]: https://st.yandex-team.ru/ISL-6069
[#4871]: https://github.yandex-team.ru/lego/islands/pull/4871
[ISL-6121]: https://st.yandex-team.ru/ISL-6121
[#4873]: https://github.yandex-team.ru/lego/islands/pull/4873
[ISL-6075]: https://st.yandex-team.ru/ISL-6075
[#4872]: https://github.yandex-team.ru/lego/islands/pull/4872
[GNC-71]: https://st.yandex-team.ru/GNC-71
[#4857]: https://github.yandex-team.ru/lego/islands/pull/4857
[GNC-72]: https://st.yandex-team.ru/GNC-72
[#4853]: https://github.yandex-team.ru/lego/islands/pull/4853
[ISL-6103]: https://st.yandex-team.ru/ISL-6103
[#4867]: https://github.yandex-team.ru/lego/islands/pull/4867
[ISL-6006]: https://st.yandex-team.ru/ISL-6006
[#4884]: https://github.yandex-team.ru/lego/islands/pull/4884
[#4875]: https://github.yandex-team.ru/lego/islands/pull/4875
[ISL-6126]: https://st.yandex-team.ru/ISL-6126
[#4905]: https://github.yandex-team.ru/lego/islands/pull/4905
[ISL-6120]: https://st.yandex-team.ru/ISL-6120
[#4881]: https://github.yandex-team.ru/lego/islands/pull/4881
[ISL-5794]: https://st.yandex-team.ru/ISL-5794
[#4513]: https://github.yandex-team.ru/lego/islands/pull/4513
[SERP-75488]: https://st.yandex-team.ru/SERP-75488
[#4843]: https://github.yandex-team.ru/lego/islands/pull/4843
[ISL-6118]: https://st.yandex-team.ru/ISL-6118
[#4869]: https://github.yandex-team.ru/lego/islands/pull/4869
[SERP-71130]: https://st.yandex-team.ru/SERP-71130
[#4887]: https://github.yandex-team.ru/lego/islands/pull/4887
[#4641]: https://github.yandex-team.ru/lego/islands/pull/4641
[ISL-6023]: https://st.yandex-team.ru/ISL-6023
[#4755]: https://github.yandex-team.ru/lego/islands/pull/4755
[ISL-6058]: https://st.yandex-team.ru/ISL-6058
[#4837]: https://github.yandex-team.ru/lego/islands/pull/4837
[ISL-5412]: https://st.yandex-team.ru/ISL-5412
[#4833]: https://github.yandex-team.ru/lego/islands/pull/4833
[ISL-6032]: https://st.yandex-team.ru/ISL-6032
[#4778]: https://github.yandex-team.ru/lego/islands/pull/4778
[SERP-75780]: https://st.yandex-team.ru/SERP-75780
[#4804]: https://github.yandex-team.ru/lego/islands/pull/4804
[ISL-5555]: https://st.yandex-team.ru/ISL-5555
[#4607]: https://github.yandex-team.ru/lego/islands/pull/4607
[SERP-77943]: https://st.yandex-team.ru/SERP-77943
[#4811]: https://github.yandex-team.ru/lego/islands/pull/4811
[ISL-6057]: https://st.yandex-team.ru/ISL-6057
[#4805]: https://github.yandex-team.ru/lego/islands/pull/4805
[SERP-77150]: https://st.yandex-team.ru/SERP-77150
[#4745]: https://github.yandex-team.ru/lego/islands/pull/4745
[ISL-5502]: https://st.yandex-team.ru/ISL-5502
[#4794]: https://github.yandex-team.ru/lego/islands/pull/4794
[ISL-6049]: https://st.yandex-team.ru/ISL-6049
[#4802]: https://github.yandex-team.ru/lego/islands/pull/4802
[ISL-5581]: https://st.yandex-team.ru/ISL-5581
[#4575]: https://github.yandex-team.ru/lego/islands/pull/4575
[SERP-76258]: https://st.yandex-team.ru/SERP-76258
[#4786]: https://github.yandex-team.ru/lego/islands/pull/4786
[ISL-6043]: https://st.yandex-team.ru/ISL-6043
[#4791]: https://github.yandex-team.ru/lego/islands/pull/4791
[SERP-77029]: https://st.yandex-team.ru/SERP-77029
[#4714]: https://github.yandex-team.ru/lego/islands/pull/4714
[ISL-6039]: https://st.yandex-team.ru/ISL-6039
[#4787]: https://github.yandex-team.ru/lego/islands/pull/4787
