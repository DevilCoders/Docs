# islands 4.17.0

Изменения, вошедшие в релиз islands 4.17.0, разделены на группы:

* [минорные изменения](#Минорные-изменения) — задачи, в рамках которых произошло расширение API блоков;
* [исправлено и улучшено](#Исправлено-и-улучшено) — различные исправления, не затрагивающие API блоков.

Все важные изменения подробно описаны [ниже](#Пояснения).

## Минорные изменения

| Заголовок                                                                               | Задача     | PR      |
| :----------------------------------------------------------------------------------     | :--------- | :------ |
| [domik: Показывать английский логотип для hy/ka языков](#ISL-3067)                      | [ISL-3067] | [#1812] |
| [tabs-menu: Позволить устанавливать _active_yes на не интерактивные вкладки](#ISL-2520) | [ISL-2520] | [#1775] |
| [Обновить логотип Яндекса в islands](#ISL-3101)                               | [ISL-3101] | [#1890] |

## Исправлено и улучшено

| Заголовок                                                                   | Задача     | PR      |
| :-------------------------------------------------------------------------- | :--------- | :------ |
| b-form-input: Исправить работу саджеста                                     | [ISL-3069] | [#1783] |
| [i-bem: changeThis — объявить deprecated](#ISL-3097)                        | [ISL-3097] | [#1836] |
| menu__item: Удалить использование _buf из шаблонов                          | [ISL-1541] | [#1770] |
| share-dropdown: добавить проверку на наличие DOM-node ссылки сервиса        | [ISL-2658] | [#1774] |
| user__icon: На ретине иконка грузится два раза                              | [ISL-2271] | [#1780] |
| util__merge: Проверка на объект проходит для undefined                      | [ISL-3093] | [#1820] |
| Заменить www.yandex.ru на yandex.ru                                         | [ISL-3081] | [#1828] |
| Поменять хак для оперы на detect через `i-ua`                               | [ISL-3070] | [#1786] |

## Пояснения

<a name="ISL-3101"></a>
### [Обновить логотип Яндекса в islands][ISL-3101]

Обновлен логотип Яндекса в соответствии с новым дизайном:

- https://clubs.at.yandex-team.ru/design/2156
- https://wiki.yandex-team.ru/users/dmoruz/new-service-logo-brief-guidelines/

Для нового логотипа в блоке logo добавлены следующие модификаторы:

* `logo_name_ys-ru-98x42`,
* `logo_name_ys-en-102x42`,
* `logo_name_ys-ru-86x35`,
* `logo_name_ys-en-87x35`,
* `logo_name_ys-ru-64x27`,
* `logo_name_ys-en-66x27`.

Было:
```
{
    block: 'logo',
    mods: {
        name: 'ru-84x36'
    }
}
```

 Стало:
```
{
    block: 'logo',
    mods: {
        name: 'ys-ru-86x35'
    }
}
```

<a name="ISL-3067"></a>
### [domik: Показывать английский логотип для hy/ka языков][ISL-3067]

В рамках задачи изменён вывод логотипа в блоке `domik` для армянского и грузинского языков — для них теперь показывается английский логотип.
Также было поправлено получение языка в `bh`-шаблоне блока.

<a name="ISL-3097"></a>
### [i-bem: changeThis — объявить deprecated][ISL-3097]

В блоке `i-bem` объявлен устаревшим метод `changeThis`. Он использовался для изменения контекста передаваемой функции.

Теперь вместо `changeThis` следует использовать `Function.prototype.bind`.

**Было:**

```javascript
._getProvider().get(val, pos, this.changeThis(this._onData));
```

**Стало:**

```javascript
._getProvider().get(val, pos, this._onData.bind(this));
```
или

**Было:**

```javascript
this.changeThis(fn, ctx);
```
**Стало:**

```javascript
fn.bind(ctx || this);
```

<a name="ISL-2520"></a>
### [tabs-menu: Позволить устанавливать _active_yes на не интерактивные вкладки][ISL-2520]

В рамках задачи в блоке `tabs-menu` было убрано ограничение, при котором нельзя было установить `_active_yes` не-`_interactive_yes` элементу. Теперь логика для не-`_interactive_yes` такая же, как и для `_interactive_yes`.



[ISL-3069]: https://st.yandex-team.ru/ISL-3069
[#1783]: https://github.yandex-team.ru/lego/islands/pull/1783
[ISL-3067]: https://st.yandex-team.ru/ISL-3067
[#1812]: https://github.yandex-team.ru/lego/islands/pull/1812
[ISL-3097]: https://st.yandex-team.ru/ISL-3097
[#1836]: https://github.yandex-team.ru/lego/islands/pull/1836
[ISL-1541]: https://st.yandex-team.ru/ISL-1541
[#1770]: https://github.yandex-team.ru/lego/islands/pull/1770
[ISL-2658]: https://st.yandex-team.ru/ISL-2658
[#1774]: https://github.yandex-team.ru/lego/islands/pull/1774
[ISL-2520]: https://st.yandex-team.ru/ISL-2520
[#1775]: https://github.yandex-team.ru/lego/islands/pull/1775
[ISL-2271]: https://st.yandex-team.ru/ISL-2271
[#1780]: https://github.yandex-team.ru/lego/islands/pull/1780
[ISL-3093]: https://st.yandex-team.ru/ISL-3093
[#1820]: https://github.yandex-team.ru/lego/islands/pull/1820
[ISL-3081]: https://st.yandex-team.ru/ISL-3081
[#1828]: https://github.yandex-team.ru/lego/islands/pull/1828
[ISL-3070]: https://st.yandex-team.ru/ISL-3070
[#1786]: https://github.yandex-team.ru/lego/islands/pull/1786
[ISL-3101]: https://st.yandex-team.ru/ISL-3101
[#1890]: https://github.yandex-team.ru/lego/islands/pull/1890
