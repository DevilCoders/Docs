# islands 5.7.0

Изменения, вошедшие в релиз islands 5.7.0, разделены на группы:

* [минорные изменения](#Минорные-изменения) — задачи, в рамках которых произошло расширение API блоков;
* [исправлено и улучшено](#Исправлено-и-улучшено) — различные исправления, не затрагивающие API блоков;
* [Lego on React](#Lego-on-React) — задачи, связанные с Lego on React.

Все важные изменения подробно описаны [ниже](#Пояснения).

## Минорные изменения

| Заголовок                                                                    | Задача     | PR      |
| :--------------------------------------------------------------------------- | :--------- | :------ |
| [i-tanker__dynamic: Добавить переводы для азербайджанского языка](#ISL-3750) | [ISL-3750] | [#2338] |
| [i-tanker__dynamic: Добавить переводы для армянского языка](#ISL-3747)       | [ISL-3747] | [#2335] |
| [i-tanker__dynamic: Добавить переводы для грузинского языка](#ISL-3748)      | [ISL-3748] | [#2341] |
| [i-tanker__dynamic: Добавить переводы для узбекского языка](#ISL-3749)       | [ISL-3749] | [#2336] |

## Исправлено и улучшено

| Заголовок                                                                                     | Задача     | PR      |
| :-------------------------------------------------------------------------------------------- | :--------- | :------ |
| [i-tanker__dynamic: Исправить функцию плюрализации для индонезийского языка](#ISL-3746)        | [ISL-3746] | [#2340] |
| [i-tanker__dynamic: Исправить функцию плюрализации для казахского языка](#ISL-3743)            | [ISL-3743] | [#2333] |
| [i-tanker__dynamic: Исправить функцию плюрализации для татарского языка](#ISL-3745)            | [ISL-3745] | [#2339] |
| [i-tanker__dynamic: Исправить функцию плюрализации для турецкого языка](#ISL-3744)             | [ISL-3744] | [#2334] |
| [select: Ошибка обращения к родительскому popup](#ISL-3285)                                    | [ISL-3285] | [#2342] |

## Lego on React

| Заголовок                                                                                     | Задача     | PR      |
| :-------------------------------------------------------------------------------------------- | :--------- | :------ |
| [lego-on-react: Обновить bem-react-core](#ISL-3655)                                           | [ISL-3655] | [#2303] |
| [popup.react: Ошибка Cannot read property &#39;getBoundingClientRect&#39; of null](#ISL-3652) | [ISL-3652] | [#2346] |

## Пояснения

<a name="ISL-3750"></a>
### [i-tanker__dynamic: Добавить переводы для азербайджанского языка][ISL-3750]

В `i-tanker__dynamic` добавлена функция определения множественного числа для азербайджанского языка.

В азербайджанском языке [одна][plural1] форма множественного числа.

```js
BEM.I18N('i-tanker__dynamic', 'plural', {
    count: 2,
    one: 'Форма единственного числа',
    some: 'Форма множественного числа'
});
```

[plural1]: http://www.unicode.org/cldr/charts/latest/supplemental/language_plural_rules.html

<a name="ISL-3747"></a>
### [i-tanker__dynamic: Добавить переводы для армянского языка][ISL-3747]

В `i-tanker__dynamic` добавлена функция определения множественного числа для армянского языка.

В армянском языке [одна][plural2] форма множественного числа, для чисел не равных нулю и единицы.

```js
BEM.I18N('i-tanker__dynamic', 'plural', {
    count: 2,
    one: 'Форма единственного числа',
    some: 'Форма множественного числа'
});
```

[plural2]: http://www.unicode.org/cldr/charts/latest/supplemental/language_plural_rules.html

<a name="ISL-3748"></a>
### [i-tanker__dynamic: Добавить переводы для грузинского языка][ISL-3748]

В `i-tanker__dynamic` добавлена функция определения множественного числа для грузинского языка.

В грузинском языке [нет][plural3] форм множественного числа.

```js
BEM.I18N('i-tanker__dynamic', 'plural', {
    count: 2,
    one: 'Форма единственного числа'
});
```

[plural3]: http://www.unicode.org/cldr/charts/latest/supplemental/language_plural_rules.html

<a name="ISL-3749"></a>
### [i-tanker__dynamic: Добавить переводы для узбекского языка][ISL-3749]

В `i-tanker__dynamic` добавлена функция определения множественного числа для узбекского языка.

В узбекском языке [одна][plural4] форма множественного числа.

```js
BEM.I18N('i-tanker__dynamic', 'plural', {
    count: 2,
    one: 'Форма единственного числа',
    some: 'Форма множественного числа'
});
```

[plural4]: http://www.unicode.org/cldr/charts/latest/supplemental/language_plural_rules.html

<a name="ISL-3746"></a>
### [i-tanker__dynamic: Исправить функцию плюрализации для индонезийского языка][ISL-3746]

В `i-tanker__dynamic` была исправлена функция определения множественного числа для индонезийского языка.

В индонезийском языке [нет][plural5] форм множественного числа.
Ранее использовалась функция для русского языка с двумя формами, взятая у Серпа.

[plural5]: http://www.unicode.org/cldr/charts/latest/supplemental/language_plural_rules.html

<a name="ISL-3743"></a>
### [i-tanker__dynamic: Исправить функцию плюрализации для казахского языка][ISL-3743]

В `i-tanker__dynamic` была исправлена функция определения множественного числа для казахского языка.

В казахском языке лишь [одна][plural6] форма множественного числа.
Ранее использовалась функция для русского языка с двумя формами.

[plural6]: http://www.unicode.org/cldr/charts/latest/supplemental/language_plural_rules.html

<a name="ISL-3745"></a>
### [i-tanker__dynamic: Исправить функцию плюрализации для татарского языка][ISL-3745]

В `i-tanker__dynamic` была исправлена функция определения множественного числа для татарского языка.

В татарском языке нет форм множественного числа.
Ранее использовалась функция для русского языка с двумя формами.

<a name="ISL-3744"></a>
### [i-tanker__dynamic: Исправить функцию плюрализации для турецкого языка][ISL-3744]

В `i-tanker__dynamic` была исправлена функция определения множественного числа для турецкого языка.

В турецком языке лишь [одна][plural7] форма множественного числа.
Ранее использовалась функция для русского языка с двумя формами.

[plural7]: http://www.unicode.org/cldr/charts/latest/supplemental/language_plural_rules.html

<a name="ISL-3655"></a>
### [lego-on-react: Обновить bem-react-core][ISL-3655]

Обновлена библиотека [bem-react-core](https://github.com/bem/bem-react-core) до версии `0.2.2`.

#### Рендеринг без CSS-класса

```js
import { decl } from 'bem-react-core';

export default decl({
    block: 'BlockWithoutClass',
    addBemClassName: false
});
```

#### Поддержка пропса cls
```js
<MyBlock cls='MyCustom' />
```

#### Поддержка пропса mix
```js
<MyBlock mix={[{ block : 'Block2' }]} />
```

#### Сокращенный синтаксис декларации модификаторов
**Было:**
```js
export default declMod(({type}) => type === 'js', {
    // …
});
```

**Стало:**
```js
export default declMod({type: 'js'}, {
    // …
});
```

Можно использовать не только конкретное значение, а еще и универсальное (`'*'`). Например `{type: '*'}`.

**Note.** Прежний вариант с функцией-матчером тоже работает. Рекомендуется использовать его для более сложных случаев.

#### Доопределение статичных полей
@see https://github.com/bem/bem-react-core/pull/41

#### Поддержка HOC (redux, flux и других оберток)
@see https://github.com/bem/bem-react-core/pull/56

<a name="ISL-3652"></a>
### [popup.react: Ошибка Cannot read property 'getBoundingClientRect' of null][ISL-3652]

React блок `popup2` с модификатором `autoclosable` теперь очищает за собой события и таймер.

<a name="ISL-3285"></a>
### [select: Ошибка обращения к родительскому popup][ISL-3285]

В блок `select` добавлена поддержка обновления позиционирования родительского `popup2`.

[ISL-3750]: https://st.yandex-team.ru/ISL-3750
[#2338]: https://github.yandex-team.ru/lego/islands/pull/2338
[ISL-3747]: https://st.yandex-team.ru/ISL-3747
[#2335]: https://github.yandex-team.ru/lego/islands/pull/2335
[ISL-3748]: https://st.yandex-team.ru/ISL-3748
[#2341]: https://github.yandex-team.ru/lego/islands/pull/2341
[ISL-3749]: https://st.yandex-team.ru/ISL-3749
[#2336]: https://github.yandex-team.ru/lego/islands/pull/2336
[ISL-3746]: https://st.yandex-team.ru/ISL-3746
[#2340]: https://github.yandex-team.ru/lego/islands/pull/2340
[ISL-3743]: https://st.yandex-team.ru/ISL-3743
[#2333]: https://github.yandex-team.ru/lego/islands/pull/2333
[ISL-3745]: https://st.yandex-team.ru/ISL-3745
[#2339]: https://github.yandex-team.ru/lego/islands/pull/2339
[ISL-3744]: https://st.yandex-team.ru/ISL-3744
[#2334]: https://github.yandex-team.ru/lego/islands/pull/2334
[ISL-3655]: https://st.yandex-team.ru/ISL-3655
[#2303]: https://github.yandex-team.ru/lego/islands/pull/2303
[ISL-3652]: https://st.yandex-team.ru/ISL-3652
[#2346]: https://github.yandex-team.ru/lego/islands/pull/2346
[ISL-3285]: https://st.yandex-team.ru/ISL-3285
[#2342]: https://github.yandex-team.ru/lego/islands/pull/2342
