# islands 5.19.0

<!-- ЧЕЛОВЕЧЕСКОЕ ВСТУПЛЕНИЕ -->

Изменения, вошедшие в релиз islands 5.19.0, разделены на группы:

* [мажорные изменения](#Мажорные-изменения) — задачи, в рамках которых произошло изменение или удаление API блоков;
* [минорные изменения](#Минорные-изменения) — задачи, в рамках которых произошло расширение API блоков;
* [исправлено и улучшено](#Исправлено-и-улучшено) — различные исправления, не затрагивающие API блоков;
* [дополнительно](#Дополнительно) — задачи, не касающиеся кода блоков (документация, инфраструктура и т.д.).

Все важные изменения подробно описаны [ниже](#Пояснения).

## Мажорные изменения

| Заголовок | Задача | PR  |
| :-------- | :----- | :-- |

## Минорные изменения

| Заголовок                                                          | Задача     | PR               |
| :----------------------------------------------------------------- | :--------- | :--------------- |
| [checkbox: Убрать display: inline-table](#ISL-4347)                | [ISL-4347] | [#3070], [#2955] |
| [popup2: Сделать возможным указывать смещение хвостика](#ISL-4672) | [ISL-4672] | [#3036]          |
| [tooltip: Сделать возможным располагать хвостик у края](#ISL-4068) | [ISL-4068] | [#3046]          |

## Исправлено и улучшено

| Заголовок                                                            | Задача     | PR               |
| :------------------------------------------------------------------- | :--------- | :--------------- |
| i-font: Оптимизировать загрузку шрифта                               | [ISL-4570] | [#3085], [#3083] |
| m-editor: Не генерируется событие `change` при программном изменении | [ISL-4375] | [#3061]          |
| suggest2-counter: Ломается из-за undefined                           | [ISL-3989] | [#3037]          |
| tumbler.react: Поправить prop attrs                                  | [ISL-4587] | [#2921]          |

## Дополнительно

| Заголовок | Задача | PR  |
| :-------- | :----- | :-- |

## Пояснения

<a name="ISL-4347"></a>
### [checkbox: Убрать display: inline-table][ISL-4347]

Стили `display: inline-table` для блока `checkbox` и `display: table-cell;` для его элемента `__label` вынесены в модификатор `lines` со значением `multi`. Теперь эти стили можно отключить и вернуть блоку и элементу `display: inline`, явно передав для модификатора `multi` значение `false`.

Для сохранения обратной совместимости `_lines_multi` установлен по умолчанию. В версии islands v6.0 станет опциональным, поэтому рекомендуется задавать ему значение явно.

```js
[
    {
        block: 'x-table',
        head: ['normal'],
        body: [
            {
                block: 'checkbox',
                mods: { theme: 'normal', size: 'm', lines: false },
                text: 'checkbox'
            }
        ]
    },
    {
        block: 'x-deps',
        content: [
            { block: 'checkbox', elem: 'label' }
        ]
    }
]
```

<a name="ISL-4672"></a>
### [popup2: Сделать возможным указывать смещение хвостика][ISL-4672]

В `popup2` появилась возможность указывать смещение хвостика относительно края всплывающего окошка.

```js
({
    block: 'popup2',
    mods: {target: 'anchor'},
    tailOffset: 10, // Смещение в 10px
    content: [
        {elem: 'tail'},
        …
    ]
});
```

Смещение может быть как положительным числом так и отрицательным (для сдвига в противоположном направлении).

<a name="ISL-4068"></a>
### [tooltip: Сделать возможным располагать хвостик у края][ISL-4068]

В блок `tooltip` стало возможным передавать полное описание направления раскрытия, например, `bottom-left`. Ранее,
передавать можно было только короткую запись, например, `bottom` или `left`, к которой приписывалось `-center`.

Старый способ передачи направления сохранён и будет доступен до следующего мажорного релиза islands (где будет удалён).

```js
({
    block: 'tooltip',
    js: {
        to: ['bottom-left']
    }
});
```

Также, теперь в блок `popup2` (на основе которого сделан `tooltip`) пробрасываются JS-параметры `secondaryOffset` и
`tailOffset`.

[ISL-4347]: https://st.yandex-team.ru/ISL-4347
[#3070]: https://github.yandex-team.ru/lego/islands/pull/3070
[#2955]: https://github.yandex-team.ru/lego/islands/pull/2955
[ISL-4570]: https://st.yandex-team.ru/ISL-4570
[#3085]: https://github.yandex-team.ru/lego/islands/pull/3085
[#3083]: https://github.yandex-team.ru/lego/islands/pull/3083
[ISL-4375]: https://st.yandex-team.ru/ISL-4375
[#3061]: https://github.yandex-team.ru/lego/islands/pull/3061
[ISL-4461]: https://st.yandex-team.ru/ISL-4461
[#3024]: https://github.yandex-team.ru/lego/islands/pull/3024
[ISL-4672]: https://st.yandex-team.ru/ISL-4672
[#3036]: https://github.yandex-team.ru/lego/islands/pull/3036
[ISL-4633]: https://st.yandex-team.ru/ISL-4633
[#3063]: https://github.yandex-team.ru/lego/islands/pull/3063
[ISL-3989]: https://st.yandex-team.ru/ISL-3989
[#3037]: https://github.yandex-team.ru/lego/islands/pull/3037
[ISL-4068]: https://st.yandex-team.ru/ISL-4068
[#3046]: https://github.yandex-team.ru/lego/islands/pull/3046
[ISL-4587]: https://st.yandex-team.ru/ISL-4587
[#2921]: https://github.yandex-team.ru/lego/islands/pull/2921
