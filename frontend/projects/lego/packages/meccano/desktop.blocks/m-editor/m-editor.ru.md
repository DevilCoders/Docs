### Добавляем редактор на страницу

В параметре `buttons` перечисляем типы кнопок, разбиваем их на группы:
```js
{
    block: 'm-editor',
    value: 'Текст тут',
    js: {
        id: 'base-editor',
        buttons: [
            ['h2', 'h3'],
            ['bold', 'italic', 'underline', 'strikethrough'],
            ['ul', 'ol'],
            ['indent', 'outdent'],
            ['quote', 'separator', 'link', 'picture', 'user', 'video', 'code', 'table', 'color', 'form']
        ]
    }
}
```

Также добавляем блок, в котором будут кнопки для редактора:
```js
{
    block: 'm-editor-buttons',
    mix: [{ block: 'm-editor',  js: { id: 'base-editor' } }]
}
```

После того как редактор и блок для кнопок описаны необходимо его инициализировать. Например:
```javascript
var editor = this.findBlockInside('m-editor'),
    buttons = this.findBlockInside('m-editor-buttons');

editor.init(buttons);
```

Если используется mix для связывания `m-editor` и `m-editor-buttons`, то в метод `init` блок кнопок можно не передавать:

```javascript
var editor = this.findBlockInside('m-editor');

editor.init();
```

### JS-параметры

- `uploadParams` - содержит в себе информацию о загрузке файлов через попап добавления изображения.
  - `reqParams` - активирует механизм загрузки файлов через попап вставки изображения, указывает на jquery-параметры запроса загрузки. (url, type, ...).
  - `URLPath` - при активном механизме загрузки файлов, указывает на путь загруженного файла в ответе запроса загрузки. Необходимо передавать в виде `'data.subdata.subsubdata.url'`.
- `helpURL` - устанавливает url документации для кнопки `help`.
- `drafts` - включает работу черновиков для данного редактора.
  - `id` - используется для идентификации черновиков одного редактора на странице от черновиков другого.
  - `maxCount` - устанавливает максимальное число сохраняемых черновиков (по умолчанию 10).
- `forms` - настройки внешней формы. Все параметры являются необязательными. Рекомендуется использовать значения по умолчанию - то есть, не использовать этот параметр без необходимости что-то переопределить.
  - `apiUrl` - путь к API Конструктора Форм. (по умолчанию `https://api.study.yandex-team.ru/admin/api/v2/surveys/`).
  - `adminUrl` - путь к Панели Управления Конструктора Форм. (по умолчанию `https://admin.forms.yandex-team.ru/#/surveys/`).
  - `groupId` - идентификатор группы форм (по умолчанию `9`).
  - `user` - логин пользователя, от чьего имени будет создана форма. Будет содержаться в имени формы. (по умолчанию `login`).

###### Схема работы с черновиками m-editor для сервисов:
При включенных черновиках в `m-editor` необходимо при успешной отправке формы (и других сценариях, когда введенный текст уже не нужно сохранять в черновики) вызвать метод `revert()`. Он удалит последний (текущий)  черновик.
Если не вызывать метод `revert()`, при следующем заходе на страницу с этим редактором, `m-editor` при инициализации сгенерирует событие `draft-restore`, которое сообщает о том, что сервису нужно предложить пользователю восстановиться из последнего черновика.
В ответ, сервис может вызвать у `m-editor` метод `restore()`, который восстановит такой черновик (установит в текстовое поле).

### События

- `draft-restore` - сообщает о предложении сервису восстановиться из последнего черновика. Передает данные о черновике.
- `error` - генерируется при возникновении ошибки. Может содержать поля `message` и `data`.
- `popupClose` - генерируется перед закрытием попапа в тех случаях, когда это событие может требовать обработки

### Методы

 - `revert()` - удаляет "текущий" черновик. Предотвращает предложение о восстановлении при следующем заходе на страницу (через событие `draft-restore`).
 - `restore()` - восстанавливает черновик предыдущего захода на страницу (если такой имеется).

### Типы кнопок

```
'h2' - заголовок 2-го размера
'h3' - заголовок 3-го размера
'bold' - делает текст жирным
'italic' - делает текст курсивом
'underline' - делает текст подчеркнутым
'strikethrough' - делает текст перечеркнутым
'ul' - создает не нумерованный список
'ol' - создает упорядоченный список
'indent' - добавляет отступ
'outdent' - удаляет отступ
'quote' - создает цитату
'separator' - вставляет разделительную черту
'link' - вызывает попап создания ссылки
'picture' - вызывает попап создания изображения
'user' - вызывает попап выбора стафф-пользователя
'video' - вызывает попап вставки видео- или аудио-файла
'code' - делает вставку кода
'table' - вставляет таблицу
'color' - делает текст красным цветом
'math' - дает возможность вставить формулу
'spell' - проверяет правописание
'readmore' -  позволяет спрятать кусок текста за клик или ховер
'help' - кнопка перехода по ссылке на документацию из js-параметра helpURL (по-умолчанию - документация вики-разметки)
'form' - вызывает попап создания внешней формы
```
