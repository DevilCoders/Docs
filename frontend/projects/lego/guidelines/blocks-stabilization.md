Стабилизация блоков в Лего
----------------------------------

Процесс стабилизации API unstable-блоков общепортальных библиотек Лего заключается в приведению к конечному «замороженному» состоянию его составляющих:
- js
- bemjson
- bemhtml, bh
- архитектуры блока,

которые фиксируются в результате разработки и последующей эксплуатации блока на сервисах Яндекса, и не могут быть изменены обратно несовместимым образом в текущей мажорной версии, в соответствии с [SemVer](http://semver.org/). Подробнее про API блоков в Лего можно прочитать [здесь](https://beta.wiki.yandex-team.ru/lego/islands/tech/api/).

До момента стабилизации блок имеет нестабильное API, что в обязательном порядке указывается в его документации.

###Правила стабилизации блоков

Параметрами, которые влияют на стабилизацию API блоков в Лего, являются:
 - количество команд сервисов, использующих блок
 - период эксплуатации.

Для того, чтобы API блока смогло принять конечный вид и перейти в состояние «стабильное» (stable), в Лего приняты следующие правила стабилизации блока:

1. Количество команд сервисов, где эксплуатируется блок
 -  **>=3**, если среди таких команд присутствуют основные пользователи Лего — [Поиск](https://staff.yandex-team.ru/departments/yandex_search_interface_service/), включая [Картинки и Видео](https://staff.yandex-team.ru/departments/yandex_search_interface_multimedia/), [Спецпроекты](https://staff.yandex-team.ru/departments/yandex_infra_tech_ekbinterface/), [Вертикальные сервисы](https://staff.yandex-team.ru/departments/yandex_personal_vertserv_interface/), [Медиа сервисы](https://staff.yandex-team.ru/departments/yandex_media_tvafisha_front/), [Деньги](https://staff.yandex-team.ru/departments/yandex_money_dev_interface/), [Директ](https://staff.yandex-team.ru/departments/yandex_monetize_interface/);
 - **>=5**, если среди таких команд сервисов основных пользователей Лего нет.
1. Период эксплуатации блока на сервисах >= **6 месяцев**.

В случае одновременного выполнения этих условий блок объявляется стабильным.

###Объявление блока стабильным

Блок с фиксированным API поставляется пользователям в рамках очередного релиза общепортальных библиотек, при этом командой Лего выполняются следующие действия:

1. из документации блока исключается пункт о нестабильном API
1. все изменения API, в том числе изменение его статуса, в обязательном порядке фиксируются в changelog и примечаниях к релизу.

С этого момента в блок не вносится каких-либо изменений, ломающих обратную совместимость с точки зрения API в его текущей версии (подробнее про API блоков в Лего читайте [здесь](https://beta.wiki.yandex-team.ru/lego/islands/tech/api/)).

В случае, если стабильным объявляется не новый блок, а новая версия блока взамен существующей, предыдущая версия блока объявляется устаревшей (deprecated) и должна быть удалена в ближайшей мажорной версии общепортальных библиотек.
