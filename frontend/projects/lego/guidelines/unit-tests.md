## –ì–∞–π–¥ –ø–æ –Ω–∞–ø–∏—Å–∞–Ω–∏—é unit-—Ç–µ—Å—Ç–æ–≤

- [–û–±—â–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è](#–û–±—â–∞—è-–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è)
- [–ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤](#–ó–∞–ø—É—Å–∫-—Ç–µ—Å—Ç–æ–≤)
- [–§–∞–π–ª–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞](#–§–∞–π–ª–æ–≤–∞—è-—Å—Ç—Ä—É–∫—Ç—É—Ä–∞)
- [–ü—Ä–∞–≤–∏–ª–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è](#–ü—Ä–∞–≤–∏–ª–∞-—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è)
- [–ß—Ç–æ —Ç–µ—Å—Ç–∏—Ä—É–µ–º](#–ß—Ç–æ-—Ç–µ—Å—Ç–∏—Ä—É–µ–º)
    - [–õ–µ–Ω–∏–≤—É—é –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é](#–õ–µ–Ω–∏–≤—É—é-–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é)
    - [–ú–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã](#–ú–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã)
    - [–ú–µ—Ç–æ–¥—ã API](#–ú–µ—Ç–æ–¥—ã-api)
    - [–°–æ–±—ã—Ç–∏—è](#–°–æ–±—ã—Ç–∏—è)
    - [–≠–ª–µ–º–µ–Ω—Ç—ã](#–≠–ª–µ–º–µ–Ω—Ç—ã)
    - [Destructing](#destructing)
    - [XSS](#xss)
    - [–û—Å—Ç–∞–ª—å–Ω–æ–µ](#–û—Å—Ç–∞–ª—å–Ω–æ–µ)
- [–ß—Ç–æ –Ω–µ —Ç–µ—Å—Ç–∏—Ä—É–µ–º](#–ß—Ç–æ-–Ω–µ-—Ç–µ—Å—Ç–∏—Ä—É–µ–º)
- [–•–æ—Ä–æ—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏](#–•–æ—Ä–æ—à–∏–µ-–ø—Ä–∞–∫—Ç–∏–∫–∏)
    - [–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ DOM –Ω–∞ –≤—Ä–µ–º—è —Ç–µ—Å—Ç–∞](#–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞-dom-–Ω–∞-–≤—Ä–µ–º—è-—Ç–µ—Å—Ç–∞)
    - [–ì–µ–Ω–µ—Ä–∞—Ü–∏—è pointer-—Å–æ–±—ã—Ç–∏–π –≤–º–µ—Å—Ç–æ —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã—Ö](#–ì–µ–Ω–µ—Ä–∞—Ü–∏—è-pointer-—Å–æ–±—ã—Ç–∏–π-–≤–º–µ—Å—Ç–æ-—Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã—Ö)
    - [–î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π –∫ –ø—Ä–æ–≤–µ—Ä–∫–∞–º](#–î–æ–±–∞–≤–ª–µ–Ω–∏–µ-—Å–æ–æ–±—â–µ–Ω–∏–π-–∫-–ø—Ä–æ–≤–µ—Ä–∫–∞–º)
    - [–õ–∞–∫–æ–Ω–∏—á–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ](#–õ–∞–∫–æ–Ω–∏—á–Ω–æ–µ-–æ–ø–∏—Å–∞–Ω–∏–µ)
    - [–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ö–µ–ª–ø–µ—Ä–æ–≤](#–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ-—Ö–µ–ª–ø–µ—Ä–æ–≤)

### –û–±—â–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

–î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è JS –º—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ [Jasmine 2.3](http://h.yandex-team.ru/?http%3A//jasmine.github.io/2.3/introduction.html).
–¢–µ—Å—Ç—ã –ø–∏—à—É—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –±–ª–æ–∫–∞ –≤ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ `spec.js`, —Å–æ–±–∏—Ä–∞—é—Ç—Å—è –≤ –µ–¥–∏–Ω—ã–π –±–∞–Ω–¥–ª –∏ –∏—Å–ø–æ–ª–Ω—è—é—Ç—Å—è –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ –æ–¥–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã –≤ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö
–±—Ä–∞—É–∑–µ—Ä–∞—Ö –ø—Ä–∏ –ø–æ–º–æ—â–∏ [Karma](http://h.yandex-team.ru/?http%3A//karma-runner.github.io/0.13/index.html).

### –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤

1.
 –£–¥–∞–ª–µ–Ω–Ω–æ –≤ Selenium Grid —á–µ—Ä–µ–∑ ssh-—Ç—É–Ω–Ω–µ–ª—å –¥–æ `lego-dev.dev.yandex-team.ru` (–ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è –¥–æ—Å—Ç—É–ø):

 ```bash
 # –í–æ –≤—Å–µ—Ö –±—Ä–∞—É–∑–µ—Ä–∞—Ö
 npm run specs

 # –í—ã–±–æ—Ä–æ—á–Ω–æ
 KARMA_BROWSERS=ie8,ie9 npm run specs

 # –° –º–µ—Ç—Ä–∏–∫–æ–π –ø–æ–∫—Ä—ã—Ç–∏—è. –û—Ç—á–µ—Ç –ø–æ—è–≤–∏—Ç—Å—è –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ coverage/.
 ISTANBUL_COVERAGE=1 npm run specs
 ```
1.
 –õ–æ–∫–∞–ª—å–Ω–æ –≤ phantomjs (–¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω):

 ```bash
 npm run specs-local
 ```

1.
 –õ–æ–∫–∞–ª—å–Ω–æ –≤ –ª—é–±–æ–º –±—Ä–∞—É–∑–µ—Ä–µ:

 ```
 KARMA_DEBUG=1 enb make specs desktop.specs
 ```

 –ü–æ—Å–ª–µ —Å–±–æ—Ä–∫–∏ –≤—ã –ø–æ–ª—É—á–∏—Ç–µ —Å—Å—ã–ª–∫—É –≤–∏–¥–∞ http://localhost:9876/, –∫–æ—Ç–æ—Ä—É—é –º–æ–∂–Ω–æ –æ—Ç–∫—Ä—ã—Ç—å –≤ –ª—é–±–æ–º –±—Ä–∞—É–∑–µ—Ä–µ.

### –§–∞–π–ª–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞

Unit-—Ç–µ—Å—Ç—ã –ø–∏—à—É—Ç—Å—è –≤ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ `spec.js` –ø–æ —Ç–µ–º –∂–µ –ø—Ä–∞–≤–∏–ª–∞–º, —á—Ç–æ –∏ –æ–±—ã—á–Ω—ã–π `js`-–∫–æ–¥.
–í—Å–µ —Ç–µ—Å—Ç—ã —Ç–æ—á–Ω–æ —Ç–∞–∫ –∂–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω—ã –ø–æ –ë–≠–ú-—Å—É—â–Ω–æ—Å—Ç—è–º –∏ —É—Ä–æ–≤–Ω—è–º –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è.
–í —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ —Å–æ–±–∏—Ä–∞—é—Ç—Å—è —Ç–µ—Å—Ç—ã –¥–ª—è –ø–ª–∞—Ç—Ñ–æ—Ä–º `desktop`, `touch-phone`, `touch-pad`.

**–ü—Ä–∏–º–µ—Ä —Ñ–∞–π–ª–æ–≤–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã:**

```
.
‚îú‚îÄ‚îÄcommon.blocks/
‚îÇ  ‚îî‚îÄ‚îÄ block/
‚îÇ      ‚îú‚îÄ‚îÄ __elem/
‚îÇ      ‚îÇ   ‚îú‚îÄ‚îÄ block__elem.spec.js
‚îÇ      ‚îÇ   ‚îî‚îÄ‚îÄ block__elem.js
‚îÇ      ‚îú‚îÄ‚îÄ block.spec.js
‚îÇ      ‚îî‚îÄ‚îÄ block.js
‚îÇ
‚îî‚îÄ‚îÄdesktop.blocks/
   ‚îî‚îÄ‚îÄ block/
       ‚îú‚îÄ‚îÄ __super-elem/
       ‚îÇ   ‚îú‚îÄ‚îÄ _mod/
       ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ block__super-elem_mod_val.js
       ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ block__super-elem_mod_val.spec.js
       ‚îÇ   ‚îú‚îÄ‚îÄ block__super-elem.js
       ‚îÇ   ‚îî‚îÄ‚îÄ block__super-elem.spec.js
       ‚îî‚îÄ‚îÄ _mod/
           ‚îú‚îÄ‚îÄ block_mod_val.js
           ‚îî‚îÄ‚îÄ block_mod_val.spec.js
```


### –ü—Ä–∞–≤–∏–ª–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

–í –∫–∞–∂–¥–æ–º `spec.js`-—Ñ–∞–π–ª–µ –º—ã —Ç–µ—Å—Ç–∏—Ä—É–µ–º —Ç–æ–ª—å–∫–æ –∫–æ–¥, –Ω–∞–ø–∏—Å–∞–Ω–Ω—ã–π –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–º `js`-—Ñ–∞–π–ª–µ.

–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ë–≠–ú-—Å—É—â–Ω–æ—Å—Ç–∏ —Ä–∞–∑–±–∏–≤–∞–µ—Ç—Å—è –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑–¥–µ–ª–æ–≤, –≤ –∫–∞–∂–¥–æ–º –∏–∑ –∫–æ—Ç–æ—Ä—ã—Ö
—Ç–µ—Å—Ç–∏—Ä—É–µ—Ç—Å—è —Å–≤–æ–π –∞—Å–ø–µ–∫—Ç (–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è, —Ä–µ–∞–∫—Ü–∏—è –Ω–∞ —Å–æ–±—ã—Ç–∏—è –∏ —Ç.–¥.).

–í [Jasmine 2.3](http://h.yandex-team.ru/?http%3A//jasmine.github.io/2.3/introduction.html) –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ —Ä–µ–∞–ª–∏–∑—É–µ—Ç—Å—è —Å –ø–æ–º–æ—â—å—é —Ñ—É–Ω–∫—Ü–∏–∏ `describe`, –∞ –∏–µ—Ä–∞—Ä—Ö–∏—è —Å –ø–æ–º–æ—â—å—é –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç–∏ –æ–¥–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ `describe` –≤ –¥—Ä—É–≥—É—é.

### –ß—Ç–æ —Ç–µ—Å—Ç–∏—Ä—É–µ–º

#### –õ–µ–Ω–∏–≤—É—é –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é

–î–ª—è –≤—Å–µ—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫ –¥–∞–Ω–Ω–æ–≥–æ —Ç–∏–ø–∞ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è —Å–æ–∑–¥–∞–≤–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—É—é —Å–µ–∫—Ü–∏—é `#init`. –ù–∞–ø—Ä–∏–º–µ—Ä:

```js
describe('#init', function() {
    it('–¥–æ–ª–∂–µ–Ω –æ–±–ª–∞–¥–∞—Ç—å –ª–µ–Ω–∏–≤–æ–π –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–µ–π', function() {
        var test = $(BEMHTML.apply({tag: 'div', content: {block: 'button2'}})).appendTo('body');
        BEM.DOM.init(test);

        expect(test.find(BEM.blocks.button2.buildSelector('js', 'inited')).length).toBe(0);
        BEM.DOM.destruct(test);
    });
});
```

#### –ú–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã

–ó–∞—á–∞—Å—Ç—É—é –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã —è–≤–ª—è—é—Ç—Å—è –æ—Å–Ω–æ–≤–Ω—ã–º API –±–ª–æ–∫–∞, –ø–æ—ç—Ç–æ–º—É –æ–Ω–∏ —Ç–µ—Å—Ç–∏—Ä—É—é—Ç—Å—è –≤ –ø–µ—Ä–≤—É—é –æ—á–µ—Ä–µ–¥—å. –í—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–∞–∂–¥–æ–≥–æ
–º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä–∞ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∞—Ç—å –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ —Å–µ–∫—Ü–∏–∏: `#_<mod-name>`. –ù–∞–ø—Ä–∏–º–µ—Ä:

```js
describe('#_pressed', function() { /*...*/ });
```

–î–ª—è –∫–∞–∂–¥–æ–≥–æ –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø—Ä–æ–≤–µ—Ä—è—Ç—å:

-
 **–£—Å–ª–æ–≤–∏—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∏ —Å–Ω—è—Ç–∏—è –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä–∞.** –¢–∞–∫–∏–º–∏ —É—Å–ª–æ–≤–∏—è–º–∏ –º–æ–≥—É—Ç –±—ã—Ç—å —Ä–∞–∑–ª–∏—á–Ω—ã–µ DOM-—Å–æ–±—ã—Ç–∏—è. –ü—Ä–∏ —ç—Ç–æ–º
 —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∞—Ç—å –æ–¥–Ω–æ—Ç–∏–ø–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏. –ù–∞–ø—Ä–∏–º–µ—Ä:

 ```js
 it('–¥–æ–ª–∂–µ–Ω –≤—ã—Å—Ç–∞–≤–ª—è—Ç—å/—Å–Ω–∏–º–∞—Ç—å _pressed_yes –ø–æ pointerpress/pointerrelease', function() {
     button.domElem.trigger($.Event('pointerpress'));
     expect(button.hasMod('pressed', 'yes')).toBe(true, 'pointerpress');

     button.domElem.trigger($.Event('pointerrelease'));
     expect(button.hasMod('pressed')).toBe(false, 'pointerrelease');
 });
 ```

 –ò–ª–∏ –∫–ª–∞–≤–∏–∞—Ç—É—Ä–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è:

 ```js
 it('–¥–æ–ª–∂–µ–Ω –≤—ã—Å—Ç–∞–≤–ª—è—Ç—å/—Å–Ω–∏–º–∞—Ç—å _pressed_yes –ø—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏/–æ—Ç–ø—É—Å–∫–∞–Ω–∏–∏ SPACE –∏ ENTER', function() {
        button.setMod('focused', 'yes'); // —á—Ç–æ–±—ã –Ω–∞—á–∞–ª–∏ –æ—Ç—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –Ω–∞–∂–∞—Ç–∏–π –Ω–∞ –∫–ª–∞–≤–∏—à–∏

        ['ENTER', 'SPACE'].forEach(function(key) {
            button.domElem.trigger($.Event('keydown', {keyCode: keyCodes[key]}));
            expect(button.hasMod('pressed', 'yes')).toBe(true, key + ', pressed ok');

            button.domElem.trigger($.Event('keyup', {keyCode: keyCodes[key]}));
            expect(button.hasMod('pressed')).toBe(false, key + ', not pressed ok');
        });

        // –ü—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞ –≥—Ä–∞–Ω–∏—á–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è
        ['LEFT', 'TOP', 'RIGHT', 'BOTTOM'].forEach(function(key) {
            button.domElem.trigger($.Event('keydown', {keyCode: keyCodes[key]}));
            expect(button.hasMod('pressed')).toBe(false, key + ', not pressed ok');
        });
    });
 ```

-
 **–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä–∞**. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –∞—Ç—Ä–∏–±—É—Ç–æ–≤, —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –¥—Ä—É–≥–∏—Ö –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–≤ –∏ —Ç.–¥.,
 –Ω–∞–ø—Ä–∏–º–µ—Ä:
 ```js
 it('–¥–æ–ª–∂–µ–Ω –≤—ã—Å—Ç–∞–≤–ª—è—Ç—å –∞—Ç—Ä–∏–±—É—Ç aria-pressed=true/false –ø—Ä–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–µ/—Å–Ω—è—Ç–∏–∏ _checked_yes', function() {
     button.setMod('checked', 'yes');
     expect(button.domElem.attr('aria-pressed')).toBe('true', 'pressed ok');

     button.delMod('checked');
     expect(button.domElem.attr('aria-pressed')).toBe('false', 'not pressed ok');
 });
 ```

-
 **–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä–∞.** –ò–Ω–æ–≥–¥–∞ –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ –¥—Ä—É–≥–∏—Ö
 —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã—Ö –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–≤, –Ω–∞–ø—Ä–∏–º–µ—Ä:

 ```js
 it('–Ω–µ –¥–æ–ª–∂–µ–Ω –≤—ã—Å—Ç–∞–≤–ª—è—Ç—å _pressed_yes, –µ—Å–ª–∏ –µ—Å—Ç—å _disabled_yes', function() {
     button
         .setMod('disabled', 'yes')
         .setMod('pressed', 'yes');

     expect(button.hasMod('pressed')).toBe(false);
 });
 ```

#### –ú–µ—Ç–æ–¥—ã API

–î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≤—Å–µ—Ö –º–µ—Ç–æ–¥–æ–≤ API, —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è —Å–æ–∑–¥–∞—Ç—å –æ–±—â—É—é —Å–µ–∫—Ü–∏—é `#API` –∏ –≤–ª–æ–∂–∏—Ç—å –≤ –Ω–µ–µ —Å–µ–∫—Ü–∏–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä—É–µ–º–æ–≥–æ –º–µ—Ç–æ–¥–∞. –ï—Å–ª–∏ —Ç–µ—Å—Ç–∏—Ä—É–µ—Ç—Å—è –≤—Å–µ–≥–æ –æ–¥–∏–Ω –º–µ—Ç–æ–¥, —Ç–æ –æ–±—â—É—é —Å–µ–∫—Ü–∏—é `#API` –º–æ–∂–Ω–æ –Ω–µ —Å–æ–∑–¥–∞–≤–∞—Ç—å. –ù–∞–ø—Ä–∏–º–µ—Ä:

```js
describe('#API', function() {
    describe('getText()', function() { /*...*/ });
    describe('setText()', function() { /*...*/ });
});
```

–ü—Ä–∏ –ø—Ä–æ–≤–µ—Ä–∫–µ –º–µ—Ç–æ–¥–æ–≤ —Å—Ç–æ–∏—Ç –æ–±—Ä–∞—Ç–∏—Ç—å –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–∞:

* **–ò—Å–∫–ª—é—á–∏—Ç–µ–ª—å–Ω—ã–µ —Å–∏—Ç—É–∞—Ü–∏–∏**.
* **–ì—Ä–∞–Ω–∏—á–Ω—ã–µ —É—Å–ª–æ–≤–∏—è**. –ù–∞–ø—Ä–∏–º–µ—Ä, –µ—Å–ª–∏ –º–µ—Ç–æ–¥ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏—è –≤ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–º –¥–∏–∞–ø–∞–∑–æ–Ω–µ, –ø—Ä–æ–≤–µ—Ä—è–µ–º,
 —á—Ç–æ –æ–Ω —Å–µ–±—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ –≤–µ–¥–µ—Ç —Å–æ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏ –≤–Ω—É—Ç—Ä–∏ –¥–∏–∞–ø–∞–∑–æ–Ω–∞, –Ω–∞ –µ–≥–æ –≥—Ä–∞–Ω–∏—Ü–∞—Ö –∏ –∑–∞ –∏—Ö –ø—Ä–µ–¥–µ–ª–∞–º–∏.
 –ï—Å–ª–∏ –º–µ—Ç–æ–¥ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Ç–æ–ª—å–∫–æ –∑–Ω–∞—á–µ–Ω–∏—è –∏–∑ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–≥–æ –º–Ω–æ–∂–µ—Å—Ç–≤–∞, —Ç–µ—Å—Ç–∏—Ä—É–µ–º –Ω–∞ –≤–∞–ª–∏–¥–Ω–æ—Å—Ç—å –∫–∞–∂–¥—ã–π —ç–ª–µ–º–µ–Ω—Ç —ç—Ç–æ–≥–æ
 –º–Ω–æ–∂–µ—Å—Ç–≤–∞, –∞ —Ç–∞–∫–∂–µ –ø—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –º–µ—Ç–æ–¥ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Ä–µ–∞–≥–∏—Ä—É–µ—Ç –Ω–∞ –ø–æ–ø—ã—Ç–∫—É —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ –Ω–µ –∏–∑ –º–Ω–æ–∂–µ—Å—Ç–≤–∞.
* **–ü—Ä–æ–≤–µ—Ä–∫—É –≤–æ–∑–≤—Ä–∞—â–∞–µ–º–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è**. –î–∞–∂–µ –µ—Å–ª–∏ –º–µ—Ç–æ–¥ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `this`, —Ç–æ —ç—Ç–æ—Ç —Ñ–∞–∫—Ç —Ç–æ–∂–µ –Ω—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä—è—Ç—å, –Ω–∞–ø—Ä–∏–º–µ—Ä:

 ```js
 it('–¥–æ–ª–∂–µ–Ω –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å this', function() {
     expect(button.setText()).toBe(button);
 });
 ```

#### –°–æ–±—ã—Ç–∏—è

–î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å–æ–±—ã—Ç–∏–π —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è —Å–æ–∑–¥–∞–≤–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—É—é —Å–µ–∫—Ü–∏—é `#events` –∏ –≤–ª–æ–∂–µ–Ω–Ω—ã–µ –≤ –Ω–µ–µ —Å–µ–∫—Ü–∏–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä—É–µ–º–æ–≥–æ —Å–æ–±—ã—Ç–∏—è.

–ù–∞–ø—Ä–∏–º–µ—Ä:
```js
describe('#events', function() {
    describe('click', function() { /*...*/ });
});
```

–î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å–æ–±—ã—Ç–∏–π –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è [Spies](http://h.yandex-team.ru/?http%3A//jasmine.github.io/2.3/introduction.html%23section-Spies%3A_%3Ccode%3EcreateSpy%3C/code%3E). –ï—Å–ª–∏ —Å–æ–±—ã—Ç–∏–µ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ, –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è [–∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏](http://h.yandex-team.ru/?http%3A//jasmine.github.io/2.3/introduction.html%23section-Asynchronous_Support).

–ü—Ä–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ —Å–æ–±—ã—Ç–∏–π —Å—Ç–æ–∏—Ç –ø—Ä–æ–≤–µ—Ä—è—Ç—å:
- —Ñ–∞–∫—Ç –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Å–æ–±—ã—Ç–∏—è –∏–ª–∏ —Ñ–∞–∫—Ç –µ–≥–æ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è;
- –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è;

–ù–∞–ø—Ä–∏–º–µ—Ä:

```js
it('–¥–æ–ª–∂–µ–Ω –≤—ã–∑—ã–≤–∞—Ç—å —Å–æ–±—ã—Ç–∏–µ click –ø—Ä–∏ –∫–ª–∏–∫–µ –∏ –ø—Ä–æ–∫–∏–¥—ã–≤–∞—Ç—å –≤ –Ω–µ–≥–æ domEvent', function() {
    var onClick = jasmine.createSpy(),
        click = $.Event('pointerclick');

    button.on('click', onClick);
    button.domElem.trigger(click);

    // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ñ–∞–∫—Ç –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Å–æ–±—ã—Ç–∏—è
    expect(onClick.calls.count()).toBe(1, 'click ok');
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
    // argsFor(0) - –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–ª—è –ø–µ—Ä–≤–æ–≥–æ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏—è
    // [0] - –æ–±—ä–µ–∫—Ç —Å–æ–±—ã—Ç–∏—è, [1] - –æ–±—ä–µ–∫—Ç –¥–∞–Ω–Ω—ã—Ö —Å–æ–±—ã—Ç–∏—è
    expect(onClick.calls.argsFor(0)[1].domEvent).toBe(click, 'event ok');
});

it('–Ω–µ –¥–æ–ª–∂–µ–Ω –≤—ã–∑—ã–≤–∞—Ç—å —Å–æ–±—ã—Ç–∏–µ click –ø—Ä–∏ –∫–ª–∏–∫–µ, –µ—Å–ª–∏ _disabled_yes', function() {
    var onClick = jasmine.createSpy();
    button
        .on('click', onClick)
        .setMod('disabled', 'yes');

    button.domElem.trigger($.Event('pointerclick'));
    expect(onClick.calls.count()).toBe(0); // –ü—Ä–æ–≤–µ—Ä—è–µ–º –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Å–æ–±—ã—Ç–∏—è.
});
```

#### –≠–ª–µ–º–µ–Ω—Ç—ã

–û–±—ã—á–Ω–æ, –µ—Å–ª–∏ JS-–∫–æ–¥ –¥–ª—è —ç–ª–µ–º–µ–Ω—Ç–∞ –Ω–∞–ø–∏—Å–∞–Ω –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º —Ñ–∞–π–ª–µ, –æ–Ω —Ç–µ—Å—Ç–∏—Ä—É–µ—Ç—Å—è –≤ `spec.js`-—Ñ–∞–π–ª–µ –¥–ª—è —ç—Ç–æ–≥–æ
–∂–µ —ç–ª–µ–º–µ–Ω—Ç–∞. –í —ç—Ç–æ–º —Å–ª—É—á–∞–µ –≥–ª–∞–≤–Ω–∞—è —Å–µ–∫—Ü–∏—è –∏–º–µ–Ω—É–µ—Ç—Å—è —Ç–∞–∫:

```js
describe('block__elem', function() { /*...*/ });
```

–ï—Å–ª–∏ –∂–µ —ç–ª–µ–º–µ–Ω—Ç –æ–ø–∏—Å–∞–Ω –≤ –æ—Å–Ω–æ–≤–Ω–æ–º –∫–æ–¥–µ –±–ª–æ–∫–∞, —Ç–æ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —ç–ª–µ–º–µ–Ω—Ç–∞ —Å–æ–∑–¥–∞–µ—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–∞—è —Å–µ–∫—Ü–∏—è, –≤ –∫–æ—Ç–æ—Ä–æ–π
—Å–æ–∑–¥–∞—é—Ç—Å—è —Å–µ–∫—Ü–∏–∏ –ø–æ –ø–æ —Ç–µ–º –∂–µ –ø—Ä–∞–≤–∏–ª–∞–º, —á—Ç–æ –∏ –¥–ª—è –±–ª–æ–∫–∞:

```js
describe('#__elem', function() {
    describe('_mod1', function() { /*...*/ });
    describe('_mod2', function() { /*...*/ });
});
```

#### Destructing

–¢—É—Ç –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –¥–µ–π—Å—Ç–≤–∏—è, –≤—ã–ø–æ–ª–Ω—è—é—â–∏–µ—Å—è –ø—Ä–∏ —É–Ω–∏—á—Ç–æ–∂–µ–Ω–∏–∏ –±–ª–æ–∫–∞ (–º–µ—Ç–æ–¥ `destruct()`). –û–±—ã—á–Ω–æ –≤ —ç—Ç–æ–º –º–µ—Ç–æ–¥–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç
–æ—Ç–ø–∏—Å–∫–∞ –æ—Ç —Å–æ–±—ã—Ç–∏–π, —É–¥–∞–ª–µ–Ω–∏–µ —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö –≤–Ω–µ –±–ª–æ–∫–∞ DOM-—É–∑–ª–æ–≤ –∏ —Ç.–¥. –î–ª—è –ø—Ä–æ–≤–µ—Ä–æ–∫ —ç—Ç–æ–≥–æ —Ç–∏–ø–∞ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è —Å–æ–∑–¥–∞–≤–∞—Ç—å —Å–µ–∫—Ü–∏—é `#destructing`. –ù–∞–ø—Ä–∏–º–µ—Ä:

```js
describe('#destructing', function() {
    it('–¥–æ–ª–∂–µ–Ω —Å–∫—Ä—ã–≤–∞—Ç—å—Å—è –ø—Ä–∏ —É–Ω–∏—á—Ç–æ–∂–µ–Ω–∏–∏', function() {
        popup.setMod('visible', 'yes');
        BEM.DOM.destruct(popup.domElem);
        expect(popup.hasMod('visible')).toBe(false);
    });
});
```


#### XSS

–ï—Å–ª–∏ [XSS](http://h.yandex-team.ru/?https%3A//en.wikipedia.org/wiki/Cross-site_scripting) —Å–ª—É—á–∞–µ—Ç—Å—è –≤ –õ–µ–≥–æ, —Ç–æ –æ–Ω —Å–ª—É—á–∞–µ—Ç—Å—è –≤–µ–∑–¥–µ, –ø–æ—ç—Ç–æ–º—É –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –æ—á–µ–Ω—å –≤–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ –æ—Ç–Ω–æ—Å–∏—Ç—å—Å—è –∫–æ –≤—Å–µ–º –≤—Å—Ç–∞–≤–∫–∞–º HTML,
–∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–æ–∏–∑–≤–æ–¥—è—Ç—Å—è –≤ –∫–æ–¥–µ –±–ª–æ–∫–∞ –∏ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∏—Ö –Ω–∞ –Ω–∞–ª–∏—á–∏–µ XSS. –°–¥–µ–ª–∞—Ç—å —ç—Ç–æ –æ—á–µ–Ω—å –ø—Ä–æ—Å—Ç–æ:

```js
describe('setText()', function() {
    it('–¥–æ–ª–∂–µ–Ω —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞—Ç—å —Ç–µ–∫—Å—Ç', function() {
        button.setText('new-text<div class="xss">-in-the</div>-button');
        expect(button.domElem.find('.xss').length).toBe(0);
    });
});
```

#### –û—Å—Ç–∞–ª—å–Ω–æ–µ

–ï—Å–ª–∏ –µ—Å—Ç—å –∫–∞–∫–∞—è-—Ç–æ –ª–æ–≥–∏–∫–∞, –¥–ª—è –∫–æ—Ç–æ—Ä–æ–π –Ω–µ –ø–æ–¥—Ö–æ–¥–∏—Ç –Ω–∏ –æ–¥–Ω–∞ –∏–∑ –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–Ω—ã—Ö –≤—ã—à–µ —Å–µ–∫—Ü–∏–π, —Ç–æ –º–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å —Å–≤–æ—é —Å–µ–∫—Ü–∏—é —Å –ø–æ–¥—Ö–æ–¥—è—â–∏–º –∏–º–µ–Ω–µ–º.
–í —ç—Ç–æ–º —Å–ª—É—á–∞–µ, –µ—Å–ª–∏ –≤–∞—à–∞ —Å–µ–∫—Ü–∏—è - –≤—Ç–æ—Ä–æ–≥–æ —É—Ä–æ–≤–Ω—è, —Ç–æ –µ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –¥–æ–ª–∂–Ω–æ –Ω–∞—á–∏–Ω–∞—Ç—å—Å—è —Å `#`, —ç—Ç–æ –ø–æ–º–æ–≥–∞–µ—Ç —á–∏—Ç–∞–µ–º–æ—Å—Ç–∏ –ø—Ä–∏ –ø—Ä–æ—Å–º–æ—Ç—Ä–µ –±–æ–ª—å—à–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Ç–µ—Å—Ç–æ–≤

### –ß—Ç–æ –Ω–µ —Ç–µ—Å—Ç–∏—Ä—É–µ–º

- –†–µ–∑—É–ª—å—Ç–∞—Ç —Ä–∞–±–æ—Ç—ã —à–∞–±–ª–æ–Ω–∏–∑–∞—Ç–æ—Ä–∞. –î–ª—è —ç—Ç–æ–≥–æ —Å—É—â–µ—Å—Ç–≤—É—é—Ç [—Ç–µ—Å—Ç—ã –Ω–∞ —à–∞–±–ª–æ–Ω—ã](unit-tests.md).
- –ü—Ä–∏–≤–∞—Ç–Ω—ã–µ –º–µ—Ç–æ–¥—ã. –û–Ω–∏ –¥–æ–ª–∂–Ω—ã –ø–æ–∫—Ä—ã–≤–∞—Ç—å—Å—è –∑–∞ —Å—á–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ –ø—É–±–ª–∏—á–Ω—ã—Ö.
- –ù–µ –¥–µ–ª–∞–µ–º —Ö—Ä—É–ø–∫–∏—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫. –ù–∞–ø—Ä–∏–º–µ—Ä, –Ω–∞ `CSS`-—Å–≤–æ–π—Å—Ç–≤–∞.


### –•–æ—Ä–æ—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏

#### –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ DOM –Ω–∞ –≤—Ä–µ–º—è —Ç–µ—Å—Ç–∞

–ù–∞–ø—Ä–∏–º–µ—Ä:

```js
var button;

beforeEach(function() {
    button = BEM.DOM.init($(BEMHTML.apply({
        block: 'button2',
        text: 'The button'
    })).appendTo('body')).bem('button2');
});

afterEach(function() {
    BEM.DOM.destruct(button.domElem);
});
```

#### –ì–µ–Ω–µ—Ä–∞—Ü–∏—è pointer-—Å–æ–±—ã—Ç–∏–π –≤–º–µ—Å—Ç–æ —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã—Ö

–ù–∞—á–∏–Ω–∞—è —Å Islands 4.0 Zanzibar, –≤ –õ–µ–≥–æ –µ—Å—Ç—å —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π –±–ª–æ–∫ [pointerevents](https://lego.yandex-team.ru/libs/islands/v4.0.1/desktop/pointerevents/),
–∫–æ—Ç–æ—Ä—ã–π —É–Ω–∏—Ñ–∏—Ü–∏—Ä—É–µ—Ç touch/mouse —Å–æ–±—ã—Ç–∏—è –¥–ª—è –≤—Å–µ—Ö –ø–ª–∞—Ç—Ñ–æ—Ä–º. –ï—Å–ª–∏ –≤–∞—à –±–ª–æ–∫ –ø–æ–¥–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –Ω–∞ —Ç–∞–∫–æ–µ —Å–æ–±—ã—Ç–∏–µ, —Ç–æ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –Ω—É–∂–Ω–æ
–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –µ–≥–æ –∂–µ. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ –Ω–∞–±–æ—Ä —Ç–µ—Å—Ç–æ–≤ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –ø–ª–∞—Ç—Ñ–æ—Ä–º.

‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ:

```js
button.domElem.trigger($.Event('pointerpress'));
button.domElem.trigger($.Event('pointerrelease'));
button.domElem.trigger($.Event('pointerclick'));
```

üî¥ –ù–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ:

```js
button.domElem.mousedown();
button.domElem.mouseup();
button.domElem.click();
button.domElem.trigger($.Event('touchstart'));
button.domElem.trigger($.Event('touchend'));
button.domElem.trigger($.Event('touchcancel'));
```

–°—Ç–æ–∏—Ç —Ç–∞–∫ –∂–µ –ø–æ–º–Ω–∏—Ç—å, —á—Ç–æ –µ—Å–ª–∏ –±–ª–æ–∫ –∏–º–µ–µ—Ç —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –ø—Ä–∏ —Ä–∞–∑–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–∞—Ö —Å–æ–±—ã—Ç–∏—è (`relatedTarget`, `keycode`), –∏—Ö –º–æ–∂–Ω–æ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –≤—Ç–æ—Ä—ã–º –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º –≤ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä —Å–æ–±—ã—Ç–∏—è `$.Event()`:

#### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π –∫ –ø—Ä–æ–≤–µ—Ä–∫–∞–º

–ï—Å–ª–∏ –≤ —Ç–µ—Å—Ç–µ –µ—Å—Ç—å –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å —Å–¥–µ–ª–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø—Ä–æ–≤–µ—Ä–æ–∫ (–Ω–µ—Å–∫–æ–ª—å–∫–æ `expect()`-–æ–≤), —Ç–æ –≤ –∫–∞–∂–¥—É—é –ø—Ä–æ–≤–µ—Ä–∫—É –Ω—É–∂–Ω–æ
–¥–æ–±–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –æ—à–∏–±–∫–∏, —á—Ç–æ–±—ã –≤ —Å–ª—É—á–∞–µ –ø–æ–ª–æ–º–∫–∏ –µ–µ –º–æ–∂–Ω–æ –±—ã–ª–æ –ª–µ–≥–∫–æ –Ω–∞–π—Ç–∏.

‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ:

```js
expect(spy.calls.count()).toBe(1, 'input#change triggered once');
// ...
expect(spy.calls.count()).toBe(2, 'input#change triggered 2 times');
```

üî¥ –ù–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ:

```js
expect(spy.calls.count()).toBe(1);
// ...
expect(spy.calls.count()).toBe(2);
```

#### –õ–∞–∫–æ–Ω–∏—á–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ

–û–ø–∏—Å–∞–Ω–∏–µ –∫–∞–∂–¥–æ–≥–æ —Ç–µ—Å—Ç–∞ –¥–æ–ª–∂–Ω–æ –∫—Ä–∞—Ç–∫–æ –æ–ø–∏—Å—ã–≤–∞—Ç—å –∫–∞–∫–æ–π –∞—Å–ø–µ–∫—Ç –ø–æ–≤–µ–¥–µ–Ω–∏—è, –ø—Ä–∏ —ç—Ç–æ–º —Å–æ–æ–±—â–µ–Ω–∏—è —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –Ω–∞—á–∏–Ω–∞—Ç—å —Å–æ —Å–ª–æ–≤–∞ `–¥–æ–ª–∂–µ–Ω`.
–ß—Ç–æ–±—ã –æ–¥–Ω–æ–∑–Ω–∞—á–Ω–æ –∏–º–µ–Ω–æ–≤–∞—Ç—å —Ç–µ—Å—Ç–∏—Ä—É–µ–º—ã–µ —Å—É—â–Ω–æ—Å—Ç–∏ –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ –±–ª–æ–∫–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å–ª–µ–¥—É—é—â–∞—è —Å—Ö–µ–º–∞:

- `__element` - —ç–ª–µ–º–µ–Ω—Ç;
- `_modifier` - –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä;
- `method()` - –ø—É–±–ª–∏—á–Ω—ã–π –º–µ—Ç–æ–¥;

–ü—Ä–∏ —Ç–∞–∫–æ–º –∏–º–µ–Ω–æ–≤–∞–Ω–∏–∏ –º–æ–∂–Ω–æ –ø–∏—Å–∞—Ç—å –ª–∞–∫–æ–Ω–∏—á–Ω–æ, –±–µ–∑ —Å–ª–æ–≤ ¬´–º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä¬ª, ¬´—ç–ª–µ–º–µ–Ω—Ç¬ª –∏ –¥—Ä.

‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ:
```js
it('–¥–æ–ª–∂–µ–Ω –≤—ã–∑—ã–≤–∞—Ç—å —Å–æ–±—ã—Ç–∏–µ change –ø—Ä–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–µ _mod_val –Ω–∞ __element', function() { /*...*/ });
```

üî¥ –ù–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ:

```js
it('–≤—ã–∑—ã–≤–∞–µ—Ç —Å–æ–±—ã—Ç–∏–µ change –ø—Ä–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–µ –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä–∞ mod –≤ –∑–Ω–∞—á–µ–Ω–∏–µ val –Ω–∞ —ç–ª–µ–º–µ–Ω—Ç element', function() { /*...*/ });
```

#### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ö–µ–ª–ø–µ—Ä–æ–≤

–î–ª—è —É–¥–æ–±—Å—Ç–≤–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —É –Ω–∞—Å –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è —Ö–µ–ª–ø–µ—Ä—ã:

- [jasmine-jquery](http://h.yandex-team.ru/?https%3A//github.com/velesin/jasmine-jquery)
- [jasmine-ajax](http://h.yandex-team.ru/?http%3A//jasmine.github.io/2.3/ajax.html)

–∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∏—Ö –≤–º–µ—Å—Ç–æ —Å–æ–∑–¥–∞–Ω–∏—è —Å–≤–æ–∏—Ö –≤–µ–ª–æ—Å–∏–ø–µ–¥–æ–≤.

