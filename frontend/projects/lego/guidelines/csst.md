Инструкция по использованию csst-шаблонов
----------------------------------------

Мы пересмотрели реализацию «всемирно известных» новых контролов и решили на неопределенное время отойти от текущего решения в пользу подготовки файлов палитр с цветами при релизе. В коде библиотеки ничего не меняется, но в момент релиза `CSS`-правила с переменными (aka `CSS Custom Properties`) будут преобразованы в обычные значения и вынесены в соответствующие файлы с палитрами (например, `textinput_tone_red.css`).

Это сделано в том числе для улучшения поддержки браузеров с проблемами обработки `CSS`-переменных и позволит уменьшить количество проблем у пользователей при сохранении возможности генерации своих цветовых наборов.

Чтобы сгенерировать собственную палитру, достаточно передать набор цветов и название палитры в `CSS`-шаблоны.
`CSS`-шаблоны хранятся в файлах с расширением `.csst.js` (например, `textinput_tone.csst.js`) и представляют собой `CommonJS`-модули.
Для каждого блока, реализованного в новом дизайне, имеется свой шаблон.

Чтобы получить список доступных для блока шаблонов, достаточно выполнить скрипт, хранящийся в `islands/dist/palette`, передав в качестве аргумента название блока, например:

```sh
node <<EOF
    require('islands/dist/palette')('checkbox')
EOF
```

Аналогично для `lego-on-react`:

```js
node <<EOF
    require('lego-on-react/dist/palette')('checkbox')
EOF
```

Скрипт возвращает массив, содержащий адреса доступных для указанного блока шаблонов, например:

```
Доступные шаблоны:

[ 'common.blocks/checkbox/_tone/checkbox_tone.csst.js',
  'desktop.blocks/checkbox/_tone/checkbox_tone.ie8.csst.js' ]
```

Для некоторых блоков доступно несколько шаблонов - например, в случае, когда у блока есть специальные стили для `ie8`.
Результат для каждого компонента и палитры достаточно сохранить в файл (`компонент_tone_палитра.css`) и при необходимости подключать его на страницу.

```sh
cat <<EOF > pink_tone.js
module.exports = {
    'tone': 'pink',
    '--color-text': '#fff',
    '--color-bg-light': '#d62b2b',
    '--color-bg-heavy': '#951e1e',
    '--color-bg-heavy-hovered': '#8e1d1d',
    '--color-bg-checked': '#fff',
    '--color-bg-checked-hovered': '#f2f2f2',
    '--color-border-focused': '#ff3838',
    '--color-border-checked-focused': '#ffffff',
};
EOF
```

```sh
node <<EOF
    const tone = require('./pink_tone');
    const styles = require('./common.blocks/checkbox/_tone/checkbox_tone.csst.js')(tone);
    fs.writeFileSync('checkbox_tone_pink.css', styles);
EOF
```

Важно учесть, что при генерации `CSS`-файлов палитр для компонентов их следует обновлять при каждом обновлении библиотеки, поскольку верстка и стили компонентов могут меняться, и в этом случае код будет устаревать.
