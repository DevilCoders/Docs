# Units 

Скрипт запускается  `ci:unit` в PR/MQ/trunk, но есть некоторые отличия в этих запусках.

Пример скрипта в `package.json` сервиса/пакета:
```
{
    …
    "scripts": {
        …
        "ci:unit": "jest --config ./.config/jest/jest.config.js"
    }
}
```
В качестве раннера можно использовать только jest.

Образец конфига `jest` можно взять из [project-stub](../../services/stub/.config/jest/jest.config.js).

## Запуск в ПРе

Запуск в ПРе не только выполняет скрипт `ci:unit`, но и запускает сравнение покрытия с транком, если настроен конфиг [согласно документации](../how-to/coverage/unit.md).

## Запуск в MQ

Запуск в MQ осуществляется с переменной окружения `PUBLISH_COVERAGE_REPORT`, которая включает публикацию отчета о покрытии, с последующей перепубликацией отчета в [Publish MQ artifacts](./publish-mq-artifacts.md).

## Запуск в trunk

Запуск в trunk осуществляется с переменной окружения `UPLOAD_SUMMARY_COVERAGE`, которая включает загрузку показателей покрытия в базу, для построения графика.
