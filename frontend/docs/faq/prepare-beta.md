# Сборка и деплой

## Сборка проекта

Сервис может использовать любую систему сборки при условии соблюдения требований к командам запуска и структуре собранного пакета.
Однако, рекомендуется использовать стандартный сборщик.

### Команды запуска сборки

```shell
npm run build
```

Опционально передаётся переменная окружения `YENV`, которая может иметь одно из трёх значений:

- `development` (по умолчанию);
- `testing`;
- `production`.

```shell
YENV=testing npm run build
```

Пересборка сервиса будет запускаться в двух случаях:

1. при обновлении кода самого сервиса;
1. при изменении кода зависимых пакетов.

## Деплой бет сервисов под RR

Беты разворачиваются в сервисе [**Yappy**][yappy-docs].

* **Обязательно** нужно ознакомиться с [гарантиями на беты][beta-sla].
* Чем быстрее будет закрыт PR, тем быстрее освободится слот под новую бету! Список всех слотов можно увидеть [здесь][slot-list].
* По умолчанию время жизни (TTL) — 7 дней.
* Если вы хотите использовать новый тип ресурса для бет, его необходимо предварительно вручную зарегистрировать [вот тут](https://a.yandex-team.ru/arc/trunk/arcadia/sandbox/projects/sandbox_ci/resources/template_packages.py?rev=r7264400). Альтернативно, если ваш сервис основан на монорепном стабе, можно воспользоваться [инструкцией](../how-to/deploy-rr-templates-to-production.md#создаем-новый-тип-ресурса-для-шаблона).

Подробнее можно почитать в [документации](https://wiki.yandex-team.ru/search-interfaces/infra/new-betas/).

[yappy-docs]: https://wiki.yandex-team.ru/yappy/
[beta-sla]: https://wiki.yandex-team.ru/search-interfaces/infra/new-betas/#garantii
[slot-list]: https://yappy.z.yandex-team.ru/q/report-renderer-templates
