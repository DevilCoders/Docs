# BEM Dead Code

Утилита для поиска неиспользуемых bem-сущностей.

## Как это работает

1. Сначала нужно собрать проект стандартным способом через `enb make`
2. Утилита считывает сгенерированные deps файлы и получает полный список используемых блоков
3. Утилита ищет все блоки в указаных уровнях переопределения
4. Если найден блок, которого нет ни в одном deps файле – значит он не используется

## Подключение к проекту

```bash
npm install @yandex-int/bem-dead-code --save-dev
```

Затем нужно создать конфиг `bem-dead-code.config.js` внутри директории с BEM блоками:

```js
module.exports = {
    // Список паттернов для поиска сгенерированых deps файлов (после сборки через enb)
    depsPatterns: [
        '*.bundles/*/*.deps.js'
    ],

    // Уровни переопределения, в которых нужно искать блоки
    levels: [
        'common.blocks',
        'desktop.blocks',
        'touch-phone.blocks',
        'yellowskin.blocks'
    ],

    // Список технологий, которые нужно проверить
    techs: [
        'js',
        'css',
        'styl',
        'bh.js',
        'priv.js'
    ]
};
```

Затем утилиту нужно запустить из директории с BEM блоками:
```bash
cd static
./node_modules/.bin/enb make
./node_modules/.bin/bem-dead-code
```
