# @yandex-lego/components 3.9.0

<!-- ЧЕЛОВЕЧЕСКОЕ ВСТУПЛЕНИЕ -->

Изменения, вошедшие в релиз @yandex-lego/components 3.9.0, разделены на группы:

* [минорные изменения](#Минорные-изменения) — задачи, в рамках которых произошло расширение API блоков

Все важные изменения подробно описаны [ниже](#Пояснения).

## Минорные изменения

| Заголовок                                                                     | Задача     | PR       |
| :---------------------------------------------------------------------------- | :--------- | :------- |
| [Popup.ts: Добавить target=position для попапов [собрать примеры]](#ISL-9581) | [ISL-9581] | [#22084] |

## Пояснения

<a name="ISL-9581"></a>
### [Popup.ts: Добавить target=position для попапов [собрать примеры]][ISL-9581]

В текущем релизе были исправлены вещи, которые ломали обратную совместимость для компонента `Modal`:

- возвращение `z-index` на `.Modal`
- исправление типа `innerRef` с `RefObject`, обратно на `Ref`

## Popup

Было исправлено поведение закрытия для компонента `Popup` - теперь он закрывается по событию `mousedown` при клике вне его содержимого.

## useVirtualElementRef

Добавлен новый Реакт-хук, который позволяет создавать виртуальный элемент. Как правило используется с попапом и нужен для создания контекстных меню.

**Пример использования**

```tsx
import { useVirtualElementRef } from '@yandex-lego/components/usePopper';

const Example = () => {
    // `right` и `bottom` по-умолчанию будут равны `left` и `top` соответственно
    const anchorRef = useVirtualElementRef({ rect: { left: 50, top: 50 } });

    return <Popup target="anchor" anchor={anchorRef} />
}
```

[ISL-9581]: https://st.yandex-team.ru/ISL-9581
[#22084]: https://github.yandex-team.ru/search-interfaces/frontend/pull/22084
