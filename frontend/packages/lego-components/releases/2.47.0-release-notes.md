# @yandex-lego/components 2.47.0

<!-- ЧЕЛОВЕЧЕСКОЕ ВСТУПЛЕНИЕ -->

Изменения, вошедшие в релиз @yandex-lego/components 2.47.0, разделены на группы:

* [минорные изменения](#Минорные-изменения) — задачи, в рамках которых произошло расширение API блоков

Все важные изменения подробно описаны [ниже](#Пояснения).

## Минорные изменения

| Заголовок                                                                        | Задача            | PR       |
| :------------------------------------------------------------------------------- | :---------------- | :------- |
| @bem-react/pack: Реализовать инструмент для сборки компонентов                   | [ISL-8254]        | [#13222] |
| [@yandex-lego/components: Заменить dist-ts-generator](#ISL-8721)                 | [ISL-8721]        | [#13222] |
| external-skip пишет в логи ошибку получения скипов из-за неправильного стандарт… | [INFRADUTY-12015] | [#13433] |

## Пояснения

<a name="ISL-8721"></a>
### [@yandex-lego/components: Заменить dist-ts-generator][ISL-8721]

### Внутренние файлы

В пакете больше не присутствует папка `__internal__`, если ваш проект использовал файлы из этой папки, необходимо удалить из пути `__internal__/src`.

Cкрипт для миграции:

```sh
find src/components -type f -name '*.ts*' -exec sed -i '' -E 's/__internal__\/(cjs-)?src\///' {} +
```

### Реструктуризация

Теперь итоговая структура проекта совпадает с исходной, поэтому в компонентах теперь доступны `lib`, `hocs`, `hooks`, `polyfills`:

```ts
import { canUseDOM } from '@yandex-lego/components/lib/canUseDOM'
import { withDebounceInput } from '@yandex-lego/components/withDebounceInput'
import { useUpdateEffect } from '@yandex-lego/components/useUpdateEffect'
```

Так же из хоков ушли платформы, т.к. они не зависят от них и были добавлены по ошибке:

```diff
- import { withZIndex } from '@yandex-lego/components/withZIndex/desktop'
- import { withTogglable } from '@yandex-lego/components/withTogglable/desktop'
- import { withOutsideClick } from '@yandex-lego/components/withOutsideClick/desktop'
- import { withAutoFocus } from '@yandex-lego/components/withAutoFocus/desktop'
+ import { withZIndex } from '@yandex-lego/components/withZIndex'
+ import { withTogglable } from '@yandex-lego/components/withTogglable'
+ import { withOutsideClick } from '@yandex-lego/components/withOutsideClick'
+ import { withAutoFocus } from '@yandex-lego/components/withAutoFocus'
```

### themekit

Из-за изменений структуры проекта, в пакете `themekit` была найдена и исправлена проблема с поиском корня проекта, желательно обновиться до версии `1.6.1`:

```sh
npm i -DE @yandex/themekit@1.6.1
```

[ISL-8254]: https://st.yandex-team.ru/ISL-8254
[#13222]: https://github.yandex-team.ru/search-interfaces/frontend/pull/13222
[ISL-8721]: https://st.yandex-team.ru/ISL-8721
[#13222]: https://github.yandex-team.ru/search-interfaces/frontend/pull/13222
[INFRADUTY-12015]: https://st.yandex-team.ru/INFRADUTY-12015
[#13433]: https://github.yandex-team.ru/search-interfaces/frontend/pull/13433
