# Общее

{% note warning %}
Обязательно прочтите [cookbook][./cookbool.md]
{% endnote %}

## NPM
Виджет теперь поставляется через внутренний NPM. Пакет собирается rollup-ом. Доступна типизация.

## JS бандлы
Если по каким-то причинам вы не можете использовать внутренний NPM, можно собрать нужные вам компоненты в бандл с помощь пакета `@yandex-int/messenger.widget-cli`.

# Переезд со старых js

## widget_light.js
Аналогом widget light является [BlockUI](./ui-support.md). В качестве базового конфига для виджета нужно использовать `YandexSingleBlockChatConfig`/`YandexTeamSingleBlockChatConfig`.

## widget_ya.js

Если вы использовали виджет с нашей кнопкой, то вам подойдет [ButtonUI](./ui-button.md), иначе [PopupUI](./ui-popup.md).

### Чат поддержки
Для чатов поддержки предусмотрены 2 специальных UI-я: [SupportButtonUI и SupportPopupUI](./ui-support.md).
Подробнее об интеграции виджета для чатов поддержки можно прочесть [здесь](./cookbook.md).

## widget_ya_internal.js
Если вы использовали виджет с нашей кнопкой, то вам подойдет [ButtonUI](./ui-button.md), иначе [PopupUI](./ui-popup.md). В качестве базового конфига для виджета нужно использовать `YandexTeamConfig`/`YandexTeamSingleChatConfig`.

# CSS
Виджет больше не инлайнит свой CSS. Для каждого вида UI доступен css файл.

## Темы
Включить одну из предустановленных тем **Мессенджера** можно через флаг `theme`. Данный флаг не влияет на тему виджета ее необходимо настроить самостоятельно с помощью css переменных описанных в документации по каждому `UI`. Так же тему **Мессенджера** можно переоределить с помощью параметра `themeVariables` в конфиге виджета. [Подробнее](./themes.md)

# Конфигурация
Теперь конфигурация виджета осуществляется с помощью класса `Config`. Параметры `iframeUrl`, `iframeUrlParams` упразднены, вместо них нужно использовать `прессеты`, которыми можно расширить базовый конфиг. Для наиболее используемых кейсов сделаны готовые базовые конфиги подробнее с ними можно ознакомиться [здесь](./config.md).

Для конфигов одного чата включены следующие флаги
* `disableChatList`
* `disableNavigation`
* `newHeader`
* `embedButton`
* `hideClose` (Для конфига BlockUI)

Для конфигов со списком чатов включены следующие флаги
* `newHeader`
* `embedButton`

Флаг `disableChatList` использовать не нужно.

## Флаги
Теперь флаги передаются в конфиг через поле `flags`. Подробнее о флагах можно прочитать [здесь](./flags.md)

## Использование alpha/testing окружения
Переключит окружение можно с помощью прессета `backend`.
