## Описание

**Статус блока**: **deprecated**

---
**NB** Блок устарел, рекомендуется перейти на использование
новой версии блока — [spin2](../spin2/spin2.ru.md).

**Блок будет удален в следующей мажорной версии библиотеки**

---

Блок `spin` – индикатор загрузки. Визуально иллюстрирует ход выполнения какого-то процесса.
Например, загрузки сайта или медиа-файла. Разработан для Яндекса.

### Объявление блока на странице

BEMJSON для подключения блока:

```javascript
{
    block: 'spin', // имя блока
    js: true,     // js-параметры блока. Обязательное поле
    mods: {progress: 'yes'} // модификаторы блока
}
```
Вращается блок `spin` при помощи CCS3 анимации или JS-скрипта. Когда блок виден — он крутится (модификатор `progress` со значением `yes`), как только скрывается – вращение останавливается.

### JS параметры блока
[JS-параметры поведения блока по умолчанию](#jsdefault):

   * `js: true`

JS-параметры для настройки поведения блока:

  * `{String} animation` – тип анимации. Допустимые значения:
    * `transform` – анимация с использованием CSS-свойства `animation`;
    * `sprite` – анимация с использованием спрайтов.
  * `{Number} startDelay` – задержка перед стартом анимации.
  * `{Number} frameAngle` – угол поворота за один кадр, только для анимации трансформациями.
  * `{Number} frameTime` – время показа одного кадра на экране.
  * `{Number} frames` – количество кадров в спрайте, только для спрайтовой анимации.


```js
{
    block: 'spin',
    js: {startDelay: 1000, frameTime: 47},
    mods: {progress: 'yes'}
}
```

### Модификаторы

#### Состояние работы

Состояние работы блока `spin` определяется модификатором `progress`.
Пока `spin` виден — он вращается (модификатор `progress` со значением `yes`), как только модификатор снят –  блок скрывается и вращение останавливается.


#### Темы оформления и размеры

Для блока реализованы 8 стандартных тем оформления. Темы состоят из комбинаций цветов (белый и серый) и размеров (16x16, 24x24, 32x32, 48x48). Размер определяет высоту и ширину кадра для блока `spin`. По умолчанию используется тема `gray-32`.

Список доступных тем:

  - `gray-16` — серая, 16x16;
  - `gray-24` — серая, 24x24;
  - `gray-32` — серая, 32x32 — тема по умолчанию;
  - `gray-48` — серая, 48x48;
  - `white-16` — белая, 16x16;
  - `white-24` — белая, 24x24;
  - `white-32` — белая, 32x32;
  - `white-48` — белая, 48x48.

Нужная тема задается в модификаторе `theme` с соответствующим значением в поле `mods` входного BEMJSON.

```js
{
    block: 'spin',
    js: true,
    mods: {progress: 'yes', theme: 'gray-16'}
}
```

На уровне шаблонизатора блока, для его визуализации, элемент блока `icon` миксуется с блоком иконки [image](../image/image.ru.md) (позволяет размещать на странице векторные изображения с деградацией в растровые).

По умолчанию используется проверка на поддержку браузером того или иного способа анимации (`transform` или `sprite`).

Если браузер поддерживает CSS-свойство `animation` и формат `svg`, то будет использован `svg` блок `spin`  (svg-изображение вращаемое функцией трансформации).
Иначе, для трансформации будет использовано изображение в формате `png`, а для
эффекта вращения  применится спрайт с изображениями в формате `png`.

При необходимости, на уровне проекта изображение можно переопределить.

```js
{
    block: 'spin',
    js: true,
    mods: {'progress': 'yes', 'theme': 'white-16'}
}
```

### Значения по умолчанию

* **Тема оформления**: модификатор `theme` со значением `gray-32` (индикатор серого цвета размером 32x32).

  <a name="jsdefault"></a>
* JS-параметры настройки поведения блока (по умолчанию):

  - `startDelay: 0`  – задержка перед стартом анимации.
  - `frameAngle: 10` – угол поворота за один кадр, только для анимации трансформациями.
  - `frameTime: 27` – время жизни одного фрейма на экране.
  - `frames: 36` – количество фреймов в спрайте, только для спрайтовой анимации.
  - `animation` – значение по умолчанию вычисляется исходя из поддержки браузером способа анимации (
  `transform` – для анимации с использованием CSS-свойства `animation`, или
  `sprite` – для анимации с использованием спрайтов).
