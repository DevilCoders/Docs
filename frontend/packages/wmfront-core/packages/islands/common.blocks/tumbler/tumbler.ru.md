## Описание

Блок `tumbler` («тумблер») служит для выбора одного из двух предложенных вариантов. Визуально представлен переключателем с двумя положениями «Вкл/Выкл». Текст, расположенный на тумблере «Вкл/Выкл» – неизменяемый и локализованный (значение устанавливается из [Танкера](http://2-10.lego.yandex-team.ru/doc/concept/localization.wiki.html#Tanker)).
Функциональность тумблера основана на скрытом чекбоксе `<input type="checkbox" атрибуты>`.

Блок позволяет использовать [отложенную инициализацию](#live).

### Объявление блока на странице

BEMJSON для использования тумблера:

```javascript
{
    block: 'tumbler',  // имя блока
    name: 'color',     // имя для идентификации блока. Не обязательное
    mods: {size: 's', theme: 'normal'}, // модификаторы блока. Модификаторы размера и темы – обязательные
    content: [ // левая и правая метки тумблера. Не обязательное поле
        { // создание метки для левой радио-кнопки
    		elem: 'option',
        	side: 'left',      // левая метка
        	content: 'серый',  // текст метки слева
        	value: 'gray'      // значение для левой радиокнопки. Не обязательное, по умолчанию `'false'`
        },
        { // создание метки для правой радио-кнопки
    		elem: 'option',
        	side: 'right',      // правая метка
        	content: 'желтый',  // текст метки справа
        	value: 'yellow'     // значение для правой радиокнопки. Не обязательное, по умолчанию `'true'`
    	}
    ]
}
```
В простейшем случае (тумблер без меток со [значениями по умолчанию](#default)):

```js
{
    block: 'tumbler',   // имя блока
    mods: {size: 's', theme: 'normal'}, // модификаторы блока. Модификаторы размера и темы – обязательные
}
```


### Атрибуты блока
Атрибуты тумблера аналогичны атрибутам нативного чекбокса:

* `{String} name` — имя для идентификации. Задается в одноименном поле блока.
В HTML для каждой радиокнопки сформируется одинаковый атрибут `name` с заданным значением.
По умолчанию значение `name` генерируется случайным образом.

* `{String} value` – значение, отправляемое на сервер, уникальное для каждой метки (элемент блока `option`). Задается в поле элемента `option`.
Если для `option` явно не задано `value`, то для левой радиокнопки одноимённый атрибут примет значение `false`, а для правой — `true`.

```js
{
    block: 'tumbler',
    name: 'color',
    mods: {size: 's', theme: 'normal'},
    content: [
        {
    		elem: 'option',
        	side: 'left',
           content: 'серый',
        	value: 'gray'
        },
        {
    		elem: 'option',
        	side: 'right',
        	content: 'желтый',
        	value: 'yellow'
    	}
    ]
}
```

### Содержимое блока
* `{Array} content` – используется для создания текстовых меток тумблера, расположенных слева и/или справа от контрола. Тумблер можно переключить (включить/выключить) нажатием левой кнопки мыши на метку.
Метки создаются в поле `content` соответствующего элемента блока `option` (левой или правой радиокнопки) следующим образом:

```js
{
	block: 'tumbler',
	name: 'color',  // имя для идентификации блока. Не обязательное
	mods: {size: 's', theme: 'normal'},
	content: [
		{ // создание метки для левой радио-кнопки
    		elem: 'option',
        	side: 'left',      // левая радиокнопка (side:'right' - для правой)
        	content: 'Подпись слева',  // текст метки слева
        	value: 'gray'      // значение для левой радиокнопки. Не обязательное
    	}
    ]
}
```
В результате будет создана метка слева от тумблера.

По умолчанию метки отсутствуют.


```js
{
	block: 'tumbler',
    mods: {size: 's', theme: 'normal'},
	content: [
		{
    		elem: 'option',
        	side: 'right',
        	content: 'Подпись справа'
        }
    ]
}
```

<a name="live"></a>
## Отложенная инициализация
По умолчанию тумблер инициализируется автоматически при загрузке страницы (то есть при наступлении события `domReady`).
При большом количестве тумблеров это может создать большую нагрузку на браузер, причем не все они могут потребоваться
пользователю. Для оптимизации производительности рекомендуется инициализировать блок отложено.

### Включение отложенной инициализации
Есть несколько способов включить отложенную инициализацию:

* **Локально** – для конкретного экземпляра блока `tumbler`.
Достаточно в BEMJSON-декларации блока указать JS-параметр `live` со значением `true`
(значение по умолчание `live: false` – автоматическая инициализация).

 ```javascript
 {
     block: 'tumbler',
     js: { live: true }
     ...
 }
 ```

* **Глобально** – для всех блоков `tumbler` проекта.
В этом случае, на уровне своего проекта нужно доопределить `BEMHTML`-шаблон блока
`tumbler/tumbler.bemhtml.js` следующим образом:

```javascript
block('tumbler').js()(function() {
    return this.extend({live: true}, this.ctx.js);
});
```
для `BH`-шаблона `tumbler/tumbler.bh.js` доопределение будет таким:

```javascript
module.exports = function(bh) {
    bh.match('tumbler', function(ctx) {
        ctx.js(ctx.extend({live: true}, ctx.js()));
    });
};
```

Все тумблеры проекта станут инициализироваться отложено, кроме:

* Тумблеров с явно отключенной live-инициализацией в BEMJSON через JS-параметр `live: false`:


 ```javascript
 {
     block: 'tumbler',
     js: { live: false }
     ...
 }
 ```

В этих случаях тумблер инициализируется сразу.


### Модификаторы блока

#### Тема оформления

Модификатор `theme` со значением `normal` (обычная).
Модификатор `theme` со значением `tiny` (миниатюрная).

#### Размеры

Модификатор размера `size` – обязательный при объявлении блока (если во входных данных не установлен – контрол на веб-странице не отобразится). По умолчанию не определен.
Реализованные размеры: `s`, `m`  (определяют размеры блока и  шрифта).

Таблица размеров тумблера

| Размер| Размер шрифта | Размеры блока (WxH) |
|-------|---------------|---------------------|
| s     | 13px          | 72x28               |
| m     | 15px          | 82x32               |


Если необходим другой размер, его можно доопределить на проекте. [Кастомный размер](../button/button.ru.md#customsize).


```js
{
	block: 'tumbler',
    mods: {size: 's', theme: 'normal'},
	content: [
		{
    		elem: 'option',
        	side: 'right',
        	content: 'Размер s'
        }
    ]
}
```

```js
{
	block: 'tumbler',
    mods: {size: 'm', theme: 'normal'},
	content: [
		{
    		elem: 'option',
        	side: 'right',
        	content: 'Размер m'
        }
    ]
}
```

#### Состояния тумблера

* **Активен**, модификатор блока `checked` со значением `yes`. Переключатель с правой стороны (Вкл).
Тумблер может быть **включен/выключен** — переключатель находится справа/слева, т.е. выбирается правая или левая радиокнопка (в HTML будет добавлен атрибут `checked` для соответствующей радиокнопки).

* **Не активен**, модификатор блока `disabled` со значением `yes`. Тумблер не доступен для действий пользователя (в нативных радиокнопках будет выставлен атрибут `disabled`). Метки тумблера, при наличии, тоже будут не активны.

По умолчанию тумблер создается в состоянии **активен** и **выключен** — переключатель с левой стороны (значение чекбокса соответствует значению, переданному для левой метки или `'false'`).

Переключить тумблер можно с помощью клавиш **Space** и **[ ←, ↑, →, ↓ ]**.

```js
{
	block: 'tumbler',
    mods: {size: 's', disabled: 'yes', theme: 'normal'},
	content: [
		{
    		elem: 'option',
        	side: 'right',
        	content: 'disabled'
        }
    ]
}
```
```js
{
	block: 'tumbler',
    mods: {size: 's', checked: 'yes', disabled: 'yes', theme: 'normal'},
	content: [
		{
    		elem: 'option',
        	side: 'right',
        	content: 'disabled + checked'
        }
    ]
}
```

<a name="default"></a>
### Значения по умолчанию
* **Состояние тумблера**: **активен** и выключен (переключатель с левой стороны).
* Текст на тумблере «Вкл/Выкл» – неизменяемый и устанавливается из Танкера.
* Если не были явно заданы:
  * `name` — значение сгенерируется случайным образом;
  * `value` – `'false'` в состоянии «выключен», `'true'` в состоянии «включен»».
