enb-wmfront
===========

ENB-конфигуратор для наших проектов.

### Установка

```
npm i --save-dev git://github.yandex-team.ru/wmfront-common/enb-wmfront
```

### Использование

Конфигуратор настроит сборку:
  * в девеломпент-режиме:
     * `_?.priv.js` с раскрытыми инклюдами языков и преприва,
     * `_?[.ie*].css` с раскрытыми инклюдами и префиксами,
     * `?.<язык>.js` с нераскрытыми инклюдами языков, клиентских шаблонов и `common.pre.js`;
  * в продакшн-режиме:
     * `_?.priv.js` с раскрытыми инклюдами языков и преприва,
     * `_?.[ie*].css` с раскрытыми инклюдами и префиксами, минифицированный,
     * `_?.<язык>.js` с раскрытыми инклюдами языков, клиентских шаблонов, js из блоков, минифицированный.

**Achtung**: конфигуратор не настраивает сборку преприва. Ожидается, что это будет объявлено в проекте. В преприв нужно включить блоки, шаблон (если нужно) и борщик-ликнс (если нужно).

Клиентские шаблоны собираются в файл `?.pub.templ.js` независимо от технологии.

Настраивать примерно так:

```js
module.exports = function(config) {

    // Подключить конфиг
    config.includeConfig('enb-wmfront');

    // Получить конфигуратор
    var configurator = config.module('enb-wmfront');

    // Настройка проекта
    configurator.configure({
        // Бандл, в который всё будет собираться, типа: desktop.pages/common
        commonBundlePath: commonBundlePath,

        // Настройки локализации
        tanker: {
            // Используемые языки
            languages: [ 'ru', 'uk', 'en', 'tr' ],
            // Имя проекта в Танкере
            project: 'project-name',
            // Ветка или коммит в Танкере
            revision: 'nodejs'
        },

        // Уровни переопределения
        levels: getLevels(),

        // Технологии для сборки шаблонов. Поддерживается либо bemhtml, либо bh
        templates: {
            bemhtml: {
                // Какие технологии шаблонизации тянуть на клиент.
                // Ищутся в destTech в депсах.
                destTech: [ 'bemhtml', 'bh' ]
            }
        },

        // В какую переменную записывать борщиковые ссылки,
        // которые собираются из *.links.json файлов
        borschikLinks: 'var BORSCHIK_LINKS',

        // Список поддерживаемых браузеров для Автопрефиксера
        browsersList: [ "last 2 version" ]
    });

}
```
