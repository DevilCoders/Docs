# Основные абстрактные метаклассы

## Корневой метакласс - entity 

**entity** - это самый базовый метакласс, который декларирует, что у всех бизнес объектов есть два атрибута:

- **gid** - уникальный в рамках системы идентификатор бизнес-объекта. Gid представляет из себя строку вида employee@123, 
где employee - идентификатор метакласса бизнес-объекта, а 123 - уникальный идентификатор в рамках объектов метакласса. 
- **metaclass** - метакласс бизнес-объекта. Т.е. для любого бизнес-объекта можно получить его текщий метакласс.

И gid, и metaclass являются обязательными атрибутами и не могут быть null.

## Абстрактный бизнес-объект - bo 

Это абстрактный метакласс основных бизнес-объектов системы, который расширяет **entity**. Дополнительно к атрибутам 
объявленным в entity добавляет следующие атрибуты:
- **title** - название бизнес-объекта. Это название использвется в интерфейсе пользователя для отображения ссылок на 
бизнес-объект, в suggest-ах при выборе и пр.
- **creationTime** - время создания  бизнес-объекта.
- **author** - оператор, который создал бизнес-объект. (См. метакласс employee)
- **status**, **startStatusTime**, **archived** - информация о текущем статусе бизнес-объекта.

Все бизнес-объекты этого метакласса храняться в базе данных Единого окна, а действия производимые с бизнес-объектом, 
такие как создание, изменение и удаление логируются в отдельной таблице (см. entityHistory).

## Элемент справочника - catalogItem

Это абстрактный метакласс элементов справочников системы. Предполагается, что элементов справочников в системе небольшое
количество, и они редко модифицируеются. Это позволяет кешировать все элементы справочников в памяти каждого инстанса
приложения независимо друг от друга. Кеш обновляется автоматически раз в минуту. Дополнительно к атрибутам 
объявленным в entity добавляет следующие атрибуты:
- **title** - название бизнес-объекта. Это название использвется в интерфейсе пользователя для отображения ссылок на 
бизнес-объект, в suggest-ах при выборе и пр.
- **creationTime** - время создания  бизнес-объекта.
- **author** - оператор, который создал бизнес-объект. (См. метакласс employee)
- **status**, **startStatusTime**, **archived** - информация о текущем статусе бизнес-объекта
- **catalog** - ссылка на справочник, к которому относится элемент
- **code** - уникальный код элемента справочника в рамках справочника. По своей сути является naturalId, и позволяет 
упростить обращение к конкретному элементу справочника.
- **color** - позволяет задать цвет отображения лемента справочника в интерфейсе оператора. 
  Пример отрисовки цветом элементов справочника
  ![Пример отрисовки цветом элементов справочника](catalogItemColor.png "Пример отрисовки цветом элементов справочника")


Все бизнес-объекты этого метакласса храняться в базе данных Единого окна, а действия производимые с бизнес-объектом, 
такие как создание, изменение и удаление логируются в отдельной таблице (см. entityHistory).

## Справочник - catalog

Это абстрактный метакласс справочников и нужен для отображения списка элеметов справочника в интерфейсе. Справочник -
это системные метакласса, который создаются автоматически для всех метаклассов расширяющих catalogItem.

## Системный бизнес-объект - systemEntity

Это абстрактный вспомогательный метакласс, который не добавляет ни новых атрибутов и не накладываеи никаких ограничений
на вложенные метаклассы. Его предназначение - это группировка метаклассов в дереве для простоты навигации.