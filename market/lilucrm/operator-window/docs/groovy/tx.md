# Работа с транзакциями

## Выполнение кода в транзации

Для выполнения блока кода в транзакции существуют следующие методы АПИ

- `api.tx.doInTx(callback)` - выполняет блок кода в транзакции. Если код уже выполняется в рамках транзакции, то 
блок кода будет выполняться в той же транзакции, иначе будет начата новая транзакция.
- `api.tx.doInReadOnlyTx(callback)` - выполняет блок кода в транзакции, которая не подразумевает модификацию
бизнес-объектов. Если код уже выполняется в рамках транзакции, то блок кода будет выполняться в той же транзакции,
иначе будет начата новая readonly-транзакция.
- `api.tx.doInNewTx(callback)` - выполняет блок кода в новой транзакции. В отличие от `api.tx.doInTx(callback)` новая
транзакция начинается всегда.
- `api.tx.doInNewReadonlyTx(callback)` - выполняет блок кода в новой readonly-транзакции. В отличие от
`api.tx.doInReadOnlyTx(callback)` новая транзакция начинается всегда.

Пример использования:
```groovy
api.tx.doInTx {
  api.bcp.create('employee', ['lastName': 'Пупкин'])
}
```

## Получение информации о текущем статусе транзакции

- `api.tx.isReadOnly()` - возвращает true если текущая транзакция только для чтения.
- `api.tx.isCurrentTransactionActive()` - возвращает true если код выполняется в рамках транзакции.