# Выгрузка сегментов в социальные сети

В системе (_mCRM_) есть возможность выгрузки собранных сегментатором _email-ов_ в **VK** и **Facebook**.

Общая концепция такая:
1. В социальной сети создается _рекламная кампания_ `(через интерфейс социальной сети)`
2. В _рекламной кампании_ создается _реклама_ (картинки, текст и т.д.) `(через интерфейс социальной сети)`
3. В _рекламной кампании_ создается _целевая группа_ `(из mCRM)`
4. В _целевую группу_ выгружается список _email-ов_ пользователей `(из mCRM)`
5. Социальная сеть по выгруженным _email-ам_ находит пользователей `(в итоге их количество может быть значительно меньше, чем количество выгруженных email-ов)`
6. Запускается _рекламная кампания_ на _выгруженную группу_ `(через интерфейс социальной сети)`

То есть, работа из _mCRM_ включает в себя **п. 3** и **п. 4**. Для остальных пунктов нужно иметь права на _рекламную кампанию_ в социальной сети.

К кому обратиться за правами:
**VK:** shkippeer@
**Facebook:** skanyanny@

## Выгрузка в VK

Для выгрузки в **VK** необходимо иметь _аккаунт_ в **VK**, в котором включена двухфакторная аутенификация (через _смс_-подтверждение)

В интерфейсе _mCRM_ требуется выполнить следующие шаги:
1. Создать _сегмент_, на выходе которого список _email-ов_
2. Собрать _сегмент_
3. Напротив результатов сборки появится кнопка  `Выгрузить в ВК`, нажать на нее
4. Если на текущий момент вы не авторизованы в **VK**, то откроется окно авторизации в **VK**, нужно авторизоваться и разрешить права к аккаунту, которые он запрашивает (права на работу с рекламой). Далее, если форма закрылась, то снова нажать на `Выгрузить в ВК`
5. В открывшейся форме заполнить поля:
   * `Client id:` _YM_Mobile (1606780682)_ - именно в него мы выгружаем _целевые группы_
   * `Название аудитории:` _Какое-то название аудитории_ - чтобы можно было найти в рекламном аккаунте потом
6. Нажать кнопку `Выгрузить`
7. Далее следить в блоке `Выгрузки`, когда выгрузка завершится - в поле `Прогресс` будет 100%
8. После этого можно идти в кампанию в интерфейс **VK** и отправлять рекламу

## Выгрузка в Facebook

Для выгрузки в **Facebook** необходимо иметь _аккаунт_ в **Facebook**, в котором включена двухфакторная аутенификация (через _смс_-подтверждение)

В интерфейсе _mCRM_ требуется выполнить следующие шаги:
1. Создать _сегмент_, на выходе которого список _email-ов_
2. Собрать _сегмент_
3. Напротив результатов сборки появится кнопка `Выгрузить в Facebook`, нажать на нее
4. В открывшейся форме заполнить поля:
   * `Название аудитории:` _Какое-то название аудитории_ - чтобы можно было найти в рекламном аккаунте потом
   * `Описание аудитории:` _Какое-то описание аудитории_ - чтобы было понятно, что это за аудитория
   * `ACCESS_TOKEN:` токен доступа. Получить его можно на странице приложения: https://developers.facebook.com/apps/1849054712054767/marketing-api/tools/?business_id=1544456922483013. Для этого нужно выбрать галочки для `ads_read` и `ads_management` и нажать на кнопку `Получить маркер`
   После первого ввода `ACCESS_TOKEN` он сохраняется в БД, поэтому при последующих открытиях формы его можно уже не вводить.
6. Нажать кнопку `Выгрузить`
7. Далее следить в блоке `Выгрузки`, когда выгрузка завершится - в поле `Прогресс` будет 100%
8. После этого можно идти в кампанию в интерфейс **Facebook** и отправлять рекламу

