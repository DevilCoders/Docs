# Полезный код для тестирования прототипов

## Для чего это
Код campaign, отвечающий за выполнение долговременных задач, связанных с вычислениями на YT (чистые операции, yql скрипты
или CHYT) зачастую достаточно сложен для написания. В тоже время не всегда бывает очевидно каким именно путем следует решать
ту или иную задачу, т. е. не ясно _что_ должен делать наш код. Для того чтобы подобрать ответ на этот вопрос, как правило,
приходится перебирать разные подходы и сравнивать их между собой. Это можно делать, переписывая код campaign, но тогда
много времени уходит на работу со сложной логикой компонента, связанной со спецификой работы сервиса в проде. Для того
чтобы сэкономить трудозатраты, можно готовить прототипы на python и запускать их на одних и тех же заранее подобранных
данных. Поскольку основная работа выполняется на yt, становится не важно на каком языке будет написан код, запускающий
вычисления.

## Как настроить проект
Аркадийная сборка питона пока не прикручена (и есть сомнения в её полезности в нашем кейсе). Пока можно:
* убедиться что на машине установлен pip и vitrualenv
* копировать файлы из этой директории в новую директорию за пределами Аркадии
* создать в новой директории виртуальное окружение, выполнив команду `virtualenv venv`
* активировать созданное окружение: `source venv/bin/activate`
* установить необходимые зависимости:
  ```
  pip install -i https://pypi.yandex-team.ru/simple/ yandex-yt
  pip install texttable
  ```
* можно открывать новую директорию PyCharm и работать

## Как пользоваться
В данной директории лежит файл `example.py`. Он представляет собой типичный скрипт со сравнением времени работы
двух разных прототипов, выполняющих одну и ту же задачу на одних и тех же данных. Конкретно в примере сравнивается
сортировка таблиц средствами CHYT и YT-операций на данных различного объема.

Если запустить example.py он прогонит испытуемые подходы (методы) на всех подготовленных кейсах и выдаст в stdout
таблицу вида:
```
+--------+---------+---------+---------+---------+
| Method | 2k      | 1M      | 16M     | 128M    |
+--------+---------+---------+---------+---------+
| CHYT   | 0:00:04 | 0:00:04 | 0:00:31 | 0:03:33 |
+--------+---------+---------+---------+---------+
| YT     | 0:00:21 | 0:00:18 | 0:01:47 | 0:02:55 |
+--------+---------+---------+---------+---------+
```
По приведенной таблице удобно сравнивать эффективность разных подходов к сортировке на разных объемах данных.
