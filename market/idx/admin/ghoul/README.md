# market-ghoul

## Что это

`market-ghoul` - monrun-мониторинг, агрегирующий свежие корки
с интересными бинарниками.

`/etc/yandex/market-ghoul.d/*` - файлы с именами интересных бинарей
Генерируются с помощью `util/collect_binaries.py` или пишутся вручную.
Простые текстовые файлы с #-комментариями.

Рекомендация: пакет должен экспортировать файл
`$(DESTDIR)/etc/yandex/market-ghoul.d/<pkg-name>.conf`,
сгенерированный в `make all` и установленный в `make install`.

При необходимости (если в `make install` происходит переименование
или линкование бинарников, либо если не все бинарники интересны)
стоит также вручную создать файл с захардкжоенными бинарниками
`$(DESTDIR)/etc/yandex/market-ghoul.d/<pkg-name>-hardcoded.conf`
и удалить эти бинарники из глобального `hardcoded.conf`.

`/etc/yandex/market-ghoul.d/hardcoded.conf` - содержит известные
файлы, создаваемые с переименованием, которые не подцепит
`collect_binaries.py`.

Пример использования - сам `market-ghoul`.

`/etc/monrun/conf.d/yandex-ghoul.conf` - конфиг для мониторинга.

## Отладка и тестирование

В `tests/test_lib.py` лежат юнит-тесты, необходимости в разных
файлах не было.

В `tests/test_bin.py` лежат интеграционные тесты,
там также видно, как использовать дополнителные опции для отладки.
