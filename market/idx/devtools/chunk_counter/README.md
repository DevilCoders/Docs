# Описание

Инструмент для поиска объектов на YT, пригодных для высвобождения чанков(то есть объектов, состоящих из слишком
маленьких чанков). Считается, что оптимальный размер чанка - 1 ГиБ.

## Пример запуска

```bash
./chunk_counter \
--root=//home/market/production/indexer/gibson \
--proxy=arnold \
--depth=1 \
--potential_released_bound=20000 \
--ratio_bound=1000
```

## Описание аргументов

- root - название корневой для поиска директории
- proxy - название кластера, содержащего root
- depth - глубина поиска; может помочь справиться с огромным числом файлов - то есть сначала выделить проблемные
  поддиректории(например, на глубине <= 3), а после запросить подробный отчет для них
- full - флаг, при его присутствии выведутся все встреченные объекты
- ignore_dirs - флаг, при его присутствии выведутся только таблицы(без директорий)
- potential_released_bound - нижнее ограничение на количество предположительно высвобожденных чанков; это ограничение не
  жесткое — если оно не выполнено, но выполнено ограничение на ratio, то объект будет выдан
- ratio_bound - нижнее ограничение на отношение chunk_count / recommended_chunk_count}, \
  где recommended_chunk_ratio - занимаемое место на диске в ГиБ(по факту размер, деленный на оптимальный размер чанка);
  ограничение также не жесткое, и в случае выполнения ограничения на potential_released объект также будет выдан

## Описание выхода

На выходе получается таблица, где в столбцах

- object_name - относительный корня путь
- disk - размер объекта на диске
- used chunks - количество используемых сейчас чанков
- recommended chunks count - размер объекта в ГиБ(по факту размер, деленный на оптимальный размер чанка)
- ratio - отношение chunk_count / recommended_chunk_count
- potential released = used chunks - recommended chunks count
