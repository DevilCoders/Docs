# Код службы подготовки данных Маркета

## Индексатор Маркета
- [Wiki](https://wiki.yandex-team.ru/Market/Development/Indexer/)
- [Staff](https://staff.yandex-team.ru/departments/yandex_monetize_market_marketdev_index_dataprep/)
- [ABC](https://abc.yandex-team.ru/services/marketindexer/)
- [Startrek](https://st.yandex-team.ru/MARKETINDEXER)
- [Релизы](https://tsum.yandex-team.ru/pipe/projects/indexer)
- [Архитектура 2017](https://doc.yandex-team.ru/market/arch-overview/reference/idx-indexator.html)
- [Документация](https://a.yandex-team.ru/arc/trunk/arcadia/market/idx/docs)
- [Документация Офферного хранилища](https://docs.yandex-team.ru/market-datacamp/)

## Корневой каталог
- **admin/** - мониторинги, инструменты, автоматика
- **api/** - информация о данных и статусах сервисов, проверки релизов, управление данными
- **books/** - все про подготовку и индексацию книг
- **cards/** - карточки редиректов
- **categories/** - все про работу с категорийным и навигационным деревом
- **cron/** - запуск задач по крону
- **datacamp/** - офферное хранилище
- **delivery/** - основная часть кода про доставку
- **devtools/** - не участвует в продакшен процессах
- **docs/** - общая документация про индексатор
- **export/** - подготовка данных для других компонентов
- **feeds/** - обработка фидов
- **generation/** - программы для сборки частей поколения
- **input/** - получение данных из других компонентов
- **marketindexer/** - управление сборкой белых и синих поколений
- **marketplaces/** - специфика подготовки данных партнеров-маркетплейсов
- **miconfigs/** - единый конфиг индексации
- **mif/** - market indexer framework - RPC между мастером и воркерами индексации
- **mir/** - market indexer runner - тесты кода оркестрации
- **models/** - все про модели, модельный индексатор
- **offers/** - бизнес-логика обработки оферов, офферный индексатор
- **partners/** - свойства партнеров: магазинов, поставщиков, маркетплейсов
- **pictures/** - все про картинки
- **promos/** - акции, скидки, выгода
- **publication/** - раскладка
- **quick/** - все про быстрые пайпланы(общий код)
- **snippets/** - сниппетный индексатор фидов для большого поиска
- **stats/** - подготовка статистик для поиска
- **streams/** - аннотации для повышения качества поиска
- **tests/** - интеграционные тесты
- **tools/** - утилиты общего назначения для продакшен процессов
- **ugc/** - подготовка индекса для ugc
- **yatf/** - фреймворк для тестов
>
- **pylibrary/** - python библиотеки без предметной области
- **golibrary/** - golang библиотеки без предметной области
- **library/** - cpp библиотеки без предметной области


### FAQ по каталогам

- **Q:** Зачем нужны рекомендации по каталогам?
- **A:** Полезность структуры каталогов аналогична полезности стиля кода.
>
- **Q:** Какие названия не подходят для папок верхнего уровня?
- **A:** bin, services, indexers, configs, yt_blabla_cpp
>
- **Q:** Почему на верхнем уровне логика, а не сервисы?
- **A:** Объединение по предметной области позволяет локализовать изменения кода. Расположение по сервисам зависит от инфраструктуры и со временем теряет актуальность.
>
- **Q:** Почему каталог export не симметричен с import?
- **A:** Python.
>
- **Q:** Где находятся протобуфы?
- **A:** [Здесь](https://a.yandex-team.ru/arc/trunk/arcadia/market/proto/indexer)
>
- **Q:** Где находятся флэтбафферы?
- **A:** [Здесь](https://a.yandex-team.ru/arc/trunk/arcadia/market/flat/indexer)
