# vcpics_generator

map-reduce джоба для "обогащения" визуального кластера (vcluster).
Выбирает из офферов картинки и дескрипшен.

## Выбор картинок
У оффера может быть несколько картинок, у кластера несколько оферов:
picture -> offer -> cluster
Для кластера выбираем не более 10 картинок.

### Выбор картинок: главная картинка кластера
У картинки должны быть определенные размеры чтобы она стала главной.
https://a.yandex-team.ru/arc/trunk/arcadia/market/library/pictures/pictures.h?rev=3887532#L113

### Выбор картинок: хорошие магазины
Сначала берем картинки от "хороших" магазинов.
Сейчас это только 1 магазин, Ламода.
```
/var/lib/yandex/getter/mbo_stuff/recent/good-shops.xml
<good-shops>
 <shop id="62666"/>
</good-shops>
```
### Выбор картинок: детские товары
Проблема: дубликаты картинок на кластерах, которые не решаются простой фильтрацией по md5.
Решение: использовать для кластера картинки только от одного магазина.
Где: только для кластеров в категории "детские товары".

# Старые требования
<https://st.yandex-team.ru/MARKETINDEXER-1441>
<https://st.yandex-team.ru/MARKETINDEXER-2593>
