# Ограничения
Строгие проверки ВГХ включены не для всех случаев. За настройку отвечает класс [ValidationRequirements
](https://a.yandex-team.ru/arc_vcs/market/mbo/mbo-category/mbo-mdm-common/src/main/java/ru/yandex/market/mbo/mdm/common/masterdata/model/VghValidationRequirements.java)

Ограничения бывают следующих видов:
- `MdmProperties.CREATE_FORBIDDING_VERDICTS_ON_EMPTY_SHIPPING_UNIT` - общий тоггл включения / отключения таких вердиктов

- `MdmProperties.CATEGORY_IDS_CREATE_FORBIDDING_VERDICTS_ON_EMPTY_SHIPPING_UNIT` - ограничение списка категорий, где мы создаём такой вердикт. Например, можем сказать, что в категории "матрасы" мы их не делаем.

- `MdmProperties.SALES_MODELS_CREATE_FORBIDDING_VERDICTS_ON_EMPTY_SHIPPING_UNIT` - ограничение моделей бизнеса, для которых мы создаём такой вердикт. Например, можем указать, что по DBS не генерируем.

## DBS

Для DBS-офферов вердикты в целом генерятся по уникальной схеме, при этом под такие вердикты заведена одноименная Feature `DBS`.

**Случай 1** - чисто DBS-оффер (все сервисы DBSные). Тогда:

- Нет никаких фичей кроме DBS на всех частях оффера
- Все ошибки, и по базе, и по сервисам — warning (не скрывающие)

**Случай 2** - смешанный оффер (часть синие, часть DBS). Тогда:

- К стандартным фичам добавляется третий базовый вердикт по фиче DBS
- Сервисные вердикты для каждого сервиса свои, у DBSного сервиса — только DBS-фича
- Все вердикты по DBS-фиче в любых частях оффера — warning (не скрывающие)

**Случай 3** - чисто синий оффер (все сервисы не DBS). Тогда:

- DBS-фича вообще никак не фигурирует нигде


## Ограничение категорий
По состоянию на 2022-04-07 запретительные вердикты по ВГХ включены не на все категории.

Существует white-list категорий, где эти вердикты включены. Список категорий можно посмотреть в `mdm.storage_key_value` в записи `categoryIdsCreateVerdictsOnEmptyShippingUnit`.
