Мелочи и не очень
=================
- полноценная поддержка multivalue ?? как это должно быть и нужна ли? - сейчас всё склеивается хотя можно было бы набрать гипотез к отдельным значениям, но потребуется перефигачить модель данных
- фильтрация по маркетным/магазинным параметрам
- в RulesGridState.possibleValues гипотезы будут показываться везде-везде, интересно, надо ли вообще подмешивать существующие значения - просто часть данных будет не видно, которые не попали под текущий фильтр
- "не применимо" для параметров? Чтобы как-то заполнять, что да, я обработал, но нет такой инфы - иначе не получишь супер качества.
- возможно стоит в списке параметров Маркета оставлять только те, что без маппингов
- для баркодов создаётся не директ маппинг... вообще подумать про это (т.е. как гипотезы должны матчиться в правила)
- показывать единцы измерения для наших параметров - м.б. дописывать прямо к значениям
- не понятно, что такое значения магазина/маркета - надо будет как-то пояснить
- какая-то статистика по применению правил
- добавить валидацию значений по границам для числовых
- "кривая формализация"
- научиться хендлить ['https://img.best-kitchen.ru/images/products/1/1514/227567082/TW-3714.jpg', 'https://img.best-kitchen.ru/images/products/1/1515/227567083/small_box.jpg'] такие штуки в параметрах
- обработка &quot; в YML (пример black-green.xml)
- фиксация значений на уровне категорий
- дописывать единицу измерения если есть, в списке параметров при выборе в "Добавить маппинг параметров"
- информация на шаге классификации - там много в письме Саши
- искать по уникальному имени категории
- какое-то подтверждение при смене категории
+ сделать, чтобы "без маппинга" и прочее - было выше, чтобы фильтровать и категории тоже (если в категории всё с маппингом - должна пропадать)
- что-то с копированием номеров категорий (хотя пользователям это наверное лишнее)
- поиск параметров по значениям "так как я выбираю параметр магазина и вижу, что у меня есть значение «каучук", но предлагаемого параметра никакого нет, так просто пускай мне покажут все параметры, где есть значение «каучук" на Маркете и с большой долей вероятности на один из них я смпалю свой"
- надо проверить, кажется, что при реимпорте не срабатывает обновление, как минимум, названия
- при применении правил пересохраняются походу все модели (что при отсутствии батчей - фатально)
- надо всё таки сделать direct mapping-и включаемыми руками в форме редактирования
- редактирование маппингов параметров (тут надо подумать, как сохранять маппинги значений)
- создание PSKU-шаблонов на основе данных маппингов
- UI: сделать, чтобы нормально работал скрол до категории (сейчас берёт маркетовскую, а надо брать по модели)
- UI: в выборе категории показывать инфу о модели, для которой выбираем (м.б. в обобщёном виде как-то)
- сейчас скрыты системные параметры, при этом мы их учитываем при подсчёте количества
- нужен импорт в отдельном запросе, особенно, для больших файлов
- придумать какую-то хитрую раскраску блоков для проверки категорий, и м.б. - отметку, что "ок", иначе сложно двигаться, м.б. быструю смену прям тут же, м.б. как-то показывать инфо по категории, что входит, что не входит
- м.б. не сохранять модели прям сразу же, а иметь какой-то отложенный счётчик изменённых? и кнопку
- когда-нибудь надо сделать более эффективное сохранение параметров
- мелочь - прикрутить кэширование ресурсов из КИ (библиотекой? :))
- сделать полноэкранный лоадер для изменения категории, пока всё грузится
- научиться показывать описание - нужно для классификации, иначе хз что там порой
- вообще продумать вариант, как можно показывать офер/описание, чтобы удобно проверять формализацию и прочее
- научиться показывать, что и откуда формализовалось
- возможно для гипотез параметров стоит подниматься на максимально высокий уровень, чтобы сразу весь маппинг прорабатывать, не только в текущей категории... потребует хз, много
- хм, и всё таки, multi-value от разных правил - убедиться, что это работает (тестом? :))
- научиться хендлить конфликты в не multi-value параметрах (т.е. multi-value можем заполнять хоть с нескольких параметров, но если больше одного значения для остальных - показываем конфликт)
- научиться хранить на сервере rejected параметры
- красивая цветовая раскраска заполненности маркетных параметров - все фильтры/важные (интересно, как смотреть мульти-велью)
- тогда разделитель можно делать, если выбрано больше одного не multi-value параметра (например, галочки)
- придумать, что делать с кросскатегорийными отклонениями гипотез маппингов
- научиться реформализовать в новой категории
- найти вендоркод - что-то нет его в списке параметров, а надо уметь мапить
- если что-то матчится - то теоретически можно использовать гипотезы из связанных значений смапленных параметров (если у них правильно заполнено :-Р)
- многошаговый процесс, где на первом шаге можем специально сматчить правильные заголовки для особых полей
- возможность "отменять" формализацию из текстовых полей?
- какой-то хитрый быстро-выбор для полей магазина, что-то вроде "из чего получились выбранные параметры Маркета"
- когда выбираешь категорию - хочется небольшое превью того, для чего выбираешь - название, категория Маркета (хотя бы по первой позиции)
- научиться импортировать картинки из экселя (сейчас есть разметка, но при импорте она не используется)
- научиться прикапывать конфиг парсинга файла (т.е. то, что навыбирал поставщик загружая файл - сейчас это роняется на пол) - технически это на час работы - сделать табличку, репозиторий, и прикапывать конфиг в базу при импорте/брать из базы (и только если нет - считывать из файла)... можно ещё валидировать что то, что в базе актуально файлу и фолбечиться, если использованы новые колонки... это ещё на полчаса час упражнений.
- классификация
  + short-cut-ы для классификации (про подтверждение)
  - возможность найти категорию в списке
  + подтвердить все - в конце списка
  - инфа по категории поставщика (?)
  - отдельный вопрос - что делать с смапленными товарами
- для numeric правил - возможность поделить/умножить значения

- MarketValueEditor не умеет в multivalue string параметры (как и любые другие, кроме enum-ов)
- для NumericEnum параметров гипотезы надо валидировать на то, что они чиселки

Инфраструктурные вещи:
- сделать отдельный доступ для YQL для проекта
- сделать TMS-ку?
- разобраться с тестами - чтобы работали и не спамили - ту же TaskQueue, кажется, надо отключить нафиг

Задачи на фронтенд (в основном):
- возможность "редактирования" маппинга, как минимум, в части разделителя значений - особенно важно для гипотез. Из минусов - скорее всего протеряются существующие правила, но м.б. и бог с ними? (просто предупреждать)
- создание маппинга "на лету"
- наивная конвертация юнитов
- подсветка ошибок? Дипазоны?


Большие вещи:
- движок правил
- связанные параметры (вендор-линейка, вот это всё... а мы умеем так в Янге?)
- размерные сетки ?!!
- мультивелью во входных данных:
  - сейчас его нет:
    - из плюсов - в эксельке его и так нет, 
    - из минусов - нужно настраивать в каждом маппинге, 
    - и это портит/хуже работает с гипотезами
  - как его сделать
    - во-первых, нужно основательно отрефакторить код (сейчас там Map<String, String>, нужно - Map<String, List<String>>)
    - во-вторых, нужно как-то научиться разбивать в экселе прямо на входе:
      - либо на шаге разбора, но это тяжело прямо
      - либо как-то дальше донастраивать и переформализовывать

Нюансы/вопросы:
- под вопросом - конвертация ё -> е и lowercase в маппинге, но так меньше повторов - данные часто грязные, пока это есть


Что сейчас криво (после работы с сервером):
+ три раза определяется вендор
+ не обновляется название параметра в мапинге после редактирования

Идеи про то, как делать более серьёзный прототип:
- и вообще подумать, что должно быть выхлопом - good или better (м.б. сделать подсветку того, что докрутили до better?)
- на фронте возможно стоит варить данные, как для редактора, чтобы работала машинерия правил и т.п.
- вообще говоря, процедуру накладывания правил надо тащить на бэк
- сейчас shopVendor, shopBarcode отдельным полем, это вообще нужно? можно сделать обычным и тогда будет единым образом работать


Проблемные места:
- размерные сетки


- выбор магазина, как отдельный шаг
- лучше пояснения про файл и что дальше

+ степень уверенности категорий

Вопросы про маппинги:
---------------------
- внутри категории или кросскатегорийные (т.е. для всех категорий, где есть параметр)
  - внутри категории: потому что бывает, что не все значения есть или что-то ещё
  - кросс: кажется, что всякие вещи, вроде цветов и т.п., если могут применяться, то удобнее замапить раз на все категории
    - корнеркейс: может быть так, что в одной категории значение А мапится в Х, а в другой то же значение заведено, как Y и тут хз, что сделать
- надо ли сносить все гипотезы при появлении значения из правил? (кажется, что надо)
- вообще - побрейнштормить прямые маппинги
- картинки - также побрейнштормить, как делаем

  
План для того, чтобы вытащить на поставщиков:
=============================================
- нужно сделать минимальную привязку Я логина к кабинету, м.б. с каким-нибудь упрощённым вариантом - 1 неделя
- + асинхронная обработку загрузки (сейчас таймаутит) - 2 дня бэк + 1 день фронт
- возможность формирования PSKU-шаблонов (аг, бэк, фронт) - 4 дня бэк + 1 день фронт
- + сделать экран первичного маппинга колонок - колонок
- пройти аудит безопасности и выложиться наружу - 1 мес календарно, 1 неделя на мелочи, бэк
- по честному - надо ещё заехать в Аркадию - 1 неделя бэк

Что желательно сделать по функциональности:
- проработать классификацию - 5 дней фронт
- визуализация маппингов/подтверждение или создание маппингов из таблицы - 5 дней фронт, м.б. 3 дня бэк
- визуализация формализации/правила на формализацию - 3 бэк + 5 фронт
- + визуализация предложения поставщика - 1 фронт
- ну и там ещё много всего по интерфейсу и процессам
- придумать что-то внятное с размерными сетками - иначе вся одежда мимо - 5 дней фронт, 1 бэк 



Done:
==============================
(периодически сбрасываем сюда)

Баги/мелочи:
+ пока что хреново работает редактирование boolean
+ надо научиться удалять значения - если развыбрали совсем чекбокс или стёрли инт - как минимум, для boolean
+ мелочь: растянуть фильтр категорий
+ в маркетных параметрах есть только то, что формализовалось (теперь есть все)
+ цвета работают плохо - надо научиться асинк-варианту для больших списков
+ кажется, нет сортировки в опшионах
+ в чиселках нельзя поставить запятую
+ сортировка есть, но ведёт себя странновато - вроде уже норм
- SelectMultiString и компания: Multi не включает isMulti.., и потерялась типизация :(

Идеи/фичи/что поделать:
+ правила - научиться делать правила "с дырками", когда какого-то значения не хватает (сейчас это запарывает всё)
+ редактирование значений в большой табличке (с растяжкой значений (!))
+ вывод раскладки маркетных параметров х/y для всех и для
+ доделать всё же работу маппингов, чтобы применялось
+ сортировка по маркетным/магазинным параметрам
+ зависимые фильтры
+ привязка маппингов к категории
+ гипотезы параметров - видеть, что смапилось автоматически и мочь подтверждать
+ возможность менять категорию
+ сделать, чтобы применение маппингов работало в одной текущей категории и с фильтрами
+ массовое подтверждение для гипотез (или через кликалку)
+ научиться показывать матчинг
+ примеры значений, когда выбираешь параметр магазина - иначе сложно выбрать наш параметр
+ "заполнить гипотезами" для маппингов
+ "прямой маппинг" для строковых параметров
+ правильная/какая-то обработка multivalue - вроде оно норм уже отрабатывает
+ поиск по рутовым категориям в т.ч., чтобы делать большие маппинги
+ картинки
+ выбор значений Маркета, в которых что-то заполнено
+ сделать маппинги для OZON-а/WB по умолчанию, чтобы читать без изменения
+ очень хочется при ручном создании маппингов лайт-формализацию, иначе устаёшь делать тупую работу
- ~~фильтр по категории "кроме"~~ пока слишком не понятно
+ возможность показывать полную категорию Маркета
+ научиться читать YML
+ починить вёрстку при смене категории... и вообще, это работает?
+ редактирование модели через таблицу не сохраняется
+ СДЕЛАТЬ СОХРАНЕНИЕ НА СЕРВЕРЕ ДЛЯ МАППИНГОВ И МОДЕЛЕЙ!!!
+ сломалось растягивание значений в редакторе маппингов (похоже что и не работало - проблема в том, как собрать shopValues - нужны все сгенерированные псевдо-маппинги для этого)
+ возможность "отменять" нелепую формализацию (вроде кривого распознаиня объёма)
+ похоже сломалась ручная формализация параметров
+ простая поддержка multivalue от магазинов - склеивать через запятую
+ показывать уверенность классификации и возможность работы с этим
+ какой-то простой вывод информации по Маркетным значениям при создании маппинга
