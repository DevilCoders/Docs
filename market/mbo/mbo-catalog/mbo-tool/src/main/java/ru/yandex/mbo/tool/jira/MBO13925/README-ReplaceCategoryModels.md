Моменты по запуску тулзы
========================

Пример запуска: `./scripts/dev/run-tool.sh ReplaceCategoryModels http://localhost:36671/modelStorage/ --copy-sku-mappings //home/market/production/ir/ultra-controller/supplier_to_market_sku 90666,9554,12345`

Параметры:
- Первый аргумент тулы - всегда путь к хранилищу прода.
- (Не обязательный) `--copy-sku-mappings` - копировать маппинги с прода, аргумент - путь к маппингам прода. Если не поставлен - не копировать маппинги.
- Чтение списка категорий из файла: `-i <filename>` или `--from-file <filename>`.
- Пропустить некоторые категории и начать с заданной: `-s 90432` или `--start-with 90432`. Удобно, если лень менять файл с ИДшниками, но нужно продолжить упавший ранее процесс.
- Делать дополнительный ретрай в случае ошибки на категории: `-c` или `--continue-on-fail`.
- Удаление дубликатов и сирот: `--fix-duplicates-and-orphans`.
- Записать результаты `-w` или `--write-result` (Без параметра тула не сохранит изменения).

Заметки:
- http://localhost:36671/modelStorage/ - адрес modelStorage-а-источника, откуда брать модели.
  Т.к. тулзе надо коннектиться и к проду, и к тестингу (а они у нас изолированы), то при ручных запусках решал это через
  `ssh aida.market.yandex.net -R 36671:mbo-card-api.http.yandex.net:33714` - можно проделать дырки, чтобы это работало более-менее постоянно.
  Чтобы ssh-соединение не протухало со временем, рекомендую использовать autossh, держащую тоннель в бэкгроунде. Пример:
  `autossh -f -N <username>@aida.market.yandex.net -R 36671:mbo-card-api.http.yandex.net:33714 -C`. Далее коннектимся к аиде обычным ssh безо всяких тоннелей, autossh будет держать тоннель открытым за нас.
- `//home/market/production/ir/ultra-controller/supplier_to_market_sku` - адрес таблички в YT, откуда брать мапинги, тулза их пробегает и мапит на новые id sku-шек
- Ну и дальше список категорий через запятую, без пробелов. Можно указать нелистовые - тулза их раскроет. Также можно читать из файла `... -i catIds.txt`.
- Если в качестве пути к хранилищу (card-api ручка) указан адрес с localhost или 127.0.0.1, но тула не может к нему приконнектиться,
  то попробуйте заменить localhost или IP на [::1] - это может помочь на IPv6-only машинках (напр. braavos): `http://[::1]:36671/modelStorage/`.


