# Поддержка секретницы в пропертях

## Секреты из yav в пропертях
Часто у сервиса довольно много секретов. Неудобство в том, что каждый секрет нужно явно прописать в контейнере.
К тому же, необходимо следить, что бы во время релиза прописанные секреты тоже были актуальными и не забывать обновлять их.

Есть проблемы и при локальной разработке.
Для отлаживания сервиса локально, необходимо иметь свой локальный набор секретов.
Где-то нужно его хранить. Но при этом нельзя коммитить в arc, ведь тогда это уже не секрет :)

Удобно было бы ходить в секретницу прямо из сервиса. А сервису указывать лишь uuid и необходимый ключ.

Для облегчения работы с секретами в mj есть соответствующая фича.
Послее ее подключения и конфигурирования, в проперти файлах можно указывать секреты в следующем формате:
```
my_secret_property=yav:{sec-<uuid секрета>:<key>}
```
или
```
my_secret_property=yav:{ver-<uuid версии секрета>:<key>}
```
В случае, если указать uuid секрета, ключ будет браться из head версии.


## Конфигурирование
Для работы фичи нужно получить OAuth токен от секретницы и указать его в проперти (или переменной окружения) ``mj.yav.oauth-token``
Получить токен можно [здесь](https://oauth.yandex-team.ru/authorize?response_type=token&client_id=ce68fbebc76c4ffda974049083729982).

{% note warning %}

Токен для yav необходимо хранить не в коде, а в секретнице, и привозить его в контейнер оттуда

{% endnote %}

Можно включать и отключать фичу для разных окружений. Это конфигурируется через `service.yaml`.
Пример конфига:
```yaml
modules:
  yav-properties:
    env:
      local:
        enable: true
      testing:
        enable: true
```


