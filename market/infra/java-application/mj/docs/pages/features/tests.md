# Тесты

## Функциональные тесты
Для функционального тестирования в сервисе есть класс AbstractFunctionalTest, который поднимает весь контекст и запускает сервер на случайном порту.

### Тестирование ручек сервиса
Для тестирования ручек можно воспользоваться сгенерированным клиентом на собственный сервис.

Клиент на этот же сервис будет генерироваться если в тестовом ya.make прописана зависимость:
```
INCLUDE(${ARCADIA_ROOT}/market/infra/java-application/mj/${MJ_VERSION}/mj.test.ya.make)
```

Этот клиент можно использовать в тестах. Достаточно просто прописать `@Autowired` в тестовом классе запускающем полный контекст (унаследованном от `AbstractFunctionalTest`)

![](https://jing.yandex-team.ru/files/pavellysenko/Screenshot_20211125_122012.png)

{% note info %}

_Как тестовый клиент понимает на каком порту поднят сервер в тестах?_

Т.к. `AbstractFunctionalTest` запускает сервер на рандомном порту (`webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT`), то для определения этого порта генерируется так же и специальный конфиг `*ClientCreator`, который подменяет порт клиента после его определения.

{% endnote %}