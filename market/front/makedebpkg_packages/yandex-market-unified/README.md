yandex-market-unified
----------------

Фронтэнд Маркета на node.js.<br/>
Универсальная сборка всех проектов на новой платформе. Поддерживаются эксперименты.

Возможна кастомизация следующих переменных окружения(в скобках указано значение по умолчанию):

  - `rev`(master) :: ревизия в репозитории, на которую следует переключиться перед сборкой
  - `expname`:: Имя эксперимента, для экспериментальной сборки. При сборке основного пакета не нужно.

Информация о компонентах, которые каким-либо образом связаны с этим пакетом:
  - [Логи skubi][logs-link]

### Особенности
После сборки этого пакета будет собран ещё и yandex-market-unified-static, который находится в собственной папке на уровне выше.<br/>
Сборка учитывает то, что будут проводиться эксперименты. Общие конфиги для всех экспериментов лежат в основном пакете. Логика того, что нужно собирать «немного другие файлы», рядом с обычными реализована файлами с [таким содержимым](templates/init.d.service.exp.j2).<br/>
Смотри [сюда](../README.md#jinja-%D1%88%D0%B0%D0%B1%D0%BB%D0%BE%D0%BD%D0%B8%D0%B7%D0%B0%D1%86%D0%B8%D1%8F-%D0%B2-%D0%BF%D0%B0%D0%BA%D0%B5%D1%82%D0%B5), чтобы лучше ознакомиться с jinja-магией.

### Сборка пакета

К этому пакету применимы [общие инструкции по сборке](https://github.yandex-team.ru/market/packages#%D0%A1%D0%B1%D0%BE%D1%80%D0%BA%D0%B0-%D0%BF%D0%B0%D0%BA%D0%B5%D1%82%D0%BE%D0%B2).<br/>
Пакет требует указания конфига с нужными параметрами для сборки, например, `../runner -C skubi.py`. [Пример конфига](skubi.py).
### Загрузка в репозиторий

Этот пакет нужно загрузить в репозиторий [market-lucid](https://github.yandex-team.ru/market/packages#market-lucid).

Информация о том [как загружать пакеты](https://github.yandex-team.ru/market/packages#%D0%97%D0%B0%D0%B3%D1%80%D1%83%D0%B7%D0%BA%D0%B0-%D0%BF%D0%B0%D0%BA%D0%B5%D1%82%D0%BE%D0%B2-%D0%B2-%D1%80%D0%B5%D0%BF%D0%BE%D0%B7%D0%B8%D1%82%D0%BE%D1%80%D0%B8%D0%B9).

[logs-link]: https://wiki.yandex-team.ru/market/verstka/platform/maintenance/logs/
