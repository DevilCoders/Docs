# export-static

Экспортный репозиторий со статикой.

Выкладывается на ```s3``` отдельными файлами

## Как выкатить статику в прод:

1. Запускаем [джобу в Sandbox](https://sandbox.yandex-team.ru/tasks?order=-updated&type=MARKET_FRONT_BUILD_EXPORT_STATIC_ARC&hidden=true&children=true&page=1&pageCapacity=20&forPage=tasks).
2. Для запуска выбираем любую из завершенных, и нажимаем "Клонировать".
3. Выбираем ветку, изменения которой вы собираетесь выкатить
    - Например, `users/bykhovtsev/MARKETFRONTECH-4008-export-static`
    - :warning: **Никогда не указываете `trunk`** - это приведет к перезаливу вообще всех файлов на s3
4. Файл будет доступен в проде по пути `https://yastatic.net/s3/market-static/export-static/<your>/<file>/<path.ext>`
5. Вмержить свою ветку в trunk

## Notes

1. Таска игнорирует часть файлов при закачке
   - Файлы названия, которых совпадают с `readme.md` в любом регистре
   - Файлы названия, которых начинаются с `.`
   - Папка _scripts (по историческим причинам)
2. Таска смотрит только на папку `market/front/libs/export-static`
3. Таска не удаляет файлы. Удаление вообще игнорируется при её работе.
   Сейчас удаление делается руками при наличии доступа к бакету. [Тикет](https://st.yandex-team.ru/MARKETFRONTECH-4201)
4. Старые пути (`https://yastatic.net/market-export/<your>/<file>/<path.ext>`) остаются, как есть.
5. Старый пакет статики, залитый кондуктором, остаётся без изменений.
6. Новые файлы и изменения в старых перекатываются на новые пути
