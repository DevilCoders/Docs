# luster-rebundle
Плагин, позволяющий пересобирать нужные бандлы по сохранению файлов
 
## Как работает:

* Ожидается, что при запуске luster с этим плагином, проект уже полностью собран
* При запуске плагина происходит реквайр deps.js в бандле. Важно: реквайрится имя_бандла.deps.js.
 То есть, для `desktop.bundles/settings` будет реквайриться `desktop.bundles/settings/settings.deps.js`
* Зависимости бандлов парсятся и «разворачиваются»: каждому файлу ставятся в соответствии те бандлы,
 которые от него зависят
* При изменении файла, пересобираются зависящие от него бандлы

Доступны следующие опции:
```javascript
'luster-rebundle': {
    // Рабочая директория, относительно luster-rebundle/lib/
    // Обязательный параметр
    path: '../../..',
    deps: {
        // где искать бандлы, Обязательный параметр
        bundleGlob: '*.bundles*/*',
        
        // Если непустая строка, смотреть будем только на депсы бандлов, 
        // имеющих внутри эту строку (indexOf внутри).
        // Удобно, если работаешь над одним бандлом
        // Опциональный параметр.
        bundleFilter: process.env.BUNDLE, 
        
        // если зачем-то надо следить не за .deps.js. Опциональный параметр.
        suffix: '.big.deps.js',
        
        // Где найти уровни. Обязательный параметр.
        levelsPath: '.enb/levels/desktop.js'
    },

    // За изменениями каких файлов следить.
    // Суффиксы должны указываться полностью. Например, 'pre.yate.min.js'
    // Опциональный параметр. По дефолту: ['js', 'css', 'yate']
    watchSuffixes: ['js', 'css', 'bemhtml'],

    // debounce между изменениями файлов.
    // Здесь пересборка произойдёт через 2000мс после последнего изменения
    // Опциональный параметр. По дефолту — 300
    debounce: 2000,

    // Интервал опроса ФС. Обычно будет влиять на не-линукс
    // Опциональный параметр. По дефолту — 300
    interval: 300
    
    // Параметры, передаваемые enb make. 
    // Из-за особенностей парсинга аргументов, добавляются после списка бандлов
    // Опциональный параметр. По дефолту []
    enbParams: ['--no-cache']
}
```
