# Ускорение тестов

## memfs

Под капотом у jest происходит множество полезной работы.

Например, для корректной работы `jest.mock` jest часто ходит в файловую систему, что чревато увеличением времени прохождения тестов на каждом `import` или `require`. Для решения данной проблемы можно использовать in-memory файловую систему, которая будет использовать оперативную память для хранения структуры реальной файловой системы. Таким образом, вместо походов в файловую систему, jest будет "ходить" в оперативную память (по крайней мере для резолвинга путей import'ов и require'ов), что в разы быстрее.

Особо актуальна данная функциональность при работе в Аркадии, в которой время прохождения тестов может быть заметно больше, чем вне ее.

### Как это работает под капотом (для интересующихся)

In memory fs реализована с помощью библиотеки [memfs](https://www.npmjs.com/package/memfs).

На вход в testament подается карта файлов, которая далее разбирается и передается в memfs для инициализации.
