# Тестирование

## Проверка зелености автотестов

**Проверяем отсутствие регресса.**
На каждый PR создается пайплайн в [ЦУМе](https://wiki.yandex-team.ru/hr/mag/slovar/#c), содержащий прогон автотестов в тестинге и [кадавре](https://wiki.yandex-team.ru/Market/Verstka/KadavrCookBook). Отбивка о прохождении автотестов прилетает комментарием в привязанный тикет.
В каждом тикете перед тестирование разработчик должен проанализировать упавшие и сломанные кейсы следующим способом:
1. Открыть аллюровский отчет и пройтись по всем желтым и красным автотестам;
2. Если автотест упал из-за изменений в тикете, то этот автотест надо починить. Проверить это можно вручную воспроизведя кейс на стенде;
3. Если автотест упал по инфраструктурной причине (кадавр, бэк или грид затупили), то попробовать перезапустить этот тест;
4. Если автотест упал по объективной ошибке в сервисе (логика действительно поменялась, но не в этом тикете), то обновиться на свежий мастер, где это уже починено или заскипано;

## Покрытие новыми автотестами
**Делаем новые автотесты для того чтобы регресса не было в будущем.**
1. Решение о необходимости написания (или актуализации) автотестов на задачу принимает ОТ;
2. Задачи, поставленные на автотестирование, линкуются к тикету;

## Тестирование и релиз
**Проверяем вручную новый функционал и снова отсутствие регресса.**
1. Назначь задаче тестировщика (поле QA-engineer), если он не был назначен ранее;
2. Актуализируй свои ветки относительно основной ветки (п.6 из предыдущего списка);
3. Проверь, что демостенд успешно поднялся;
   3.1. Если изменения актуальны только в продовом окружении, то дополнительно создай среду в престейбл-окружении с помощью ЦУМа.
4. Переведи тикет в статус "Можно проверять" и укажи необходимые для тестирования данные: адрес хоста на демо-стенде (если автоматически созданный не подходит), потенциально затронутый функционал, которому стоит уделить особое внимание. Если в рамках задачи вносились фундаментальные изменения, можно запросить прогон и анализ регресс-тестов на демо-стенде с помощью тегов `regress_only` и `no_test`;
5. Дождись перевода тикета тестировщиком в статус "Проверено";
6. Если больше ничего не удерживает задачу от попадания в production, --заполни в тикете поле "Исправить в версиях"  Релизная очередь (например, Поддержка)-- оставь заполнение поля "Исправить в версиях" в тикете релиз-мастеру (дополнительно можно оповестить заказчика о готовности к релизу);

--7. Если по результатам планирования релиза тикет был допущен к релизу (получил конкретную релиз-версию), отправь заявку на включение задачи в релиз путём написания сообщения релиз-мастеру или в релизный чат. Но если все поля заполнены правильно и все проверки прошли, то тикет возьмут в релиз автоматически.--
7. Если по результатом тестирования тикет был допущен к релизу, то ответственный QA должен проставить статус `Можно релизить`, после чего релиз мастер при первой возможности возьмет его в релиз.
8. Тикет будет прикреплен к конкретному релизу, когда в поле `Исправить в версиях` появится версия релиза. После чего за процессом его релиза можно нужно будет следить в релизном чате и стартреке.

## Проверка задачи своими силами
В случае, если разработчик может обеспечить предварительную проверку задачи своими силами (с помощью тестов, код-ревью, ручного тестирования, прогона и анализа регрессии), то он может взять на себя ответственность и подготовить задачу к релизу без привлечения тестировщика.

Под задачи, к которым может быть применена самостоятельная проверка, обычно относятся задачи из категории "поддержка" (правки багов, минорные изменения, а также внутренние задачи, которые недоступны для проверки функциональным тестированием). В любом случае, если есть сомнения в безупречности сделанной задачи или в её побочных эффектах — зовём тестировщика на демо-стенд по описанному выше алгоритму.

Если решил проверять сам:
1. Назначь себя в поле QA-engineer;
2. Осуществи проверку (тест-кейсы и способы тестирования определяй самостоятельно);
3. Переведи тикет в статус "Проверено" и отпишись о проведенном тестировании (например: "Проверил самостоятельно на дев-машине: кейс А, кейс Б + покрыл тестами");
4. Далее — по списку выше с п.6.
