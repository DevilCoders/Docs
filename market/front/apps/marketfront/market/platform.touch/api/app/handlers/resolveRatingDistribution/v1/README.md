# Резолвер resolveRatingDistribution

## Описание

Резолвер, способный вернуть список оценок. То есть сколько людей какую оценку поставило.
Оценки приходят в формате от -2 до 2. Если, например, никто не ставил оценку -2(1), тогда никаких данных по этой оценке не придет.
Единственный обязательный параметр - `productId`
Нужно ли проверять id продукта на принадлежность к модификациям - `performProductTypeCheck` - по умолчанию false
Список оценок с учетом фильтров (определенные оценки, наличие фото и cpa) - `filter` - значения будут преобразованы в query

Ссылочки:

- [Входные параметры](https://github.yandex-team.ru/market/marketfront/blob/master/market/platform.touch/api/app/handlers/resolveRatingDistribution/v1/constraints.js)
- [Описание сущности `факторов на продукт` в проекте](https://github.yandex-team.ru/market/marketfront/blob/master/market/platform.touch/entities/productRatingDistribution/index.js)

FAQ:

> Почему оценки приниходят в формате -2 от 2, а не от 1 до 5? И возвращает такие же значения.

Так сложилось исторически. Когда-то на Маркете оценки выставляли и отображали именно так.
Поэтому к оценкам нужно делать +3, если нужна шкала [1, 5];

> Я хочу получить отзывы для модели `7873846`. На маркете отзывы есть, а фапи ничего не возвращает. Что делать?

Возможно, это просто групповая модель.

Особенность в том, что можно оставить отзыв на каждую из модификаций отдельно,
но при просмотре на фронте нужно отображать вообще все отзывы.
Поэтому отзывы для одной из модификаций нужно запрашивать не по её `productId`, а с `parentId`, который есть у этой модели.

Для этого мы подложили соломку в виде параметра `performProductTypeCheck`. Его нужно включить, если клиент не знает
(и не может узнать) тип модели. Тогда резолвер сходит и получит модель самостоятельно.
