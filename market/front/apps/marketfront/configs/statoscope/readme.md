# Проверка клиентской сборки

Для линтинга сборки используется [инструмент Statoscope](https://github.com/statoscope/statoscope).

Сборка фронта Маркета является изоморфной, то есть мы пишем один код и используем его и на сервере, и на клиенте. Однако это и слабость: иногда серверный код может проникнуть в клиентскую сборку. Скорость интерактивности сервиса зависит от размера клиентского бандла, поэтому мы не хотим, чтобы размер сборки рос.

Именно поэтому и существует эта проверка: контролировать размер и стабильность клиентской сборки.

## Что такое статы?

Webpack может собирать всю информацию о сборке в формате JSON. Подробнее можно прочитать [в документации Webpack](https://webpack.js.org/configuration/stats).

А мы в свою очередь мы используем кастомные статы, которые собирает [плагин Статоскопа](https://github.com/statoscope/statoscope/tree/master/packages/webpack-plugin).

## Как в деталях рассмотреть, почему упала проверка?

### CI

Простейшим способом узнать, что пошло не так, является GUI-интерфейс Статоскопа в CI-проверке.

### Локально
- Собрать вручную или загрузить и распаковать последние статы мастера [из Sandbox (тач по ссылке)](https://sandbox.yandex-team.ru/resources?type=MARKET_FRONT_APP_BUNDLE_STATS&limit=20&attrs=%7B%22app_id%22%3A%22market_touch%22%7D&created=7_days).
- Обновить свою ветку по мастеру.
- Собрать статы (JSON) своей ветки при помощи команды `webpack:statoscope:only-stats`.
- Загрузить статы в [веб-интерфейс Статоскопа](https://statoscope.tech), сравнить их содержимое.

## Моя фича должна сломать проверку!

В этом случае нужно:
- Починить проверку, чтобы она вновь стала зеленой
- Согласовать эти изменения с контуром Скорости
