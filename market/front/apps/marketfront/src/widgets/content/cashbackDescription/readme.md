# Описание кешбэка из CMS

Ленивый виджет, который забирает из CMS описание акции кешбэка и рендерит его.

## Как использовать
Для использования нужно
1. Добавить в слот контроллера виджет `CashacbDescriptionContentLoader`
1. Добавить во вьюху слот. Виджет должен повявится в стейте страницы, но ничего не будет рендерится (это ок)
1. В место, где предполагается рендерить описание акции кешбэка, добавить блок с id='cashback-info-tooltip'
   - пример: `<div id="cashback-info-tooltip" />`
   - актуальное значение id лежит в констарнте `CASHBACK_INFO_TOOLTIP_DOM_ID` в файле `@self/root/src/constatns/cashbackInfoTooltip`
   - такой элемент уже добавлен в компоненты `src/components/CashbackInfoTooltip`, `market/src/components/DealTerms`

## Как работает
1. Виджет `CashackDescriptionContentLoader` добавляется на страницу, вся его логика происходит на клиенте
1. Когда призодит событие показа тултипа, то:
   - виджет в эпике определяет какой `semanticId` загрузить, опираясь на коллекции с клиента
   - виджет начинает ленивую загрузку контента из CMS (виджета `CashabackDescriptionContent`, который находится в слоте) через `LazyLoader`
   - виджет рендерит свой контент (слот ленивого виджета `CashabackDescriptionContent`
   - виджет через реактовый портал отправляет отрендеренный контент в нужный тултип ( тот самый `<div id="cashback-info-tooltip" />` из инструкции "Где использовать")
   - параллельно всему этому рендерится тултип

## Особенности
- Если из CMS не пришел ответ, то рендерим статичный компонент с общим для всех кешбэков текстом (@self/root/src/components/CashbackInfoTooltip/Content - возможно, этот компонент следует перенести внутрь виджета)
- Если что-то упало (лэйзи загрузка, например), нужно отрендерить стандартное описание (@todo, это еще не реализовано!)
