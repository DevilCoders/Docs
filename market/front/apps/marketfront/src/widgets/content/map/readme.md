## Виджеты карты

В папке расположены фабричные методы для создания виджетов карты: карта, саджест, инфа по оутлету, фильтрация.
Предлагается использовать их, чтобы создавать новые виджеты карты, которые можно использовать в конкретных окружениях:
чекаут, возвраты, промо-страницы.

### Мотивация

Следующие пункты мешают сделать один виджет карты (to rule them all):
- Вьюшки отличаются в разных страницах (нужны разные компоненты)
- Вьюшки могут быть в совершенно разных местах страницы (нужны независимые виджеты)
- Цена за доставку (возврат) отличается в зависимости от контекста виджета. В чекауте она зависит от опций доставки,
в возвратах зависит от опций возврата (что есть другой тип данных вообще), в промо-страницах там вообще сводная статистика
по оутлетам. Как следствие, нужны разные контейнеры, с разным набором селекторов внутри.
Фильтрация по оутлетам тоже использует разные методы подсчета бесплатных оутлетов в зависимости от контекста

При этом делать каждый раз новый виджет карты с нуля не хочется, потому что основной костяк логики (и костылей)
одинаков между картами. Например, нажатие на оутлет вызывает зум и перемещение карты к оутлету. Большинство фильтров
переиспользуются. И т.д. и т.п.

### Реализация

В `./createGenericMapWidget` лежит хэлпер, который создает мержер виджетов.
- Первый аргумент: виджет карты, который определяет общую логику поведения карты для всех производных виджетов.
Эта логика сильно полагается на коллекцию `mapState`, однако можно определить и внутренние поля для виджета.
Обязательными являются `controller` и `connector`. Первый достает данные и генерирует `mapState`, второй - подключает
вьюшку к виджетному стору Apiary.
- Второй аргумент: виджет конкретной карты. Тут можно доопределить дополнительную логику взаимодействия
с конкретным окружением. Тут же определяется вьюшка. Можно использовать, как `connectToWidget` из Apiary,
так и `connect` из `react-redux`

Есть карированая версия хэлпера `makeGenericMapWidgetCreator`. Она позволяет создавать фабричный метод для конкретной
части карты.
