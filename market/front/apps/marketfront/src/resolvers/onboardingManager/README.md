## Резолверы Onboarding Manager'a

**resolveOnboardingToShow** - главная точка входа, это контроллер онбордингов, он решает что показать исходя из параметров, с которыми к нему пришли. В эту ручку ходят приложения и web(в будущем) для того что бы получить автоматически показываемый онбординг из очереди.

**resolveOnboardinigById** - тоже самостоятельная ручка, используется клиентами, для получения конкретного онбординга, например по клику или по диплинку.
Так как для диплинка необходимо обновлять период тишины, в него можно передать queueId, это очередь в которой будут искаться параметры/данные для патчинга онбординга (наприме, период показа).

resolveOnboardigsQueueByPageId - используется только на фапи, в качестве оптимизаций, получает все очереди на каталог(можно расширить), приложения хранят у себя комбинации hid и nid где можно делать запрос, что бы не ходить в ручку в каждой категории

## Структура CMS

В CMS заведены два типа страниц, **market_onboarding_queue** и **market_onboarding**

**market_onboarding** - хравнит UI/контент онбординга, без всяких фильтраций, тупой json

**market_onboarding_queue** - хранит сложную структуру очередей на определенную страницу

Структура страницы типа **market_onboarding_queue**:
-> Очередь на страницу
----> Параметры онбординга в очереди
-------->UI/контент онбординга на показ, semantic_id из market_onboarding и условия отображения

**Очередь на страницу**
![https://jing.yandex-team.ru/files/egorkakshin/Screenshot%202022-04-04%20at%2009.37.42.png](https://jing.yandex-team.ru/files/egorkakshin/Screenshot%202022-04-04%20at%2009.37.42.png)

Содержит в себе стандартные настройки CMS:
- связи страницы
- опцию выбора на какую страницу очередь
- сама очередь

**Параметры онбординга в очереди**
![https://jing.yandex-team.ru/files/egorkakshin/Screenshot%202022-04-04%20at%2009.43.01.png](https://jing.yandex-team.ru/files/egorkakshin/Screenshot%202022-04-04%20at%2009.43.01.png)

Идентификатор онбординга в очереди - ключевое поле, записывается в стор/куки после показа, затем передается в запросе в shownOnboardings и благодаря этому фильтруются показанные онбординги

**UI/контент онбординга на показ**
![https://jing.yandex-team.ru/files/egorkakshin/Screenshot%202022-04-04%20at%2010.07.01.png](https://jing.yandex-team.ru/files/egorkakshin/Screenshot%202022-04-04%20at%2010.07.01.png)

Идентификатор онбординга из документа **market_onboarding**
Хранит конкретный UI/контент на показ, по определенным условиям
