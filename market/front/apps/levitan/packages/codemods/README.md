## Содержание:

-   [установка](#install)
-   [использование](#usage)
-   [список кодмодов](#transforms)
-   [разработка кодмода](#develop)
-   [список хелперов для разработки](#api)

## <a name="install">Установка</a>:

В директории своего проекта выполнить

`npm install --no-save @yandex-levitan/codemods`

## <a name="usage">Использование</a>:

Список всех кодмодов можно посмотреть [здесь](#transforms) или в папке transforms.  
transforms содержит папки, которые агрегируется с названием levitan компонента, каждая из которых содержит кодмоды для перехода из какого-либо компонента на данный Levitan компонент.  
Кодмоды раелизованы с помощью [jscodeshift](https://github.com/facebook/jscodeshift).

* * *

Запуск кодмода на примере перехода из b2b-components/Button на Levitan Button:

`npx jscodeshift -t=node_modules/@yandex-levitan/codemods/transforms/Button/b2b.transform.js ./path-to-project`

По умолчанию компоненты заменяются на b2b, а именно Button будет импортироваться из @yandex-levitan/b2b/Button.  
Для импорта из другого продукта, необходимо передать параметр product:

`npx jscodeshift -t=node_modules/@yandex-levitan/codemods/transforms/Button/b2b.transform.js ./path-to-project --product=market`
// @yandex-levitan/market/Button

До начала запуска кодмода, желательно отформатировать проект eslint'ом.  
Так же это сделать по его окончанию, проблема в том, что кодмоды не придерживаются код стайла.  
По окончании трансформации файлов, необходимо пройтись по комментариям, оставленные кодмодом и решить вручную проблемные места или обратить внимание на предупреждения.

## Содержание TODO сообщений:

    TODO codemode {component}[{status}]: msg

#### Component

Наименование компонента

#### Status

-   **warn** - необходимо обратить внимание
-   **error** - необходимо поправить вручную
-   **deprecated** - компонент остался тем же, но в будущем будет заменён на другой

## <a name="transforms">Список кодмодов</a>:

<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

#### Table of Contents

-   [b2b-components/\_\_next\_\_/Button](#b2b-components__next__button)
    -   [Examples](#examples)
-   [b2b-components/Button](#b2b-componentsbutton)
    -   [Examples](#examples-1)
-   [b2b-components/Checkbox](#b2b-componentscheckbox)
    -   [Examples](#examples-2)
-   [b2b-components/Tumbler](#b2b-componentstumbler)
    -   [Examples](#examples-3)
-   [b2b-components/Tumbler](#b2b-componentstumbler-1)
    -   [Examples](#examples-4)
-   [b2b-components/Modal](#b2b-componentsmodal)
    -   [Examples](#examples-5)
-   [b2b-components/Radiobox](#b2b-componentsradiobox)
    -   [Examples](#examples-6)
-   [b2b-components/Input](#b2b-componentsinput)
    -   [Examples](#examples-7)

### b2b-components/\_\_next\_\_/Button

Функция трансформации для перехода с
[b2b-components/**next**/Button](https://github.yandex-team.ru/market/b2b-components/tree/master/src/components/__next__/Button).

#### Examples

```javascript
npx jscodeshift -t=./transforms/Button/b2b.next.transform.js ./path-to-project
```

### b2b-components/Button

Функция трансформации для перехода с
[b2b-components/Button](https://github.yandex-team.ru/market/b2b-components/tree/master/src/components/Button).

#### Examples

```javascript
npx jscodeshift -t=./transforms/Button/b2b.transform.js ./path-to-project
```

### b2b-components/Checkbox

Функция трансформации для [b2b-components/Checkbox](https://pages.github.yandex-team.ru/market/b2b-components/#checkbox).

#### Examples

```javascript
npx jscodeshift -t=./transforms/Checkbox/b2b.transform.js ./path-to-project
```

### b2b-components/Tumbler

Функция трансформации для [b2b-components/Link](https://github.yandex-team.ru/market/b2b-components/blob/master/src/components/Link/index.js).

#### Examples

```javascript
npx jscodeshift -t=./transforms/Link/transform.js ./path-to-project
```

### b2b-components/Tumbler

Функция трансформации для [b2b-components/Tumbler](https://github.yandex-team.ru/market/b2b-components/blob/master/src/components/Tumbler/index.js).

#### Examples

```javascript
npx jscodeshift -t=./transforms/Switch/transform.js ./path-to-project
```

### b2b-components/Modal

Функция трансформации для [b2b-components/Modal](https://github.yandex-team.ru/market/b2b-components/blob/master/src/components/ModalWindow/index.js).

#### Examples

```javascript
npx jscodeshift -t=./transforms/ModalWindow/transform.js ./path-to-project
```

### b2b-components/Radiobox

Функция трансформации для [b2b-components/Radiobox](https://pages.github.yandex-team.ru/market/b2b-components/#radiobox).

#### Examples

```javascript
npx jscodeshift -t=./transforms/RadioGroup/b2b.transform.js ./path-to-project
```

### b2b-components/Input

Функция трансформации для [b2b-components/Input](https://pages.github.yandex-team.ru/market/b2b-components/#input).

#### Examples

```javascript
npx jscodeshift -t=./transforms/TextField/b2b.transform.js ./path-to-project
```

## <a name="develop">Разработка кодмода</a>:

Для написание кодмодов используется [jscodeshift](https://github.com/facebook/jscodeshift).  
Для генерации функции трансформации необходимо использовать функцию [createTransform](#createtransform).

### Написание тестов:

Для тестов написан хелпер testExecute, который в nodeJS запускает функцию трансформации.  
Пример написания теста:

    const b2bTransform = require('../b2b.transform');
    const testExecute = require('@yandex-levitan/codemods/utils/testExecute');
    const path = require('path');

    describe('Button', () => {
        testExecute(
            test,
            expect,
            path.join(__dirname, 'cases', 'b2b'),
            b2bTransform,
            'path-project/Button.js'
        );
    });

Создаётся describe, в ней вызывается хелпер testExecute, который принимает глобальный переменные jest - test, expect.  
Так же директорию с тест кейсами и функцию трансформации.  
5 аргумент не обязательный - мок для file.path, который передаётся в функцию трансформации.  
Папка с кейсами должна содержать js файлы, в котором описан тест кейс:

    /* exist import levitan */
    /* from */
    import {Button} from 'b2b/components';
    import {Radio, Checkbox} from '@yandex-levitan/b2b';
    import {List} from '@yandex-levitan/b2b';

    return <Button />;

    /* to */
    import {Radio, Checkbox, Button} from '@yandex-levitan/b2b';
    import {List} from '@yandex-levitan/b2b';

    return <Button />;

Первый комментарий - название тест кейса.  
Всё что находится от комментария from до to, передаётся в функцию трансформации,
результат которого сравнивается с кодом, указанный после комментария to.

* * *

Для запуска определённого тест кейса, необходимо передать параметр --case=testCase.js

    npx jest ./transforms/Button/spec/test.js --case=usageTag.js

* * *

### Генерация документации:

**После разработки кодмода необходимо запустить генерацию документации:**

    // команда выполняется из папки codemods
    npm run doc

## <a name="api">Список утилит и хелперов для разработки</a>:

<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

#### Table of Contents

-   [addImportComponent](#addimportcomponent)
    -   [Parameters](#parameters)
-   [addToTopFile](#addtotopfile)
    -   [Parameters](#parameters-1)
-   [AttributesHelper](#attributeshelper)
    -   [Parameters](#parameters-2)
    -   [Properties](#properties)
    -   [has](#has)
        -   [Parameters](#parameters-3)
    -   [get](#get)
        -   [Parameters](#parameters-4)
    -   [set](#set)
        -   [Parameters](#parameters-5)
    -   [getType](#gettype)
        -   [Parameters](#parameters-6)
    -   [setDefaults](#setdefaults)
        -   [Parameters](#parameters-7)
    -   [rename](#rename)
        -   [Parameters](#parameters-8)
    -   [delete](#delete)
        -   [Parameters](#parameters-9)
    -   [update](#update)
        -   [Parameters](#parameters-10)
-   [Attributes](#attributes)
    -   [Parameters](#parameters-11)
    -   [Properties](#properties-1)
    -   [get](#get-1)
        -   [Parameters](#parameters-12)
    -   [set](#set-1)
        -   [Parameters](#parameters-13)
    -   [assign](#assign)
        -   [Parameters](#parameters-14)
    -   [has](#has-1)
        -   [Parameters](#parameters-15)
    -   [delete](#delete-1)
        -   [Parameters](#parameters-16)
    -   [createArray](#createarray)
-   [checkEqualAst](#checkequalast)
    -   [Parameters](#parameters-17)
-   [comment](#comment)
    -   [Parameters](#parameters-18)
    -   [Examples](#examples)
-   [CreatorTransform](#creatortransform)
    -   [Parameters](#parameters-19)
    -   [processingSpecFiles](#processingspecfiles)
        -   [Parameters](#parameters-20)
    -   [toSource](#tosource)
-   [createTransform](#createtransform)
    -   [Parameters](#parameters-21)
-   [findImportSpecifiers](#findimportspecifiers)
    -   [Parameters](#parameters-22)
-   [forEach](#foreach)
-   [getJsxAttributeContent](#getjsxattributecontent)
    -   [Parameters](#parameters-23)
-   [getJsxAttributeValue](#getjsxattributevalue)
    -   [Parameters](#parameters-24)
-   [isLiteral](#isliteral)
    -   [Parameters](#parameters-25)
-   [jsxUpdateProps](#jsxupdateprops)
    -   [Parameters](#parameters-26)
-   [arrayStrategy](#arraystrategy)
    -   [Parameters](#parameters-27)
-   [prepareAttributeValue](#prepareattributevalue)
    -   [Parameters](#parameters-28)
-   [setJsxAttributeValue](#setjsxattributevalue)
    -   [Parameters](#parameters-29)
-   [Tasks](#tasks)
    -   [Properties](#properties-2)
    -   [add](#add)
        -   [Parameters](#parameters-30)
    -   [run](#run)
        -   [Parameters](#parameters-31)
    -   [next](#next)
        -   [Parameters](#parameters-32)
    -   [stop](#stop)
-   [TransformTasks](#transformtasks)
    -   [Properties](#properties-3)
    -   [run](#run-1)
        -   [Parameters](#parameters-33)
-   [template](#template)
    -   [Parameters](#parameters-34)
    -   [Examples](#examples-1)
-   [testExecute](#testexecute)
    -   [Parameters](#parameters-35)
-   [wrapJSX](#wrapjsx)
    -   [Parameters](#parameters-36)
    -   [Examples](#examples-2)

### addImportComponent

Добавляет импорт какого-либо компонента, проверяет не заимпорчен ли он уже,
 проверяет нет ли под таким же nameSpace другого импорта, в таком случае добавляет postfix к названию

#### Parameters

-   `component` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** Наименование компонента
-   `importSpecifiers` **[Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array)** Описание спецификации импорта
-   `root` **[Node](https://developer.mozilla.org/docs/Web/API/Node/nextSibling)** Ссылка на корневой AST
-   `j` **jscodeshift** api jscodeshift
-   `postfix` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** Добавляемый postfix, в случае если такой nameSpace уже используется в импорте (optional, default `'Deprecated'`)

Returns **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** NameSpace добавленного компонента

### addToTopFile

Добавляет что-то в начало документа после комментариев

#### Parameters

-   `addElement` **[Node](https://developer.mozilla.org/docs/Web/API/Node/nextSibling)** Элемент
-   `root` **[Node](https://developer.mozilla.org/docs/Web/API/Node/nextSibling)** Ссылка на корневой AST
-   `j` **jscodeshift** API jscodeshift

### AttributesHelper

Коллекция-хелпер для работы с атрибутами и их значениями.
Для передачи изменений в элемент используется метод update.

#### Parameters

-   `jsxElement` **JsxElement?** элемент из которого будут извлечены атрибуты.
-   `j` **jscodeshift** API jscodeshift

#### Properties

-   `spreadAttributes` **[Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array)&lt;JsxSpreadAttribute>** массив спред-атрибутов.

#### has

Возвращает true, если аттрибуты с указанными именами есть в коллекции.

##### Parameters

-   `names` **...[Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array)&lt;[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)>** имена аттрибутов.

Returns **[boolean](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean)** 

#### get

Возвращает значение атрибута; при необходимости извлекает его из JSXExpressionContainer.

##### Parameters

-   `name` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** имя атрибута.

Returns **([Node](https://developer.mozilla.org/docs/Web/API/Node/nextSibling) \| [undefined](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/undefined))** 

#### set

Задает значение атрибута; при необходимости упаковывает его в JSXExpressionContainer;
если аттрибута с таким именем нет в коллекции, добавляет его.

##### Parameters

-   `name` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** имя атрибута.
-   `newValue`  

Returns **JsxAttribute** 

#### getType

Возвращает тип аттрибута или undefined, если аттрибута нет.

##### Parameters

-   `name` **[name](https://developer.mozilla.org/)** имя атрибута.

Returns **([string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String) \| [undefined](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/undefined))** 

#### setDefaults

Запоминает переданные default значения атрибутов; добавляет их при необходимости во время запуска update;
работает как set.

##### Parameters

-   `defaults` **[object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)** Словарь имен атрибутов и их значений.
-   `callback` **[function](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function)?** 

#### rename

Меняет имя аттрибута.

##### Parameters

-   `name` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** старое имя атрибута.
-   `newName` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** новое имя атрибута.

#### delete

Удаляет аттрибут из коллекции.

##### Parameters

-   `name` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** имя атрибута.

#### update

Обновляет аттрибуты элемента; если элемент не передан, работает с элементом полученном в конструкторе.

##### Parameters

-   `el`  
-   `element` **JsxElement?** элемент.

### Attributes

Коллекция аттрибутов

#### Parameters

-   `attributes` **[Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array)&lt;JsxAttribute>?** массив аттрибутов.

#### Properties

-   `spreads` **[Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array)&lt;JsxSpreadAttribute>** массив спред-атрибутов.

#### get

Возвращает атрибут

##### Parameters

-   `name` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** имя атрибута.

Returns **(JsxAttribute | [undefined](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/undefined))** 

#### set

Назначает значение аттрибута

##### Parameters

-   `name` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** имя атрибута.
-   `value` **[Node](https://developer.mozilla.org/docs/Web/API/Node/nextSibling)** значение.

#### assign

Добавляет аттрибут(ы) в коллекцию; аттрибут с тем же именем будет заменен.

##### Parameters

-   `jsxAttributes` **...any** 
-   `attributes` **...[Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array)&lt;JsxAttribute>** массив аттрибутов.

#### has

Возвращает true, если аттрибуты с указанным именеми есть в коллекции.

##### Parameters

-   `names` **...[Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array)&lt;[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)>** имена аттрибутов.

Returns **[boolean](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean)** 

#### delete

Удаляет атрибут с указанным именем из коллекции.

##### Parameters

-   `name` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** имя аттрибута.

#### createArray

Возвращает массив атрибутов (включая спред-атрибуты).

Returns **[Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array)&lt;JsxAttribute>** 

### checkEqualAst

Возвращает логическое значение, показывающее одинаковы ast или нет.
Проверка осуществляется сравнением всех свойств до первого несовпадения.

#### Parameters

-   `asts` **[Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array)&lt;[Node](https://developer.mozilla.org/docs/Web/API/Node/nextSibling)>** масcив ast
-   `ignoreArr` **[Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array)&lt;[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)>?** масcив игнорируемых свойств (optional, default `[]`)

Returns **[boolean](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean)** 

### comment

Добавляет комментарий перед node.

#### Parameters

-   `node` **[Node](https://developer.mozilla.org/docs/Web/API/Node/nextSibling)** Ссылка на Node в AST
-   `text` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** Текст комментария
-   `j` **jscodeshift** API jscodeshift
-   `report` **[function](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function)** Вывод строки в stdout

#### Examples

```javascript
addComment(node, 'comment', j);
```

### CreatorTransform

Класс для создания функции трансформации.

#### Parameters

-   `$0` **[Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)** 
    -   `$0.api`  
    -   `$0.file`  
    -   `$0.updateProps`  
    -   `$0.component`  
    -   `$0.name`  
    -   `$0.importSpecifiers`  
    -   `$0.specResolver`  
    -   `$0.componentNameLevitan`  
    -   `$0.deprecatedProps`  
    -   `$0.requiredProps`  
    -   `$0.renamedProps`  
    -   `$0.deletedProps`  
-   `api` **jscodeshift** Api jscodeshift
-   `file` **[object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)** Описание входного файла для трансформации.
-   `updateProps` **[function](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function)** Функция для процесса преобразования найденных JSX элементов.
-   `component` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** Наименование заменяемого компонента.
-   `name` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** Название кодмода, используется в комментариях(TODO codemode {name}).
-   `importSpecifiers` **[object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)** Варианты импорта.
-   `specResolver` **[object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)** Замена resolve в e2e тестах.
-   `componentNameLevitan` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** Наименование компонента в Levitan.
    Например, если заменяем Tumbler на Switch, то component: 'Tumbler', а componentNameLevitan: 'Switch'.
    Все вхождения Tumbler будут автоматически заменены на Switch, как в JSX, так и в imports.

#### processingSpecFiles

Замена imports и resolve в тестах

##### Parameters

-   `specResolver` **[object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)** Замена resolve в e2e тестах.
    -   `specResolver.from` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** Вариант вхождения.
    -   `specResolver.to` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** Замена вхождения.

#### toSource

Замена imports и resolve в тестах

Returns **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** Исходный код преобразованного файла

### createTransform

Хелпер для создания функции трансформации.

#### Parameters

-   `args`  
-   `updateProps` **[function](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function)** Функция для процесса преобразования найденных JSX элементов.
-   `component` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** Наименование заменяемого компонента.
-   `name` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** Название кодмода, используется в комментариях(TODO codemode {name}).
-   `importSpecifiers` **[object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)** Варианты импорта.
    -   `importSpecifiers.default` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** Вариант default импорта.
    -   `importSpecifiers.named` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** Вариант именованного импорта.
-   `specResolver` **[object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)** Замена resolve в e2e тестах.
    -   `specResolver.from` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** Вариант вхождения.
    -   `specResolver.to` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** Замена вхождения.
-   `componentNameLevitan` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** Наименование компонента в Levitan.
    Например, если заменяем Tumbler на Switch, то component: 'Tumbler', а componentNameLevitan: 'Switch'.
    Все вхождения Tumbler будут автоматически заменены на Switch, как в JSX, так и в imports.

### findImportSpecifiers

Поиск импортов

#### Parameters

-   `component` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** Наименование компонента
-   `importSpecifiers` **[object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)** Варианты импорта.
    -   `importSpecifiers.default` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** Вариант default импорта.
    -   `importSpecifiers.named` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** Вариант именованного импорта.
-   `root` **[Node](https://developer.mozilla.org/docs/Web/API/Node/nextSibling)** root AST
-   `j` **jscodeshift** api jscodeshift

Returns **[Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array)&lt;Collection>** Коллекция найденных вхождений

### forEach

root.find сравнивает имена свойств, но мы не знаем индексы искомых specifier'ов в массиве.
Поэтому фильтруем сами:

### getJsxAttributeContent

Возвращает value объекта JSXAttribute; при необходимости распоковывает из JSXExpressionContainer

#### Parameters

-   `attr` **JSXAttribute** ссылка на атрибут

Returns **Expression** 

### getJsxAttributeValue

Возвращает нормализованное значение атрибута,рассматривает варианты когда атрибут как Liter(x="value"
 и когда обёрнут в ExpressinContainer(x={'value'}) и его значение является Literal

#### Parameters

-   `attr` **JSXAttribute** Ссылка на описание атрибута в AST

Returns **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** 

### isLiteral

Проверяет имеет ли node тип Literal; учитывает все развновидности Literal

#### Parameters

-   `node` **[Node](https://developer.mozilla.org/docs/Web/API/Node/nextSibling)** 

Returns **[boolean](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean)** 

### jsxUpdateProps

Возвращает нормализованное значение атрибута, рассматривает варианты когда атрибут как Liter(x="value")
 и когда обёрнут в ExpressinContainer(x={'value'}) и его значение является Literal

#### Parameters

-   `attr` **JSXAttribute** Ссылка на описание атрибута в AST
-   `name` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** наименование атрибута, на которое заменится
-   `value` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** значение атрибута, на которое заменится
-   `j` **jscodeshift** api jscodeshift

### arrayStrategy

Рекурсивно парсит ObjectExpression и ArrayExpression; не поддерживает вычисляемые свойства (возвращает undefined)

#### Parameters

-   `objectExpression` **(ObjectExpression | ArrayExpression)** 

Returns **([Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object) \| [Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array) \| [undefined](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/undefined))** 

### prepareAttributeValue

Подготавливает значение для присвоения аттрибуту:
при необходимости превращает в Literal и/или оборачиват в JSXExpressionContainer

#### Parameters

-   `value` **(Expression | [String](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String) \| [Number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number) | null | [undefined](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/undefined))** значение атрибута
-   `j` **jscodeshift** api jscodeshift

Returns **(JSXExpressionContainer | Literal)** 

### setJsxAttributeValue

Заменяет value объекта JSXAttribute; при необходимости превращает в Literal и/или оборачиват в JSXExpressionContainer

#### Parameters

-   `attr` **JSXAttribute** ссылка на атрибут
-   `value` **Expression** новое значение атрибута
-   `j` **jscodeshift** api jscodeshift

### Tasks

Очередь задач

#### Properties

-   `currentTaskName` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** имя текущей задачи.

#### add

Создает задачу. Задачи выполняются синхронно в порядке их добавления.

##### Parameters

-   `taskName` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** имя задачи
-   `func` **function (data)** задача; принимает хранимые данные

Returns **[Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)** возвращаемый объект будет смерджен с хранимыми данными

#### run

Запускает выполнение очереди задач.

##### Parameters

-   `data` **[Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)?** данные для хранения. (optional, default `{}`)

#### next

Прерывает (на любом уровне вложенности вызова) выполнение текущей задачи и переводит к выполнению следующей.

##### Parameters

-   `data` **[Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)?** объект, который будет смерджен с хранимыми данными.

#### stop

Прерывает (на любом уровне вложенности вызова) выполнение всех задач.

### TransformTasks

**Extends Tasks**

Добавляет в Tasks байнд CreateTransform.prototype.comment. Имя задачи будет использовано как основа для комментария.

#### Properties

-   `comment` **[Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)** объекта аналогичный CreateTransform.prototype.comment;
    содержит функции типа (message: string, title?: string) => void; если title не указан,
    будет использовано название текущей задачи (currentTaskName).
-   `currentTaskName` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** имя текущей задачи.

#### run

Запускает выполнение очереди задач.

##### Parameters

-   `data` **[Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)** данные для хранения.
    -   `data.t` **[Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)** this из CreateTransform.
    -   `data.node` **[Node](https://developer.mozilla.org/docs/Web/API/Node/nextSibling)** cсылка на Node обрабатываемого элемента.

### template

Сахар для @babel/template; автоматически подставляет аргументы

#### Parameters

-   `code` **[Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array)&lt;[String](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)>** код шаблона
-   `args` **[Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array)&lt;([Node](https://developer.mozilla.org/docs/Web/API/Node/nextSibling) \| [String](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String) \| [Number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number) \| [Boolean](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean) | null)>** значения для подстановки

#### Examples

```javascript
template`(() => {${condStatements}})()`
```

Returns **[Node](https://developer.mozilla.org/docs/Web/API/Node/nextSibling)** 

### testExecute

Хелпер для запуска функций трансформации в тестах

#### Parameters

-   `test` **[function](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function)** test из jest
-   `expect` **[function](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function)** expect из jest
-   `casesDir` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** Директория с тест кейсами
-   `transform` **[function](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function)** Функция трансформации
-   `mockPath` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** Строка, мокирует директорию, передаваемый в функцию трансформации в file.path

### wrapJSX

Оборачивает компонент в другой компонент, переносит указанные аттрибуты на родительский.

#### Parameters

-   `node` **[Node](https://developer.mozilla.org/docs/Web/API/Node/nextSibling)** Ссылка на JSXElement в AST, который нужно обернуть
-   `wrapElement` **JSXElement** JSXElement в который хотим обернуть
-   `moveAttributes` **[Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array)&lt;[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)>** список аттрибутов, которые нужно перенести

#### Examples

```javascript
wrapJSX(
node,
j.jsxElement(
j.jsxOpeningElement(j.jsxIdentifier('Link')),
j.jsxClosingElement(j.jsxIdentifier('Link')),
),
['href', 'onClick'],
);
```
