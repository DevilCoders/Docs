# Shared

О том, что используется и на клиенте, и на сервере.

В этой папке должен лежать полностью изоморфный код, который не должен сломаться при запуске в браузере или nodejs. Другими словами **нельзя** обращаться к `window` или к встроенным модулям nodejs, таким как `fs`, `util` и другим.

- [библиотека функций](#Библиотека-функций)
- [система типов](#Система-типов)

## Библиотека функций

Сейчас мы повсеместно используем `ramda`.

- [docs](http://ramdajs.com/docs)

## Система типов

Используем `flow`.

- [docs](https://flow.org/en/docs/)

Tips:

- `flow-typed` декларации общие на Маркет и хранятся [тут](https://github.yandex-team.ru/market/declarations)

- [Подсказки по типам](https://www.saltycrane.com/cheat-sheets/flow-type/v0.83.0/)

- Набор хелперов для типов: [flown](https://github.com/lttb/flown)

- Максимально избегаем настолько общих типов как `Object, any, Function, *`, потому что большого смысла в такой типизации нет. Например, в случае с хендлерами, не забываем про типизацию событий (чем точнее, тем лучше) и HTML-элементов.

- Всегда описываем возвращаемый тип функции, не смотря на то что flow в состоянии его вывести самостоятельно, такой тип будет выступать в роли `guard`'а и когда разработчик допустит ошибку, он увидит что ошибка была максимально рядом с её источником, вместо совершенно другого файла, где автовывод типов не сошелся.

- Стабы для ошибок должны содержать комментарий почему ошибка должна быть подавлена

```js
$FlowIgnore<'почему ты это игноришь?'>


$ExpectError<'почему ошибка ожидаема?'>


$FlowFixMe<'не получилось починить ошибку, не хватает поля foo'>
```

\#tip-of-the-day завести сниппеты с заготовками для stub'ов
