# Ресурс /role

## GET /licensors/[licensorId]/role/[role]

Возвращает список пользователей, обладающих указанной ролью для заданного лицензиара

### Примечания
  - **licensorId** `<ID>` лицензиара
  - **role** `<String>` имя роли, которая может быть назначена через кабинет вендора или менеджера, подмножество [этого списка](https://github.yandex-team.ru/market/vendors-api-spec/tree/master/roles/enums#authorities), разрешенное для лицензиара
  - Используется при создании/редактировании карточки лицензиара
  - Ручка доступна обоим менеджерам, суппорту и админу лицензиара
  - Ручка доступна админу лицензиара только после принятия оферты

### Параметры
  - **uid** `<UID>` пользователя от которого идет запрос, авторизация
  
### Ответ
  - **meta** `<Object>`
  - result `<Object>`
    - **item** `<Object>`
      - **users** `<Array[Object]>` - список пользователей
        - **uid** `Number` - User ID
        - **login** `String` - Логин из паспорта
  - errors `<Error[]>`

### Ошибки

#### [Стандартные](https://github.yandex-team.ru/market/vendors-api-spec#Стандартные-ошибки)
#### [Неверные параметры вызова](https://github.yandex-team.ru/market/vendors-api-spec#Неверные-параметры-вызова)
  - Попытка вывести пользователей для роли, которая не редактируется через API или не разрешена лицензиарам
  - Оферта не принята, вызов запрещен
#### [Нет такого лицензиара](https://github.yandex-team.ru/market/vendors-api-spec#Несуществующий-объект-данных)
  - Попытка вывести пользователей для несуществующего лицензиара (Licensor with specified ID not found)
  
## PUT /licensors/[licensorId]/role/[role]

Устанавливает список пользователей, обладающих указанной ролью для заданного лицензиара

### Примечания
  - **licensorId** `<ID>` лицензиара
  - **role** `<String>` имя роли, которая может быть назначена через кабинет вендора или менеджера, подмножество [этого списка](https://github.yandex-team.ru/market/vendors-api-spec/tree/master/roles/enums#authorities), разрешенное для лицензиара
  - Ручка выдает роль для пользователей, переданных в данных и отнимает роли у прочих. 
  - Используется при создании/редактировании карточки лицензиара и работает по принципу "все или ничего": либо всему набору переданных пользователей будет установлена роль, либо, в случае возникнования ошибок, сохраняется текущий набор.
  - Ручка доступна менеджеру, суппорту и админу лицензиара
  - Ручка доступна суппорту только если у лицензиара не назначен менеджер
  - Ручка доступна админу лицензиара только после принятия оферты

### Параметры
  - **uid** `<UID>` пользователя от которого идет запрос, авторизация
  
### Данные
  - **logins** `<Array[String]>`: список логинов или uid пользователей, которые должны иметь данную роль.

### Ответ
  - **meta** `<Object>`
  - result `<Object>`
    - **item** `<Object>`
      - **users** `<Array[Object]>` - список юзеров
        - **uid** `Number` - User ID
        - **login** `String` - Логин из паспорта
  - errors `<Error[]>`

### Ошибки

#### [Стандартные](https://github.yandex-team.ru/market/vendors-api-spec#Стандартные-ошибки)
#### [Неверные параметры вызова](https://github.yandex-team.ru/market/vendors-api-spec#Неверные-параметры-вызова)
  - Попытка назначить или отнять роль, которая не редактируется через API (These roles can't be granted or revoked programmatically via API)
  - Попытка назначить или отнять роль, не разрешенную иметь лицензиарам (<role> role can be granted or revoked for licensor). Сейчас лицензиару доступны только роли админ и управленец контентом.
  - Попытка назначить или отнять админскую роль с авторизацией отличной от менеджера
  - Редактирование роли для UID от лица того же UID (UID can't grant or revoke own roles)
  - Оферта не принята, вызов запрещен
#### [Нет такого лицензиара](https://github.yandex-team.ru/market/vendors-api-spec#Несуществующий-объект-данных)
  - Попытка выдать роль для несуществующего лицензиара (Licensor with specified ID not found)
#### Попытка суппортом изменения ролей карточки с назначенным менеджеров
  - statusCode: `403`
  - code: `UNAUTHORIZED`
  - message: Support is not allowed to modify roles for licensor with linked manager 
