# Ресурс /vendors

## POST /vendors

Создание новой карточки вендора

### Примечания
  - *В разных карточках не может быть одинаковой пары categories[n].id и brand.id*  

### Параметры
  - **uid** `<UID>` - обязательный параметр для аутентификации

### Данные
  - **title** `<String>` - отображаемое имя карточки
    - *выводится в верхней шапке в выпадающем списке*
    - *является уникальным как среди вендоров, так и лицензиаров и может служить для идентификации и поиска карточки*
  - **company** `<String>` - юр лицо
  - **brand** `<Object>`- бренд
    - **id** `<Integer>` - идентификатор бренда, для которого заведена карточка
  - categories `<Array[Object]>` - категории (для этого бренда), к которым относится эта карточка
    - **id** `<Integer>`
    - name `<String>` - "имя" (путь) категории одной строкой. Игнорируется.
  - **address** `<String>` - адрес юр лица
  - **name** `<String>` - контактное лицо
  - **phone** `<Phone>` - контактный телефон
  - **email** `<Email>` - контактный e-mail
  - entryId `<Integer>` - идентификатор заявки, из которой создана карточка (если она создана из заявки)
  - **offer** `<Boolean>` - маркер того работает ли вендор по оферте или нет, если offer = True, то карточка обязательно должна создаваться из заявки, то есть entryId должен быть указан
  - documents [`<Array[Document]>`](/_entities/documents/Document.md) - список документов, подтверждающих право принятия оферты, обязательны для вендоров, работающих по оферте 
  - site `<String>` - ссылка на официальный сайт бренда; если не пустая, то будет использована для автоматического заведения заявки 
    на редактирование бренда при несовпадении с имеющейся ссылкой из MBO 

### Ответ
  - **meta** `<Object>`
  - result `<Object>`
    - **item** `<Object>`
      - **vendorId** `<Integer>` - идентификатор вновь созданной карточки вендора
      - **title** `<String>` - отображаемое имя карточки
        - *выводится в верхней шапке в выпадающем списке*
        - *является уникальным как среди вендоров, так и лицензиаров и может служить для идентификации и поиска карточки*
      - **company** `<String>` - юр лицо
      - **brand** `<Object>`- бренд
        - **id** `<Integer>` - идентификатор бренда, для которого добавлена услуга
        - **name** `<String>` - название бренда, для которого добавлена услуга
      - categories `<Array[Object]>` - категории (для этого бренда), к которым относится эта услуга
        - **id** `<Integer>` - идентификатор категории
        - path `Array[String]` - "путь" категории (не более 4-х последних элементов). Последний элемент - имя самой категории.
        - name `<String>` - элементы коллекции "path" склеенные по `/`. (Присутствует, если есть "path".)
      - **address** `<String>` - адрес юр лица
      - **name** `<String>` - контактное лицо
      - **phone** `<Phone>` - контактный телефон
      - **email** `<Email>` - контактный e-mail
      - **entryId** `<Integer>` - ID заявки, из которой была создана карточка
          - *Хранится для возможности восстановления истории создания карточки*
          - *0, если карточка была создана не из заявки, а напрямую*
      - **offer** `<Boolean>` - маркер того работает ли вендор по оферте или нет
      - documents [`<Array[Document]>`](/_entities/documents/Document.md) - список документов оферты, обязательны для вендоров, работающих по оферте 
      - **secretKey** `<String>` - секретный ключ вендора
  - errors `<Error[]>`

### Ошибки

#### [Стандартные](https://github.yandex-team.ru/market/vendors-api-spec#Стандартные-ошибки)
#### [Неверные параметры вызова](https://github.yandex-team.ru/market/vendors-api-spec#Неверные-параметры-вызова)
 - Ошибка с нарушением уникальности тайтла будет обработана здесь с кодом `ALREADY_EXISTS`
#### [Ошибки работы с документами](/_rules/documents/DocumentErrors.md)

#### Не указано ни одной категории
  - statusCode: `400`
  - code: `EMPTY_CATEGORIES`
  - message: `Vendor categories cannot be empty!`

#### Коллизия категорий
  - statusCode: `400`
  - code: `INVALID_CATEGORIES`
  - message: ???
  - details: словарь с ключом campaign.id (может быть несколько кампаний/карточек)
    - [key `=campaign_id`]: [ value:  `<Object>`] - ключ это id карточки, с которой коллизия
      - title - отображаемое имя карточки, с которой коллизия
        - нужно для вывода сообщения об ошибке
      - categories `<Array[Integer]>` - список id повторяющихся категорий (для этой пары карточке)
        - id `<Integer>` - идентификатор повторяющейся категории
        
#### [Попытка создать офертного вендора, который не принял оферту](https://github.yandex-team.ru/market/vendors-api-spec#Неверные-параметры-вызова)
#### [Попытка создать контрактного вендора, который принял оферту](https://github.yandex-team.ru/market/vendors-api-spec#Неверные-параметры-вызова)

##### Примечания
  - [Правила работы с документами](/_rules/documents/DocumentRules.md#postинг)
  - [Правила работы с документами в "оферте"](/_rules/documents/OfferDocumentRules.md)

## GET /vendors

Получение списка карточек вендоров

### Примечания
  - Выдаёт только идентификаторы вендоров, названия и ID связанного бренда
    - Данные вендоров нужно получать запросами [GET /vendors/[vendorId]](https://github.yandex-team.ru/market/vendors-api-spec/tree/master/vendors/%5BvendorId%5D#get-vendorsid)

### Параметры
  - **uid** `<UID>` - обязательный параметр для аутентификации
  - text `<String>` - полнотекстовый поиск по заявке и ID бренда
  - manager `<String>` - UID или логин менеджера, чьих вендоров нужно отобразить
  - [Параметры пагинации](/_entities/Pager.md#Параметры)

### Ответ
  - **meta** `<Object>`
  - result `<Object>`
    - **item** `<Object>`
      - **pager** [`<Pager>`](/_entities/Pager.md)
      - **items** `<Array[Object]>`
        - **id** `<Integer>` - идентификатор вендора
        - **title** `<String>` - отображаемое имя карточки (уникальное)
        - **brand** [`<Brand>`](/_entities/Brand.md) - составной объект бренда
  - errors `<Error[]>`

### Ошибки

#### [Стандартные](https://github.yandex-team.ru/market/vendors-api-spec#Стандартные-ошибки)

