# Ресурс /vendors/[vendorID]/reports/stats

## GET /vendors/[vendorID]/reports/stats/[key]

Получение отчётов.

### Пермишены
`vnd:reports:read`

### Возможные значения `[key]`:
1. `category-clicks` — отчёт «Динамика категории - клики». Отчёт по количеству кликов для бренда в категории за месяц в течении указанного года и в указанном регионе.
2. `category-sales` — отчёт «Динамика категории - заказы». Отчёт по количеству заказов (CPA-кликов) для бренда в категории за месяц в течении указанного года и в указанном регионе.
3. `category-clicks-competition` — отчёт «Динамика категории - конкурентные клики». Отчёт по кол-ву кликов бренда в категории за месяц в течении указанного года и в указанном регионе.
4. `category-sales-competition` — отчёт «Динамика категории - конкурентные заказы». Отчёт по кол-ву заказов (CPA-кликов) бренда в категории в категории за месяц в течении указанного года и в указанном регионе.
5. `category-clicks-ratio-competition` — отчёт «Динамика категории - конкурентная доля кликов». Отчёт по соотношению кликов бренда ко всем кликам в категории за месяц в течении указанного года и в указанном регионе.
6. `category-sales-ratio-competition` — отчёт «Динамика категории - конкурентная доля заказов». Отчёт по соотношению заказов (CPA-кликов) бренда ко всем заказам в категории за месяц в течении указанного года и в указанном регионе.
7. `category-clicks-ratio-competition-snapshot` — отчёт «Доля кликов за один месяц». Отчёт по соотношению кликов бренда ко всем кликам в категории за указанный месяц в указанном регионе.
8. `category-model-top100-clicks-snapshot` — отчёт «Карта конкуренции - клики». Отчёт по 100 самым CPC-кликабельным моделям в указанных категории и регионе, независимо от бренда. 
9. `category-model-top100-sales-snapshot` — отчёт «Карта конкуренции - заказы». Отчёт по 100 самым CPA-кликабельным моделям в указанных категории и регионе, независимо от бренда. 
10. `category-model-top10-global-clicks-snapshot` — отчёт «Топ 10 моделей категории по кликам». Отчёт по 10 самым кликабельным моделям в указанных категории и регионе, независимо от бренда. 
11. `category-model-top10-clicks-snapshot` — отчёт «Топ 10 моделей бренда по кликам». Отчёт по 10 самым CPC-кликабельным моделям указанного бренда, в указанных категории и регионе. 
12. `category-model-top10-sales-snapshot` — отчёт «Топ 10 моделей бренда по кликам». Отчёт по 10 самым CPA-кликабельным моделям указанного бренда, в указанных категории и регионе. 

Будет пополняться.

### Параметры
  - **uid** `<UID>` - ID пользователя
  - **categoryId** `<Integer>` - ID категории
  - **region** `<Integer>` - ID региона (в отчёт будут включены все подрегионы этого региона)
  - **from** [`<DateTime>`] - дата, идентифицирующая год, за который строим отчёт (любая с 1 января по 31 декабря интересующего года)
  
### Ответ
<[SimpleResponse](/_entities/responses/SimpleResponse.md) [[StatResult](/_entities/stats/StatResult.md)]>

### Значения `columnHeaders` для разных отчётов:
Присылаемый в ответ `StatResult` содержит сущность [`<Chart>`] с полем `columnHeaders`.
Значение этого поля может быть разного типа для разных отчётов.

- `category-clicks`
  - `['CLICKS']` - статичный плейсхолдер
- `category-sales`
  - `['SALES']` - статичный плейсхолдер
- `category-clicks-ratio-competition-snapshot`
  - `['CLICKS']` - статичный плейсхолдер
- `category-clicks-competition`
- `category-sales-competition`
- `category-clicks-ratio-competition`
- `category-sales-ratio-competition`
  - `<Object>` - несколько заголовков. Каждый заголовок - объект, содержащий идентификатор и имя бренда.
    - **entity** `<brand>` - фиксированный идентификатор сущности (здесь всегда равен `brand`)
    - **brandId** `<Number>` - обязательная айдишка бренда
    - brandName `<String>` - название бренда (может отсутствовать, в случае неактивности бренда на маркете)
- `category-model-top100-clicks-snapshot`
  - `["PRICE", "CLICKS", "SHOPS"]` - три фиксированных заголовка, и соответствующие значения в поле `y`.
    - price - средняя цена модели в российских копейках (не в центах, а в 0.01 российского рубля)
    - clicks - кол-во кликов по модели (в штуках)
    - shops - кол-во уникальных магазинов, по которым был кликаут на модель (в штуках)
- `category-model-top100-sales-snapshot`
  - `["PRICE", "SALES", "SHOPS"]` - три фиксированных заголовка, и соответствующие значения в поле `y`.
    - price - средняя цена модели в российских копейках (не в центах, а в 0.01 российского рубля)
    - sales - кол-во заказов по модели (в штуках)
    - shops - кол-во уникальных магазинов, по которым был кликаут на модель (в штуках)
- `category-model-top10-global-clicks-snapshot`
  - `["CLICKS", "CLICKS_1", "CLICKS_2"]` - три фиксированных заголовка, и соответствующие значения в поле `y`.
    - clicks - кол-во кликов в выбранном месяце
    - clicks_1 - кол-во кликов в прошлом месяце
    - clicks_2 - кол-во кликов в позапрошлом месяце
- `category-model-top10-clicks-snapshot`
  - `["SHOPS", "OFFERS", "CLICKS", "CLICKS_1", "CLICKS_2"]` - три фиксированных заголовка, и соответствующие значения в поле `y`.
    - shops - кол-во уникальных магазинов, продающих модель
    - offers - кол-во уникальных предложений на модель среди всех магазинов
    - clicks - кол-во кликов в выбранном месяце
    - clicks_1 - кол-во кликов в прошлом месяце
    - clicks_2 - кол-во кликов в позапрошлом месяце
- `category-model-top10-sales-snapshot`
  - `["SHOPS", "OFFERS", "SALES", "SALES_1", "SALES_2"]` - три фиксированных заголовка, и соответствующие значения в поле `y`.
    - shops - кол-во уникальных магазинов, продающих модель
    - offers - кол-во уникальных предложений на модель среди всех магазинов
    - sales - кол-во заказов в выбранном месяце
    - sales_1 - кол-во заказов в прошлом месяце
    - sales_2 - кол-во заказов в позапрошлом месяце

### Значения `x` для разных отчётов:
Присылаемый в ответ `StatResult` содержит сущность [`<Chart>`] с полем `x` в каждой строке.
Значение этого поля может быть разного типа для разных отчётов.

- `category-clicks`
- `category-sales`
- `category-clicks-competition`
- `category-sales-competition`
- `category-clicks-ratio-competition`
- `category-sales-ratio-competition`
  - [`<DateTime>`] - для графиков "динамики" ключ - дата
- `category-clicks-ratio-competition-snapshot`
  - `<Object>` - объект "бренд"
    - **entity** `<brand>` - фиксированный идентификатор сущности (здесь всегда равен `brand`)
    - **brandId** `<Number>` - обязательная айдишка бренда
    - brandName `<String>` - название бренда (может отсутствовать, в случае неактивности бренда на маркете)
- `category-model-top100-clicks-snapshot`
- `category-model-top100-sales-snapshot`
- `category-model-top10-global-clicks-snapshot`
- `category-model-top10-clicks-snapshot`
- `category-model-top10-sales-snapshot`
  - `<Object>` - объект "модель"
    - **entity** `<model>` - фиксированный идентификатор сущности (здесь всегда равен `model`)
    - **id** `<Number>` - обязательная айдишка модели
    - name `<String>` - название модели (может отсутствовать для некоторых кластеров)
    - **brandId** `<Number>` - обязательная айдишка бренда
    - brandName `<String>` - название бренда (может отсутствовать, в случае неактивности бренда на маркете)
    - isBrandTop5 `<Boolean>` - входит ли бренд модели в топ-5 брендов в текущей выборке (отсутствие поля = `false`) 

### Общие ошибки

#### [Стандартные](https://github.yandex-team.ru/market/vendors-api-spec#Стандартные-ошибки)
#### [Нет такого вендора](https://github.yandex-team.ru/market/vendors-api-spec#Несуществующий-объект-данных)
#### [Нет такой категории у вендора](https://github.yandex-team.ru/market/vendors-api-spec#Несуществующий-объект-данных)
#### [Некорректная дата](https://github.yandex-team.ru/market/vendors-api-spec#Неверные-параметры-вызова)
#### [Некорректный регион](https://github.yandex-team.ru/market/vendors-api-spec#Неверные-параметры-вызова) — пока не поддерживается, будет добавлена в дальнейшем

[`<DateTime>`]: /_entities/DateTime.md
[`<Chart>`]: /_entities/stats/Chart.md

## GET /vendors/[vendorID]/reports/stats/[stat]/download

Всё то же самое, что и у родительской ручки, кроме типа ответа.
В ответ приходит публично-доступная ссылка на CSV-файл с данными статистики.

### Дополнительные параметры
  - format `CSV|XLSX` - формат файла (по умолчанию CSV)

### Ответ
<[SimpleResponse](/_entities/responses/SimpleResponse.md) [[HtmlLink](/_entities/HtmlLink.md)]>