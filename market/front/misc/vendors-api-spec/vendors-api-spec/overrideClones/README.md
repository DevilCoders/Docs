# Ресурс /overrideClones

## GET /overrideClones

Зачитывание всех клонов магазинов, переопределенных на стороне Кабинета Вендора

### Примечания
  - linkingShopId или altGroupId будет не пустой, но только один из них 
  - Ручка доступна всем

### Параметры
  - **uid** `<UID>` пользователя от которого идет запрос, авторизация

### Ответ
  - **meta** `<Object>`
  - result `<Object>`
    - **item** `<Object>`
      - **clones** `Array[Object]` - массив объектов Clone, описывающих переопределенные в КВ клоны
        - **cloneId** `<Long>` - айдишка магазина-клона        
        - linkingShopId `<Long>` - айдишка магазина-клона, через которого магазин с cloneId связывается с группой       
        - altGroupId `<Long>` - явная айдишка группы, используется для вывода клонов из региональных групп или для создания кастомных групп       
        - **timestamp** `<Date>` - дата-время когда клон был сконфигурен      
        - **version** `<Long>` - версия набора сконфигуренных в КВ клонов (для целей аудита, append-only)      
        - **uid** `<UID>` - айдишка пользователя, который завел клона в КВ  
  - errors `<Error[]>`
  
### Ошибки

#### [Стандартные](https://github.yandex-team.ru/market/vendors-api-spec#Стандартные-ошибки)

## PUT /overrideClones

Устанавливает клоны магазинов, переопределяя региональные в Кабинете Вендора или формируя новые группы 

### Примечания
  - linkingShopId или altGroupId должен быть не пустой, но только один из них 
  - Ручка доступна только менеджеру
  - Полностью меняет весь существующий набор сконфигуренных клонов на новый
  - Может полностью зачищать все клоны

### Параметры
  - **uid** `<UID>` пользователя от которого идет запрос, авторизация
  
### Данные
  - clones `Array[Object]` - массив объектов Clone, описывающих переопределенные в КВ клоны, если пустой, то зачистит все сконфигуренные до сих пор клоны
    - **cloneId** `<Long>` - айдишка магазина-клона        
    - linkingShopId `<Long>` - айдишка магазина-клона, через которого магазин с cloneId связывается с группой, не пустой если altGroupId пустой       
    - altGroupId `<Long>` - явная айдишка группы, используется для вывода клонов из региональных групп или для создания кастомных групп, не пустой если linkingShopId пустой       
  
### Ответ
  Полностью соответствует ответу ручки GET /overrideClones

### Ошибки

#### [Стандартные](https://github.yandex-team.ru/market/vendors-api-spec#Стандартные-ошибки)
#### [Неверные параметры вызова](https://github.yandex-team.ru/market/vendors-api-spec#Неверные-параметры-вызова)
  - Попытка передать и linkingShopId, и altGroupId или не передать оба('linkingShopId XOR altGroupId should be set for cloneShopId {cloneShopId}')
  - Попытка связать магазин сам с собой ('linkingShopId and cloneShopId are the same - {cloneShopId}')
  