# ROWS COUNT MONITORING

В рамках скрипта происходит валидация количества строк в выходной таблице, и отправка статуса в juggler.

## Запуск
Параметры:
* `--yt-token` - Если параметр отсутствует, то значение берется из переменной окружения `YT_TOKEN`
* `--cluster` - Имя кластера на YT. (`hahn`, `arnold`, ...)
* `--table` - Таблица которую проверяем
* `--config` - Параметры проверки.
    Пример:
    ```
    {
        "CRIT": 10,
        "WARN": 5
    }
    ```
    Скрипт последовательно проверяет условия:
    1. Количество строк в таблице больше 10? Если да, то статус `CRIT`. Если нет, то следующая проверка.
    2. Количество строк в таблице больше 5? Если да, то статус `WARN`. Если нет то статус `OK`.

    Проверка всегда сначала для `CRIT`, потом для `WARN`.
    Оба параметра опциональны. Если конфиг `{}` то статус будет всегда `OK`.
* `--juggler-source` - source параметр для juggler
* `--juggler-host` - host параметр для juggler
* `--juggler-service` - service параметр для juggler

## Как юзается в проде?

1. В нирване есть [кубик](https://nirvana.yandex-team.ru/operation-old/50bf465e-b18c-4542-979d-11231bfef04f)

2. В Сендбоксе есть [бинарник](https://sandbox.yandex-team.ru/resource/1714512652)
