# Виртуальная очередь поставок (FIFO) в биллинге хранения

{% note info %}

Данная страничка актуальна до 1ого июня 2022 года. После 1ого июня 2022 года работает новый биллинг хранения - по оборачиваемости.
См. [#{T}](storage-billing.md)

{% endnote %}

Она же "Виртуальное FIFO в биллинге хранения"

## Про поставки

* **Поставка** &mdash; это несколько единиц товара, котрые привезли на склад в один и тот же день
* Одновременно у партнера на нашем складе могут находиться товары из нескольких поставок
* Продажа товаров в каком-либо определенном порядке (сначала из самой старой поставки, или сначала из самой новой) **не гарантируется**

## Логика биллинга хранения

Биллинг хранения рассчитывается так, **как будто** товары продаются строго от самых старых поставок к более новым.

Если на склад привезли 10 чашек, через неделю привезли еще 5 чашек, а потом продали 2 чашки, то биллинг хранения считает что из первой поставки осталось 8 чашек, а из второй -- все 5.
При этом чашки из какой поставки на самом деле продали &mdash; биллинг не знает.


## Свойства биллинга хранения с виртуальной очередью поставок

**Если** товары продаются не строго в порядке поставок, то наша логика обилливания дает сумму оказанной услуги **меньше**, чем если бы мы учитывали актуальное состояние поставок.

Если партнер не контролирует порядок продажи товаров, то такая логика справедливая: неправильно увеличивать стоимость услуги, если партнер не контролирует ее оказание.


## Ссылки

* <https://wiki.yandex-team.ru/users/fedvasek/kontrol-oborachivaemosti/> -- контроль оборачиваемости от Васи Федосеева
* <https://wiki.yandex-team.ru/market/money/mbi/biznes-processy-billinga/storage-billing/> -- историческая документация

