# О Тарифнице

## Что это и зачем оно нужно

Тарифница нужна для того, чтобы заводить тарифы для разных услуг наших партнеров.  
На основе этих тарифов mbi-billing рассчитывает сколько каждый партнер по какой услуге должен заплатить.  
Причем, во время расчета Биллинг ходит в тарифницу напрямую - таким образом обилливание получается всегда на свежих данных.

Код тарифницы лежит здесь - [https://a.yandex-team.ru/arc/trunk/arcadia/market/billing/tariffs/](https://a.yandex-team.ru/arc/trunk/arcadia/market/billing/tariffs/)

## Какие роли нужны для того, чтобы работать с тарифницей и как их заводить

### Создание черновиков (DRAFT_CHANGER)

Самый стандартный случай - когда есть необходимость заводить черновики тарифов.  
Так как предполагается что это распространенная роль, то мы упростили получения нужных для нее доступов.  
Сейчас в рамках ABC сервиса ["Market Billing Tariffs"](https://abc.yandex-team.ru/services/market_tariffs/) достаточно получить роль "Менеджер тарифов".  
Роли выдают управляющие сервиса.

### Подтверждение тарифов (DRAFT_APPROVER)

Роль, которая выдается крайне ограниченному кругу сотрудников. Позволяет переводить тарифы из черновиков в действующие.  
Запрашивается через IDM по общей матрице ролей - [https://idm.yandex-team.ru/#rf-role=ahywrEjI#market/mbi-tariffs/DRAFT_APPROVER(fields:()),rf-expanded=ahywrEjI,rf=1](https://idm.yandex-team.ru/#rf-role=ahywrEjI#market/mbi-tariffs/DRAFT_APPROVER(fields:()),rf-expanded=ahywrEjI,rf=1)

### Только чтение (VIEW_ONLY)

Специальная роль, которая позволяет только просматривать и выгружать информацию из сервиса.  
Нужна, например, для проведения аудитов.  
Запрашивается через IDM по общей матрице ролей - [https://idm.yandex-team.ru/#rf-role=ahywrEjI#market/mbi-tariffs/VIEW_ONLY(fields:()),rf-expanded=ahywrEjI,rf=1](https://idm.yandex-team.ru/#rf-role=ahywrEjI#market/mbi-tariffs/VIEW_ONLY(fields:()),rf-expanded=ahywrEjI,rf=1)

### Другией роли

Также существуют следующие роли, которые обычно не выдаются:

1. ADMIN - имеет самые широкие полномочия. Существует исключительно для случаев какого-либо глобального "пожара". Не выдается по запросу;
2. TARIFF_CHANGER - имеет право изменять уже существующие тарифы. При этом, механизм изменения таков, что тариф на самом деле не изменяется, а создается черновик. Роль обычно не нужна, в этом случае достаточно DRAFT_CHAGER'а;
3. TARIFF_TAG_CHANGER - отдельная роль, которая позволяет менять метки у тарифов. Не используется.

## Ссылки { #links }

* Интерфейс Тарифницы: <https://billing-admin.market.yandex.ru/>
* Техническое описание Тарифницы: <https://wiki.yandex-team.ru/users/andreybystrov/tarifnica/>
