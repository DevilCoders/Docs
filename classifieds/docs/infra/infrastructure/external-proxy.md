# Прокси для хождения во внешние ресурсы

Нужен для хождения во внешние ресурсы без использования `dns64`. Также исключает необходимость отключения проверок SNI при SSL-соединениях.

### Адреса
{% list tabs %}

- Тестинг

  **Адрес:** `proxy-ext.test.vertis.yandex.net:3128`

  Подсети:

  Датацентр | Адреса
  :--- | :---
  sas | `93.158.158.104/30`
  vla | `77.88.11.152/30`

- Прод

  **Адрес:** `proxy-ext.vertis.yandex.net:3128`

  Подсети:

  Датацентр | Адреса
  :--- | :---
  sas | `5.255.210.88/31`
  vla | `77.88.23.90/31`
  vla2 (бывший myt) | `77.88.4.84/31`
  sas2 (бывший man) | `5.255.216.102/31`

{% endlist %}

{% note warning %}

Если настраиваете фаервол или сообщаете адреса партнерам, то стоит сообщать адреса для всех датацентров ( не только для `sas` и `vla` )

{% endnote %}

### Принцип работы
Представляет собой [Squid](https://github.com/squid-cache/squid), реализующий [HTTP-туннель](https://en.wikipedia.org/wiki/HTTP_tunnel).
Воспользоваться им можно, реализовав в своем приложении поддержку [HTTP-метода CONNECT](https://en.wikipedia.org/wiki/HTTP_tunnel#HTTP_CONNECT_method)

{% note warning %}

Настроен таким образом, чтобы пропускать весь трафик наружу, **но не внутрь сетей Яндекса.**

{% endnote %}

### Логи
Логи можно [посмотреть](../observability/logs/quick-start.md#chtenie) через наши Вертикальные логи.
Логи поставляются с полем `service=squid` в тестинге и проде.

Если вы отправляете свои запросы через HTTP-туннель (используя метод `CONNECT`), то в логах увидите только факт установки этого туннеля - это связано с принципом работы (внутри туннеля передаются TCP-пакеты и распарсить их не представляется возможным).

