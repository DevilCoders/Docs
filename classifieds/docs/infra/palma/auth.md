# Аутентификация и авторизация

## Аутентификация
Для аутентификации используется сервисные тикеты TVM (тикет необходимо передавать в grpc хедере `x-ya-service-ticket`).

Наши TVM-id:
2022828 - testing
2022670 - production  

`tvm_client_id` из тикета резолвятся в имя сервиса. Если сервис использует `tvm_id`, сгенерированный не [шивой](https://docs.yandex-team.ru/classifieds-infra/auto#tvm-resurs), необходимо создать тикет в очередь [VSDATA](https://st.yandex-team.ru/VSDATA), чтобы мы могли прописать явное соответствие у себя в конфигурации.

## Авторизация
Для каждого справочника возможно указать список авторизованных сервисов (имена из карты) в опции `authorized_services`.
Авторизация обязательна для шифрованных справочников/файлов/изображений.

{% note warning %}

Для работы со справочником, **требующим авторизации** (`encrypted` или непустой список `authorized_services`) в админке пальмы - необходимо добавить админку пальмы (`palma-www`) в список авторизованных сервисов!

{% endnote %}

* Для шифрованных справочников при пустом списке доступа к справочнику не будет.
* Для нешифрованных справочников пустой список означает доступ для всех (в таком случае аутентификация не требуется).
