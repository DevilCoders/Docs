# Мониторинг: Juggler и vertis-sre-monitoring

Для работы с событиями в мониторинге используются [дашборд в Juggler](https://juggler.yandex-team.ru/dashboards/vertis_sre/) и телеграмм чат `vertis-sre-monitoring`.

На дашборде должны отображаться актуальные события, по которым еще не успели отреагировать. Это дает возможность всегда видеть актуальное состояние наших сервисов.

Все сотрудники Группы эксплуатации могут видеть текущие проблемы и тех, кто уже начал работу по решению некоторых из них.

Основные цели, которые преследуют данные рекомендации это:
* сделать дашборд источником правды о текущем состоянии сервисов, глядя в который можно понять, какие действия предпринимаются по тем или иным событиям;
* уменьшить поток событий в чат мониторинга, чтобы более явно были видны новые события.

## События в Juggler и реагирование на них

Событие `WARN` означает среднюю срочность и/или серьезность проблемы.
Событие `CRIT` означает, что на событие нужно отреагировать как можно скорее, по таким событиям дежурному админу позвонит робот и сообщит о загоревшемся алерте. Решением проблемы занимается либо дежурный админ, либо ответственный за сервис.

## Регламент эскалации алертов

Для реагирования на зажегшиеся алерты необходимо найти причину проблемы, сообщить ответственному (ответственному за сервис админу или дежурному разработчику, ответственному за сервис) и починить проблему.

При необходимости может быть заведен тикет в очередь `VERTISADMIN`, если проблема нуждается подробном расследовании или в долгосрочном решении.

Есть возможность отключить эскалацию алертов:
* выставить `downtime` - алерт будет убран с дашборда и нотификации по нему приходить не будут;
* выставить `mute` - нотификации в чат и звонки дежурному приходить не будут, но на дашборде алерт будет виден.

Вместе с отключением эскалации мы проставляем комментарий и по возможности линкуем тикет, чтобы другие сотрудники были в курсе событий. Если `downtime` или `mute` проставлены из телеграм-чата, рекомендуется позднее также проставить комментарий.

Если появилась флапающая `WARN-OK` проверка и по данному событию уже что-то делается (создан тикет, который ждет своей очереди или идет починка), то лучше на данную проверку поставить `downtime` или `mute`, чтобы не засорять алертами телеграм-чат.

## Ограничения отключения эскалации алертов

Исключение при отключении эксалации (`downtime`, `mute`) составляют мониторинги, которые нельзя задаунтаймить, так как под ними скрываются разные причины срабатывания, например nginx-monitoring с WARN на сертификат нельзя убрать в downtime, так как тогда не увидим сломанные конфиги.
