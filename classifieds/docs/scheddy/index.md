# Документация Scheddy

{% note info "" %}

Сервис для отправки периодических или разовых пушей по пользовательской выборке на основе YQL запросов из выпадающего списка:

    - YT
    - Yandex Database
    - Clickhouse

{% endnote %}

## Цель сервиса

    - Облегчить и ускорить запуск новых пушей, исключая ручное вмешательство разработчиков
    - Предоставить нескольким сервисам унифицированный инструмент для отправки пушей юзерам

## Сценарий работы сервиса:

1. Авторизация пользователя в админке
2. Пользователь заполняет необходимые поля:
    - название задачи для отображения в админке
    - источник данных откуда будут браться пользователи (`YT`, `Yandex Database`, `Clickhouse`)
    - Вводит YQL запрос для выборки пользователей (`USE hahn; SELECT user_id from users;`)
    - сохранить запрос ? `true/false`
    - Дата старта(По умолчанию запуск происходит сразу после создания) `dd-M-yyyy hh:mm:ss`
    - период запуска в формате единица_времени/временной промежуток (`1s/m/h/d` `m` - минута, `h` - час, `d` - день)
    - Название пуша
    - Тело пуша
    - deeplink для android
    - deeplink для ios
    - картинка (опционально)
3. Сохранение задачи и ожидание результата выполнение
4. Background запуск задачи по расписанию
5. Отправка пушей пользователям
6. Уведомление инициатора об успешной отправке/ошибки
