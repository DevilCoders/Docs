# Запуск e2e-тестов в бранче 

Если задача потенциально может сломать весь сервис, будет нелишним запустить регрессионные тесты до передачи в тестирование.
Для этого нужно выкатить ветку в бранч в прод, запустить регрессионные тесты и посмотреть отчеты автотестов.

## Как выкатить ветку в бранч
* запушить изменения
* найти нужный проект/проекты https://t.vertis.yandex-team.ru/project.html?projectId=vs_frontend_Applications_AuroRuFrontendRepo&tab=projectOverview
* запустить кастомную сборку: на вкладке changes указать ветку, на вкладке parameters поставить чекбоксы "Выкатить в шиве бранч" и "Не проверять прод-тег"
* найти нужный сервис/сервисы https://admin.vertis.yandex-team.ru/services. в тестинг бранч катится автоматически после успешной сборки в тимсити
* найти свой бранч в ветках тестинга и нажать "запустить деплой". бранч выкатится в прод.
* попасть в бранч можно, поставив куку _branch=<your_branch> или по урлу auto.ru/branch/<your_branch> (урл делает то же самое: ставит куку)

## Как запустить e2e-тесты
* найти нужную сборку тестов в https://t.vertis.yandex-team.ru/project.html?projectId=Verticals_Testing_Autoru&tab=projectOverview (для десктопа и мобилки есть джобы "run all desktop/mobile tests", чтоб запустить все сборки сразу)
* запустить кастомную сборку: добавить параметр бранча, как в инструкции https://wiki.yandex-team.ru/autoru-dev/Testing/FAQ/Автотесты/#kakzapustitvsetestyvbranche

## Как посмотреть отчеты автотестов
* открыть сборку в тимсити, artifacts - allure report - index
* если есть падшие тесты, но расшифровать, что именно произошло, из отчета не получается -- можно спросить avgribanov@
