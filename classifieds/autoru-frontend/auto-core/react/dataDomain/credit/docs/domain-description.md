# Кредиты 2.0

Главные сущности:
* Кредитный продукт - `creditProduct`
* Кредитная анкета - `creditApplication`
* Кредитная заявка в банк - `creditApplicationClaim`
* Профиль с личными данными пользователя - `personProfile`

Они связаны между собой следующим образом:
* _creditApplication_ содержит в себе _personProfile_
* _creditApplication_ содержит в себе множество _creditApplicationClaim_
* _creditApplicationClaim_ представляет собой _creditProduct_, который добавили к _creditApplication_

--------------------------------
## Кредитный флоу с точки зрения пользователя

### 1. Короткая заявка
Точкой входа в весь флоу кредитов для пользователя является короткая форма (короткая заявка, КЗ) с минимальными данными: ФИО, почта, телефон, сумма кредита, срок кредита, первоначальный платеж. В коде это компонент `CreditApplicationForm` и вызывающийся откуда угодно на сервисе модал с ним - `CreditApplicationFormModal`.

### 2. Визард
После заполнения Короткой заявки, пользователь попадает в большую сложную форму с большим количеством шагов и данных. Здесь мы собираем с пользователя все данные, которые нам потребуются для создания кредитной заявки, которую можно будет отправить в максимальное количество банков-партнеров и которая будет соответствовать их требованиям к наличию и структуре данных. В коде это компонент ``.

### 3. Большая форма
"Большая форма" функционально выполняет ту же задачу, что и Визард, однако делает это немного по-другому. В большую форму мы попадаем уже после прохождения Визарда и видим на одном экране всю заполненную информацию, аккумулированную по блокам (поэтому она и "большая"). Здесь пользователь может изменить данные, заполнить новые блоки, поменять машину и условия кредита, проверить всю анкету перед отправкой. В коде это компонент ``.

### 4. Личный кабинет с статусами заявок в банки
Чисто технически Большая форма уже и так была на странице ЛК, так что этот шаг просто меняет состояние Личного кабинета в "активный". Пользователь засабмитил свою creditApplication. Мы сразу же (не особо спрашивая его об этом) показываем ему, что отправили его анкету в несколько банков, но даем ему отменить отправку. Пользователь видит на странице плитки с всеми отправленными заявками и статусы по ним. Он все еще может менять свою главную кредитную анкету creditApplication - обновленная анкета будет отправлена уже в новые банки, старые данные не изменятся. Из этого состояния пользователь также может попасть в Большую форму и обратно - именно так он и может редактировать свою анкету. В коде это компонент `MyCredits`

--------------------------------

У пользователя может быть только одна активная creditApplication, мы можем получить ее через `getCreditApplicationActive`

Кредиты представлены в следующих местах на сервисе:
* Листинг - цена в кредит в сниппете "от 43 700 р/мес" - `CreditPrice`
* Листинг - промо-баннер между сниппетов 
* Карточка авто - основной блок, ниже комплектации авто - `CreditCard`
* Главная/тач - баннер-плитка
* Галерея/тач - слайд с предложением заполнить анкету
* Галерея/десктоп - блок с предварительным расчетом кредита
* Личный кабинет - отдельный раздел "Кредиты" - `MyCredits`
* Бургерные меню - ссылка на Личный кабинет
* Отчет об истории авто - блок с предложением заполнить анкету