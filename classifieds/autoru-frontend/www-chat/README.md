# Фронтенд чатов

Состоит из:
- nodejs приложение, которое отвечает на ajax запросы из верстки чатов,
каждый сервис поднимает свой инстанс
- vertis-chat.js и vertis-chat.css - верстка чатов, заливается на S3

## Разработка

Собрать и запустить проект одной командой `make`

В деве наш nginx настроен так, что он сначала пытается подключать чатик из локальной сборки.
Если его там нет, то подключается чат из тестинга. Таким образом по умолчанию у всех чат работает и его не надо собрать отдельно.

Если надо собрать чатик в деве и что-то там поменять, то делаем следующее:
```shell
# Собираем чатик
$ cd www-chat
$ make
```

Теперь, если открыть логи локального чата, то можно увидеть, что nginx переключился на локальную сборку и не ходит в общий тестинг.

### Детали

Установить зависимости
```sh
make deps
```

Скачать секреты
```sh
make secrets
```

Запустить сборку webpack
```sh
make webpack
```

или
```sh
make webpack-watch
```

Запустить nodejs (Разработка на виртуалке)
```sh
make restart
```

Запустить nodejs (Разработка локально)
```sh
make start-local
```

## API

* [AutoruApi](http://autoru-api-server.vrts-slb.test.vertis.yandex.net/swagger/?url=/api-docs#/chat)
