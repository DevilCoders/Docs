# Использование Chatto

* Статус: Принято
* Ответственные: [l-saveliy](https://staff.yandex-team.ru/l-saveliy)
* Дата: 2020-09-04

Тех.история: [Чаты с тех. поддержкой](https://st.yandex-team.ru/VSAPPS-5751)

## Контекст

Экран чата представляет собой большой список кастомных ячеек-сообщений

## Причины

* Требуется, чтобы чат плавно скроллился при любом количестве сообщений
* Необходимо легко и быстро реализовывать новые кастомные ячейки
* В зависимости от имеющихся данных дизайн сообщений может меняться (разные скругления углов у баблов, вставка временных сепараторов)

## Рассматриваемые варианты

* [Chatto](https://github.com/badoo/Chatto)
* [MessageKit](https://github.com/MessageKit/MessageKit)
* Свое решение

## Принятое решение

Выбран вариант: "Chatto", потому что:
* Позволяет реализовать полностью кастомные чаты
* Отдельный фреймворк "ChattoAdditions" позволяет заимствовать уже готовые решения
* Хорошая оптимизация, можно считать лейаут в фоне

### Позитивные последствия

* Сэкономили время на оптимизации чатов
* Реализовали полностью наш дизайн
* Полученное решение позволяет легко интегрировать новые типы сообщений

### Негативные последствия

* Столкнулись с несколькими некритичными багами из фреймворка
* Реализация чатов получилась очень многословной

## Плюсы и минусы вариантов

### MessageKit

Хороший, потому что:
* Простая и быстрая реализация
* Много готовых типов сообщений

Плохой, потому что:
* Фреймворк тащит за собой еще один pod [InputBarAccessoryView](https://github.com/nathantannar4/InputBarAccessoryView), который нам не нужен
* Нет возможности быстро менять дизайн ячеек налету
* Неочевидно, насколько сильно можно кастомизировать сообщения

### Свое решение

Хороший, потому что полностью контролируем реализацию

Плохой, потому что придется сделать все самим: добавление всех типов сообщений, анимации чата, оптимизацию
