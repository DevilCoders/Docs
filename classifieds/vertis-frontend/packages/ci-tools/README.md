# `ci-tools`

Пакет с общими CI-скриптами

## `find-affected-tests`
Скрипт для генерации списков скриншотных тестов, которые затронуты изменениями в коде. Разбивает список найденных файлов тестов по пакетам и в каждом пакете по пачкам с заданным количеством штук. Результат сохраняет в файлы вида `<packageName>.<partIndex>.tests.txt`

## `get-packages-to-test`
Выводит в stdout списки пакетов, которые надо протестировать. Для работы нужны файлы, сгенерированные скриптом `find-affected-tests`.

## `get-tasks-in-branch`
Скрипт для вычисления новых невыкаченных в прод задач внутри ветки. Запрашивает из системы деплоя версию текущего продакшена, из истории коммитов достает таски с паттерном ABC-123 и отдает строковый результат в формате пригодном для shiva

```
get-tasks-in-branch <service-name> <cert-path>

* service-name - имя сервиса в системе деплоя
* cert-path - путь до сертификата, например /usr/share/yandex-internal-root-ca/YandexInternalRootCA.crt

```

## `get-tasks-in-master`
Скрипт для вычисления новых невыкаченных в прод задач из мастера. Запрашивает из системы деплоя версию текущего продакшена, из истории коммитов достает таски с паттерном ABC-123 и отдает строковый результат в формате пригодном для shiva

```
get-tasks-in-master <service-name> <cert-path>

* service-name - имя сервиса в системе деплоя
* cert-path - путь до сертификата, например /usr/share/yandex-internal-root-ca/YandexInternalRootCA.crt

```

