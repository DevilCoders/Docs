## Какие проблемы/неясности
1. медленный хост и много урлов по нему
Будет постоянный решедуллинг задач. Тут нужен какой-то умный решедуллинг, который задаст время слеющей обработки не просто на `now + const`, а относительно кол-ва уже перешедуленных.
2. приоритет - как лучше организовать?

## Версия на коленке
- точечное асинхронное Api (можно без перепрокачки меты и изображения) 
- хранилище ответов от Аватарницы
- очередь задач
- топик результатов
- решедуллинг задач при ошибках

## MVP
Помимо всех пунктов из версии на коленке:
- limiter по хостам и на аватарницу (по идее явного лимитера на аву можно не делать а троттлиться об нее)
- перепрокачка меты
- статистика для наблюдаемости
    - кол-во задач в очереди по типу
    - лаг обработки
    - etc
- проверка изображения на актуальность (head запрос по урлу изображения) 
 
## Полезные заметки про Аватарницу
Тут выжимка из документации неочевидных или полезных вещей из Аватарницы.

###TTL
TTL - может быть настроен на весь неймспейс и так же может быть настроен для каждого изображения отдельно.

Если настроен на весь неймспейс, то по истечнению ttl с момента загрузки изображения оно не будет доступно на get из публичного API, но будет доступно на getInfo из внутреннего.

Если передавать ttl при загрузке изображеия, то по истечению ttl с момента загрузки изображение будет помечено, как устаревшее и будет удалено через несколько суток (подробности [тут](https://wiki.yandex-team.ru/mds/avatars/#ttl)).
При запросе устаревшего изображения ответ будет 404, при перезагрузке устаревшего изображения ответ будет 403.

###Загрузка и перезагрузка изображения
Загрузка изображения производится с помощью ручки [put](https://wiki.yandex-team.ru/mds/avatars/#put).
При попытке перегрузить уже существующее изображение ответ будет 403.

Можно удалить изображение и перезалить его снова, НО этого делать не рекомендуется. Лучше использовать новое название для изображение, а старое удалить.

###Перезагрузка меты
При добавлении нового алгоритма КЗ Аватарница не подтягивает результат автоматически, нужно перепрокачать мету.
- /delete-$namespace/$group-id/$imagename/meta
- getInfo - блокируется до тех пор, пока не будет получен результат от КЗ.
