## Джоба по синхронизации cost+ с вебмастером

## Принцип работы 
У вебмастера есть апи, в котором есть следующие ручки:
1. Получить все фиды, которые есть в cost+. Возвращает список урлов фидов.
2. Добавить новые фиды.
3. Удалить фиды

У нас есть разводящие, которые представляют собой простые текстовые файлы,
в которых в каждой строчке ссылка на фид, который у нас есть

Логика работы джобы простая: 
1. Получаем все фиды, которые есть в админке 
2. Получаем все фиды, которые у нас лежат в разводящих
3. Те фиды, что есть только в `1.` удаляем
4. Те фиды, что есть только в `2.` добавляем


## Настройка

```hocon
realty-sync = {
  # если false, то синхронизация пропустится 
  enabled = true 
  # ссылки на разводящие. Каждая строчка разводящей - ссылка на фид
  indexes = "https://realty.yandex.ru/cost-plus/index.txt,https://realty.yandex.ru/cost-plus/index1.txt"
  # id пользователя вебмастера. Берется из вебмастера (можно получить по токену)
  user-id = 1372574561
  # id приложения cost+. Берется из вебмастера (можно получить по токену и user-id)
  host-id = "https:realty.yandex.ru:443"
  # Максимальный процент фидов, которые мы хотим удалить (от общего количества).
  # На тот случай, если что-то пойдет не так с разводящими
  max-delete-percent = 5
}
```

## Локальный запуск

Все "опасные" места в джобе (удаление и добавление) фидов вынесены в `OnProductionSyntax`. 
При локальном запуске или тестовом запуске(в любом окружении, отличном от `production`), джоба отработает как обычно,
но не будет удалять/добавлять что-то в вебмастер
