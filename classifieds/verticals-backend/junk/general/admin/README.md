# Админка дженерала

## Локальная разработка

### Подготовка
Эти действия нужно сделать один раз
1. Установить npm зависимости: `bazel run @nodejs//:yarn install` или `yarn install`
2. Установить [ibazel](https://github.com/bazelbuild/bazel-watcher)

В дальнейшем может потребоваться повторная установка зависимостей, если они поменяются.

### Запуск
Для разработки клиентской части запустить `bazel run @nodejs//:yarn start` или `yarn start` и открыть в браузере `http://localhost:3000`.

Это запустит непрерывную компиляцию проекта и hot-reload верстки в браузере 
(новая верстка обновится в браузере после сохранения исходников без необходимости нажатия на F5)

В этом режиме все запросы, которые ходят в апи, проксируются на localhost:4000.

Для разработки серверной части запустить `ibazel run //general/admin/server` или `bazel run //general/admin/server`.
В случае использования первой команды сервер будет автоматически перезапускаться в случае изменения исходников.

Сервер запускается на порту 4000. 

## Серверная часть
akka-http сервер написанное на scala.

Отвечает за общение с остальными бекендами яндекс.объявлений, и предоставления rest api для клиентской части.
Также осуществляет аутентификацию и авторизацию пользователей (TBD).


## Клиентская часть
Обычное react приложение написанное на typescript.
Начальный скелет создан с помощью `create-react-app` и больше никак не менявшееся, кроме добавления новых зависимостей. 

### Используемые библиотеки
 - [react](https://reactjs.org/)
 - [react-router](https://reactrouter.com/web/guides/quick-start) - роутинг страниц
 - bootstrap + [react+bootstrap](https://react-bootstrap.github.io/) - фреймворк для верстки (сетка + готовые компоненты)
 - [react-query](https://react-query.tanstack.com/docs/overview) - для запросов в апи
 - [react-helmet](https://github.com/nfl/react-helmet) - для управления тайтлом страницы

### Добавление зависимостей

Для добавление npm зависимостей обычно происходит через `bazel run @nodejs//:yarn add <dependency>` 
с последующим коммитом файлов `package.json` и `yarn.lock`.

### Структура папок

 - components – переиспользуемые между несколькими страницами react-компоненты
 - pages – различные страницы приложения
