## Cartinder
Бэкенд для картиндера - сервиса для того,
чтобы люди могли проще обмениваться машинами

## Архитектура
### Структура бд
В `core/src/main/resources/schema.sql` лежит схема базы данных.
Принцип по которому построены таблицы такой:
1. В таблице `reaction` лежат лайки/дизлайки с шардированием по офферу
для формирования запроса в серчер, чтобы выдать сначала лайкнувших твой оффер
2. В таблице `reaction_by_user` лежат те же данные, но для того,
чтобы выбрасывать из выдачи офферы, которые уже были лайкнуты
3. В таблице `match` лежат совпадения. При взаимном совпадении лайков
в таблицу `match` добавляется по записи для каждого пользователя.
У `match` такая же структура как у `reaction`, только там соответственно
нет типа (лайк/дизлайк)

### Структура API
Всего в API 4 метода:
1. `Listing` - возвращает непросмотренный объявления по набору параметров
для поиска. Для того, чтобы сформировать листинг, учитываются лайки самого
пользователя и лайки по его объявлениям
2. `Like` - отмечает оффер понравившимся для пользователя с привязкой к его
офферу.
3. `Dislike` - отмечает оффер непонравившимся для пользователя с привязкой к его
офферу.
4. `Matches` - возвращает список совпадений для пользователя

### Структура TMS
Обрабатываемые ивенты:
1. Удаление офферов - удаляем матчи и реакции в случае удаления оффера
