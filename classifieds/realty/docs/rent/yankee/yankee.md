## Yankee

Yankee - сервис для взаимодействия с [Yang Tools](https://a.yandex-team.ru/arcadia/crowdsourcing/yang/yang-tools).

На начальном этапе в Яндекс.Аренде он будет создавать в Yang'е только таски про распознавание данных паспорта и селфи с паспортом (вот [головной тикет](https://st.yandex-team.ru/REALTY-24752) про эту историю). В дальнейшем могут добавиться новые кейсы использования.

### Устройство

![realty-yankee interaction](img/yankee-interaction.png)

Состоит из трёх частей, объединённых в один микросервис.
- **Scheduler**. В фоне создаёт таски в Yang'е, поллит их статус и отправляет эвенты в кафку при изменении статуса.
- **Consumer**. Читает из топика кафки `rent-diff-events`, добавляя в БД сущности для создания таски в Yang'е.
- **GRPC API**. Отдаёт результаты тасок Yang'а.

Связан со следующими хранилищами.
- **MySQL**. Хранит в БД информацию о созданных тасках Yang'а и их статусах.
- **Palma**. Хранит результаты выполнения тасок Yang'а, содержащие ПД.
- **Kafka**. Получает эвенты об изменениях статуса тасок Yang'а в топик `realty-yankee-events`.

Взаимодействует с другими сервисами.
- **Yang Tools**. Создаёт там таски и поллит их статус.
- **Realty rent**. Реагирует на изменения в БД Аренды, создавая при этом таски в Yang'е (например, при изменении в юзере фотографий паспорта).
