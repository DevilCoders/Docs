## База данных amohub'a

Координаты базы данных amohub'a в тестинге следующие:
- хост - ``;
- имя базы - `rent_amohub`;
- юзер - `rent_amohub`;
- пароль лежит в секретнице [здесь](todo).

**TODO** Нужно добавить здесь хост, когда для amohub'а будет заведена отдельная БД, см. подробности
[тут](https://st.yandex-team.ru/REALTYBACK-6811).

Ниже приводится общая схема и краткое описание каждой таблички. Синим цветом подсвечены таблички, на которых есть
Watcher'ы.

![realty-amohub db schema](img/rent-amohub-db.png)

- **Lead** (LeadWatcher) - Лид в Амо. Связан с квартирами, OwnerRequest'ами и показами.
- **Contact** (ContactWatcher) - Контакт в Амо.
- **ContactLead** - Связь "многие ко многим" между лидами и контактами Амо.
- **ContactPhone** - Номер телефона в контакте Амо.
- **CrmIntegration** (CrmIntegrationWatcher) - Интеграция с Амо. Табличка содержит единственную строку с обновляемыми
токенами Амо. Watcher также делает зеркалирование сущностей Амо.
- **CrmUser** - Юзер в Амо. Это табличка-кеш с именами юзеров - используем её, чтобы не слишком часто получать имена
юзеров напрямую из Амо.
- **CrmAction** (CrmActionGroupWatcher) - Абстрактное действие, которое нужно совершить в Амо. Создаётся по триггерам
из кафки в consumer'e realty-amohub'a.
- **Offer** - Оффер Недвижимости, Авито или Циана. Содержит дату, когда последний раз обработали этот оффер, т. е.
создали для него сделку в Амо.
- **Showinglead** - Связь "один к одному" между лидами и показами. Нужна для дедубликации создания лидов в Амо
в воронке показов.
