## Квитанции

Если собственник в настройках ЖКХ указал необходимость присылать квитанции, то жилец ежемесячно должен присылать фото
квитанций (флаг "Фотографии квитанции"). Для этого жилец должен добавить все необходимые фотографии квитанции и
отправить их собственнику на рассмотрение. Сами квитанции привязаны к периоду (`Period`). Собственник может отклонить
фотографии и тогда жильцу вновь необходимо будет добавить фотографии и отправить их на рассмотрение собственником.
Квитанции могут находиться в следующих статусах:

- **Не отправлено** (`NotSent`) - квитанции не отправлены и еще рано это делать. На текущий момент является техническим
  и не используется.
- **Можно отправлять** (`CanBeSent`) - квитанции не отправлены, но их отправление доступно. На текущий момент период
  находится в этом статусе с 1 числа месяца периода по 15 число следующего месяца.
- **Необходимо отправлять** (`ShouldBeSent`) - квитанции не отправлены, но уже должны быть отправлены. На текущий момент
  период переходит в этот статус с 15 числа месяца, следующего за месяцем периода. То есть квитанцию за октябрь
  необходимо отправить 15 ноября.
- **Отправлено** (`Sent`) - квитанции были отправлены. Отправление квитанций доступно при статусах
- "Отправлено" (позволяет поменять фотографии), "Можно отправлять", "Необходимо отправлять" и "Отклонено".
- **Отклонено** (`Declined`) - квитанции были отправлены жильцом и отклонены собственником. Отклонить можно квитанции в
  статусе "Отправлено", обязательно указав причину отклонения.

Жизненный цикл квитанций:

![receipt lifecycle](img/receipts.png)

После того как жилец вновь отправляет квитанции после отклонения, старые фотографии становятся недоступны в интерфейсе,
но хранятся у нас бд (мягкое удаление). Все отправленные квитанции содержат в себе время отправления. Квитанции успешно
можно отправить только один раз в месяц как некоторое множество фотографий. Однако, отклонять и отправлять новые вновь,
удаляя старые, можно сколько угодно. Таким образом, за период может быть только одно множество успешно отправленных фото
квитанций. После выставления счета отправление фотографий блокируется.