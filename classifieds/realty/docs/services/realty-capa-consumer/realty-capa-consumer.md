### Мотивация

В связи с переездом модерации фидов в модерилку, необходимо поставлять модерации события по фидам + принимать от модерации opinion по фидам и применять их к фиду.

### Схема модерации фидов
![alt text](img/feed-moderation.png)

### Схема события для модерации

Планируется отправлять, как минимум, следующие поля:
- partner_id
- uid (из таблиц partner + uid_to_cluster_id)
- partner_status (из таблицы partner_status капы)
- feed_url (из таблицы task_result фидлоадера)

### Принцип работы сервиса

Сервис вычитывает через дата-трансфер изменения в табличках капы и фидлоадера, меняет состояние фида и отправляет событие в модерацию (если состояние изменилось).

Сервис применяет opinion модерации по фиду и меняет partner_status в капе.

### Ключевые оссобенности

- cостояние фида (набор полей, отправляемых в модерацию) хранится в новой табличке базы капы
- для гарантии правильной последовательности событий, отправляемых в модерацию, пишем событие сначала в промежуточную таблицу, из которой событие вычитывает realty-capa-scheduler и отправляет его в модерацию
- для гарантии правильной последовательности событий пишем события для модерации в кафку (ключ партиции - partner_id)
