# Что это
В этой директории хранятся регулярные выражения, применяемые к страницам сайтов вертикальных сервисов и конкурентов, 
чтобы категоризовать их.
 
Список воркфлоу, использующих эти регулярки:
- auto
  - [audience/wf_curated_audience_yabrowser](../../workflows/audience/wf_curated_audience_yabrowser)
  - [cannibalization/wf_yt_serp_cannibalization_a](../../workflows/cannibalization/wf_yt_serp_cannibalization_a)
  - _добавь своё, если используешь регулярки_
  - ...

- realty
  - [audience/wf_curated_audience_realty_metrika](../../workflows/audience/wf_curated_audience_realty_metrika)
  - [audience/wf_curated_audience_realty_yabrowser](../../workflows/audience/wf_curated_audience_realty_yabrowser)
  - [cannibalization/wf_yt_serp_cannibalization_a](../../workflows/cannibalization/wf_yt_serp_cannibalization_a)
  - _добавь своё, если используешь регулярки_
  - ...

Чтобы обновления регулярок раскатились по использующим их графам, нужно после обновления пересобрать графы, запустив их Valhalla-код.

***TODO***: Аудитории авто не используют вальгаллу, а должны бы


### Что такое *common*
В common попадаю страницы, которые не могут быть разделены на текущие категории, так как не предполагают этого, например, главные страницы не могут быть отнесены в новым или бу машинам и новым или вторичным квартирам.

Common в **авто**:
 * *offer_type*: главная страница, отзывы, форумы, каталоги, медиа и мелкие страницы (личный кабинет, авторизация, проверка авто и т.д)
 * *offer_state*: аналогично offer_type, но еще добавляются листинги, в которых показываются все объявления, то есть не выбрано разделение на новые/бу, и автосервис
 * *page*: мелкие страницы (личный кабинет, авторизация, проверка авто и т.д)

Common в **недвижимости**:
 * *offer_type*: главные страницы, листинги, в которых показываются все объявления, то есть не выбрано разделение на новостройки/вторички, медиа, главные страницы коттеджных поселков,главные страницы жилых комплексов и мелкие страницы (личный кабинет, авторизация, калькулятор стоимости, ипотека и т.д)
 * *category_type*: главные страницы и мелкие страницы (личный кабинет, авторизация, калькулятор стоимости, ипотека и т.д)
 * *flat_type*: главные страницы и листинги, в которых показываются все объявления, то есть не выбрано разделение на новостройки/вторички, и мелкие страницы (личный кабинет, авторизация, калькулятор стоимости, ипотека и т.д)
 * *page*: мелкие страницы (личный кабинет, авторизация, калькулятор стоимости, ипотека и т.д)

### Новые категории в авто
 * *mixed* в offer_state: листинги, на которых смешанный offer_state, то есть новые и б/у
 * *comparison* в page: страницы сравнения транспорта, например, [https://auto.ru/compare/](https://auto.ru/compare/)

### Новые и измененные категории в недвижимоти
* *secondary* в flat_type: теперь вся аренда, дома (кроме КП), участки и гаражи относятся к secondary
* *new_flat* в flat_type: теперь КП относятся к new_flat, чтобы получить срез по ним надо выбрать flat_type: new_flat + category_type: house
* *residential complex* в category_type: жилые комплексы
* *developer* в flat_type: страницы застройщика (сейчас в Avito Realty ограниченный список застройщиков)
* *mixed* в flat_type: листинги, на которых смешанный тип недвижимости, то есть новостройки и вторичка
