# Ресурсы


Ресурсы предназначены для того, чтобы команды могли переиспользовать данные о конфигурациях своих графов. Если много графов, создаваемых командой, использует плюс-минус одни и те же глобальные опции и конфигурации параметров графа (квота, MR-политики, TTL и т.п.), то вместо того, чтобы каждый раз явно прописывать это всё в конфиг графов при их описании, имеет смысл завести в [projects](projects) директорию своего проекта и положить туда эти данные. Посмотреть, как используются ресурсы в `carl`-коде можно посмотреть в [examples](../examples). 


**Важно:** при описании графа в конструктор объекта `GraphConfig` можно передать одновременно как ресурсы проекта в аргумент `resources_project`, так и явно в `execution_params` указать параметры графа вместе с глобальными опциями в аргументе `graph_options`. В таком случае у ресурса будет самый низкий приоритет. Если среди `graph_options` найдутся такие же опции, как в ресурсе, но с другими значениями, опции ресурса будут перезаписаны в пользу явно указанных, новые глобальные опции из `graph_options` просто добавятся к ресурсным. Такая же логика реализована для параметров графа и аргумента `execution_params`.


На данный момент реализованы два типа ресурсов: 
1. `graph_config.yaml` содержит параметры выполнения графа
2. `graph_options.yaml` содержит описание глобальных опций графа

При создании объекта `GraphConfig` в конструктор нужно передать путь вида `projects/YOUR_PROJECT/RESOURCE_NAME` до директории, содержащих оба описанных YAML-файла. При их парсинге обязательно происходит валидация схемы согласно [schemas](../schemas) с падением в случае несоответствия. Также для корректной работы ресурсов, их необходимо указывать в [lib/ya.make](../lib/ya.make) в списке RESOURCE_FILES. Любые изменения ресурсов требуют пересборки `carl` в [bin](../bin). 

В ресурсах обоих типов предусмотрен ключ `files`, куда можно передать список файлов такого же типа из других ресурсных директорий. В этом списке более приоритетны те ресурсы, которые находятся выше, в случае конфликтов значения опций будут взяты из них.
