# go-cloud-functions

sync-instance-group-nodes:

Для работы функции нужно выставить переменные окружения:

FOLDER_ID
CONDUCTOR_GROUPS
JUGGLER_OAUTH_TOKEN
CONDUCTOR_OAUTH_TOKEN

Добавляем отсутствующие ноды в кондукторе:
1. Получаем список всех инстансов из каталога в облаке
2. Проверяем, что все инстансы инстанс групп с непустыми лейблами "fqdn", "dc" и "conductor-group" есть в кондукторе, если нет - добавляем в группу из лейбла "conductor-group" и выставляем кондукторный тег "sync"

Удаляем отсутствующие в облакe инстансы из кондуктора:
1. В группе CONDUCTOR_GROUPS ищем хосты с кондукторным тегом "sync"
2. Проверяем, что такие хосты существуют в облаке в нужном каталоге, если нет - удаляем из кондуктора ( с даунтаймом в джагглере в 20 минут )
