# vertis-st-updater

Бот для проставления дежурного в тикеты очереди VASUP

## Локальный запуск и тестирование

Для локального запуска и тестирования нужны файл local.env и dev.env. 
В dev.env указываются переменные окружения ST_API_URL, ADMIN_BOT_URL, ST_QUEUE.

В local.env требуется положить токен для доступа к API Стартрека в следующем виде: `ROBOT_OPTIMUS_TOKEN=token`.
Оба файла должны лежать в корне проекта. Окружение dev будет распознано без дополнительных манипуляций.

При тестировании без изменения файлов env бот ходит в тестовый стартрек и проставляет дежурного в тестовой очереди vasuptest.

При тестировании и запуске не локально используются переменные окружения ST_API_URL, ADMIN_BOT_URL, ST_QUEUE, ROBOT_OPTIMUS_TOKEN, DEPLOY_LEVEL (testing или prod в соответствии с окружением).

## Тесты и сборка

Сборка выполняется через `make build`.

Тесты выполняются через `make test`.
