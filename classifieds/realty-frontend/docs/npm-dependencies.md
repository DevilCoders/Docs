# NPM зависимости

Мы испольщуем yarn для установки зависимостей, так как он поддерживает workspaces.
Подробнее тут [REALTYFRONT-4274](https://st.yandex-team.ru/REALTYFRONT-4274).

Храним все зависимости в корневом package.json, чтобы:
1. Обновлять зависимости в одном месте.
2. Избавиться от возможного дублирования модулей с разными версиями во время webpack сборки.
Подробнее тут [REALTYFRONT-5935](https://st.yandex-team.ru/REALTYFRONT-5935)
Исключение из правил - локальные зависимости, такие как `realty-router`, так как у них не меняются версии.

## Установка зависимостей
В любом месте можно выполнить `yarn install` или `make deps` и установятся все необходимые зависимости.

## Добавление зависимостей
```
yarn add <package> [--dev/-D] -W
```
Добавляем только в корневой `package.json`(Если это не локальная зависимость, см. выше).
Если новая зависимость используется на клиенте и не используется на сервере,
то добавляем её в `devDependencies`.

## Удаление зависимостей
```
yarn remove <package>
```
Yarn удалит не только зависимость, но и симлинки на app и view из node_modules.
Это особенность yarn, которую собираются исправить, а пока придется сделать `git checkout node_modules`.
Или можно руками поправить `package.json` и запустить `yarn install`.
