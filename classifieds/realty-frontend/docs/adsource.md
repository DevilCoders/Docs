# Платный контур

Чтобы лучше отбивать затраты на рекламу в классифайде действует механизм платного контура. Суть в том, что пользователь,зашедший с рекламы, залипает в контуре, где показываются только платные объявления и карточки.

## Технические подробности

При переходе на сервис с параметром `adSource` в специальном middleware с название `ad-source.js` происходит сохранение параметра со временем перехода на сервис и дополнительными данными в куку `adSource`. Далее эти данные пробрасываются в виде заголовков в ручки бэкэнда недвижимости. Основные заголовки: `ad-source`, `ad-source-timestamp`, `ad-source-campaign`.

Вся логика по работе платного контура задана на бэкэнде, в том числе время "залипания" в контуре. Клиенты только пробрасывают сохраненные параметры платного контура. Сделано это для того, чтобы не поддерживать на всех клиентах (веб, приложения) одинаковую логику работы.
