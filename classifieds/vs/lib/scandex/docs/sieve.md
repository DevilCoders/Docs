# Могильный индекс или Индекс-сито

Служебный индекс, хранящий информацию об активности документа, дате создания и последнего изменения.

**Полная перестройка** - обновление всех типов индексов всех полей с учетом актуальных документов.

**Частичная перестройка** - обновление индексов одного или нескольких полей.

**Критерий полной перестройки** - количество неактивных документов превысило N%.

Возможные изменения документов:
 - DELETE - удаление документа.
 - CREATE - создание нового документа. 
 - UPDATE - изменения одного или нескольких полей документа.

Индекс-сито же позволяет снизить частоту полной перестройки: она выполняется 
  - либо при удалении документа И выполнении критерия полной перестройки
  - либо при создании нового документа.

Индекс служит ситом на этапе материализации ответа, оставляя только активные документы.

## Методы индекса
```scala
def siftActive(documents: MutableBitSet): Task[Boolean] 
```
Из всех `documents` оставляет только актуальные документы, результат записывается в аргумент, на выходе - флаг, что в 
результате отсеивания остались активные документы.

## Реализация индекса

Состоит из трех сегментов:
- `OffHeapBitsetSegment` для хранения активных документов
- два ValueStorage[Uint64] для хранения дат создания и последнего изменения




