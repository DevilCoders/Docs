# Сегменты для значений

Значениями полей могут быть примитивы: `Byte`, `Short`, `Int`, `Long`, `Float`, `Double` и составные структуры такие как строки и массивы байтов.
Есть два типа сегментов значений:
 - значение связано с соответствующим `ValueIdx`: `ValueStorageSegment` и `ValueLookupSegment`
 - битсет

## ValueStorageSegment

Отвечает на вопрос, какое значение поля документа соответствует заданному `ValueIdx`.
Внутри устроено как массив из значений типа `T`, где номер ячейки соответствует `ValueIdx` (т.е. отсортирован по `ValueIdx`).

## ValueLookupSegment

Отвечает на вопрос, какой `ValueIdx` у заданного значения типа `T`.

###  Реализация

Реализация сегмента значений для `ValueStorageSegment` и `ValueLookupSegment` общая и представляет собой сегмент
`alien.Memory` со структурой `Sequence[Value[T]]`.

Перед заполнением значения должны быть отсортированы, `ValueIdx` выдается значению согласно его порядку в отсортированном списке.
Таким образом, получение значения по `ValueIdx` происходит за O(1), а для определения `ValueIdx` по значению используется
бинарный поиск и сложность O(log N).

## OffHeapBitsetSegment

Внутри состоит из Sequence[Value[Long]], т.к. это наиболее компактный способ хранить 0 и 1.
