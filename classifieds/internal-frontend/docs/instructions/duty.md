# В помощь дежурному
## Чем у нас должен заниматься дежурный

* Мониторить чат `verticals-internal-frontend-duty`.
* Мониторить [очередь](https://st.yandex-team.ru/VSIF) на предмет новых задач с приоритетом "Критичный" или "Блокер". 
В идеале - подписаться на создание задач и проверять почту.
* При появлении вопроса в чате или задачи в st с приоритетом "Критичный" или "Блокер" - реагировать. 
Если задача имеет приоритет "Блокер" (актуально для багов), её нужно немедленно брать в работу, т.к.
такие задачи означают, что что-то напрямую мешает работе. Если приоритет задачи - "Критичный", нужно призвать
в комментарии её автора и уточнить, может ли задача подождать до следуюшего спринта. Если нет - экстренно оценить её
и взять в спринт, брать немедленно в работу не нужно.
* Проводить Оценку и Планирование. Во время Оценки нужно наполнить доску Покера, открывать тикеты, шаря экран, 
и писать в них dev-комментарии. На Планировании - закрыть спринт, создать новый и набрать в него задач из оцененных. 

## Шпаргалка 
Частые проблемы и помощь с ними.

<details><summary>Нет доступа / Ошибка "Недостаточно прав"</summary> 

1. Посмотреть (в коде), какие права проверяются в указанном пользователем месте. Если это запрос (ручка), 
то проверка в мидлваре `check`, если проблема на клиенте (элемент неактивен), то нужно смотреть использования
хелпера `internal-core/client/utils/can`.
2. Найти в [Админке](https://admin.vertis.yandex-team.ru/idm) по логину пользователя, который пришёл с проблемой. 
Посмотреть, какие у него есть пользовательские группы (роли). Зачастую эта роль - одна (например, "Модерация -> Авто.ру").
3. Задать вопрос, нужен ли этот доступ всем с такой ролью (всем модераторам Авто.ру) и предложить добавить её всем.
    * Если ответ "да", то нужно включить нужные доступы в манифест `user-groups.json`, в нужную роль. Перед этим или попросить
      пользователя завести тикет на добавление доступа, либо сделать его самому ([пример](https://st.yandex-team.ru/VSIF-2145)).
    * Если ответ "нет", то скинуть ссылку на запрос роли в IDM. Например, [так](https://nda.ya.ru/t/k4e0pFJl4isN6j). 
      Можно лишний раз напомнить, что точечные роли могут ломаться, и лучше работать с пользовательскими группами.
</details>

<details><summary>Какой-то запрос падает с 500-й ошибкой</summary> 

1. Попросить нажать в "жучка" и описать проблему. С этого стоит начинать всегда, т.к. с тикетом работать удобнее во всех отношениях.
2. Найти либо по `requestId` (если его сразу предоставили, либо по временному диапазону лог ошибки). 
Искать без `requestId` можно, например, [так](https://grafana.vertis.yandex-team.ru/s/t/2Q2nvUIa4isQiS).  
    * Если в тексте ошибки есть что-то осмысленное (например, "complaint already exists"), просто написать об этом 
      в комментарий в задаче, призвав автора и предложив уточнить у бэкенда, нормальное ли это поведение.
    * Если ошибка говорит о неверных параметрах запроса или просто непонятна, посмотреть, всё ли в payload-е запроса
      соответствует [схеме или Сваггеру](./work-on-task.md#как-найти-swagger-или-схему-запроса).
      * Если да, нужно идти к [бэкенду](./work-on-task.md#куда-писать-с-проблемами-с-бэкендом).
      * Если нет, нужно пофиксить баг и открыть ПР.
</details>

<details><summary>Ошибка 40X на клиенте</summary> 

Такое бывает, когда падает код клиентских компонентов и ошибка всплывает до `ErrorBoundary`.

1. Попросить нажать в "жучка" и описать проблему.
2. Попробовать воспроизвести проблему - открыть проблемную страницу, выполнить шаги в задаче.
    * Если получилось, нужно пофиксить баг и открыть ПР.
    * Если не получилось, можно написать в личку автору задачи и разобраться в индивидуальном порядке.
</details>
