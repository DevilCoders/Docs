#Алгоритм
Входные данные
1) query - наша поисковая форма
2) result - весь результат опроса

Примерная работа:
1. Достаем старые индексируемые записи
2. Создаем новые индексируемые записи(*)
3. Понимаем какие старые записи нужно удалить
4. Какие новые записи надо добавить
5. Какие существующие записи  надо обновить
6. Накатываем обновляшки

Создаем новые индексируемые записи:
1. Берем каждую фару
2. Находим мин цену для багажного и без багажного тарифа (То есть теряем информацию о партнере)
3. Сортируем список цен + метаинформацию (информацию о перелете)
4. Сортируем по цене
5. Бежим от самого дешевого к самому дорогому варианту
6. Вариант считаем интересным, если он вносит "разнообразие" в выдачу

Вариант вносит разнообразие в выдачу, если он не такой как все предыдущии (за исключением цены) по следующим признакам:
1. Багажность
2. Количество пересадок
3. Авиакомпания
4. Аэропорт вылета
5. Аэропорт прилета
6. Аэропорт вылета (обратный билет)
7. Аэропорт прилета (обратный билет)
8. Тип времени вылета
9. Тип времени пребытия
10. Тип времени вылета  (обратный билет)
11. Тип времени пребытия

Пример:
Имеем следующую выдачу:
1. MOW-EKB SU 123 за 2000 утренний прилетает вечером
2. MOW-EKB SU 321 за 4000 утренний прилетает вечером
3. MOW-EKB SU 456 за 3000 утренний прилетает ночью
4. MOW-EKB SU 456 за 3000 утренний прилетает ночью с багажом

1,3,4 будут сохранены
