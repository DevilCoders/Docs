# Отрытые архитектурные вопросы

## Запуск в Ya.Deploy
Получилось создать проект, создать stage, запустить приложения и проверить доступ из приложения к БД.

Отрытые вопросы по среде ифраструктуре Yandex:
* Как настроить комунальный балансер на проект в Ya.Deploy?

  При попытках настроить при указании `endpoint set` в YP говорить, что такого нет.

* Как сделать проверки Liveness и Readiness?

  * При попытке указать http порт и хост проверка падает при обращении по схеме http2. 

  * А `curl -sf localhost:8080/actuator/health/...` при ошибки не возвращает ответ с диагоностикой. 
  * Может стоит написать более сложный скрипт?

* Какие критерии проверок Liveness и Readiness?

* При сборки собирать информации о ветке, коммите и последнем комите в trunk, и отображать это:
  * в логах
  * `curl -sf localhost:8080/actuator/info`

* Каким образом и куда должны собираться логи? 
  * Нужно ли делать папку `/logs`?
    * и если да то как примонтировать диск в `/logs`?
  * Какая должна быть стуктура лога для корректного поиска в elastic-search или что в Яндекс вместо elastic-search?

* Как настраивать мониторинг?
  * Настроить выдачу где-то типа `curl localhost:8080/actuator/solomon`.
  * Настроить сбор метрик, как его настроить?
  * Как настраивать отображение метрик?
  * Как срабатывание alarm'ов?

* Как проводим аутентификацию входящих запросов?
  * Нужно ли настраивать TLS на уровне приложения или это делаем на балансере?
  * Как проверяем и проверяем ли входящие токена?
  * Как извлекаем данные из токенов?

* Сделать раскатку на тестовый стенд одной коммандой, как я люблю. Что бы думать, а функциональных проблемах, а не о том как задеплоить на тестовый стенд.

