open.sh и close.sh -- это скрипты для плавного закрытия от поиска бекендов и последущего их открытия во время SaaS-ученек.

Пример использования (на примере autoparts)

Сначала учим SAS

  Получаем список инстансов в одной локации
  sky listinstances G@SAS_SAAS_CLOUD_AUTOPARTS:stable-106-r79 | sed 's/\(.*\):\(.*\)@.*/\1 \2/' > instances_list
  (группу и тег можно подсмотреть в няне, во вкладке instances нужного сервиса. Можно получать список инстансов и другими путями)

  Закрываем эту локацию (создаёт файлик stopped_list, который потом используется в ./open.sh)
  ./close.sh

  Открываем эту локацию (Тут нужен файлик stopped_list, который был создан ранее. Если он неведомым способом продолбался, можно вместо него подсунуть instances_list)
  ./open.sh

  !!! Проверяем по DM'у, что все хосты ожили и открылись на поиск, допинываем руками если что-то не так

Повторяем все эти действия для оставшихся локаций (MAN, VLA)

Этоти скрипты и эту инструкцию можно итеративно улучшать во имя минимизации ручных/рутинных действий, совершаемых дежурным.

