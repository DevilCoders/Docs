# Review гипотез созданных пользователем по ```Зоне контроля заданий пешеходам```

## Определения

### Зона
```Зона контроля заданий пешеходам``` далее ```Зона```, это полигональный объект в НК.

По зоне генерируется задание на обход и фотографирование местности в мобильном приложении.

Мобильное приложение создаёт гипотезы (feedback task)

### Исполнитель
Человек, выбранный для выполнения работы подрядчиком из состава своей компании.

Исполнители перечислены в ACL НК, как члены группы соответсвующего подрядчка / компании.

Логин (и uid) исполнителя являются атрибутами объекта ```Зона```

### Review
Это список гипотез в границах зоны.

Сейчас в гипотезе не указан uid исполнителя. Временно будем выбирать гипотезы только по источнику.

Список гипотез содержит только гипозы добавленные после предыдущего ревью.

Для каждой гипотезы можно указать комментарий описывающий проблемы.

Для комментария к гипотезе обязательно указывается одна из предопределённых тем. (```topic```)

Темы используются для гуппировки сообщений в отчёте.

Так же можно указать общий комментарий для всего Review.

В один момент времени для зоны может быть только одно review в состоянии черновик.

```Review``` создаёт и редактирует картограф.

Состояния ```review```

* черновик - review в процессе работы, можно удалить и начать с той же точки.
* опубликовано - review завершено и сгенерирован отчёт


### Отчёт
Отчёт это отформатированный по шаблону HTML/PDF файл содержащий комментарии и выдержки из гипотез.

Отчёт передаётся исполнителю.

## Процесс
* По завершении задания статус Зоны меняется на "можно проверять".
* В форме зоны появляется кнопка создания Review доступная картографу.
* По нажатию на кнопу создаётся Review (проверка) в состоянии "черновик".
* Картограф видит список гипотез на карте и таблицу в форме, оставляет комментарии к гипотезам и заданию в целом.
* Картограф может сохранять промежуточный результат.
* По завершении Review картограф нажимает кнопку "Создать отчёт"
* Review переводится в состояние "опубликовано" и генерируется отчёт доступный по внешней ссылке.
* Отчёт передаётся ```Исполнителю``` для работы над ошибками.

## Ограничения доступа

Редактировать и удалять можно только свои review пока они в состоянии черновик

Просматривать review имея права **mpro/social/feedback/review/view** на просмотр в ACL, кроме review в состоянии черновик.

Чужие черновики можно просматривать только имея права на редактирование review

Для создания и редактирования review надо иметь соответсвующее право в ACL  **mpro/social/feedback/review/edit**


