##ps-header
Общая шапка персональных сервисов, объединённых в виртуальное рабочее место "Почта 360".

Переводы шапки можно обновить, выполнив в корне пакета команду `npm run tanker:ps-header`

- `src/ps-header/index.tsx` - основной файл шапки, без строки поиска в левой части шапки
- `src/ps-header/with-sliding-search.tsx` - HOC над шапкой для вставки поиска в левую часть с выезжанием

Описание опций можно посмотреть рядом с описанием типов опций в исходниках.

###Встраивание в сервис

Необходимость показа шапки опеделяется хэлпером `helpers/should-show-ps-header.js` 

Шапка всегда рендерится на сервере, после чего оживляется на клиенте.

1) подключить в `html` стили и скрипты Lego-блока пользователя  
Для этого нужно вызвать `helpers/get-static-path.server.js`.  
Хэлпер принимает 2 необязательных параметра:
  - `service: string` - если нужен кастомизированный под конкретный сервис блок (например, `service = 'mail'`)
  - `isWithCss: boolean` - если нужны не только скрипты, но и стили блока пользователя отдельным файлом стилей.
Рекомендуется передавать `isWithCss = true` и подключать стили блока пользователя
отдельным файлом стилей в `<head>` сервиса.  
Хэлпер вернёт пути до `js` и `css`-файлов на `yastatic.net`.  
Файлы по этим путям нужно подключить в ваш HTML: стили - в конец `<head>`, скрипт - в конец `<body>`.

2) отрендерить саму шапку на сервере  
- Если ваш сервис поддерживает полноценный серверный рендеринг,
то достаточно просто встроить шапку в нужное место приложения.  
- В противном случае шапку можно отрендерить при помощи `NodeJS`, используя собранные файлы из папки `dist_umd`.  
В них находятся компоненты, которые Node рендерит в вёрстку через
`ReactDOMServer.renderToString(React.createElement(importedComponent, props))`.  
Если на предыдущем шаге вы подключили не только JS Lego-блока пользователя, но и CSS,
то при серверном рендеринге нужно добавить опцию `onlyUserHTMLInSSR: true`,
чтобы блок пользователя не рендерил инлайн-стили.

3) настроить локализацию  
- если ваш сервис поддерживает сборку кода по языкам, то достаточно в `webpack`
через `DefinePlugin` определить `LANG` с языком сборки
- иначе локали нужно подгрузить самостоятельно из папки `i18n` и передать в компонент
опцию `getI18nFn`, которая будет возвращать значения нужных ключей

4) убедиться, что рендеринг на клиенте оживляет шапку в том же месте, где она отрендерена на сервере,
а не рендерит вторую копию шапки.  
- В случае полноценного серверного рендеринга тут не должно быть проблем.  
- При рендеринге нодой можно воспользоваться обёрткой, которая сделает `hydrate` шапки в контейнер шапки,
отрендеренный на сервере
