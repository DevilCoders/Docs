_Инструкция для дизайнеров [тут](#для-дизайнеров)_

# Дизайн-система MG (Media guide)

В этом пакете содержится конфигурация токенов для сборки лего тем `mg-dark` и `mg-light`, реализующих дизайн-систему MG.

# Как пользоваться?

Пакет содержит как исходные токены, так и собранные стили с селкторами, определяющими css-переменные для лего-компонентов.

Для подключения стилей необходимо

**1. Установить пакет**
```
npm i @ps-int/mg-theme --save-exact
```

**2 Убедиться, что стили попали в сборку своего проекта**

Стили для тем доступны в директории `@ps-int/mg-theme/css`. Необходимые импорты уже содержатся в файлах библиотеки, так, что
импортировав нужную тему автоматически выполнится `require` нужных файлов стиля. Со стороны проекта требуется убедиться в том, что
webpack сконфигурирован таким образом, что эти стили попадут в приложение.
Например, при использовании [PS-Build](https://github.yandex-team.ru/personal-services/frontend/tree/dev/packages/ps-build)
стоит добавить путь к пакету в `options.externalCss`.

**3 Подключить шрифты**

MG-темы используют шрифты
* `YS Text Medium`
* `YS Text Bold`
* `YS Text`

Для корректного отображения важно подключить эти шрифты исполоьзуемым на проекте способом, либо подключить css со шрифтами из пакета:
```javascript
import '@ps-int/mg-theme/css/fonts.css';
```

**4. Использовать одну из MG-тем для тематизации лего-компонентов**

Самый простой способ — это использовать функцию `configureRootTheme` из пакета лего-компонентов
```javascript
import { configureRootTheme } from '@yandex-lego/components/Theme';
import { MG_LIGHT } from '@ps-int/mg-theme';
import { MG_DARK } from '@ps-int/mg-theme';

// конфигурируем тему глобально
configureRootTheme({ theme: MG_LIGHT });

// конфигурируем тёмную тему для детей определённого элемента
configureRootTheme({ theme: MG_DARK, root: document.querySelector('#root-app') });
```

Если приложению требуется переключать тему во время исполнения, то можно использовать хэлпер `cnTheme`, например, так
```javascript
import React from 'react';
import { MG_LIGHT } from '@ps-int/mg-theme';
import { MG_DARK } from '@ps-int/mg-theme';
import { Theme, cnTheme } from '@yandex-lego/components/Theme';

class MyComponent extends React.PureComponent {
  render() {
    return (
      <div className={ cnTheme(this.props.someCondition ? MG_LIGHT : MG_DARK) }>
        { this.props.children }
      </div>
    );
  }
}
```

Подробнее про подключение тем можно почитать в [Документации лего](https://lego.yandex-team.ru/components/lego/latest/?storybook=%2Fdocs%2Futility-theme--docs).

# Для дизайнеров

Для того, чтобы получить последнюю версию пакета и, например, проверить работоспособность своих изменений придётся минимально подружиться с `git` и `nodejs`, но не переживайте, это не больно ;)

## Готовим окружение
* Если у вас не установлен `git`, то стянуть его можно [тут](https://git-scm.com/downloads)
* Nodejs можно утащить [отсюда](https://nodejs.org/en/download/)

## Тянем репозиторий

Открываем терминал в своей системе в нужной директории и пишем
```
git clone https://github.yandex-team.ru/personal-services/frontend.git
```

В итоге мы получим локальную копию большой монорепы в папке `frontend`. В этом репозитории далеко не только пакет MG-темы, но и куча кода фронтенда персональных сервисов, не пугайтесь.

## Ставим зависимости проекта

Для того, чтобы запустить сборку потребуется установить зависимости проекта — те самые штуки, которые его будут собирать О_о, для этого идём в директорию с пакетом `mg-theme`
```
cd frontend/packages/mg-theme
npm ci
```

После этого проект будет готов к сборке, его работоспособность можно проверив запустив в директории `packages/mg-theme` команду
```
npm run build
```

## Меняем токены и проверяем как что работает

Токены для тем находятся в папке `theme`, её структура должна быть знакома.
Там можно навести шороху, поменять что-то по своему усмотрению и проверить, что ничего не сломалось запустив тот же
```
npm run build
```

Если в итоге всё сломалось, получилась какая-то фигня, больше ничего не работает и всё хочется вернуть как было, то можно сделать
```
git reset --hard
```

Это вернёт нас к последней закоммиченой версии проекта.

## Обновляем пакет

Если разработчики выпустили новую версию пакета и её хочется полуить локально, то не нужно проделывать все манипуляции заново, достаточно сбросить текущие локальные изменения в репозитории и вытянуть новую версию
```
git reset --hard
git pull
```
