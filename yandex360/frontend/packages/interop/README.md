# @ps-int/interop

Библиотека для реализации сигналов между разными рантаймами.

## Транспорт
Включает в себя [интерфейсы транспорта](./lib/transport/base.ts), которые нужно имплементировать для разных рантаймов.

Так же включены имплементации для популярных рантаймов:
1. [Браузер, iframe](./lib/transport/WindowPostMessage.ts)  
2. [AndroidWebView](./lib/transport/AndroidWebView.ts)
3. [WKWebView IOS](./lib/transport/WKWebViewPostMessage.ts)
4. [MobileWeb](./lib/transport/MobileWeb.ts) - транспорт для приема сигналов от мобильных приложений 
5. [Callback](./lib/transport/Callback.ts) - имплементация для одного рантайма. Для случая планирования переезда на 2 рантайма.

## Сигналы

### Отправка
Для отправки событий, на которые не ожидается ответ используется экземпляр класса [Sender](./lib/sender.ts).

В случае если ожидается получить ответ, например для запроса данных, нужно использовать [Executer](./lib/executer.ts).

### Прием
Для приема событий, на которые не нужно отвечать используется [Receiver](./lib/receiver.ts)

В случае если на другой стороне ожидают ответ и запрос был сделан при помощи Executer, например для запроса данных, нужно использовать [Handler](./lib/handler.ts).
Можно использовать Handler без Executer (например при приеме сигнала с мобильных приложений), но в мобильном приложении в пейлоад должно подкладываться поле requestId. 
