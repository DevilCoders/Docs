# Сервис

**Сервис** — это абстракция над запросом данных, он знает на какой сервер нужно сходить за данными, какие к серверу должны быть таймауты. Так же он знает об обязательных параметрах для всех запросов к серверу.

Любой сервис представляет из себя функцию, которая принимает четыре параметра `core`, `method`, `params`, `options` и возвращает `Promise` с обработанным результатом ответа от сервера.

`params` - параметры запроса переданные с клиента и модифицированные в [модели](./model.md).
> ВАЖНО: не допускайте проброса параметров управляющих пользовательской сессией. Например uid.

`options` - [опции](./core.md#goturl-options) для http запроса через [got](https://github.com/sindresorhus/got) на сервер и любые другие параметры, которые нельзя передавать в params.

```js
'use strict';

const DEFAULT_TIMEOUT = 1000;

module.exports = (core, method, params, { config, ...options }) => {
    const { uid } = core.auth.get();

    body = {
        // безопасный параметр по умолчанию
        lang: 'ru' 
        ...params,
        // параметр который нельзя пропускать из интерфейса к бекэндам
        // иначе мы сможем запросить данные для другого пользователя
        uid
    };

    options = {
        timeout: DEFAULT_TIMEOUT,
        body,
        ...options
    };

    return core.got(config.services.wmi + method, options);
};
```