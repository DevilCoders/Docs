# Автоматизация: hermione


{% note info %}

trunk должен быть максимально стабильным и поэтому, код, который в него вливается, должен быть покрыт юнитами и гермиона-тестами

{% endnote %}

## Где пишем

Hermione-тесты мы пишем в следующих приложениях:

* client;
* public;
* sarah;
* notes;
* telemost


## Как пишем

### В рамках проектов


{% note warning %}

* **при планировании проекта нужно учитывать время на написание автотестов и написание тест-кейсов под них**
* **обязательно** автотестами должен быть покрыт критичный фунционал, который входит в состав смоуков ("High && High" приоритеты тест-кейсов)
* **ожидается**, что автотестами также будет покрыт основной функционал, который входит в состав бизнес-логики / регресса
* **не автоматизируем** специфичные сценарии и тест-кейсы с низким приоритетом
* **поле** `is_automation_possible` в тест-кейсах является обязательным

{% endnote %}

В рамках работы над проектом ответственный разработчик и тестировщик сами определяют порядок написания автотестов - либо они пишутся сразу на каждую задачу, либо пишутся в самом конце проекта
Разработчик вправе просить у тестировщика чек-лист или кейсы для автоматизации


#### Что делать, если автотесты написать не получается по различным причинам?

Не всегда есть возможность покрыть функционал автотестами - например, кейс может быть технически сложным для автоматизации и на него требуется дополнительное время или кейс может быть вовсе минорным. Да и в целом, возможна ситуация, когда кейс автоматизировать невозможно

**Исходя из этого, совершаем следующие действия:**
* в тест-кейсе поле `is_automation_possible` является обязательным и оно должно содержать одно из трех значений - `true` (можно автоматизировать), `false` (невозможно автоматизировать), `doesn't_make_sense` (не имеет смысла автоматизировать);
* в тест-кейсе проставляем поля `no_automation_reason` и `no_automation_feature` - это поможет к дальнейшем понимать, почему не смогли автоматизировать и какие фичи не получилось покрыть автотестами;
* заводим задачу на автоматизацию и добавляем туда кейсы c полями `is_automation_possible: true` && (`no_automation_reason: не успеваем в продуктовый дедлайн` OR `no_automation_reason: технически сложно`). Если к моменту прочтения причин стало больше, то тоже их добавляем
* задаче проставляется дедлайн в **1 календарный месяц** и навешивается компонент `Disk Frontend` && `Component: %component%` + `tag: "need_autotests"` + `исправить в версии: web-rc-branch`
* если у кейсов возникает причина `no_automation_reason: не успеваем в продуктовый дедлайн`, то нужно получить "OK" от лидов разработки и тестирования


### В рамках отдельных атомарных задач

{% note warning %}

Автотесты пишутся только на **Блокеры**, **Криты** и **Нормалы**

{% endnote %}

Для разметки наличия автотестов используем поле "Автотестирование" в классе "Тестирование"

**Значения полей:**
* **Не определено** - тесты написаны, но на них нет id в TP
* **Требуется тест** - тесты не написаны, нужно написать
* **Тест написан** - все ок, тесты написаны, есть слинованный id TP
* **Тестирование не требуется** - автотест в этом тикете не нужен
