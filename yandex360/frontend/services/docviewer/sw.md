Схема работы service worker

1. Клиент приходит в sw с запросом /view или /restart или /?url=
2. SW ему отвечает html с крутилкой и скриптом, в котором fetch('service-worker-load?url=original_url_encoded')
3. Клиент приходит опять в SW. SW понимает, что это url специального вида (п.2), забирает оттуда оригинальный url и по нему достает оригинальный request (через wsCache)
4. SW идет за оригинальным запросом, клиент всё это время показывает крутилку и ждёт
5. SW сходил за запросом к нам в dv, получил его, сохранил в кэше.
6. Если всё хорошо, то в скрипте в html произойдет location.reload. Клиент попадает опять в SW, который уже отдает ему реальный ответ от нашего сервера.
7. Если на каком-нибудь из этапов было плохо, то отдается специальный ответ с заголовком sw-error, по которому скрипт перезагружает страницу с параметром nosw=1
