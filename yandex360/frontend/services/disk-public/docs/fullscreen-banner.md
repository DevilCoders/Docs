# Полноформатная реклама на публичной странице файла

На публичной странице файла приложение умеет показывать полноформатную рекламу (на всю страницу приложения),
используя для этого возможности директа. Подробнее [тут](https://wiki.yandex-team.ru/users/larichevmn/s2s/).
При полноформате не показываются никакие другие блоки рекламы.

## Условия показа рекламы:

[Продуктовые условия](https://wiki.yandex-team.ru/users/eyalunin/publichnaja-stranica-diska/#polnoformat)

1. Домен верхнего уровня `ru`.
2. Владелец файла должен быть НЕ платным пользователем
3. Текущий пользователь должен быть НЕ платным пользователем
4. Браузер, в котором будет отображаться реклама, находится в списке поддерживаемых
5. Тип публичного ресурса - НЕ картинка и НЕ видео

## Алгоритм работы

1. Проверяется, подходит ли публичная страница условиям показа рекламы
2. Если страница подходит к показу рекламы, то запрашивается рекламная кампания от директа.
3. Если страница не подходит к показу рекламы, то будет отображена в стандартном
режиме согласно типу файла.
4. Если директ дал положительный ответ о рекламной кампании
(об этом свидетельствует наличие свойства `rtb.posterSrc` в ответе ручки),
то по полученным данным выводим на публичной странице рекламу.
Для этого используются поля:
    - `rtb.posterSrc` - ссылка на картинку, которая должна быть отображена на странице.
    - `rtb.clickUrl` - ссылка, на которую должен перейти пользователь при клике на картинку.

## Получение данных от директа

За получение данных от директа отвечает `app/helpers/check-fullscreen-banner.js`.
Там содержится выделенный для таких рекламных кампаний URL и приведение данных от директа в удобный для Диска формат.

При наличии подходящей рекламной кампании `check-fullscreen-banner.js` возвращает `Promise` с объектом с полями:

1. `src {string}` - URL картинки баннера.
2. `link {string}` - URL для ссылки перехода по клику на картинку баннера.
3. `winNotice {string}` - URL который надо дёрнуть при отрисовке рекламы.
4. `viewNotices {string[]}` - массив URL-ов которые надо дёрнуть через секунду после отрисовки рекламы.
