widget-save
===========
Виджет выбора папки для сохранения файла на диск

Быстрый старт
-------------
1. `npm run prepare-dev`;
2. `npm run watch`;    
3. `npm start`.

У вас соберётся текущая версия и в фоне запустится приложение.
Логи пишутся в файлы `widget.log` и `widget.error.log`.

Страница будет доступна по адресу `https://USER.ufo.dsd.yandex.ru/save/`.

Для автоматической пересборки можно запустить `make watch`
(аналог команд `make server-client` из Диска).
Стили собираются по умолчанию уже захэшированные, поэтому,
чтобы настроить source map для стилей, можно выполнить
```
npm run watch -- --map
```

Доступные команды в Makefile
----------------------------
  * `start`/`stop`/`restart` — запускает/останавливает/перезапускает приложение;
  * `build` — собирает приложение;
  * `watch` — собирает приложение и следит за обновлениями,
    пересобирая приложение по мере необходимости;
  * `update` — обновляет модули, если поменялся `package.json`.
    Если надо просто обновить модули, используйте `npm install`;
  * `loc` — загружает сгенерированную JS локализацию из Танкера;
  * `clean` — удаляет собранные файлы и логи;
  * `test` — запускает тестирование.

Переменная окружения `NODE_ENV`
-------------------------------
Если она ещё не определена, то в `Makefile` выставляется `development`.
Для сборки deb-пакета, скрипты сборки автоматически выставляют
этой переменной значение `production`, что в процессе сборки приводит
к выкидыванию различных проверок в React-е и Redux-е
(можете поискать `process.env.NODE_ENV` в исходиниках).

postMessage виджета
-------------------------------

**Формат сообщения**

```jsdoc
{
    "type": {string}, // <тип сообщения>
    "data": {Object} //<данные сообщения>
}
```
**Доступные сообщения по типу:**

 - `selected` - нажата кнопка окончательного выбора папки сохранения. Передаваемые данные - `{ selectedId: {string} }`
 - `escape` - в рамках окна нажата клавиша `esc`. Передаваемые данные - `{}`
 - `close` - окно будет закрыто. Передаваемые данные - `{}`

Сборка
-------------------------------
1. запустить локальный докер-контейнер: `make run-container`
2. апнуть версию в `package.json`
3. выполнить `make upload`

