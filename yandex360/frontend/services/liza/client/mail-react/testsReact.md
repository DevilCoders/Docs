# Тесты React + Mobx

Пишутся в той же директории, рядом с файлом на который надо написать тесты.
Расширение `*.spec.js`.

Примеры в /mail-react/components/*/*.spec.js.

## Основные моменты

Для проверок правильного рендеринга собственно компонента используем enzyme (http://airbnb.io/enzyme/).
Для сложных компонентов используем легкий shallow рендеринг, для более простых можно использовать
full DOM rendering (метод mount). Стабы сервисов/сторов есть например в client/test/setup-app.js.

Если нужно протестировать метод компонента, тут сложнее. Чаще всего компонент обернут mobX-овой оберткой, и получить оттуда метод экземпляра затруднительно.
Но есть несложная методика:

Переписываем компонент таким образом, чтобы обертывание mobX-ом произошло позже, сначала создаем компонент как будто он "глупый", позже
инжектим все из mobX-а (нужные сторы/сервисы) и в таком виде экспортим класс.

Пример:

```
export class _ListItem extends React.Component {...}

@inject('popupState')
@observer
export default class ListItem extends _ListItem {}

```

не забыть в тестах сделать правильный импорт

```
import { _ListItem as ListItem } from './ListItem';
```


таким образом, создать инстанс можно как `new ListItem(<props>)` и получить доступ к методу компонента.
