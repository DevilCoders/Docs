![Алгоритм переходов в состояния Компоуз](compose-fsm-diagram.png)

###Как работать с `Daria.mComposeFsm` моделью?
Модель состояний компоуз имеет 4 состояния:
  - `edit` - радактирование письма
  - `sending` - подготовка данных к отправке и отправка
  - `sent` - письмо отправлено
  - `cancel` - создание письма отменено

Во время перехода из состояния `edit` в состояние `sending` происходит сбор данных для `Daria.mComposeMessage`, которые не могли быть заполнены интерактивно.
Например, это данные из WYSIWYG.

При переходе из состояния `sending` в `sent` происходит отправка письма. Если переход завершается неуспешно, то `Daria.vCompose2` возвращает систему
в состояние редактирования `edit`.

При переходе в состояние `cancel`, компоуз закрывается и возвращается на предыдущую страницу. Переход в `cancel` возможен только с `edit`.

Для правильного запуска отправки письма рекомендуется производить её через `Daria.mComposeFsm` модель.
Делается это следующим образом:

```js
ns.View.define('some-button', {
    models: {
        'compose-fsm': false,
    },

    events: {
        'click': 'onClick'
    },

    methods: {
        onClick: function() {
            this.getModel('compose-fsm').setState('sending', {/* объект управляющих параметров отправки */})
        }
    }
});
```

