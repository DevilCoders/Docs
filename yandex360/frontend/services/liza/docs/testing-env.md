# Как завести лизу в тестовом окружении

**Тут есть что улучшать, просто описал как завел лизу «на ручках».**

### tvm:

Если давно не, прогнать dev-playbooks `make tvm` — должны доехать конфиги для tvm
и перезайти в qyp (или перезапустить tmux), чтобы подхватились нужные переменные окружения
(короткий вариант, `source /etc/profile.d/tvm.sh`).

### Запустить веб-апи в тестинге:

```(bash)
cd $HOME/frontend/web-api
DEBUG=core:* npm run start testing
```

### Запустить лизу в тестинге:

```(bash)
cd $HOME/frontend/liza/server
DEBUG=core:* npm run start testing
```

### Залогиниться в тестинге:

Гомер смотрит в прод, поэтому, чтобы проставить куки из тестового паспорта, залогиниться нужно тут:
https://passport-test.yandex.ru/

Открывать лизу по урлу с `/u2709/` на конце (например https://avanes-frontend.verstka-dev.mail.yandex.ru/u2709/),
иначе запрос попадет в гомера, который смотрит в продовый паспорт.

В каких-то бэкендах в тестинге на разрешены наши твм. Сейчас прописал их руками (akita, hound, sendbernar, etc),
но это слетит при следующем деплое.
