# Где подготавливать данные? На сервере или в браузере?

Очень часто бывает, что бекенд отправляет избыточные или неудобные для работы в браузере данные.
Такие данные надо приводить к удобному формату, используя механизм фильтров (`filters.jsx`).
 
**Плюсы**:
 1. Выдача данных модели работает как API: ничего лишнего, с даными удобно работать, просто накладываются шаблоны.
 2. В браузер отдаются данные, которые ему реально нужны.
 2. Верстка максимально отделена от источника данных. Например, при смене поставщика или изменении формата верстка не меняется, а меняется только серверный код.
 3. Такими фильтрами легко делиться с другими проектами (например, с touch-почтой).
 4. filters.jsx наглядно инкапсулируют обработку данных и показывают проблемы взаимодействия бекенд<->фронтенд.
 
**Антипаттерны**:
 3. Отдавать в браузер промежуточные данные, чтобы браузер сделал еще один запрос. Такие "лесенки" запросов надо делать в бекенде, не надо отдавать в браузер данные, которые ему не нужны. 
 1. Отдавать в браузер "грязную" выдачу бекенда, чтобы браузер занимался ее преобразованиями.
 2. Отдавать в браузер избыточную выдачу бекенда. Например, отдавать 20 полей, когда в браузере используются 1-2. Живой пример - настройки, где есть куча неиспользуемых и устаревших данных.
 
**Что нельзя сделать на бекенде**:
 1. Локализация (это временная проблема). Например, названия стандартных папок локализуются в браузере.
 2. Работа с датами, когда нужно обеспечить независимость даты от клиентского времени. Хорошим примером является список писем, где дата разбивается на части (минута, час, день, месяц, год), а потом склеивается при получении данных. 
 
## Что стоит делать в filters.jsx
 1. Приводить данные к правильным типам. Зачастую из бекенда числа и булены приходят как строки.
 2. Следить за стабильностью выдачи. Неизменность набора полей положительно влияет на JIT и, соответственно, скорость работы браузера.
