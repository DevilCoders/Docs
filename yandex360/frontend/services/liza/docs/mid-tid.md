# Что надо знать про mid и tid

## Что это такое
 - mid - message id. Уникальный ID письма в базе. Уникальность может быть только внутри одной базы.
 - tid - thread id. Уникальный ID треда в базе. Уникальность может быть только внутри одной базы.

## Особенности в логике

 * Каждое письмо гарантированно имеет tid.
 * В выдаче списка писем, для треда mid и tid совпадают. Это сделано для упрощения работы со списком.
 * Тред может быть одновременно в нескольких папках.

## Особенности в JS
Не пытайтесь работать в mid/tid/fid (вообще с любыми ID из БД) как с числом!
Во-первых, он не влезает в integer в JavaScript и преобазуется неверно!
Во-вторых, вам это не надо :).

```js
parseInt('2370000000947694609')
// 2370000000947694600
```
 
## Почему tid имеет префикс t

Вот это надо уточнить, какой-то пункт устарел:
 * На некоторых базах tid - это mid первого письма в треде.
 * На некоторых базах счетчики mid и tid независимы друг от друга.

Соответственно, может получиться, что у пользователя в списке писем будет два элемента с одинаковыми ID (mid и tid).
А нам надо уметь отличать с чем мы сейчас работает.
 
Префикс прозрачен. Добавляется в `filters.jsx`, удаляется автоматически при обработке параметров запроса в `models.jsx` (для параметров `ids`, `thread_id`, `tids`; см. [models.jsx](https://github.yandex-team.ru/Daria/liza/blob/master/u2709/api/models.jsx#L538-L540)).
При разработке новых моделей это надо учитывать и всегда следить за добавлением префикса.
