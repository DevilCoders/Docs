# Как работает тулбар

Тулбар привязан параметрами к параметрами страницы и к mMessagesChecked.
Т.о. он знает про письма, с которыми надо произвести действие.

Принципы работы:
 - Тулбар сам производит нужные действия. Обычно он просто вызывает `Daria.MOPS.<action>`.
 - Тулбар не должен бросать событий или вызывать перерисовок, виды должны реагировать на изменение своих моделей.
 - Виды не должны подписываться на события тулбара. Помните, что в 3pane на это могут подписаться и vMessages и vMessage, а значит начать совершать действия одновременно.
 
Если надо выполнить действие, то в `mMessagesCheked` есть метод `#runOps`.
Например, `mMessagesChecked.runOps('move', {current_folder: 'move_to_fid'})`.
При этом надо избегать подписок на окончание операции, а лучше реагировать на изменения моделей.

