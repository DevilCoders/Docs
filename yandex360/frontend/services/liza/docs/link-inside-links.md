# Ссылки внутри ссылок

Пример: у нас в дизайне заложено, что каждое письмо в списке писем является ссылкой.
Внутри этого письма могут быть другие ссылки. В обычных письмах - метки, в виджете авиабилетов - например, ссылка на Аэроэкспресс.

В списке папок есть аналогичная ситуация: ссылка на папку, внутри ссылка на непрочитанные.

Стандартном запрещено вставлять ссылки в ссылки, парсеры ему следуют и закрывают ссылку-родитель, когда встечают ссылку-ребенка.
 Это можно обойти, если делать такие манипуляции непосредственно в DOM.

Также @kizu [нашел решение](http://kizu.ru/fun/nested-links/) с `<object>`. Но у него оказались проблемы:
 1. Страница мигает в Chromium при перерисовке таких блоков
 2. Если указывать `<object>` без `@type`, то FlashBlock скрывает такие ноды
 3. Если указывать `<object>` с несуществующим `@type`, то Firefox при перерисовке замирает на несколько секунд

После исследования проблемы, было принято решение отказаться от `<object>` и перейти на DOM-манипуляции.
 Они происходят после работы yate, вне реального DOM. Парсер заменяет теги `<x-a>` на настоящие `<a>`.
 Поэтому если надо вставить ссылку в ссылку, то все дети должны иметь тег `<x-a>`.
 
Пример:
```
<a href="#messages/123" class="mail-MessageSnippet">
    <div class="mail-MessageSnippet-Content">
        <x-a class="mail-Label lid-123" href="#label/123">myLabel</x-a>
    </div>
</a>
```
