## Юнит-тестирование
* Старые юнит-тесты написаны на `mocha` в файлах `.spec.js`.
* Все новые юнит-тесты (если это не минорное исправление старых) пишутся на `jest` в файлах `.test.js`.
* В jest-тестах *не пишем* корневой `describe` c путём до файла, т.к. jest выводит пути сам.
* Юнит-тесты должны максимально мокать другие модули: все внутренние и — выборочно — внешние.

### Покрытие кода тестами
* Сбор покрытия запускается командой `npm run coverage`.
* Покрытие `mocha`-тестами доступно по урлу `/web-api/coverage/mocha/lcov-report`.
* Покрытие `jest`-тестами доступно по урлу `/web-api/coverage/jest/lcov-report`.

### Моки внешних модулей
Если вы мокаете внешний модуль в корневой папке `__mocks__`, `jest` загрузит их автоматически. Это ломает интеграционное тестирование, поэтому необходимо одновременно с этим размокать (`jest.unmock()`) этот модуль в конфиге [integration/jest.setup.js](/integration/jest.setup.js)
