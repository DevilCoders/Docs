# Работа {{ product }} через редиректы

{{ product }} предусматривает альтернативный режим работы через редиректы.

В этом режиме пользователю открывается форма {{ product }} в текущем, а не в новом окне. Затем, после выбора способа оплаты, пользователь возвращается на сайт магазина.

Режим работы через редиректы полезен, например, когда пользователь открывает ссылку на форму {{ product }} внутри WebView или использует блокировщик рекламы.

### Принцип работы {#operating-principles}

При работе через редирект в URL интернет-магазина добавляется параметр ` __YP__ `, который содержит информацию о платеже.

Дополнительная обработка параметра ` __YP__ ` не требуется, работа с SDK {{ product }} не меняется.

{% note warning %}

Параметр ` __YP__ ` не должен удаляться из URL интернет-магазина.

{% endnote %}

### Сценарий работы {#solution}

1. Пользователь заходит на сайт магазина ` https://my-site.com/payment/?id=794769a6f0590ba5eba7d2c86f2aaaab `.
1. Пользователь выбирает оплату {{ product }}.
1. Пользователь переходит на форму отплаты {{ product }} в текущем окне ` https://pay.yandex.ru/form/ `.
1. Пользователь нажимает кнопку оплаты на форме {{ product }}.
1. Пользователь возвращается в интернет-магазин ` https://my-site.com/payment/?id=794769a6f0590ba5eba7d2c86f2aaaab&__YP__=<yandex-pay-data> `. На этой странице после создания платежа сразу сработает событие ` YaPay.PaymentEventType.Process `, и вы получите платежный токен.



См. также:
- [Подключение кнопки {{ product }}](./index.md)
- [Подключение кнопки с оплатой на стороне {{ product }}](yandex-pay-server-pay.md)
- [Подключение формы {{ product }} Checkout](yandex-pay-checkout.md)
- [Примеры неправильного подключения {{ product }}](common-mistakes.md)
- [Тестирование](testing-integration.md)
