# История релизов

## 0.9.9745271 (2022-07-20)
  - хотфикс первоначальной настройки

## 0.9.9741065 (2022-07-20)
  - [windows] дефолтный pageant сокет теперь одновременно работает как со старым транспортом (`WM_COPYDATA`), так и с новым (named pipe)
  - разрешена подпись истекшими сертификатами для стабилизации приложений по обмену SSH-ключа на что-либо

## 0.9.9691414 (2022-07-08)
  - [windows] pageant сокет использует named pipes по умолчанию, вместо общения с помощью оконных сообщений
  - добавлено имя запрашивающего приложения в нотификашки о использовании ключа и лог
  - при энроле более качественно определяем недонастроенный ранее Yubikey
  - увеличен urgency для нотификашек, требующих "потрогать" Yubikey
  - всякие более мелкие улучшения

## 0.9.9521515 (2022-05-30)
  - починено включение/отключение usb-апплетов (e.g. `skotty yubikey usb --disable OTP`)

## 0.9.9473158 (2022-05-19)
  - [windows] добавлен автозапуск skotty при включении службы
  - [windows] добавлен перезапуск skotty при модификации конфигурации (команды `setup`, `yubikey change-pin` и пр.)
  - [windows] сертификаты больше не накапливаются в windows certificate storage
  - добавлено автоматические открытие аутентификационного урла в дефолтном браузере
  - улучшен вывод версий
  - всякие более мелкие улучшения

## 0.9.9399995 (2022-04-26)
  - хотфикс сохранения management key на yubikey

## 0.9.9375322 (2022-04-26)
  - улучшена проверка "живости" SSH-сертификатов, теперь Skotty проверяет только сертификаты выписанные на собственных CA
  - запрещен запуск от рута, для предотвращения странных ситуаций
  - поддержан AES management key для Yubikey 5.3.0+

## 0.9.9344108 (2022-04-13)
  - [Windows] в связи с проблемами совместимости в Win32 OpenSSH теперь используются forward slashes в `skotty ssh conf`
  - упращена миграция на новый PC, см: [How-to: переезд на новый компьютер](https://docs.yandex-team.ru/skotty/howto-change-pc)
  - всякие более мелкие улучшения и фиксики

## 0.9.9294408 (2022-03-31)
  - [GNU/Linux && macOS] добавлен автоматический рестарт агента при изменении набора апплетов (`skotty yubikey usb --enable/--disable ...`)
  - [GNU/Linux] починена работа с более чем одной смарт-картой
  - улучшен вывод слотов в `skotty info`
  - `skotty setup` теперь отключает OTP без спроса. Можно включить обратно после: `skotty yubikey usb --enable OTP`
  - `skotty ssh keys` теперь не требует подключения к сети
  - добавлено логирование peed pid/uid при обращении к агенту
  - всякие более мелкие улучшения

## 0.9.9221299 (2022-03-10)
  - [macOS] улучшен конфиг launch agent
  - добавлена команда `skotty dump debug`

## 0.9.9216404 (2022-03-09)
  - [FreeBSD] первый релиз
  - [GNU/Linux] подкручены параметры systemd юнита, чтобы он лучше подхватывался системой
  - до двух раз ускорена подпись
  - добавлены проверки в `skotty service restart`, чтобы нельзя было перезапуститься с не работающим конфигом
  - сделан обработчик падений. Теперь, если `skotty` по какой-либо причине падает, он перезапускается и откладывает лог в `~/.skotty/logs/crash.agent.*`

## 0.9.9119186 (2022-02-06)
  - [macOS] хотфикс сохранения PIN в keychain
  - улучшено логирование обработчика ssh-agent запросов, теперь с opt-in дебажным выводом

## 0.9.9111584 (2022-02-06)
  - [macOS] теперь по умолчанию PIN хранится в keychain
  - [macOS] добавлена подпись приложения
  - добавлена проверка срока жизни сертификатов при вызове списка ключей
  - добавлена поддержка подтверждения использования ключей с помощью ssh-askpass или pinentry (см. [кастомизация skotty](https://docs.yandex-team.ru/skotty/howto-configure#confirm))
  - добавлена поддержка ручного ввода пина (см. [кастомизация skotty](https://docs.yandex-team.ru/skotty/howto-configure#pinentry))
  - добавлена возможность контроля порядка ключей
  - добавлена поддержка методов Lock/Unlock

## 0.9.9006159 (2022-01-03)
  - [GNU/Linux] починен `skotty status`, теперь он реагирует только на состояние systemd-юнита
  - [macOS] включено перетирание оригинального (`SSH_AUTH_SOCK`) сокета на сокет от Skotty
  - [GNU/Linux && macOS] добавлен экспорт переменной окружения `SSH_AUTH_SOCK` при старте
  - [GNU/Linux && macOS] запрещенны коннекты от не рута или текущего пользователя
  - улучшено логирование ошибок запуска агента
  - теперь Yubikey инициализируется "лениво", позволяя запуститься агенту без оного
  - добавлены opt-in нотификации о использовании ключей (можно включить с помощью `skotty setup --sockets`)

## 0.9.8867123 (2021-11-24)
  - [GNU/Linux && macOS] добавлен автоматический рестарт агента при обновлении, смене PIN/разблокировки Yubikey и `skotty setup`
  - добавлена команда `skotty yubikey change-pin` для смены PIN Yubikey
  - добавлен circuit breaker при аутентификации в Yubikey для уменьшения шансов на блокировку оного
  - теперь генерируются только alphanumeric PIN/PUK для лучшей совместимости с разными версиями Yubikey
  - улучшены нотификашки при истечении сертификатов и/или ошибках подписи
  - новый PIN в результате `skotty yubikey unblock` теперь сохраняется в конфиг

## 0.9.8812955 (2021-11-09)
  - [Windows] добавлен ярлык при установке "службы"
  - [Windows] при установке "службы" теперь рекомендуется запускать skotty с флажком `--daemonize`
  - починен отказ от отключения OTP в мастере настройки
  - переделан вывод при демонизации, теперь не пишется ssh-agent like скрипт
  - добавлен `skotty passtool` для работы с пошифрованными значениями конфига

## 0.9.8778774 (2021-10-28)
  - [GNU/Linux] починено залипание при проблемах в системным демоном нотификаций
  - [Windows] Инока в трее более не дублируется при нотификациях
  - [macOS] `skotty ssh conf` теперь предлагает обновиться до Monterey, вместо установки OpenSSH из brew
  - `skotty info` теперь выводит на каком конкретном CA выписан сертификат
  - улучшены иконки :D

## 0.9.8707351 (2021-10-06)
  - [GNU/Linux && macOS] починена демонизация
  - [maxOS] добавлено предупреждение о слишком старой версии OpenSSH в `skotty ssh conf`
  - добавлена команда `skotty service status` для проверки статуса демона и сервиса
  - добавлена проверка минимальной версии Yubikey: 5+
  - починено дублирование ключей при релоаде

## 0.9.8565208 (2021-08-27)
  - [Windows] бинарь `skotty` теперь подписан, что должно улучшить совместимость с антивирусами
  - [Windows] улучшен автозапуск, теперь без стрёмных VBS-скриптов
  - улучшена совместимость с `yc-yubikey-cli`
  - улучшено отключение OTP, теперь `skotty` более качественно дожидается ребута Yubikey

## 0.9.8536305 (2021-08-18)
  - [Windows] добавлена демонизация агента (`skotty start --daemonize`)
  - [Windows] добавлена иконка для трея (`skotty start --tray`)
  - [Windows] починена иконка для нотификашек

## 0.9.8514462 (2021-08-12)
  - починен вывод ошибок в stderr
  - добавлен бэкап конфига при его сохранении
  - добавлен отдельный канал `testing` для тестовых релизов

## 0.9.8513172 (2021-08-11)
  - [Windows] `pagent` сокет вернулся на транспорт поверх сообщений (`WM_COPYDATA` и вот это все) для лучшей совместимости с кастомными клиентами
  - [Windows] новый способ конфигурирования сокетов, теперь выбираем SSH-клиенты, а не сокеты: +100 к прозрачности, -50 к гибкости
  - [Windows] `sudo` сокет теперь создается для всех поддерживаемых протоколов
  - [GNU/Linux && macOS] убран этап выбора сокетов за ненадобностью
  - добавлена комманда `skotty yubikey unblock` для разблокировки Yubikey по PUK

## 0.9.8501936 (2021-08-09)
  - добавлен шэринг софтовых ключей
  - более безопасная генерация PIN/PUK
  - увеличен период проверки новых версий, теперь Skotty проверяет новые версии раз в 48 часов
  - `skotty info` больше не рисует страшную ошибку получения статуса, если Skotty не запущен
  - [Windows] улучшен автозапуск
