## Введение
В данной папки находят скрипты для отправки электронных писем при помощи python.
* send_mail.py - Генерация и отправка сообщений при помощи python
* send_eml.py - Отправка пачки готовых eml(уже скаченных)

## Send_eml.py
Данный скрипт отправляет все eml которые лежат в указаной папки при запуске скрипта
Для работы скрипта необходимо установить утилиту SWAKS ("brew install swaks")
**_ВАЖНО!_** - Если в ящие уже есть такое письмо (в любой папке, во входящих, в спаме, удаленных) повторно отправить письмо не получится!
Скрипт отработает, но письмо не отправится (exception не отловить, так как все рано возврщаются 200-ки)

### Запуск скрипта 
`python3 send_eml.py -to {recipient} -p "path/to/folder/with/eml"`
_recipient_ - кому будут отправляться сообщения
_path/to/folder/with/eml_ - путь до папки, где лежат EML

ПРимер запуска скрипта: `python3 send_eml.py -to h.eloy@yandex.ru -p "/Users/arovkova/Downloads/eml"`

## Send_mail

### Входные данные

Все входные данные данные, которые использует скрипт, находятся в файле `variable.json`
О полях json файла:
* `from_addr` - авторизация на сервер почты и от кого будет отправлено сообщение. В поле `addr` указывает адрес эелектронной почты (обязательно с доменом! 
на его основе делается выбор используемого сервера регистрации). В поле `pwd` прописывается пароль для ууазанного ранее адреса электронной почты

* `to_addrs` - список получателей сообщения. Возможно указывать несколько адресов через запятую.

* `attachs` - список аттачей для письма.

* `spam` - спам строка. Сообщение с данным текстом попадает в папку спам автоматически

* `virus` - строка вируса EICAR.

* `yandex, outlook, ...` - параметры для подключения к smtp сукверам соответствующих провайдеров


### Использование

Скрипт на вход принимает следующие ключи:

`-h` - вызов справки;

`-t` - отправка текстового сообщения;

`-a` - отправка текстового сообщения с вложением. Параметр принимает на вход число - общий размер вложения в мегабайтах.
Если число не задано, то будут отправлены файлы, размер которых суммарно составит 3 MB;

`-spam` - отправка письма со спам-строкой. Письмо будет автоматически перенесено в папку Спам

`-th` - отправка треда сообщений. Параметр принимает на вход число - количество сообщений в треде.
Если число не задано, то будут отправлены 3 письма, у которых будет одна тема и которые составят 1 тред;

`-subj` - параметр, позволяющий задать тему письма. Параметр принимает на вход строку - тему письма.
Если строка не задана, то тема письма будет рандомно сгенерирована;

`-с` - количество отправляемых сообщений с разными темами письма. Параметр принимает на вход число - количество сообщений.
Если число не задано, то будут отправлены 3 письма, у которых будут различные темы, следовательно они будут различными тредами;

`-to` - email получателя(-ей) сообщения. Может быть задан 1 адрес, или несколько через запятую (exp: 'h.eloy@ya.ru','h.eloy@ya.ru,un.drake@ya.ru')

`-user` - email пользователя, от котрого отправляется сообщение.

`-pwd` - пароль от почты пользователя, которую указали в параметре `-user`.

### Пример работы программы

#### Отправка текстового сообщение с рандомной темой

`python3 send_mail.py -t -subj`

#### Отправка текстового сообщение с дефолтным аттачем заданной темой темой

`python3 send_mail.py -a -subj "test subject"`

#### Отправка текстового сообщение с аттачем и указанием списка получателей

`python3 send_mail.py -a 15 -to  "h.eloy@ya.ru,un.drake@ya.ru"`

#### Отправка текстового спам сообщение с указанием отправителя

`python3 send_mail.py -spam -user un.drake@yandex.ru -pwd @qwerty`

#### Отправка треда текстовых сообщений

`python3 send_mail.py -t -th`

#### Отправка 4 текстовых сообщений cразличными темами

`python3 send_mail.py -t -с 4`

### Об исключениях

* Нельзя одновременно указывать параметры `-th` и `-c`

* Нельзя указать только один из параметров `-user` или `-pwd`. Они должны указываться только вместе

* если указаны параметры `-subj` и `-c`, то указанная тема будет заменена на рандомную






