### Что делает сервис
Является точкой входа в XIVA (push.yandex.ru), держит websocket коннекты и принимает всю внешнюю нагрузку (API, авторизация).
Доставляет push-уведомления от бэкендов по активному TCP, HTTP, websocket соединению, инициируемому клиентом.

### Импакт на пользователей от от отключения сервиса
- Невозможность доставки уведомлений, невозможность подписаться на уведомления
- Перестанет работать синхронизация файлов в клиентских приложениях Диска
- Перестанет работать синхронизация настроек Браузера
- Не будет работать доставка сообщений в Мессенджере

### Импакт остановки тачки/ДЦ
xiva-server держит много открытых коннектов. Импакта от остановки одной тачки быть не должно, но в случае отключения ДЦ (или просто большого числа тачек) все клиенты
будут реконнектиться, поэтому гасить ДЦ нужно плавно.

### Особенности деплоя
Деплой должен проходить плавно, чтобы размазать реконнекты.

### Критичные метрики
#### xiva-server_production_percent500
Отношение кода 500 к общему числу запросов.


### Куда ходит
#### [akita](https://a.yandex-team.ru/arc/trunk/arcadia/mail/sre/doc/akita.md "Документация по akita") (http_cluster_client)
Проверка авторизации и получение информации о пользователе.

#### blackbox (http_cluster_client)
Проверка oauth-токена, когда мобильные приложения подписываются на пуши.


#### [xivahub](https://a.yandex-team.ru/arc/trunk/arcadia/mail/sre/doc/xivahub.md "Документация по xivahub") (http_cluster_client)
Внутренний маршрутизатор, через него проходят все сообщения и рассылаются всем возможным типам клиентов. Xiva-server
ходит не в балансер xivahub, а напрямую в инстансы по кулаудному FQDN. Нужный инстанс выбирается по uid.

#### [xivaconf](https://a.yandex-team.ru/arc/trunk/arcadia/mail/sre/doc/xivaconf.md "Документация по xivaconf") (http_cluster_client)
Получает список сервисов и токены сервисов для проверки авторизации по xiva token.

#### бэкенд messenger (http_cluster_client)
Используется для доставки сообщений пользователей в Мессенджере.
