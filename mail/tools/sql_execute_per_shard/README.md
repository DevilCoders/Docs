# Что это

Этот скрипт выполняет SQL-файл на всех шардах на мастере

## Как пускать

```bash
ya make bin/exec

bin/exec/exec --sharpei_host SHARPEI_HOST
--sharpei_access_machine SHARPEI_ACCESS_MACHINE
--db_user DB_USER
--sql_file_name SQL_FILE_NAME
[--interactive {yes,no}]
[--query_select {yes,no}]
```

Поясняем:

* SHARPEI_HOST - где находится балансер шарпея, у которого запрашивать будут данные о имеющихся узлах.
* SHARPEI_ACCESS_MACHINE - адрес машины, на которую скрипт сможет зайти по SSH, и при этом с данной машины можно через curl обратиться к шарпею.
* DB_USER - пользователь, который должен логиниться в базу (с помощью пароля из yav).
* SQL_FILE_NAME - название файла, скрипт из которого собираемся выполнять.
* interactive - по умолчанию интерактивно, т.е. после обработки каждого узла Вас будут просить нажать enter для продолжения банкета. Если выбрать no, то будет заместо этого отображаться progress bar. При этом желательно перенаправить стандартный поток вывода в какой-нибудь файл, чтобы не мешать поток с прогресс баром.
* query_select - по умолчанию считаем, что да, это запрос чисто на выборку (и в таком случае результат будет выведен в стандартный поток вывода). Если нужно что-то обновить, то ставим тут no.

### Примечание

1. Проверок на дурака нет =)
