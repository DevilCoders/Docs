# Единый артефакт™ iOS (Бро)ПП

Библиотека для ПП iOS включающая все необходимые компоненты из Аркадии:
 - Офлайн поиск
 - Offline OCR
 - Трекинг для реалтайм перевода
 - Сканер
 - Декомпрессор для пакетов OCR

### Зачем?

Единый артефакт гарантирует общую ревизию для всех компонент, также это уменьшает загружаемый размер кода за счет объединения общих зависимостей (util и пр.)

### Необходимые утилиты для деплоя

 - ya tool
 - CocoaPods

### Сборка

Если необходимо собрать библиотеку локально, то нужно выполнить команду в этой директории:

`ya package package.json`

После этого в архиве будет собранная библиотека для архитектур x64 и arm64, если для отладки нужны обе сразу, то их можно склеить при помощи команды `lipo`

### Загрузка на CocoaPods

Библиотека доставляется в приложении через CocoaPods

`python deploy.py -r {ревизия trunk} --pod-repo {pod_repo_name}` делает следующее:
1. Запускает сборку пакета на sandbox
2. Подменяет версию пакета в `YandexSearchAppOfflineLibs.podspec` на `resource_id` пакета из прошлого шага
3. Заливает `YandexSearchAppOfflineLibs.podspec` на указанный `pod_repo_name`, по умолчанию `yandex-team-scm-mcp-mobile-cocoa-pod-specs` (все доступные можно посмотреть через `pod repo list`)
