# S

В данном разделе приведено описание метрик, первой буквой в названии которой является <q>S</q> (без учета [оцененности](naming.md#judged)). {#list}

## serp-failed {#serp-failed}

Ошибка при скачивании SERP.

### Расчет метрики {#serp-failed-calc}

Для запроса является бинарной и принимает значения:

- <q>0</q> — SERP скачался без ошибок;
- <q>1</q> — при скачивании SERP произошла ошибка.

Для потока отражает среднее значение метрики по потоку.

[К списку метрик](#list).


## sim-cont {#sim-cont}

Доля документов, содержащих близкий к порно контент и нецензурную лексику, в первых n результатах поисковой выдачи.

### Расчет метрики {#sim-cont-calc}

Значение метрики равно отношению количества документов, которым выставлена оценка «на грани» к общему количеству документов (n):

$sim{-}cont = \frac{n_{sim-porn-cont}}{n} { ,}$
 
где $n_{sim-porn-cont}$ — количество документов в первых n результатах поисковой выдачи, которым выставлена оценка <q>на грани</q>.

{% include [serp-failed-backtolist](../_includes/concepts/s/id-serp-failed/backtolist.md) %}



## sitelinks-pfound  {#sitelinks-pfound}

Общая оценка качества поиска с учетом качества сайтлинков.

### Расчет метрики {#sitelinks-pfound-calc}

Значение метрики равно сумме произведений вероятностей просмотра первых n элементов выдачи, с поправкой на условные веса этих элементов. В условных весах учитываются оценки сайтлинков:

$sitelinks{-}pfound = \sum\limits_{i=1}^{n} pLook_{i} * {pRel{-}ol_{i}} { ,}$
 
где:

* $pLook_{i}$ — это вероятность просмотра $i$-го результата выдачи;
* $pRel{-}ol_{i}$ — вес элемента. Если у результата отсутствуют сайтлинки, принимает значение условного вероятностного веса элемента $pRel_{i}$. Если результат содержит сайтлинки, то для $i$-го документа рассчитывается по следующей формуле:

$pRel{-}ol_{i} = W_{0} * pRel_{i} + \sum_{y=1}^{k} W_{y} * Rel_{sitelink{ }y} { ,}$
 
где:

* $k$ — количество сайтлинков у $i$-го документа;
* $pRel_{i}$ — условный вероятностный вес элемента (см. раздел [Условные вероятностные веса оцененных документов](http://doc.yandex-team.ru/analytics/metrics/reference/ElementsWeights.xml) документа [Оценка качества поиска](http://doc.yandex-team.ru/analytics/metrics/concepts/About.xml);
* $W_{0}$ — вес заголовка элемента выдачи. Константа, принимает значение 0,9;
* $W_{y}$ — вес $y$-го сайтлинка, рассчитывается по формуле: $W_{y} = \frac{1 - W_{0}}{k}$;
* $Rel_{sitelink{ }y}$ — условный вероятностный вес $y$-го сайтлинка. Используемые значения совпадают со значениями для документов (см. раздел [Условные вероятностные веса оцененных документов](http://doc.yandex-team.ru/analytics/metrics/reference/ElementsWeights.xml) документа [Оценка качества поиска](http://doc.yandex-team.ru/analytics/metrics/concepts/About.xml)).

Вероятность просмотра $i$-го результата ($pLook_{i}$) равна вероятности просмотра предыдущего элемента выдачи ($pLook_{i-1}$) с поправкой на вероятностный вес предыдущего элемента и вероятность того, что пользователь дойдет до этого места:

$pLook_{i} = pLook_{i-1} * (1 - pRel_{i-1}) * (1 - pBreak) { ,}$
 
где:

* $pRel_{i−1}$ — вероятностный вес $(i-1)$-го элемента выдачи;
* $pBreak$ — вероятность того, что пользователь дойдет до $i$-го элемента (данная вероятность является константой: $pBreak=0,15$ ).

Вероятность просмотра первого элемента $pLook_{1}$ равна единице.

{% include [serp-failed-backtolist](../_includes/concepts/s/id-serp-failed/backtolist.md) %}



## small-serp {#small-serp}

Заполненность первой страницы поисковой выдачи.

### Расчет метрики {#small-serp-calc}

Для потока отражает долю запросов, поиск по которым возвращает полностью заполненную страницу результатов.

Для запроса является бинарной и принимает значения:

- <q>0</q> — количество результатов поиска по запросу равно или больше 20;
- <q>1</q> — количество результатов поиска по запросу меньше 20.

{% include [serp-failed-backtolist](../_includes/concepts/s/id-serp-failed/backtolist.md) %}



## spamDCG {#spamdcg}

Мера отклонения первых n результатов выдачи от идеального ответа из-за спама.

### Расчет метрики {#spamdcg-calc}

Значение метрики рассчитывается по формуле:

$spamDCG = \sum\limits_{i=1}^{n} conf(i) * \frac{1}{log_2(i+1)} { ,}$
 
где $conf_{i}$ — вес $i$-го документа выдачи.

Вес каждого типа спама представлен в разделе [spam-pfound. Общая оценка заспамленности выдачи](#spam-pfound).

{% include [serp-failed-backtolist](../_includes/concepts/s/id-serp-failed/backtolist.md) %}



## spamdcg-(spamtype) {#spamdcg-spamtype}

Мера отклонения выдачи от [идеального ответа](../reference/term.md#ideal-resp) из-за конкретного типа спама (spamtype).

В зависимости от рассматриваемого типа спама выделяют следующие метрики:

#|
|| **Название метрики** | **Тип спама** | **Описание метрики** ||
|| spamDCG-ADV_DESK | Доска объявлений | Мера отклонения выдачи от идеального ответа из-за досок объявлений.

На текущий момент соответствующая оценка асессорами не выставляется. Документам, ранее относившимся к данной градации спама, выставляется оценка <q>VTOR_CONTENT</q>, и они учитываются при расчете метрики [spamDCG-VTOR_CONTENT](#spamdcg-vtor-content).

Значение метрики может быть ненулевым, если при расчете используются устаревшие оценки, выставленные до внесения изменений в градации.||
|| spamDCG-AFFILIATES | Партнерка (при оценке зарубежными ассесорами) | Мера отклонения выдачи от идеального ответа из-за партнерок.||
|| spamDCG-AGGREGATING_AGENT | Агрегатор контента | Мера отклонения выдачи от идеального ответа из-за агрегаторов контента.||
|| spamDCG-CATALOG | Каталог | Мера отклонения выдачи от идеального ответа из-за каталогов.

На текущий момент соответствующая оценка асессорами не выставляется. Документам, ранее относившимся к данной градации спама, выставляется оценка <q>VTOR_CONTENT</q>, и они учитываются при расчете метрики [spamDCG-VTOR_CONTENT](#spamdcg-vtor-content).

Значение метрики может быть ненулевым, если при расчете используются устаревшие оценки, выставленные до внесения изменений в градации.||
|| spamDCG-COMMENT_SPAM | Заспамленный форум | Мера отклонения выдачи от идеального ответа из-за заспамленных форумов.||
|| spamDCG-DOMAIN_FOR_SALE | Домен на продажу | Мера отклонения выдачи от идеального ответа из-за спама, имеющего тип <q>Домен на продажу</q>.||
|| spamDCG-DORVEY | Дорвей | Мера отклонения выдачи от идеального ответа из-за дорвеев.||
|| spamDCG-FRAUD | Обман пользователя | Мера отклонения выдачи от идеального ответа из-за обмана пользователей.||
|| spamDCG-KEYWORD_STUFFING | Запросный спам | Мера отклонения выдачи от идеального ответа из-за запросного спама.||
|| spamDCG-LINK_FARM | Ссылочная помойка | Мера отклонения выдачи от идеального ответа из-за ссылочных помоек.||
|| spamDCG-PAID_CONTENT | Платный контент | Мера отклонения выдачи от идеального ответа из-за платного контента.

На текущий момент соответствующая оценка асессорами не выставляется. Документам, ранее относившимся к данной градации спама, выставляется оценка <q>VTOR_CONTENT</q>, и они учитываются при расчете метрики [spamDCG-VTOR_CONTENT](#spamdcg-vtor-content)

Значение метрики может быть ненулевым, если при расчете используются устаревшие оценки, выставленные до внесения изменений в градации.||
|| spamDCG-PARTNERKA | Партнерка | Мера отклонения выдачи от идеального ответа из-за партнерок.||
|| spamDCG-PEREOPT | Переоптимизированные страницы | Мера отклонения выдачи от идеального ответа из-за переоптимизированных страниц.||
|| spamDCG-PSEVDOSITE | Псевдосайт | Мера отклонения выдачи от идеального ответа из-за псевдосайтов.||
|| spamDCG-QUERY_SPAM | Запросный спам | Мера отклонения выдачи от идеального ответа из-за запросного спама.||
|| spamDCG-SPAMED_REFERAT | Спам-реферат | Мера отклонения выдачи от идеального ответа из-за спам-рефератов.

На текущий момент соответствующая оценка асессорами не выставляется. Документам, ранее относившимся к данной градации спама, выставляется оценка <q>SPAMED_ADV_CONTENT</q>, и они учитываются при расчете метрики [spamDCG-SPAMED_ADV_CONTENT](#spamdcg-spamed-adv-content).

Значение метрики может быть ненулевым, если при расчете используются устаревшие оценки, выставленные до внесения изменений в градации.||
|| spamDCG-SATELLIT | Сателлит | Мера отклонения выдачи от идеального ответа из-за сателлитов.||
|| spamDCG-SEARCH_RESULT | Результаты поиска | Мера отклонения выдачи от идеального ответа из-за документов, являющихся результатами поиска по сайту.||
|| spamDCG-SPAM | Спам-контент | Мера отклонения выдачи от идеального ответа из-за документов, содержащих спам-контент (малоинформативные сайты с большим количеством рекламы).||
|| spamDCG-SPAMED_ADV_CONTENT {#spamdcg-spamed-adv-content}| Спам-реклама | Мера отклонения выдачи от идеального ответа из-за спам-рекламы.||
|| spamDCG-SPAMED_ADV_DESK | Спам-доска объявлений | Мера отклонения выдачи от идеального ответа из-за спам-досок объявлений.

На текущий момент соответствующая оценка асессорами не выставляется. Документам, ранее относившимся к данной градации спама, выставляется оценка <q>SPAMED_ADV_CONTENT</q>, и они учитываются при расчете метрики [spamDCG-SPAMED_ADV_CONTENT](#spamdcg-spamed-adv-content)

Значение метрики может быть ненулевым, если при расчете используются устаревшие оценки, выставленные до внесения изменений в градации.||
|| spamDCG-SPAMED_CATALOG | Спам-каталог | Мера отклонения выдачи от идеального ответа из-за спам-каталогов.

На текущий момент соответствующая оценка асессорами не выставляется. Документам, ранее относившимся к данной градации спама, выставляется оценка <q>SPAMED_ADV_CONTENT</q>, и они учитываются при расчете метрики [spamDCG-SPAMED_ADV_CONTENT](#spamdcg-spamed-adv-content)

Значение метрики может быть ненулевым, если при расчете используются устаревшие оценки, выставленные до внесения изменений в градации.||
|| spamDCG-SPAMED_FORUM | Заспамленный форум | Мера отклонения выдачи от идеального ответа из-за заспамленных форумов.||
|| spamDCG-REFERAT | Реферат | Мера отклонения выдачи от идеального ответа из-за спам-рефератов.

На текущий момент соответствующая оценка асессорами не выставляется. Документам, ранее относившимся к данной градации спама, выставляется оценка <q>VTOR_CONTENT</q>, и они учитывается при расчете метрики [spamDCG-VTOR_CONTENT](#spamdcg-vtor-content). Значение метрики может быть ненулевым, если при расчете используются устаревшие оценки, выставленные до внесения изменений в градации.||
|| spamDCG-TECHNICAL_SPAM | Технический спам | Мера отклонения выдачи от идеального ответа из-за технического спама.||
|| spamDCG-VTOR_CONTENT {#spamdcg-vtor-content} | Вторичный контент | Мера отклонения выдачи от идеального ответа из-за вторичного контента. ||
|#

### Расчет метрики {#spamdcg-spamtype-calc}

Каждая метрика рассчитывается аналогично [spamDCG](#spamdcg), но при расчете вес соответствующего типа спама принимается за единицу, остальные типы спама — за ноль.
 $spamDCG = \sum\limits_{i=1}^{n} conf(i) * \frac{1}{log_2(i+1)} { ,}$
 
где $conf_{i}$ — вес $i$-го документа выдачи.

Вес каждого типа спама представлен в разделе [spam-pfound](#spam-pfound).

{% include [serp-failed-backtolist](../_includes/concepts/s/id-serp-failed/backtolist.md) %}



## spam-pfound {#spam-pfound}

Вероятность того, что пользователь найдет спам-документ в результатах поиска.

### Расчет метрики {#spam-pfound-calc}

Для расчета метрики используется формула, аналогичная формуле [pfound](p.md#pfound) с измененными значениями вероятностных весов элементов.

Значения вероятностных весов элементов в зависимости от типа спама представлено в таблице ниже.

**Типы спама** | **Вероятностный вес для метрики spam-pfound**
----- | -----
DORVEY | 0,5
DOMAIN_FOR_SALE | 0,5
QUERY_SPAM | 0,5
SPAMED_FORUM | 0,5
KEYWORD_STUFFING | 0,5
COMMENT_SPAM | 0,5
DFS | 0,5
SPAMED_ADV_CONTENT | 0,25
PSEVDOSITE | 0,25
FRAUD | 0,25
LINK_FARM | 0,25
SPAM | 0,1
VTOR_CONTENT | 0,05
PARTNERKA | 0,05
SATELLIT | 0,05
AGGREGATING_AGENT | 0,05
REREOPT | 0,05
TECHNICAL_SPAM | 0,05
SEARCH_RESULT | 0,05
AFFILIATES | 0,05


Значение метрики равно сумме произведений вероятностей просмотра первых десяти элементов выдачи, с поправкой на условные веса этих элементов и вероятности того, что пользователь дойдет до этого места:

$spam{-}pfound = \sum\limits_{i=1}^{n} pLook_{i} * {pRel_{i}} { ,}$
 
где:

* $pLook_{i}$ — это вероятность просмотра $i$-го результата выдачи;
* $pRel_{i}$ — вероятностный вес элемента.

Вероятность просмотра `i`-го результата $pLook_{i}$ равна вероятности просмотра предыдущего элемента выдачи $pLook_{i-1}$ с поправкой на вероятностный вес предыдущего элемента и вероятность того, что пользователь дойдет до этого места:

$pLook_{i} = pLook_{i-1} * (1 - pRel_{i-1}) * (1 - pBreak) { ,}$
 
где:

* $pRel_{i-1}$ — вероятностный вес ($i-1$)-го элемента выдачи;
* $pBreak$ — вероятность того, что пользователь дойдет до $i$-го места (данная вероятность является константой: $pBreak=0,15$).

Вероятность просмотра первого элемента $pLook_{1}$ равна единице.

{% include [serp-failed-backtolist](../_includes/concepts/s/id-serp-failed/backtolist.md) %}

Раздел [Разметка спама](http://doc.yandex-team.ru/analytics/metrics/concepts/markupSpam.xml) документа [Оценка качества поиска](http://doc.yandex-team.ru/analytics/metrics/concepts/About.xml)

## stupid {#stupid}

Доля документов в первых $n$ результатах выдачи, имеющих оценку <q>Stupid</q>.

### Расчет метрики {#stupid-calc}

Значение метрики равно отношению количества документов, размеченных асессорами как <q>Stupid</q> в первых n результатах поисковой выдачи ($n_{stupid}$), к общему количеству документов ($n$):

$stupid = \frac{n_{stupid}}{n}$
 
{% include [serp-failed-backtolist](../_includes/concepts/s/id-serp-failed/backtolist.md) %}



## stupid-queries {#stupid-queries}

Наличие документа с оценкой <q>Stupid</q> в первых n результатах поисковой выдачи.

### Расчет метрики {#stupid-queries-calc}

Для запроса является бинарной и принимает значения:

- <q>1</q> — если в первых n результатах поисковой выдачи присутствует хотя бы один документ, имеющий оценку <q>Stupid</q>;
- <q>0</q> — если SERP не оценен, либо документы с оценкой <q>Stupid</q> отсутствуют.

Для потока отражает долю запросов, для которых в первых n результатах поисковой выдачи присутствует хотя бы один документ, имеющий оценку <q>Stupid</q>.

{% include [serp-failed-backtolist](../_includes/concepts/s/id-serp-failed/backtolist.md) %}


