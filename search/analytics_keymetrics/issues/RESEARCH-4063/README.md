# Анализатор аномалий на данных с чартов DataLens
Основной целью является позволить массовое тестирование большого количества чартов в одном процессе.

Подход использует комбинацию из двух факторов:
1. Python код для взаимодействия с DataLens через API, сбора и приведения данных к нужному формату для анализа через Etna. Использует доверительные интервалы построенные с помощью Prophet.
2. YAML файл содержащий id чарта и списки уникальных значений для каждого из релевантных селекторов на дашборде. Анализ будет проводиться для всех допустимо возможных комбинаций значений указанных селекторов, то есть их декартово произведения.

# Запуск
1. В файле configs.yaml создать конфиг для нового чарта или внести изменения в имеющийся.
2. Получить OAuth токен через https://datalens.yandex-team.ru/docs/api/dashboards/auth и сохранить его в переменную среды.
    ```sh
    $ export CHARTS_OAUTH_TOKEN=AQAD-***
    ```

3. Запустить скрипт main.py с указанием следующих параметров:
3.1. Имя конфига чарта внутри файла configs.yaml.
3.2. Начало временного интервала для которого анализировать на аномалии.
3.3. Конец временного интервала для которого анализировать на аномалии (включительно).
3.4. Путь куда сохранить JSON файл с результатами в папке output/.
Пример запуска:
    ```sh
    $ python main.py test 2022-01-01 2022-01-02 test.json
    ```
