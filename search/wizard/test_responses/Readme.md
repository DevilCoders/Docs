## Что делать, если канонические данные не готовы
1. Подождать. Отставание теста от свежей ревизии — от 30 минут до 3 часов.
2. Откатиться и тестировать свои изменения поверх немного старой ревизии. Скрипт напишет номер ревизии.
3. Запустить тест примерно так: `USE_OUTDATED_CANONDATA=yes ya make -rA`. Тогда тесты будут запущены поверх новой ревизии, а канонические данные будут взяты самые свежие, которые есть — от более старой ревизии. Дифф может получиться с примесями, не сильно верьте ему.

## Как запустить
`ya make -rA --test-stderr` (или `./run.sh`)
`ya make -rAF test_responses.py::test_default --test-stderr` — только один из тестов
`ya make -AL` — список всех тестов

## Зачем
Чтобы до коммита знать, какой дифф появится на TE-тесте [Printwizard](https://testenv.yandex-team.ru/?screen=job_history&database=ws-begemot-trunk&job_name=PRINTWZRD).

## Что здесь тестируется
Разница в выдаче визарда, вызванная изменениями в рабочей копии.
Канонические данные берутся из ТЕ-теста [Printwizard](https://testenv.yandex-team.ru/?screen=job_history&database=ws-begemot-trunk&job_name=PRINTWZRD).
Оттуда же берутся свежие данные (бегемот фреш, aka `wizard.runtime`).
Запросы берутся из папки `tools/printwzrd`, для каждого теста свои.
Результаты кладутся в папку `./out/`. Там логи и диффы.

Ревизия, для которой скачиваются канонические данные, определяется как SVN-ревизия папки `$YA_SOURCE_ROOT/search`.
Если рабочая копия — в Mercurial, то всё тоже работает.

Если в SVN у рабочей копии смешанная ревизия, то результаты могут получиться странными.
**Делайте `svn up $ARCADIA` перед тестом (или хотя бы `svn up $ARCADIA/search`).**

Этот тест не запускается в автосборке, он там лишён смысла. Кроме того, он пишет туда, куда в автосборке нельзя (складывает диффы в папку с исходниками теста), так что и не запустится в автосборке.

https://st.yandex-team.ru/REQWIZARD-1144
