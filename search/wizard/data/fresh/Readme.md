## Wizard fresh

### Что это
Отсюда [собираются](https://a.yandex-team.ru/arc/trunk/arcadia/sandbox/projects/WizardRuntimeBuild/__init__.py) [быстрые данные визарда](https://wiki.yandex-team.ru/begemot/fresh/) (aka fresh, runtime_data).

Каждая директория представляет собой UNION, в котором можно загружать файлы из сэндбокса и запускать программы (с помощью макросов FROM_SANDBOX, RUN_PROGRAM, PYTHON).

Чтобы результаты попали в свежие данные, их нужно скопировать в search/wizard/data/fresh/package/{Имя правила} (с помощью макроса COPY).

Если все файлы сборки нужно положить во фреш, то можно разместить директорию правила сразу в search/wizard/data/fresh/package, и не копировать файлы.

Все файлы больше мегабайта и все бинарные файлы складываются в sandbox.
https://st.yandex-team.ru/REQWIZARD-965

### Как собрать эти данные
```
ya make -r
```

### Как добавить или изменить данные

Нужно коммитить прямо сюда, в аркадию.
Если хочется вынести файл из сэндбокса, можно это просто сделать, и бэкпортилка не будет его опять закапывать в песочницу.
Все файлы больше 5 МБ и все бинарные файлы надо складывать в sandbox.
Изменения, внесённые руками в Аркадию, не потеряются. Если они будут конфликтовать с изменениями из /robots, то роботные изменения будут отвергнуты, об этом придёт письмо авторам бэкпортилки и автору коммита (роботу, ага).

Для добавления данных в sandbox: `ya upload --ttl=inf -T WIZARD_DATA`.
**Не используйте `ya upload --tar`.** Оно приведёт к конфликтам при каждом следующем бэкпорте (см DEVTOOLS-3949).
Потом, как обычно, исправить `ya.make`.

### Про /robots
Раньше данные хранились в [/robots](https://a.yandex-team.ru/robots/trunk/wizard-data/). Туда коммитят роботы и хранят там большие файлы.

Эти коммиты [бэкпортятся](https://a.yandex-team.ru/arc/trunk/arcadia/sandbox/projects/WizardRuntimeBuild/merge.py) в аркадию автоматом (и костылём). Бэкпортилка заливает в сэндбокс большие файлы и патчит маленькие, а при заливке в сэндбокс проверяет, что md5 базы в /robots и в `ya.make` совпадает (иначе пишет письмо про конфликт и ничего больше не делает).
Бэкпортилка поддерживает добавление, изменение и удаление файлов. Перемещение не поддерживается, оно будет обработано как удаление и добавление.

Роботов нужно обучить не коммитить в /robots, так будет надёжнее.
