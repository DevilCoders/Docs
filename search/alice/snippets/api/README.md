Нейросниппеты
=============

Нейросниппеты — [_query-based one-document summarization_](https://en.wikipedia.org/wiki/Automatic_summarization#Applications_and_systems_for_summarization) на [Трансформерах](https://en.wikipedia.org/wiki/Transformer_(machine_learning_model)).
Небольшой рассказ c иллюстрациями можно почитать [на Этушке](https://kruglikovn.at.yandex-team.ru/143).
Здесь находится точка входа для тех, кто хочет попробовать нейросниппеты в своих проектах.

Как попробовать
---------------
В папке `examples` находятся простые примеры, для начала посмотрите в неё.
Они используют вальгалльные модули из папки `ops`.
Если не умеете пользоваться Вальгаллой, начать можно [отсюда](https://a.yandex-team.ru/arc/trunk/arcadia/nirvana/valhalla/docs/index.md).

Реализованные модули
--------------------
* `translate_texts` принимает на вход таблицу с запросами и полными текстами документов и возвращает таблицу с нейросниппетами.
* `get_texts` получает полные тексты документов из [Юпитера](https://wiki.yandex-team.ru/robot/jupiter/) по их урлам. Работает довольно долго даже для небольшого количества запросов, лучше запускать сразу на > 1000 урлов, а то обидно ждать столько времени ради десяти документов.

Грабли и костыли
----------------
* В некоторых местах Вальгалла вызывается из Вальгаллы. Для этого нужен oauth-token к Нирване, который извлекается из `~/.vhrc`.
* Некоторые модули используют YQL-операции. Чтобы они работали, нужно указать YQL-токен в `vh.run()`. Посмотрите, как это сделано в примерах.
* Модули принимают на вход специальный тип `vh.YTTable`, посмотрите в примерах, как правильно передавать таблицы на вход.
* Модули в этой папке скрывают много деталей и содержат захардкоженные константы. Если хотите погрузиться глубже, посмотрите в их код и на модули из `search/alice/snippets/lib/ops`. Но поддержку и обратную совместимость мы обещаем только для `search/alice/snippets/api`.

Поддержка
---------
По всем вопросам пишите [Коле](https://staff.yandex-team.ru/kruglikovn).
Ещё можно написать [Лёше](https://staff.yandex-team.ru/petrovalex).
