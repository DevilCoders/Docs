## Справочники хороших и плохих хостов

### Как работает справочник

Справочник посвящён какой-то одной теме. Например, `medical` - справочник медицинских хостов.

В каждом справочнике предусмотрено два списка хостов:

- `good` - хорошие хосты
- `bad` - плохие хосты

В рантайме Фактов для каждого сформированного факта, имеющего валидный URL источника и подпадающего под тему какого-либо из справочников, выполняется проверка принадлежности т.н. `host owner` факта спискам плохих и хороших хостов такого справочника:

- если `host owner` принадлежит списку хороших хостов, то такой факт рекомендован к показу. Для него не следует запускать какие-либо другие фильтры по данной тематике. Например, если факт относится к теме "медицина" и взят с хорошего медицинского хоста, то такой факт не нужно далее проверять специальным фильтром медицины.  Впрочем, такой факт может быть далее подвергнут проверке фильтрами других тематик
- если `host owner` принадлежит списку плохих хостов, то такой факт не рекомендован к показу, его следует забанить
- если `host owner` справочнику неизвестен, то факт отправляется на дальнейшую проверку так же, как если бы справочник хостов по данной теме был вовсе отключен

### Как устроен справочник

Списки хостов по каждой теме представлены в простых текстовых файлах - по одному хосту на строку.

Файл должен иметь следующий формат имени:

- идентификатор справочника (темы), например, `medical`. Идентификатор может содержать знак подчёркивания
- неизменный корень `_hosts_`
- суффикс `good` или `bad`
- расширение `.lst`

Например, для темы "медицина" в справочнике будут даны файлы:

- medical_hosts_good.lst
- medical_hosts_bad.lst

В общем случае на каждую тему должно быть задано два файла. Если один из файлов пропущен, то это равносильно тому, как если бы такой файл (список) был пуст.

Если необходимо провести эксперимент с новым справочником, следует просто добавить пару файлов на соответствующую тему, например:

- medical_exp_123_hosts_good.lst
- medical_exp_123_hosts_bad.lst

Все файлы должны лежать на одном уровне в данной директории.

Рекомендовано хранить файлы в Sandbox, но не коммитить в SVN Аркадии.

### Подготовка файлов справочника

В качестве примера см. [граф в Нирване](https://nirvana.yandex-team.ru/flow/80759eca-c44e-4d63-9a2b-42da700c7c69/7a238b26-c3a9-430a-8162-28236cd3d8d3/graph).
