# Как правильно завести SPI?

Как завести SPI **правильно** - вопрос философкий. Но есть конкретные правила, следуя которым, можно упростить жизнь себе и другим:

## С помощью чего правильно создавать SPI

 1. [С помощью YaIncBot](https://a.yandex-team.ru/arc_vcs/search/mon/docs/9999/stability/processes/incident_management/spi/create.md?edit=true#kak-pravilьno-sozdavatь-spi-s-pomoshьyu-yaincbot) прямо в телеграме.
 2. [С помощью tickenator'a](https://a.yandex-team.ru/arc_vcs/search/mon/docs/9999/stability/processes/incident_management/spi/create.md?edit=true#tickenator).
    
## Как правильно создавать SPI с помощью YaIncBot

YaIncBot создает **SPI** автоматически, если он запускает протокол по алерту. В этом случае всю работу по **созданию** он делает за вас.

Если же вы завели протокол руками, YaIncBot предложит прилинковать тикет или же создать новый:

 - Если у вас есть тикет связанный с данным проявлением инцидента, его следует прилинковать. После нажатия кнопки бот предложит ответным сообщением отправить ему номер вашего тикета вида "SPI-****". После того, как вы это сделаете - тикет будет прилинкован к протоколу.

 - Если у вас нет тикета, жмите кнопку завести тикет. Бот сделает это без вопросов, если у вас указаны компонента и краткое описание. В противном случае вам придется отправить ему ответным сообщением эти данные.

{% note alert %}

Прилинковать **SPI** к протоколу очень важно, так как в этом случае бот будет автоматически пополнять тикет графиками сервиса, сети, доли и вертикали, и таймлайном. В противном случае это придется делать самому. 

{% endnote %}

В случае, если у вас есть несколько связанных инцидентов, можно прилинковать **SPI** прямо в протоколе. Для этого наберите команду `/proto link`, выберите протокол и нажмите слиться.

{% note tip %}

Лучше всего линковаться к самому главному протоколу, связанному с первоисточником проблемы.

{% endnote %}


Если у вас нет протокола, вы можете создать **SPI** с помощью команды:

    /newspi [component] [summary]

Где:
 - `component` - компонента на которую вы хотите завести **SPI**.
 - `summary` - краткое описание проблемы.


## Как создавать SPI с помощью [tickenator](https://tickenator.z.yandex-team.ru/new-ticket/spi)

[Tickenator](https://tickenator.z.yandex-team.ru/new-ticket/spi) представляет из себя форму для заполения ключевых полей тикетов. На главной странице вас будет приветствовать форма для заполнение **SPI**

Для того, чтобы создать **SPI** нужно обязательно заполнить следущие поля:

- **Компонента** - компонента на которую вы хотите завести **SPI**.
- **Контур** - иначе говоря, стейдж на котором проблема проявилась.
- **SRO**
    - **Время уведомления** - время, в которое вам сообщили о проблеме.
    - **Начало проявления** - время, в которое проблема началась.
- **Заголовок** - Краткое описание проблемы.

Опциональные поля:

- **Сервис** - если он известен.
- **Датацентр** - если проблема проявляется в каком-то определенном дц.
- **Линия поддержки** - Линия поддержки, которой передан для устранения инцидент.
    - marty - Дежурной смене Поиска
    - devops - Девопсам сервиса
    - noc - Дежурным NOC
    - platform - Дежурным инфраструктуры
    - service - Разработчикам сервиса
- **Кто обнаружил проблему** - Обнаруживший проблему.
    - user - пользователь
    - monitoring - мониторинг (алерт)
    - marty - дежурный марти
    - service - дежурный сервиса
    - external - нет подходящего варианта
- **Конец проявления** - если **SPI** составляется постфактум.
- **Алёрт/Проверка** - если вы обнаружили проблему по алерту или проверке, можете оставить в spi ссылку на них.
- **Описание** - Развернутое описание проблемы.
- **Действия дежурного**
- **Исполнитель** - человек, занимающийся поиском/починкой проблемы. Если человек несколько, то укажите дежурного.
- **Связи** - прочие проблемы связанные с **SPI**
- **Протокол** - если был заведен.
- **Дополнительные опции**
    - **rolback** - если во время инцидента производился откат.
    - **-1 дц** - если во время инцидента пришлось прибегнуть в закрытию 1го датацентра.
- **Очередь в ST** - при создании **SPI** лучше не трогать.

После нажатия кнопки **"создать"** вам выдаст ссылку на тикет.
