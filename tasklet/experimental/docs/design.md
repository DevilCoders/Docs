# Дизайн такслетов

## Концепции

Тасклет это единица работы и состоит из трёх частей.

**Пользовательский исполняемый файл**

Произвольный исполняемый файл. Система никак не регламентирует способ получения файла и не требует обязательной линковки
с какими-то библиотеками. Релизный цикл и тестирования остаются на совести разработчика тасклета.

**Спецификация по способу запуска пользовательского бинарника**

Чтобы рантайм смог запустить ваш исполняемый файл -- к нему нужно приложить декларативную спецификацию для старта.
В спецификации описаны такие параметры как необходимое количество CPU и RAM, потребность в локальном сторадже.

Дополнительно в спецификации можно заказать необходимую инфраструктуру для старта бинарника. Такую как наличие сайдкара
для работы с [Sandbox](https://docs.yandex-team.ru/sandbox/) ресурсами или
наличие [porto сокета](https://wiki.yandex-team.ru/porto/) для разворачивания подконтейнеров.

{% note warning %}

Рантайм обещает, что ваш исполняемый файл увидит то, что вы заказали в спецификации и только это. Не стоит рассчитывать
на то, что версия Ubuntu не изменится от запуска к запуску. Не стоит рассчитывать, что вместо Ubuntu там не окажется
Alpine.

{% endnote %}

**Описание входных и выходных параметров**

Каждый тасклет получает на старте входные параметры и рантайм ожидает при завершении работы увидеть выходные параметры.
Вход и выход тасклета строго типизирован и должен быть описан в
виде [protobuf](https://github.com/protocolbuffers/protobuf) схемы.

{% note warning %}

Рантайм не запрещает вам передавать параметры в виде произвольного trift/json сериализованного в protobuf bytes поле.
Если вы так делаете, то вы теряете любую поддержку со стороны инфраструктуры. Например, не будет транскодинга между
сериализованными представлениями или проверок обратной совместимости при изменениях.

Do at your own risk

{% endnote %}
