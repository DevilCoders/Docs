# Скрипт для проставления endpointset-ов в базовых сервисах goods, выставления shard_id, replica_id
#### update_endpointsets
Запускать так:

```
./endpointer update_endpointsets [-o] [-m] [--service=]
```
Можно выставить имя сервиса в няне, по дефолту будут браться все сервисы из папки `/goods/report/base/`

#### update_pods
Запускать так:

```
./endpointer update_pods [--service=] [--begin-id=] [--overwrite]
```

`overwrite` вызовет выставление новых `shard_id`, даже если они у подов уже стоят (полезно, когда сервис настраиваится впервые или при сломанных `shard_id`) без этой опции если у пода нет `shard_id` ему он будет выставлен в порядке возрастания

`begin-id` позволяет выставлять номер реплики в нужном интервале, например в сервисе 96 подов (16 шардов) и `begin-id=32`, то поды будут иметь `replica_id=[32...38)`. Так как от номера реплики зависит консьюмер в логброкере для `rtyserver-a`, нумерация должна быть сквозной для всех сервисов в одном ctype, чтобы не было двух подов с одним `replica_id` и `shard_id`

#### get_pods_labels
Запускать так:

```
./endpointer get_pods_labels [--service=] [-c]
```

Выводит `shard_id`, `replica_id`, `pod_id`, просто для проверки, что всех подов всё ок

`check` упадёт, если нашлись одинаковые поды
