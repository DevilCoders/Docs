Здесь хранится:
* упорядоченный массив цветов в файле colors.json (порядок важен, на основе него определяются соседние цвета в колдунщике)
* утилита ```generate_colors_csv``` - из файла colors.json генерирует файл colors.csv (который используется в бэкэнде колдунщика)

## Добавление нового цвета
Для добавления нужно название цвета (например, ```Серо-буро-козявчатый```) и hex-код (например, ```96b403```)

#### 1. Добавляем в colors.json
Сначала нужно определить место в colors.json. Для этого задаем запрос в поиск с новым hex-кодом (дописав символ #), например: [#96b403](https://yandex.ru/search/?text=%2396b403&lr=213) <br/>
Отобразится колдунщик, в котором для данного нового hex-кода будут определены соседи (в данном случае это "Яркий жёлто-зелёный" и "Блестящий жёлто-зелёный", т.е. новый цвет надо вставить между ними). <br/>
На всякий случай ссылка на [картинку](https://jing.yandex-team.ru/files/ustas/browser_KgrU9Z79qh.png) <br/>
Ищем в colors.json "Яркий жёлто-зелёный" цвет и после него вставляем данные для нового цвета

NOTE: вообще говоря, новый цвет можно вставить и в какое-то другое место, но тогда надо его искать вручную

#### 2. Генерируем colors.csv:
```
ya make -r generate_colors_csv
generate_colors_csv/generate_colors_csv -f colors.json  # тут на выходе получился colors.csv
```

Проверяем colors.csv на локальной бете колдунщика:
```
cp colors.csv ..
cd ..
ya make -r bin
bin/colors bin/config.cfg
```
Задав в бету запрос с новым hex-кодом, мы должны увидеть колдунщик с именем нового цвета. В бету ходим так:
```
https://yandex.ru/search/?text=%2396b403&lr=213&srcrwr=COLORS_PROXY:<host>:<grps_port>:1000000
```

#### 3. Добавляем срабатывания
Регулярки лежат в правиле Report в бегемоте
```
cd ~/arcadia/search/wizard/data/fresh/report
vi gzt/src/colors.data
```
В файле colors.data добавляем алиасы:
* либо в секцию [=name:](https://a.yandex-team.ru/arc/trunk/arcadia/search/wizard/data/fresh/report/gzt/src/colors.data?rev=r8857501#L107) (если это уникальное название и по нему можно срабатывать колдунщиком без дополнительных маркеров)
* либо в секцию [=name_plus:](https://a.yandex-team.ru/arc/trunk/arcadia/search/wizard/data/fresh/report/gzt/src/colors.data?rev=r8857501#L919) (срабатывать будет, если в запросе есть данный алиас + слова "цвет|код|...")

Затем компилируем gzt-файлы:
```
bin/makeall.sh
```
Наш diff в двух файлах: ```gzt/src/colors.data``` и ```gzt/colors.gzt``` (может образоваться мусорный дифф от соседних правил, он нам не нужен).

При желании можно поднять бегемот и полноценно проверить срабатывания на бете.

#### 4. Коммитим colors.json и срабатывания
Пример коммита: https://a.yandex-team.ru/arc/commit/r8857501

#### 5. Обновляем colors.csv в бэкэнде колдунщика
* Заливаем в сендбокс: ```ya upload --ttl inf colors.csv```
* Обновляем ресурс в nanny-сервисе: https://nanny.yandex-team.ru/ui/#/services/catalog/parallel-colors-proxywizard-man-yp/files#colors.csv
<br/>
<br/>


## Изменение цвета
Тут есть 2 кейса:
* нужно поправить регулярки (не срабатываем или неправильно срабатываем на какой-то вариант запроса для уже существующего цвета)
* нужно поправить hex-код у существующего цвета

#### a) Поправить регулярки
Действуем как в [п.3 выше](#3-dobavlyaem-srabatyvaniya)

Примеры коммита: 
* https://a.yandex-team.ru/arc/commit/8813874
* https://a.yandex-team.ru/arc/commit/8860040

#### b) Поправить hex-код
Делаем почти все те же шаги, что и при добавлении цвета со следующими изменениями:
* сначала добавляется шаг 0 - нужно из colors.json удалить тот цвет, который мы меняем (т.к. затем он должен быть вставлен в другое место, рядом с похожими цветами)
* на шаге 3 мы не добавляем, а изменяем данные, привязанные к регуляркам: обычно нужно грепнуть файл colors.data на вхождения старого hex-кода и вставить туда новый hex-код

Пример коммита: https://a.yandex-team.ru/arc/commit/8859974
