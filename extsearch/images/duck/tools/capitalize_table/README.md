### Что это?

Утилита для капитализации запросов (``"мАВЗОЛЕЙ ЛЕНИНА в мОсКвЕ Картинки" => "Мавзолей Ленина в Москве картинки"``) 
в колонках таблиц на yt.

### Как это работает?

С помощью отдельной утилиты (``extsearch/images/duck/prepare_data/tools/capitalization_stats``) по текстам из
картиночного индекса для всех возможных лемм собирается статистика капитализации: сколько раз слово было 
написано с большой буквы (``Camel``), большими буквами (``UPPER``) и маленькими буквами (``regular``).

На вход утилите передаём путь к словарю и путь к входной таблице (и имя колонки, в которой лежат запросы), а 
также путь к выходной таблице.

Затем в процессе работы утилиты:
* Текст из входной таблицы разбивается на леммы
* Каждая из них капилизируется с учётом собранной статистики
* Запрос собирается обратно и записывается в нужную колонку выходной таблицы 
* Содержимое остальных колонок копируется как есть

### Что можно настроить?

Некоторые из поддерживаемых аргументов командной строки:
* ``--mark-capitalization`` "включает" обработку слов, состоящих одновременно из букв и цифр (например, ``i7``,
 ``S9``, ``R2-D2`` и т.д.). Если аргумент не задан -- такие слова всегда пишутся большими буквами (``I7``)
* ``--capitalization-stats`` позволяет задать путь к таблице со статистикой капитализации (её можно собрать 
  самостоятельно или взять относительно новую 
  <a href="https://yt.yandex-team.ru/banach/?page=navigation&path=//home/images-duck/capitalization/last/capitalization_stats&offsetMode=row">отсюда</a>)
* ``--capitalization-stats-fixes`` позволяет задать путь к таблице с исключениями (исправлениями), статистика 
  капитализации из этой таблицы имеет больший приоритет (пример таблицы можно посмотреть 
  <a href="https://yt.yandex-team.ru/hahn/?page=navigation&path=//home/imgrq/duck/3rd_party/capitalization/custom_capitalization&offsetMode=row">тут</a>,
  утилита для удобной работы с такими табличками лежит здесь: 
  ``extsearch/images/duck/prepare_data/tools/custom_capitalization``)
* ``--column-name`` позволяет задать имя колонки, в которой лежат запросы для капитализации. Если в колонке
  лежит map в формате yson, то можно также указать конкретное поле, например ``column_name.yson_field_name`` 
  (отличный от точки разделитель можно выбрать с помощью опции ``--column-name-separator``)
* ``--temp-folder`` позволяет указать папку на yt, где будут лежать временные таблицы, используемые в процессе
  капитализации (если необходимо)
* ``--quiet`` запрещает вывод отладочной информации в stderr
* ``--allow-no-query`` позволяет игнорировать строки, в которых не удалось найти текст для капитализации (без этого ключа операция упадёт на таких строках,
  с ключом -- добавит строку в выходную таблицу "как есть")
