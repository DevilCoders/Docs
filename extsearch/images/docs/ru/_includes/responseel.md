## Элемент response {#responseel}

Элемент `response` содержит результаты поиска для запроса, информация о котором представлена в элементе [request]{% if audience == "internal" %}(../concepts/requestelement-internal.md){% endif %}{% if audience == "external" %}(../concepts/xmlanswer.md#requestelement){% endif %}.

Содержит атрибут `date` — дата и время запроса в формате `<год><месяц><день>Т<час><минута><секунда>` по UTC.

Элемент содержит следующие блоки:

- [Блок общей информации о результатах поиска](#basicinfo).
- [Блок reask](#reaskblock).
- [Блок results](#resultsblock).

### Блок общей информации о результатах поиска {#basicinfo}

#|
|| **Тег** | **Описание** | **Атрибуты** ||
|| `error` | Описание ошибки. 

Добавляется XML только в случае возникновения ошибки. | `code` — идентификатор ошибки. || 
|| `reqid` | Уникальный идентификатор запроса. | Атрибуты отсутствуют. ||
|| `wordstat` | Частота появления слов запроса в поисковом индексе в формате:

```
<слово 1>: <частота слова 1>,<слово2>: <частота слова 2>,...,<слово n>: <частота слова n> 
```

Значение `n` соответствует количеству слов в запросе. | Атрибуты отсутствуют. ||
|| `found` | Количество найденных картинок для каждой из степеней соответствия запросу. Степень соответствия запроса определяется значением атрибута `priority`. | `priority` — степень соответствия результата запросу. 
Возможные значения:

- «phrase» — количество документов с точным вхождением поискового запроса;
- «strict» — количество документов с вхождением слов запроса;
- «all» — общее количество найденных документов.

Значения, передаваемые в теге, должны совпадать для всех значений атрибута. ||
|| `found-human` | Строка на русском языке, содержащая информацию о количестве найденных картинок и сопутствующий текст. | Атрибуты отсутствуют. ||
{% if audience == "internal" %}|| `is-local` | Служебный атрибут.

Отражается в случае, если обращение выполняется из внутренней сети Яндекса. | Атрибуты отсутствуют. ||{% endif %}
|#


### Блок reask {#reaskblock}

Опциональный. Присутствует только в случае, если в запросе исправлена опечатка.

Теги блока `reask` представлены в таблице ниже.

#|
|| **Тег** | **Описание** | **Атрибуты** ||
|| `rule` | Тип исправления, примененного к запросу. Возможные значения:

`Misspell` — опечатка.

`KeyboardLayout` — ошибка в раскладке клавиатуры. | Атрибуты отсутствуют. ||
|| `source-text` | Исходный текст запроса. | Атрибуты отсутствуют. ||
|| `hlword` | Подсвечиваемая часть запроса. | Атрибуты отсутствуют. ||
|| `text-to-show` | Восстановленный текст запроса на корректном языке. Обычно совпадает со значением тега `text`. | Атрибуты отсутствуют.  ||
|| `text` | Исправленный текст запроса. | Атрибуты отсутствуют. ||
|#

### Блок results {#resultsblock}

Опциональный. Присутствует только в случае, если по запросу найдены результаты.

Содержит сведения о найденных картинках. В начале блока содержится общая информация о результатах поиска и параметрах группировки. Информация о каждой найденной картинке содержится в группирующих тегах `group`.

Информация о тегах блока `results` представлена в таблице ниже.

#|
|| **Тег** | **Описание** | **Атрибуты** ||
|| `grouping` | Правила группировки найденных картинок. | 
- `attr` — типы используемых источников. Должен иметь значение «ii»;
- `mode` — тип группировки;
- `groups-on-page` — количество результатов поиска, отражаемых на одной странице;
- `docs-in-group` — количество картинок в группе. Должен иметь значение «1»;
- `curcateg` — служебный атрибут. Должен иметь значение «-1». ||
|| `found` | Количество найденных групп картинок для каждой из степеней соответствия запросу.

На текущий момент, каждая группа картинок содержит одну картинку.

Степень соответствия запроса определяется значением атрибута `priority`. | `priority` — степень соответствия результата запросу. 

Возможные значения:

- «phrase» — количество документов с точным вхождением поискового запроса;
- «strict» — количество документов с вхождением слов запроса;
- «all» — общее количество найденных документов. ||
|| `found-docs` | Количество документов, содержащих найденные картинки, для каждой из степеней соответствия запросу.

Так как каждая группа картинок содержит одну картинку, то значения тегов `found` и `found-docs` должны совпадать.

Степень соответствия запроса определяется значением атрибута `priority`. | `priority` — степень соответствия результата запросу. 

Возможные значения:

- «phrase» — количество документов с точным вхождением поискового запроса;
- «strict» — количество документов с вхождением слов запроса;
- «all» — общее количество найденных документов. ||
|| `found-docs-human` | Строка на русском языке, содержащая информацию о количестве найденных картинок и сопутствующий текст. | Атрибуты отсутствуют. ||
|#

> Группирующий тег `group`. Каждый тег содержит информацию о найденной группе картинок и их дубликатах. Так как  каждая группа картинок содержит одну картинку, то в теге приведена информация об одной картинке и ее дубликатах.
>
> Атрибуты отсутствуют.

#|
|| **Тег** | **Описание** | **Атрибуты** ||
|| `categ` | Описание найденной картинки. |

- `attr`— название группировки. Совпадает со значением атрибута `attr` тега [groupby]{% if audience == "internal" %}(../concepts/requestelement-internal.md#requestgroupby){% endif %}{% if audience == "external" %}(../concepts/xmlanswer.md#requestgroupby){% endif %} элемента [request]{% if audience == "internal" %}(../concepts/requestelement-internal.md){% endif %}{% if audience == "external" %}(../concepts/xmlanswer.md#requestelement){% endif %}; 
- `name` — имя главного хоста, на котором хранится картинка. || 
|| `doccount` | Служебный тег. 

{% if audience == "internal" %}Оценка снизу количества найденных в группе картинок. Так как каждая группа картинок содержит одну картинку, то тег всегда имеет значение «1».{% endif %} | Атрибуты отсутствуют. ||
|| `relevance` | Служебный тег.

{% if audience == "internal" %}Значение релевантности группы картинки.{% endif %} | `priority` — служебный атрибут. ||
|#

> Группирующий тег `doc`. Каждый тег содержит информацию о найденной картинке и ее дубликатах. 
>
> Содержит атрибут `id` —   идентификатор картинки.

#|
|| **Тег** | **Описание** | **Атрибуты** ||
|| `relevance` | Служебный тег.

{% if audience == "internal" %}Значение релевантности картинки.{% endif %} | `priority`— служебный атрибут. ||
|| `url` | Адрес, по которому доступна картинка. | Атрибуты отсутствуют. ||
|| `domain` | Домен, на котором расположен документ, содержащий картинку. | Атрибуты отсутствуют. ||
|| `title` | Служебный тег.

{% if audience == "internal" %}Заголовок картинки. На выдаче не используется. Может содержать выделяемые фрагменты в тегах `hlword`.{% endif %} | Атрибуты отсутствуют. ||
|| `modtime` | Дата и время изменения картинки в формате: 

`<год><месяц><день><час><минута><секунда>` | Атрибуты отсутствуют. ||
|| `size` | Размер картинки в байтах. | Атрибуты отсутствуют. ||
|| `charset` | Кодировка документа, содержащего картинку. | Атрибуты отсутствуют. ||
|| `passages` | Контейнер для списка сниппетов к картинке.

Для картинок всегда формируется один сниппет. | Атрибуты отсутствуют. ||
|| `passage` | Сниппет к картинке. Слова запроса выделяются тегом `hlword`. | Атрибуты отсутствуют. ||
|| `properties` | Контейнер, содержащий свойства документа. | Атрибуты отсутствуют. || 
|| `ClipsProperties` | Служебный тег. Содержит значения полей XML-документа в сериализованном виде. | Атрибуты отсутствуют. ||  
{% if audience == "internal" %}|| `DESC` | Служебный тег.

Содержит краткое описание найденного объекта. | Атрибуты отсутствуют. ||{% endif %}
|| `FeaturedClips` | Служебный тег. Содержит значения полей XML-документа в сериализованном виде. | Атрибуты отсутствуют. ||
{% if audience == "internal" %}|| `HasImageSignature` | Наличие у картинки сигнатуры для поиска похожих. 

Возможные значения:
  - «0» — сигнатура отсутствует;
  - «1» — сигнатура присутствует. | Атрибуты отсутствуют. ||{% endif %}
{% if audience == "internal" %}|| `TAGS` | Служебный тег. 

Содержит теги картинки. Значения извлекаются из частотных описаний. | Атрибуты отсутствуют. ||{% endif %}
{% if audience == "internal" %}|| `_MetaSearcherHostname` | Служебный тег. 

Адреса серверов верхнего метапоиска и индекса картинок. | Атрибуты отсутствуют. ||{% endif %}
{% if audience == "internal" %}|| `_MimeType` | Служебный тег. 

Код MIME-типа документа и сопутствующая информация. | Атрибуты отсутствуют. ||{% endif %}
|| `_Name_ih` | Домен главного сайта группы картинок. | Атрибуты отсутствуют. ||
|| `_PassageAttrs` | Набор атрибутов картинки (размер дубля, формат файла, адрес картинки, признак зарубежности и т.п.). |Атрибуты отсутствуют. ||
{% if audience == "internal" %}|| `_SearcherHostname` | Служебный тег. Название базового поиск, содержащего информацию о картинке. | Атрибуты отсутствуют. ||{% endif %}
|| `ih` | Идентификатор главного сайта, по которому находится картинка. | Атрибуты отсутствуют. ||
|#

> Группирующий тег `image-properties`. Содержит информацию о свойствах картинки, которую следует отдавать на поисковую выдачу. Атрибуты отсутствуют. 

#|
|| **Тег** | **Описание** | **Атрибуты** ||
|| `id` | Идентификатор уменьшенной копии картинки (thumbnail). | Атрибуты отсутствуют. ||
|| `shard` | Номер шарда, содержащего информацию о картинке. | Атрибуты отсутствуют. ||
|| `thumbnail-width` | Ширина уменьшенной копии картинки в пикселях. | Атрибуты отсутствуют. ||
|| `thumbnail-height` | Высота уменьшенной копии картинки в пикселях. | Атрибуты отсутствуют. ||
|| `thumbnail-link` | Адрес, по которому доступна уменьшенная копия картинки. | Атрибуты отсутствуют. ||
|| `original-width` {#original-width} | Ширина оригинала картинки. | Атрибуты отсутствуют. ||
|| `original-height` {#original-height} | Высота оригинала картинки. | Атрибуты отсутствуют. ||
|| `html-link` {#html-link} | Адрес страницы, на которой опубликована картинка. | Атрибуты отсутствуют. ||
|| `image-link` {#image-link} | Адрес, по которому доступна картинка. | Атрибуты отсутствуют. ||
|| `file-size` {#file-size} | Размер картинки в байтах. | Атрибуты отсутствуют. ||
|| `mime-type` {#mime-type} | Формат картинки (jpg, gif и т.п.). | Атрибуты отсутствуют. ||
|#

> Группирующий тег `image-duplicates`. Содержит информацию о дубликатах картинки. Информация о каждом дубликате вложена в группирующий тег `image-properties`.
> Каждый группирующий тег `image-properties` содержит следующие теги с информацией о дубликате:
> - [original-width](#original-width)
> - [original-height](#original-height)
> - [html-link](#html-link)
> - [image-link](#image-link)
> - [file-size](#file-size)
> - [mime-type](#mime-type)
>
> Атрибуты отсутствуют.

> Группирующий тег `image-duplicates-fitsize`. Содержит информацию о дубликатах картинки наибольшего размера. Информация о каждом дубликате вложена в группирующий тег `image-properties`.
> Каждый группирующий тег `image-properties` содержит следующие теги с информацией о дубликате:
> - [original-width](#original-width)
> - [original-height](#original-height)
> - [html-link](#html-link)
> - [image-link](#image-link)
> - [file-size](#file-size)
> - [mime-type](#mime-type)
>
> Атрибуты отсутствуют.


> Группирующий тег `image-duplicates-preview`. Содержит информацию о дубликатах уменьшенной копии картинки. Информация о каждом дубликате вложена в группирующий тег `image-properties`.
> Каждый группирующий тег `image-properties` содержит следующие теги с информацией о дубликате:
> - [original-width](#original-width)
> - [original-height](#original-height)
> - [html-link](#html-link)
> - [image-link](#image-link)
> - [file-size](#file-size)
> - [mime-type](#mime-type)
>
> Атрибуты отсутствуют.
