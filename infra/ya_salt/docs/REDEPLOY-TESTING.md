# Проверка hostmanager с переналивкой

При крупных изменениях в ya-salt и/или hostctl стоит помимо тестов и проверки работы на живом хосте также проверять работу в переналивке. Это позволяет отловить проблемы, которые при "хорошем" хосте могут быт не видны и выстреливают ближе к ночи, когда скапливается большое количество переналитых за день хостов.

Проверить работу версии (или последней версии из search/unstable) можно переналив хост с конфигом ```web-unstable-rtc-ubuntu-16.04```. Если нужно указать конкретную версию - то это можно сделать добавив ее в секцию ```packages``` [тут](https://setup.yandex-team.ru/#!/configs/view/web-unstable-rtc-ubuntu-16.04).

## Действия для проверки
* commit/build/upload package to search/unstable (обычно выполняется автоматикой сборки)
* сделать и смержить PR с нужной версией в develop
* увести хост из проекта с тегом ```#rtc.stage-prestable``` в maintenance
* переналить этот хост наливкой ```web-unstable-rtc-ubuntu-16.04```
* проверить результат работы hostmanager на переналитом хосте
* удалить хосту конфиг наливки командой wall-e hosts deploy-config remove <fqdn>
* налить хост проектной наливкой (без указания наливки)
