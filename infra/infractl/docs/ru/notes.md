# Особенности работы

## Разрешение конфликтов с Deploy

infractl имеет собственное хранилище данных — kubernetes, где хранится отправляемое в систему (например, [командой](https://docs.yandex-team.ru/infractl/cli#put) `infractl put`) содержимое стейджа. После сохранения стейджа в kubernetes, он будет асинхронно записан в Deploy. Если теперь поменять стейдж напрямую через Deploy, то ранее внесённые через infractl изменения перетрутся. infractl **не будет откатывать внесённые в обход него изменения**, и стейдж останется в том состоянии, которое было записано в Deploy напрямую. Но если теперь отредактировать стейдж через infractl ещё раз, то он снова успешно обновит его в Deploy.

Если чуть углубиться в реализацию, то такое поведение достигается за счёт возможности линейно упорядочить все вносимые в YP изменения с помощью YT timestamp.
