# CI/CD

Для сервиса будут автоматически сгенерированы релизные CI/CD флоу:
* Release to testing 
* Release to pre-stable 
* Release to stable 
* Release to testing -> pre-stable -> stable

Флоу поддерживают по локационный релиз с подтверждением каждой локации.

Флоу можно изменять, добавлять свои шаги в любое место, не нарушая при этом транзитивные зависимости (нельзя менять местами шаги применения инфраструктуры, сборки, деплоя).

Можно изменять параметры шагов флоу в a.yaml, генерация не будет затирать сделанные вами изменения. (_Структуры с значениями по умолчанию версионируются, мне всегда сможем определить кем было сделано изменение._)

При вызове команды `infractl init` создается базовый файл `a.yaml` содержащий только флоу релиза инфраструктуры для PaaS, так и для IaaS. 

Если у вас есть новый файл `service.toml` или в нем были сделаны изменения, вам необходимо вызвать команду `infractl generate` для генерации файла и/или добавления релизных флоу для вашего микросервиса. 

О необходимости вызова `infractl generate` вам напомнят проверки системы контроля версий, так же при вызове команды `infractl apply` файл будет сгенерирован.

## Файл a.yaml