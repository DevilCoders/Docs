_work in progress_


#### предназначение
Организовать конвейер доставки данных в поды,
независимый от спецификаций подов и логики обновления сервиса системой деплоя.

#### основные функции
Приведение и последующее поддержание локального хранилища файлов
в соответствие с постоянно изменяющейся спецификацией (целевым состоянием).
Единица обработки – ресурс; он может быть одно- и многофайловым,
в том числе с произвольной структурой подкаталогов.
В общем случае ресурс на поде последовательно проходит по цепочке состояний:
новый -> доставлен -> опубликован -> удалён.
Внутри пода предоставляются средства для поиска ресурсов и уведомления об изменении состояния.
Вне подов – обратная связь: какие ресурсы доставлены, какие опубликованы, с какими есть проблемы.

#### ресурсы
Спецификация данных деплоера на заданном поде – это список пар (ресурс, правила публикации).
Ресурсы бывают однофайловые и многофайловые, также ресурсы различаются по способу доставки,
например: sandbox, rbtorrent, plutonium; более подробное описание см. #ссылку-на-протобуфы.
Деплоер вполне приспособлен к добавлению новых типов ресурсов.
Целевое состояние – это (сейчас) выбор из "доставлен" и "опубликован".
Удаление ресурса реализуется с помощью удаления его спецификации.

#### доставка
Ресурсы доставляются последовательно. Технически нет препятствий параллельной доставке,
но и необходимости в такой функциональности сейчас тоже нет.
Можно представлять себе работу деплоера в виде бесконечного цикла:
выбрать следующий ресурс, доставить его на под, опубликовать.
При выборе следующего ресурса можно организовать некоторую приоритизацию,
но сейчас в этом нет необходимости, поэтому используется простой алфавитный порядок на идентификаторах.

#### публикация
Деплоер управляет двумя файловыми иерархиями, по сути двумя папками: внутренней и внешней.
Ресурсы доставляются во внутреннюю, она организована плоско: линейный список папок,
имена которых совпадают с идентификаторами ресурсов.
Чтобы пользовательский код нашёл доставленный ресурс, требуется его опубликовать.
Публикация ресурса – это простановка symlink-ов из публичной файловой иерархии деплоера во внутреннюю,
а также – рассылка уведомлений.
