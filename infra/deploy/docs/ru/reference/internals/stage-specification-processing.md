# Как обрабатывается спецификация Stage

Описание сервиса пользователь выполняет в спецификации [Stage](../../concepts/stage/stage.md) и загружает её в YP любым из способов: UI Y.Deploy, [dctl](../../reference/tools/dctl.md) или API YP. Stage — это кросс-локационный объект, который работает в YP в инсталляции xdc. Управлением Stage занимается Stage Controller.

Stage Controller периодически проверяет появление новых или изменение существующих спецификаций Stage. Основная задача Stage Controller — сгенерировать спецификации для контроллеров более низкого уровня, таких как [Replica Set Controller (RSC)](architecture/rsc.md). При генерировании спецификаций для RSC учитывается [примитив деплоя](../../concepts/deploy-unit/deploy-primitives.md), выбранный в описании [Deploy Unit](../../concepts/deploy-unit/deploy-unit.md).

RSC в свою очередь генерируют спецификации [Pod](../../concepts/pod/pod.md). Эти спецификации отправляются агентам Node, которые создают физические объекты Pod и передают им полученные ранее спецификации. Агенты в Pod в свою очередь создают все заданные [Box](../../concepts/pod/box.md) и инициируют скачивание ресурсов.

Спецификации RSC и спецификации более низкого уровня недоступны для редактирования пользователем. Stage Controller преобразует указанные пользователем параметры в те, которые смогут обработать контроллеры и агенты более низкого уровня. Например, в спецификации Stage пользователь может установить флаг, включающий поставку логов. Для того, чтобы поставка заработала, необходимо сконфигурировать соответствующий Box. Stage Controller делает это за пользователя.

