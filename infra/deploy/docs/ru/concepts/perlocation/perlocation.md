# Полокационная выкладка

Полокационная выкладка нужна тем, кому требуется выкатывать DeployUnit's последовательно в определенном порядке на каждую из локаций. Полокационная выкладка работает только для приложений, которые используют **ReplicaSetController**.

## Механика {#mechanics}

Полокационная выкладка включается наличием лейбла **cluster_sequence**. Тип значений array. В значении лейбла необходимо перечислить все названия локаций в том порядке, в котором необходимо их выкатить. Ручное добавление лейбла требуется только один раз, дальнейшую выкладку без изменения состава и порядка можно осуществлять через UI.
Пример:

```yaml
labels:
  cluster_sequence:
  - man-pre
  - sas-test
...
spec:
...
  deploy_units:
  ...
   DeployUnit1:
      replica_set:
        per_cluster_settings:
          man-pre:
          ...
          sas-test:
          ... 
```

Как это будет выглядеть в интерфейсе после пуша в YP:
* Сначала полностью выедет **man-pre**
* Следом поедет **sas-test**

Для того, чтобы вернуться к прежней политике деплоя, необходимо удалить лейбл **cluster_sequence**.

## FAQ {#faq}

Q: Что будет, если я неправильно указал имя кластера?
A: **Произойдет полокационная выкладка в произвольном порядке на все локации.**

Q: Что будет, если я забыл указать один из кластеров?
A: **Список дополнится, остальные выедут в том порядке, в котором указаны в лейбле. Те, что были добавлены, будут выложены в произвольном порядке.**

Q: Что будет, если отправить пустой список?
A: **Произойдет полокационная выкладка в произвольном порядке на все локации.**
