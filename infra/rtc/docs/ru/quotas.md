# Получение квот

Под (контейнер) требует определённых ресурсов для работы, таких как CPU, память, диск, сеть или GPU. Эти ресурсы вычитаются из квоты пользователя, поэтому чтобы создать под необходимо иметь выданную [квоту в YP](https://wiki.yandex-team.ru/yp/quotas/). Она обеспечена реальными серверами в облаке RTC, оверкоммит по ресурсам не допускается. По этим причинам получение квот требует согласования у [Capacity Planning комитета](https://abc.yandex-team.ru/services/capacity-planning-comitee/). Иными словами квота стоит денег.

Квоты выдаются на **ABC сервис**, конкретный **ДЦ** и **сегмент**, [например](https://abc.yandex-team.ru/services/srertc/resources/?supplier=1979&type=96&state=requested&state=approved&state=granting&state=granted&view=consuming&show-resource=5484914):

![abc_quota](https://jing.yandex-team.ru/files/dldmitry/2021-02-19_23-00-37.png)

Например, нельзя использовать квоту выданную на MAN во VLA. Аналогично с сегментами или другими ДЦ.

## Где посмотреть? {#how-to-check}

В [UI](https://qyp.yandex-team.ru/quota) (не обращайте внимания на то, что ссылка ведёт на QYP, квоты общие для всех систем).

{% cut "Или с помощью ya tool yp-util." %}

```
$ ya tool yp-util account explain abc:service:729 --cluster sas
Account(s) limits:
╒═══════╤═══════════╤═════════════════╤════════╤════════════╤══════════╤══════════╤════════════╤════════╤════════════╤════════╤════════════╕
│       │ segment   │ account_id      │ slug   │ vcpu       │ memory   │ hdd      │ hdd_bw     │ ssd    │ ssd_bw     │   ipv4 │ net_bw     │
╞═══════╪═══════════╪═════════════════╪════════╪════════════╪══════════╪══════════╪════════════╪════════╪════════════╪════════╪════════════╡
│ 0     │ default   │ abc:service:729 │ Wall-E │ 86.0 cores │ 204.0 Gb │ 921.6 Gb │ 639.0 Mb/s │ 1.1 Tb │ 219.0 Mb/s │      0 │ 2.305 Gb/s │
├───────┼───────────┼─────────────────┼────────┼────────────┼──────────┼──────────┼────────────┼────────┼────────────┼────────┼────────────┤
│ total │           │                 │        │ 86.0 cores │ 204.0 Gb │ 921.6 Gb │ 639.0 Mb/s │ 1.1 Tb │ 219.0 Mb/s │      0 │ 2.305 Gb/s │
╘═══════╧═══════════╧═════════════════╧════════╧════════════╧══════════╧══════════╧════════════╧════════╧════════════╧════════╧════════════╛

Account(s) usages:
╒═══════╤═══════════╤═════════════════╤════════╤═════════════╤════════════╤════════════╤════════════╤═════════╤═══════════╤════════╤════════════╕
│       │ segment   │ account_id      │ slug   │ vcpu        │ memory     │ hdd        │ hdd_bw     │ ssd     │ ssd_bw    │   ipv4 │ net_bw     │
╞═══════╪═══════════╪═════════════════╪════════╪═════════════╪════════════╪════════════╪════════════╪═════════╪═══════════╪════════╪════════════╡
│ 0     │ default   │ abc:service:729 │ Wall-E │ 78.19 cores │ 167.344 Gb │ 893.133 Gb │ 600.0 Mb/s │ 40.0 Gb │ 70.0 Mb/s │      0 │ 550.0 Mb/s │
├───────┼───────────┼─────────────────┼────────┼─────────────┼────────────┼────────────┼────────────┼─────────┼───────────┼────────┼────────────┤
│ total │           │                 │        │ 78.19 cores │ 167.344 Gb │ 893.133 Gb │ 600.0 Mb/s │ 40.0 Gb │ 70.0 Mb/s │      0 │ 550.0 Mb/s │
╘═══════╧═══════════╧═════════════════╧════════╧═════════════╧════════════╧════════════╧════════════╧═════════╧═══════════╧════════╧════════════╛

Pod set(s) usages:
╒═══════╤═══════════╤═════════════════╤═══════════════════════════════════════════╤═════════════╤════════════╤════════════╤════════════╤═════════╤═══════════╤════════╤════════════╕
│       │ segment   │ account_id      │ pod_set_id                                │ vcpu        │ memory     │ hdd        │ hdd_bw     │ ssd     │ ssd_bw    │   ipv4 │ net_bw     │
╞═══════╪═══════════╪═════════════════╪═══════════════════════════════════════════╪═════════════╪════════════╪════════════╪════════════╪═════════╪═══════════╪════════╪════════════╡
│ 0     │ default   │ abc:service:729 │ production-wall-e-api-yp                  │ 6.0 cores   │ 29.297 Gb  │ 117.188 Gb │ 90.0 Mb/s  │ 0.0 b   │ 0.0 b/s   │      0 │ 0.0 b/s    │
├───────┼───────────┼─────────────────┼───────────────────────────────────────────┼─────────────┼────────────┼────────────┼────────────┼─────────┼───────────┼────────┼────────────┤
│ total │           │                 │                                           │ 78.19 cores │ 167.344 Gb │ 893.133 Gb │ 600.0 Mb/s │ 40.0 Gb │ 70.0 Mb/s │      0 │ 550.0 Mb/s │
╘═══════╧═══════════╧═════════════════╧═══════════════════════════════════════════╧═════════════╧════════════╧════════════╧════════════╧═════════╧═══════════╧════════╧════════════╛
```

{% endcut %}

В качестве кластеров можно указать `sas`, `man`, `vla`, `iva`, `myt`. ID ABC сервиса можно найти на его странице.

## Как получить? {#how-to-get}

Как запросить квоту подробно описано в [wiki](https://wiki.yandex-team.ru/capacity-planning-team/quotas-process/).

Для экспериментов можно воспопьзоваться [tmp квотой](https://clubs.at.yandex-team.ru/yp/116), но использовать её в production целях **нельзя**.

Под внезапно возникший проект можно без дополнительных согласований и заказов можно получить [free tier](https://wiki.yandex-team.ru/ftq/) квоту.

Если вы хотите получить квоту в YP в обмен на сервера то стоит воспользоваться [формой](https://forms.yandex-team.ru/surveys/50527/), см. [анонс](https://clubs.at.yandex-team.ru/infra-cloud/1400).
