# Status report 11.10.2021
Давно не писал, потому что писать сильно было нечего. Заняты причёсыванием кода, документации, perfomance-review.

## Composition'ы
Решили в обозримом будущем от них отказаться. Слишком неуклюжее решение, которое прячет многие аспекты (by design), но реальность такая, что многое не работает из коробки и приходится отлаживать. Composition'ы тут скорее мешают. Тут - это в развёртывании конкретных сервисов конкретных публичных облаков. Но держим инструмент в кармане на случай применения как во внутреннем, так и во внешних облаках.

## Infra-models
Опубликовал все готовые на данный момент - 3 штуки. Собрал хорошее количество лайков от профильных ребят (Толока, Поиск по почте, внутренние ребята). Много написал в [infra-models-4](https://a.yandex-team.ru/arc/trunk/arcadia/infra/kube/docs/infra-models-4.md), но не закончил и не опубликовал. Не знаю, какой вывод сделать, кроме: "любое решение найдёт своего пользователя" - но он не очень продуктивный. Сделаю до ноября подход и опубликую.

## Azure
Саша Каганович помог разобраться и организовал работу с IDM. В итоге, кажется, всё получилось, что хотели.

В итоге пользователям внутри их AKS даём [ASO](https://github.com/Azure/azure-service-operator). Их там две версии:
  * старая, но бета (умеет интересное количество ресурсов)
  * новая, но альфа - через кодогенерацию оперативно добавляют по объекту в неделю
Пишут ребята из Microsoft (New Zealand) и делают это **пока** активно. В случае необходимости реализовать новые объекты, мы можем:
  * попросить дописать
  * дописать сами
В течение недели мы новые объекты можем добавить, благо там шаблонно.

Сейчас каких-то практических шагов не делаем. Разобрались, как дать доступ, как запустить AKS, как дать пользователям доступы. Но не смогли за неделю+ дать понятную [документацию](https://a.yandex-team.ru/arc/trunk/arcadia/infra/kube/azure#about). Опять же - мой большой просчёт, думал, что это понятный кейс и задача не rocket science. Оказывается - сложно. Буду добавить сам, не мучать лишний раз Васю. С AWS, надеюсь, не наступим на эти же грабли. Кстати, про него.

## AWS
Встретились с ребятами из SDG. Они рассказали про свой кейс (в [KUBERTC-42](https://st.yandex-team.ru/KUBERTC-42)). Вася начал активно проверять, что у нас хотя бы базово есть все инструменты для их кейсов. Прямо сейчас (в 14:00 возится в v6 сетями и виртуалками). Использовать планируем [AWS Controllers for Kubernetes (ACK)](https://github.com/aws-controllers-k8s/community). Опять же официальный продукт AWS.
Сразу попытались начать работы по организации доступа в AWS с помощью внутренних учёток - пока прогресс не очень: keyd@ занят, а glebskvortsov@ - в отпуске. Плюс Саша Каганович болел, но вернулся и с новыми силами обязательно здесь сдвинет задачу.

Так же встречались с персональным success manager'ом от AWS для Яндекса вцелом. Он рассказал, что AWS делает большую ставку на Яндекс, есть рамочное соглашение о сотрудничестве и большие скидки с кэшбеком и баллами "Спасибо". Занимается напрямую с SDG и проектом Double Cloud. Готов помогать по любым вопросам, подключать инженеров, организовывать чаты даже в Телеграме. Пока договорились, что общаться с ним будет Саша Каганович.

## YC
Встречался со squirell@ про запуск WALL-E в YC, по итогам завёл [KUBERTC-44](https://st.yandex-team.ru/KUBERTC-44). С одной стороны, прямо сейчас их кейс выглядит просто: нужен запуск stateless сервисов в kubernetes. Но на самом деле много вопросов, как в нашей зоне ответственности, так и совместные:
  * IPv6 сети и доступ в RTC - этот момент недоступен через API и нужно руками организовывать
  * релизы из Аркадии и The CI - можно ли с т.з. compliance?
  * docker registry - внутренний или приватный или какой-то более общий для компонент самого Облака?
  * и т.д.
Будем решать по мере продвижения. Олег Сенин теперь полностью сосредоточен на этой задаче. На прошлой неделе починили утечку памяти в его provider-yc и реализовали полноценный kuber кластер - с nodegroup'ами и масштабированием. На этой неделе (среди инженерных задач) проверить, сценарий для WALL-E - организация работы с v6.