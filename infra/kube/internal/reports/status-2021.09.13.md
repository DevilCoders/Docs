# Status report 13.09.2021
Двигались как в болоте, очень вязкая среда composition'ов и продираться сквозь было сложно. Очень сложно было выбрать между разными вариантами. Все. Все варианты одинаково стрёмные.
Отчёт за без малого месяц, но похвастаться реальными делами не очень.

## Education
>If your problem is accidentally complex, simplify.
>If your problem is inherently complex, educate.

Смонтировали и выложили ролик из страт сессии: https://clubs.at.yandex-team.ru/infra-cloud/1954 - такой формат видимо не очень зашёл, надо думать про тикток-sized видео. Но для этого точно нужен как минимум хороший микрофон, штатные в гарнитурах отбивают желание слушать происходящее.

Продолжили заниматься распространением знаний и даже завели неплохие и полезные (мне) дискуссии. Начали выкладывать в этушку цикл наблюдений за infra models:
  * https://clubs.at.yandex-team.ru/infra-cloud/1989
  * https://clubs.at.yandex-team.ru/infra-cloud/2001

Собрали неплохой набор лайков, самая дискуссионная часть будет в третьей части, когда начнём смотреть на kubernetes в полный рост.

## Cloud formation model
Посмотрели на пару подходов к тому, как можно организовать работу с разными облаками. Вариантов два: всё через одно место (pun intended) и federation. Мысли можно почитать [тут](https://a.yandex-team.ru/arc/trunk/arcadia/infra/kube/docs/cloud-federation.md). Пока рабочей считаем схему с federation'ом. На самом деле мы можем быть гибкими и для разных задач/команд использовать обе одновременно (если будет необходимость и, что важнее, силы).

## Composition to the rescue?
Очень много сил потратили на разбор того, что же такое crossplane на самом деле. Я изначально только смотрел на конкретные провайдеры и библиотеки для их написания. Но нужда в абстрагировании пользователя от деталей реализации (и Дима Липин) всё же подтолкнули к тому, чтобы посмотреть на [composition'ы](https://danielmangum.com/posts/crossplane-infrastructure-llvm/). В итоге чуть не утонули в уровнях --сумрака-- yaml'а. Тема понятная концептуально, но реализация в k8s API и YAML очень усложняют, наверное это не лучшее средство выражения таких идей. Возможно мы недостаточно разобрались. Вася [попытался](https://a.yandex-team.ru/arc/trunk/arcadia/infra/kube/docs/composition-review.md) описать проблематику и выводы, но боюсь, что мы тут не приуспели.
Ожидание:
>Вот такая понятная задача, вот такая сложная реализация, вот такие сложности.
В реальности получилось больше:
>Вот такая понятная вроде задача, вот ваще непонятная реализаци, вот в итоге вообще непонятно, как и что с ней не так.

Это тоже **очень сильный сигнал** про решение, но кажется, мы можем лучше. Я попробую сделать подход.


## Active Directory Federation Service + Azure
К нам подключился Саша Каганович и какими-то нечеловеческими усилиями разобрался и договорился про то, как нам получить и организовывать доступы в Azure. Это заняло прилично времени, но теперь надеюсь счета мне за Azure больше приходить не будут :)
Надо задокументировать схему и процессы.


## Better hybrid
Влад Бидзиля выразил интерес попробовать прикрутить YP as a storage к k8s и дать полный k8s UX поверх YP. Тикет: [KUBERTC-32](https://st.yandex-team.ru/KUBERTC-32). Очень полезное начинание. У меня всегда была гипотеза:
 а) это невозможно в достаточной степени, чтобы было полезно
 б) проверять это очень дорого, сил нет
Если у Влада получится опровергнуть эту гипотезу или превратить её в конкретные факты - это будет огромный шаг в понимании наших возможных ходов.

## Планы
  * Выложу третью часть infra models, допишу четвёртую.
  * Собрать user story с заведением нового playground'а для пользователей и прийти к Толоке уже.
