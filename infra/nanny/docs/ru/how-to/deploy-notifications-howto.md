# Уведомления о выкладках сервиса

Ниже описано, что нужно сделать, чтобы включить уведомления о выкладках сервиса Nanny.

Nanny позволяет связывать ревизии сервиса с тикетами в одной из очередей **своей** тикетной системы. Далее при создании и изменении статусов этих тикетов будут отправляться уведомления ответственным за очередь и ответственным за сервис.

Чтобы включить эти уведомления, нужно:

## Уведомления об изменении статуса выкладки ревизий сервиса {#tickets-status-change-notifications}

1. Связать сервис с [существующей](https://nanny.yandex-team.ru/ui/#/queues/) или [новой](https://nanny.yandex-team.ru/ui/#/queues/create-queue/) очередью тикетов в Nanny:

    ![img](https://jing.yandex-team.ru/files/sshipkov/setticketqueue.5c433db.png)

1. Опционально: указать список ответственных за очередь, которым нужно отправлять уведомления по всем тикетам очереди. Этим людям будут приходить уведомления по выкладкам всех сервисов, связанных с этой очередью.
1. Опционально: указать список наблюдателей за сервисом, которым будут приходить отбивки по тикетам связанных с конкретным сервисом.

    ![img](https://jing.yandex-team.ru/files/sshipkov/observers.8171403.png)

## Важное замечание {#note}

{% note warning %}

После связки сервиса с очередью создание тикета будет происходить **при старте подготовки или активации снэпшота**, но не при создании снэпшота.

{% endnote %}

## Уведомления о зависших выкладках {#deploy-monitoring}

В системе нет понятия неуспешной выкладки. Поэтому уведомления, настроенные описанным выше способом, будут приходить только при старте выкладки, прохождении разных стадий выкладки, её успешном завершении или ручной отмене.

Это не позволяет отследить зависшие выкладки, когда, например, инстансы по какой-то причине не могут подняться. В таком случае не происходит изменение состояния ревизии сервиса и связанного тикета, поэтому уведомлений не будет. Чтобы получить уведомление о выкладке, которая не может завершиться, нужно настроить deploy monitoring в сервисе с определённым таймаутом, после которого хочется получать уведомления.

![img](https://jing.yandex-team.ru/files/sshipkov/deploymonitoring.56d4c1f.png)

## Дополнительно {#send-important-notifications}

В настройках очереди тикетов есть флажок **Send only important notifications**. Его логика описана [тут](https://st.yandex-team.ru/SWAT-1987#1441718566000).

