## Памятка по переезду проекта в монореп

### Перевозим историю коммитов с помощью lerna import
Ваш проект будет жить в `services/<project-name>`. Если в вашем проекте используется bem-node просьба добавлять к названию суффикс -bem.
Памятка по переносу коммитов:
https://github.yandex-team.ru/search-interfaces/frontend/blob/master/docs/import_service.md#О-да-git

### Заводим сборку проекта
Нужно, чтобы команда `npm run bootstrap` устанавливала всё необходимое для вашего проекта. Для запуска дев сборки проекта добавьте в package.json -> scripts комманду с названием вашего проекта, тогда можно будет запускать ваш проект из корня коммандой `npm run l <project-name>`.

### Настройте автобеты
Обновите ваши беты. Можно скопировать коммит отсюда https://github.yandex-team.ru/Metrika/appmetrika-beta-build/commit/b1e186debc26ae708d24ce7cf3b4d73135e43644 Добавьте вашу бету в гитхаб хуки монорепы. 

### Настройте продовую сборку
Для продовой сборки должен отрабатывать скрипт build.sh (если вы ещё не в облаках). Проверьте, что он отрабатывает у вас локально, когда получится, попробуйте запустить сборку в sandbox.

### Перенести недостающие коммиты
Если вы уже перенесли историю коммитов, но за то время, которое вы настраивали сборку монорепозитория уже кто-то успел накоммитить в develop - не беда!
* `cd old-repo && git format-patch -o patches <commit>` - commit - последний перенесённый коммит
* `cd new-mono-repo && git am -3 --directory=services/<project-name>/ <path-to-patches>/patches/*`

