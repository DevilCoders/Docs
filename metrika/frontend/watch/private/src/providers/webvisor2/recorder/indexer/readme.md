# Indexer
Этот компонент собирается сбором информации о DOM элементах, контролирует асинхронность их обработки, контролирует правильность сбора информации об элементах вне зависимости от времени когда она была собрална.

## Общая идея работы
Итак, в основе работы индексера лежит несколько основных идей. Мы должны уметь ссылаться на ноду по краткому идентификатору (id), которые надо проставить. Сбор информации о ноде идёт достаточно долго и если проделывать множество таких операций синхронно это может вызывать лаги. Чтобы этого избежать эти ноды стоит записывать в некий список и запустить рекурсивный таймаут который будет их обрабатывать небольшими пачками ограниченными по времени выполнения. Это приводит к ситуации, что нода может быть обработана в момент когда внутри неё уже произошли некоторые изменения и если собирать информацию о ней напрямую, мы можем получить не актуальную информацию (потому что запросили мы её сбор какое-то время назад), следовательно нужно иметь предыдущие значения изменённых параметров, для этого мы собираем indexOptions.

## Добавление элементов
При добавлении поддерева элементов мы сначала проходимся по ним через treeWalker и проставляем каждому элементу айдишник, если он ешё не проставлен. Если элемент который добавляется уже по какой-то причине лежит в очереди на индексацию, мы форсим его индексацию, чтобы избежать ситуации когда его состояние и опции индексации расходятся с реальностью. После того как все Id проставлены, мы кладём элементы в очередь событий. По индексации всех элементов внутри одного события, мы зовём коллбэк который передан нам в событии и удаляем событие из очереди.

## Удаление элементов
При удалении элементов мы форсим индексацию корневого нода который был удалён. Так как ссылки на удалённые ноды хранятся в очереди событий если они ещё не проиндексированы, мы можем собрать информацию о них в асинхронном порядке.

## indexNode
Мы собираем информацию о ноде, например её парента, атрибуты и так далее. Мы используем информацию из indexOptions чтобы вернуться назад во времени. Если ноды нет в списке событий, то мы просто вернём айди, если она там есть, после сбора информации мы удалим её из списка.

## indexerOptions
Собственно опции позволяют нам получить прошлое состояние ноды. Эти данные нам приходят из MutationCaptor. Мы можем получить сразу несколько таких состояний и они кладутся в очередь в такой ситуации, чтобы избежать потери состояний.
