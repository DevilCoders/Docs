# Посещение внешнего интернета Яндексом

Для того, чтобы поиск Яндекса мог показывать страницы по запросам, поисковой системе необходимо регулярно посещать сайты интернета и индексировать их: скачивать контент новых страниц и обновлять данные о старых страницах. Для получения контента сайтов внешнего интернета используется сложная структура из нескольких инструментов. Общая схема выглядит следующим образом:

[![samovar_bannerland](https://jing.yandex-team.ru/files/oddeye/browser_AECC7aJAQs.png)](https://jing.yandex-team.ru/files/oddeye/browser_AECC7aJAQs.png)

Последовательность посещения в упрощенном варианте: 
1. Механизм Zora представляется поисковым роботом Яндекса (видов роботов может быть несколько, пользователи могут узнать о них из [официальной документации](https://yandex.ru/support/webmaster/robot-workings/check-yandex-robots.html)) и посещает страницы интернета, скачивая их содержимое и http-ответы с определенными заголовками. Посещения известны владельцам ресурсов. 
1. Информацию о скачанных данных Zora отправляет в Samovar, который планирует, какие ссылки или наборы ссылок нужно посетить следующими, и возвращает данные в Zora.
1. Информация о самих скачанных страницах отправляется в RTHUB, где данные обрабатываются (парсятся) и затем доставляются в нужно виде до конечного потребителя. Например, в случае большого поиска потребитель — это поисковая база Jupiter, откуда страницы и показываются на выдаче.

Данный пайплайн — основной инструмент для получения больших объемов данных из внешнего интернета, поэтому, если вам требуется регулярно получать данные с сайтов, вы можете использовать для этого именно Робота. 

Разные части контент-системы служат для разных целей, поэтому подход к получению данных может различаться. Возможные сценарии:
1. Необходимо автоматически скачивать некоторый набор страниц, чтобы получать их контент (или только заголовки) с определенной регулярностью. В этом случае вы можете прокачивать данные через Zora.
1. Необходимо видеть данные, которые содержат проиндексированные в поиске страницы, прокачивать их повторно может не требоваться. В этом случае вы можете получать проиндексированные данные из RTHUB.
1. Необходимо получать и индексировать с определенной частотностью ссылки заданного формата, при этом всего набора ссылок нет. Для этого используется специальная политика Samovar. 

     Samovar можно использовать, чтобы отправлять в него некоторый набор ссылок, который будет регулярно переобходиться. Например, если важно, чтобы в поиске всегда были актуальные версии данных страниц.

1. Сервис должен ходить в ограниченное и заранее известное небольшое количество внешних партнерских API, или сервису критична latency. Такие сервисы могут заказать доступ в Puncher напрямую до сервиса и ходить самостоятельно.

     {% note warning %}

     Такие походы необходимо обязательно согласовать с СИБ.

     {% endnote %}

1. Необходимы скриншоты страниц сайтов. Для этого можно использовать другой сервис [Vanadium](https://wiki.yandex-team.ru/vanadium/).
1. Необходима прокси-прослойка между живыми пользователями вашего сервиса и ручкой, например, в API, куда пользователь должен послать свой запрос. В этом случае следует использовать инструмент [Gozora](https://wiki.yandex-team.ru/zora/gozora/instrukcija-polzovatelja/).
