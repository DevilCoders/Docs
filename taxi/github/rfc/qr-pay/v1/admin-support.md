# Админка для процесса поддержки
При обращении в поддержку через приложение запрос клиента будет уходить к Саппортам в Chatterbox. 
В Chatterbox-интерфейсе будет ссылка на QR-заказ в админке - эта часть настраивается через добавление
нового сервиса и правила формирования ссылок со стороны Chatterbox.

Мы со своей стороны должны предоставить данные для админки - страничку с данными конкретного QR-заказа и полезными кнопочками, например  refund.

## Что делаем (Tier 1)
1. Добавляем в iiko-integration ручку `/internal/admin/order` с параметром `order_id: str`, возвращающую заказ по его id
  * Похожая ручка уже [есть](https://github.yandex-team.ru/taxi/backend-py3/blob/baaf162e70fdd7713dcd24a38a08f9d731f45915/services/iiko-integration/docs/yaml/api/order_info.yaml#L4)
  * Формат данных оставляем такой же, как в ней, дополнительно обернув все данные в "order"
  * В будущем, по мере выполнения соседних тикетов, нужно будет докинуть данные про транзакции, чеки, рефанды (и сама кнопкка рефанда) etc.
2. Встраиваемся в [АБК](https://wiki.yandex-team.ru/taxi/backend/adminka-bez-koda/) и создаем новую роль в IDM "Менеджер QR заказов"
3. Вешаем индексы в postgres на user_id.
4. Пишем скрипт для поиска заказов опредленного пользователя по его user_id
5. Сдаем в фронтов админки (Катя Шуберт)

## Что делаем (Tier 2)
Скрипт для поиска - неудобно. Удобно искать заказы в веб интерфейсе.
1. Добавляем ручку, которые возвращают QR заказы пользователя по его номеру телефона.
  `/internal/admin/orders_by_phone` с параметром `phone: str`
2. Есть 3 способа сделать эту ручку - узнать user_id по номеру телефона:
  * personal + user-api: /users/search
  * personal + user-api: /v1/internal/phone-info
  * admin-users-info: /v1/users_info
  
  Самым простым для внедрения выглядит способ 3, выбираю его.

3. АБК, IDM, верстка
