# Продуктовое описание

Научиться рисовать "лейблы" в правом верхнем углу шорткатов

![Лейблы](https://jing.yandex-team.ru/files/privet/2020-05-18T14:22:04Z.d386456.png)

## Изменения в API

Предлагаю добавить `label`-оверлеи. С помощью них шорткат со скриншота можно представить следующим образом:

```json
{
    "type": "any-shortcut-type",
    "overlays": [
        {
            "shape": "label",
            "background": {
                "color": "#000000",
                "image_tag": "..."
            },
            "attributed_text": {
                "items": [{
                    "type": "text",
                    "text": "12%",
                    "color": "#FFFFFF",
                    "meta_color": "plus",
                }]
            }
        },
        {
            "shape": "label",
            "background": {
                "color": "#FA6A3C",
                "meta_color": "plus",
            },
            "attributed_text": {
                "items": [{
                    "type": "text",
                    "text": "New",
                    "color": "#000000"
                }]
            }
        }
    ]
}
```

Для `label` предлагается сразу поддержать и `text`, и `attributed_text`

## Вопросы

**Что такое `"meta_color": "plus"`?**

В фигме градиент "плюса" задается так:
```
linear-gradient(90deg, #30ABD1 0%, #397DDB 21.95%, #505ADD 42.78%, #BE40C0 69.37%, #F06151 86.44%, #F2991D 100%)
```

Поддерживать такую запись дорого как с точки зрения протокола, так и с точки зрения реализации на клиенте. Других юзкейсов градиента не ожидается, поэтому хочется иметь простой способ описывать конкретно "плюсовый" цвет. Рассмотренные варианты:

**Вариант 1**: использовать `color: plus`

Преимущества: формально не требует изменений API

Недостатки: Непонятно какие графические элементы поддерживают цвет `plus`. Например, можно ли указывать его как background-цвет? Можем ли мы использовать `plus` везде, где есть `color`? Как вводить новые meta-цвета?

> @ixkor: Везде точно не стоит, лучше заранее согласовывать место применения, ибо нам придется в тех местах дорабатывать логику что бы не тупо преобразовывать строку цвета в число-цвет, а проверять нет ли там plus, и создавать уже не число-цвет, а в зависимости от того где его применять объект описывающий отрисовку текста или фона.

Недостатки существенные, отказались.

**Вариант 2**: использовать `meta_color: plus`

Цвет-плюс может быть использован только там, где `meta_color` поддержан на уровне API. Если клиент поддерживает указанный `meta_color`, клиент использует его. Если нет, использует `color`.

Плюсы: при проработке API нужно явно указывать где он применим, обратно-совместим (т.к. явно указыватся фоллбек)
Минусы: ещё одно поле в API, клиент явно не передает поддерживаемые мета-цвета и теоретически они могут быть разные для разных элементов.

**В каком порядке располагать лейблы, если их несколько?**

"Первый" лейбл является самым левым.
```
overlays: [A, B, C]
=>
      A B C
title
subtitle
```

**На каких шорткатах может быть оверлей `label`?**

На любых.
