## Бизнесовая задача

### Описание

За основу взят [rfc Володи](https://github.yandex-team.ru/taxi/rfc/pull/339).
Существует проблема с определением наличия сервиса супераппа в данной точке.
(ВАЖНО! Доступность != Наличие)

Наличие сервиса в данный момент необходимо для двух вещей:
1. Определение показа задезейбленного кирпичика сервиса (superapp-misc, экс superapp_availability)
2. Определение показа шорткатов в данной точке (экс superapp_shortcuts)

Это всё необходимо, чтобы пользователь понимал, что в данной точке
работает определённый сервис, но в данный момент, он недоступен.

### Текущее решение в Еде и Лавке
Исходные данные (вольное толкование):
- полигоны доставки ресторанов / лавки [v1/catalog-polygons](http://catalog-service.c3po.eda.tst.yandex.net/api/v1/catalog-polygons)
- режим работы ресторанов
- ручное управление доступностью ресторана в определённый момент
  времени (возможно отключить ресторан из админки, например)

Имеется ручка [v1/availability](http://catalog-service.c3po.eda.tst.yandex.net/api/v1/availability),
в которой отдаётся флаг `isAvailable`, который учитывает все
перечисленные параметры и отвечает на вопрос:
`Есть ли в данной точке на данный момент времени хоть одна рабочая лавка/ресторан`

## Решение проблемы
1. Делаем в uservices кэш полигонов доступности Еды и Лавки
2. В finalsuggest проверяем на бэке попадание (поинт A и поинт B)
   и добавляем в кварги (по каждому поинту) при передаче в эксп3.0 в
   виде `point_a_services: [taxi, eats, grocery]`
3. Необходима доработка ручки доступности еды `v1/availability`,
   с добавлением нового флага, показывающего попадание точки в зону
   доставки (без учёта доступности ресторанов)

### Декомпозиция и оценка
1. [TAXIBACKEND-28613](https://st.yandex-team.ru/TAXIBACKEND-28613) — кэш полигонов (2d)
2. [TAXIBACKEND-28617](https://st.yandex-team.ru/TAXIBACKEND-28617) — отправка кваргов (2d)
3. [TAXIBACKEND-28628](https://st.yandex-team.ru/TAXIBACKEND-28628) — новый флаг (1d)
