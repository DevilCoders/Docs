- [ ] использовать и модифицировать существующую БД eulas или новую? 
Предлагаю новую + миграция
- [ ] как сейчас реализована логика eula?
1. zoneinfo выдает список `need_acceptance`
2. клиенты ОКают?
Что дёргается в этом случае?
3. после ОКа новой вызывают launch. В поле `accepted` появляется список принятых

- [x] ~~Таксометр тоже будет использовать сервис eulas?
см. задачу *Добавить кнопку с офертой для заказов с FixPrice в Израиле* 
https://st.yandex-team.ru/TAXIMETER-6856~~
нет
- [x] ~~будут ли новые клиенты вызывать сервис eulas напрямую? Или ч/з launch?~~
будут напрямую
- [x] ~~где реализовывать сервис? userver или python3?~~
python3
- [x] ~~использовать ли сервис тегов?
сервис тегов возвращает ответ из кеша => Если пользователь подтвердит соглашение, то routestats сможет вернуть новые тарифы только ч/з пару секунд, когда кеш обновится.~~
Нет, не использовать, за 2-ой вариант:
~~Варианты:~~
1. ~~при запросе в теги добавить флаг, чтобы теги брались напрямую из мастера (надо договариваться об этом с владельцами сервиса)
отказались~~
2. не использовать теги, а routestats будет обращаться в наш новый сервис. Дальше в /routestats фильтровать ф-ей аналогично существующей `FilterCategoriesByUserTags`
- [x] ~~отфильтровать тарифы надо и в order/commit. Протащить в него сервис тегов. Алиске не понра, и так жалуется, что commit тормозной~~
За 1-ы вариант:
1. забить на commit, будут в нем как суржовые, так и бессуржевые тарифы. Фильтроваться будет только в `routestats` ф-ей `FilterCategoriesByUserTags`
2. ~~Хождение в теги сделать ч/з плагины или обернуть if-ами по `sourceid`~~
- [ ] додумать логику фоллбеков
- [ ] присылать ли в routestats список принятых/непринятых соглашений для фолбека. Или забить и тарифы могут мигать?
- [x] ~~додумать, как будут фильтроваться тарифы в зависимости от принятия eula. Править VisibilityHelper?~~
аналогично тегам заведём ф-ию с конфигом (см. ф-ию `FilterCategoriesByUserTags` и конфиг `CATEGORY_REQUIRES_USER_TAG`)
- [x] ~~если /routestats не достучался до микросервиса, то тариф не будет показан; здесь плохо то, что пользователь может увидеть моргание тарифа при флапах сервиса, надо об этом еще подумать;~~
клиент дёргает /list с фильтром signed, запоминает у себя полученный список и передаёт его в /routestats. Если /routestats не может может достучаться до сервиса eula, то для фильтра тарифов просто берёт, то что прислал клиент.
- [ ] дырки м/у сервисами
- [x] ~~продумать логику, когда routestats и commit вернули разные тарифы. Наверное, перезапрос commit нужен, наверняка, уже есть~~
406 Price changed - стандартный механизм сказать что оффер неправильный
- [x] ~~нужен ли в ответе list поле header_image_tag (тег картинки после заголовка)? В launch был.~~
нужен
- [ ] как объединять с существующими вариантами: ручки launch+zoneinfo и бд eulas?

## Гонки/Идемпонентность
- [x] ~~подряд вызовы save - гонки на запись. Мб глянуть пример в orders/cancel из int-api~~
забить на это, не уровень заказа. На клиенте будет окошко, где он сможет посмотреть. Если что, при следующем запуске увидит, что у него сохранено.
- [ ] как продуктово должно выглядеть сохранение нескольких ОК-ов для 1-го eula?
Т.е. пользователь несколько раз соглашается ч.з какой-то промежуток времени (неважно, как это ему удалось). Должны ли мы обновлять период окончания соглашения? Или должен оставаться конечная дата при 1-м вызове? + При в промежутках м.у подтверждениями мы ведь можем в конфиге поменять период действия соглашения.
Я бы обновлял на новую дату окончания и всё.
- [ ] должны ли мы предлагать пользователю снова ОКнуть eula, если поменяли в конфиге его длительность?
Как будет юридически выглядеть: у 1-го полгода, у 2-го  год действия соглашения
