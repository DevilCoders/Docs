## Проблемы
Сейчас фото для бизнес тарифов загружаются вручную по номеру в/у (сервис с фото водителей не используется). 
Это порождает проблемы:
- можно легко ошибиться, пропустить фото/загрузить не то фото
- секьюрность (если подобрать/узнать соль, можно моменитально слить всю базу фото водителей)
- приходится на клиент всегда слать предполагаемые URL фото, даже если их нет, и клиент всегда делает запрос 
- не очень понятно как очищать наш неймспейс МДС (у них нет API для листинга содержимого), рано или поздно он переполнится
- не хранятся исходные данные по фото (не критикал но желательно)
- смена водителем в/у не поддерживается

## Предлагаемое решение
- Добавить в админку раздел, где к водителю можно будет привязать фото. Это - промежуточное решение, которое позволит начать сохранять в сервисе водителей фото, но также позволит поддерживать старый механизм для, например, Андройда, где пока не работает orderperformerinfo.
- Продуктовое описание: https://wiki.yandex-team.ru/users/boldov/driverphoto-admin/

## Out of scope
- эконом фото

# Доработки

## MVP - загрузка фото, замена существующего механизма

### Ручка загрузки фото (`POST /photo/new`)
- `2d` Добавить возможность указания водителя по номеру в/у (сейчас работает только с unique driver id)
- `1d` Получение входного фото напрямую в виде файла (сейчас поддерживается только MDS)
- `1d` Загрузка обработанных фотографий в старый MDS для поддержки старой схемы
- `1d` Загрузка фото (вариант с аватаркой) в таксометр
- `0.5d` Проксировать ручку в админку без кода

### Загрузка существующих фото в сервис и таксометр
- `1d` Добавить отправку нового фото в Таксометр через /parks/photos/set
- `1d` Написать ручку, которая получает уже обработанные фото, и грузит их во все необходимые места ("старый" MDS, таксометр, база самого сервиса)
- `1.5d` Написать скрипт, который:
  - берет список в/у, например из YT
  - по нему находит в существующем MDS оба варианта фото (обычное и cropped)
  - отправляет их в сервис через ручку загрузки уже обработанного фото из пункта выше
- `0.5d` Тестирование и запуск на проде

# Доп фичи в порядке убывания приоритета

## Листинг фото
### Новая ручка получения фото для админки (`GET /admin/photos`)
- `3d` Создать внутреннюю ручку для админки. Получает на вход фильтры (пока: водитель по в/у), в ответ отдает пагинированный список фото, разбитых по типам, с id и другими параметрами.
- `0.5d` Проксировать ручки в админку без кода

## Авторство изменений
### Ручка загрузки фото (`POST /photo/new`)
- `2d` Входной необязательный параметр `uploader_login` - содержит yandex-team логин сотрудника, осуществляющего загрузку. Просто запоминать.
### Ручка получения фото (`GET /admin/photo`)
- `1d` Добавить поле `uploader_login`

## Новый тип фото -  с в/у
### Ручка получения фото (`GET /photo`)
- `1d` Учитывать параметр `photo_type` - отдавать только аватары по умолчанию, не отдавать другие типы
### Ручка загрузки фото (`POST /photo/new`)
- `2d` Входной обязательный параметр `photo_type` - сейчас его нет, надо поддерживать как минимум `avatar_type` и `licenst_type`. Фото с в/у просто сохранять без обработки.

## Удаление фото
### Ручка удаления фото (`DELETE /photo`)
- `2d` Написать ручку: получает id фото, удаляет это фото из БД.
- `0.5d` Проксировать ручки в админку без кода

## Техдолг
- `5d` Перевод на кодогенерацию
- `2d` Тестирование и выкатка
