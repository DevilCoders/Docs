### Архитектурное описание сервиса - fleet-orders-manager

### Название сервиса
fleet-orders-manager

### Какую продуктовую проблему решает сервис?
Сервис отвечает за создание новых парковых заказов(whitelabel/saas).

Для получения списка заказов выполненных и созданных таксопарком разрабытывается отдельный сервис [fleet-orders rfc](https://github.yandex-team.ru/taxi/rfc/pull/788).

Общее описание проекта whitelabel/saas: https://st.yandex-team.ru/TAXIPROJECTS-2221.

На старте в сервисе будут жить ручки необходимые для создания заказа(в будущем, думаю, редактирование и отмена сюда же):
* orders/draft, orders/commit, orders/estimate обогащают и проксирует запрос в int-api
* поиск незавершенных заказов в этом парке по номеру телефона

Примерная схема взаимодействия бэка и фронта для создания заказа будет такой:
* На фронте диспетчер вводит номер тел
* Фронт идет в бэк и проверяет, если активный заказ на номере, если есть, то на фронте спрашиваем точно ли еще один заказ
* Диспетчер дозапалняет форму заказа
* Фронт дергает draft, прикапывает order_id
* Фронт дергает commit пока не получит 200 или 4ХХ

### Почему нельзя решить эту задачу без разработки нового сервиса существующими решениями?
Ручки проксирующие в int-api, возможно, можно было бы реализовать через api-proxy, но нужно ресерчить
и, кажется, такие неразвесистые ручки проще руками на с++ запроксировать.

### Разрабатывается один сервис или система?
Работает вместе [fleet-orders](https://github.yandex-team.ru/taxi/rfc/pull/788), отвечающим за получения списка заказов.

### С кем взаимодействует сервис?
В сервис приходят запросы из фронта диспы через fleet-authproxy.
Ходит в:
* int-api
* fleet-parks (будет хранить инфу о режиме диспатча для whitelabel)
* personal

### Какие базы использует?
нет

### Какие периодические процессы?
Нет

### Планируется обработка персональных даннных
Обмен phone на phone_pd_id

### Какие данные и по какой схеме сервис будет хранить в базе?
нет

### Какой объем данных будет храниться и какой объем будет изменяться в единицу времени?
нет

### Какие операции над данными заложены?
нет

### Есть ли какой-то стейт в памяти, как он обновляется и валидируется?
Нет

### Какая нагрузка ожидается?
не больше 10 рпс (есть оценка от менеджера в 100к заказов в день к концу 2021. это 1.16 заказа в сек)

### Какие фолбеки предусмотрены на сам этот сервис?
не планируются

### Какие фолбеки предусмотрены внутри этого сервиса на взаимодействие с другими сервисами?
пока не планируется

### Какие возможности масштабируемости закладываются?
Горизонтальное масштабирование сервиса

### Какие точки отказа есть в сервисе?
* Смежные сервисы 

### Укажите ключевые продуктовые метрики сервиса, за которыми планируете следить
* Рпс на ручки создания заказа

### Укажите технические метрики
* Рпс на ручки создания заказа

### Какая функциональность ожидается в сервисе в будущем?
Кроме создания заказа появится редактирование

### Какое изменение нагрузки планируется?
Пропорционально количеству заказов и количеству парков

### Активно ли будет изменяться сервис?
Нет