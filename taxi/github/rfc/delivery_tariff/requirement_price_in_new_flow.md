## Задача
Предлагается в рамках доработки флоу тарифа "Доставка" показывать цену опции "От двери до двери" на плашке выбора опции.

## Дизайн
[Дизайн тарифа "Доставка" в Figma](https://www.figma.com/file/TZMNVE3YzGBElriZQNKlOZcr/Тариф-«Доставка»)

## Необходимые изменения
Для того, чтобы можно было показать цену отдельной опции, нужно присылать её на клиент.
Раньше логики показа цены опции на клиенте не было, показывалась только полная цена заказа.
Изменения касаются нового флоу, поэтому делать нужно под экспериментом. 
Можно использовать уже существующий эксперимент `route_additional_information_step`.

## Решение
### Показ стоимости опции на клиенте 
На бэкенде стоимость конкретной опции достаётся из `req_prices` в базе `tariffs`.
Поэтому целесообразно и передавать её на клиент с бэкенда, использовать для этой цели эксперимент не надо. 

Сейчас стоимость опций используется только для расчёта стоимости заказа и не возвращается на клиент, 
поэтому нужно добавить в ответ `/routestats` цену опции.

Неочевидно, где лучше менять `/routestats`, поэтому могу предложить несколько вариантов:
1. Сейчас одно из полей, из которых на клиенте составляется цена заказа - `details_tariff` в `/routestats`.
Можно использовать его, добавив в `enum type` новое значение `requirement` и детали о названии опции `type_details`:
```
details_tariff:
description: описание составляющих минимального тарифа
items:
    description: составляющая стоимости тарифа
    properties:
        type:
            description: тип составляющей
            enum:
            ...
              - requirement
            type: string
        ...
        type_details: 
            description: детали о типе составляющей, например, название опции
            type: string
    required:
      - type
      - value
    type: object
type: array
```
2. Добавить в ответ `/routestats` новое поле `paid_requirements`:
```
paid_requirements:
description: дополнительная информация о платных опциях
items:
    name:
        description: название требования
        type: string
    price:
        description: цена требования
        type: string
    required:
      - name
      - price
    type: object
type: array
```
3. Можно было бы передавать вместе с требованием, но всё же, думаю, этот вариант хуже.
Цены мы возвращаем в `/routestats`, правильно и цены требований вернуть там же.

Цена на клиенте будет только отображаться на плашке, в другой логике она не используется, поэтому можно передать её строкой.
Форматирование валюты на клиенте берётся из `currency_rules` в `/routestats`, новую строчку можно форматировать так же.
Стоимость всего заказа показывается на том же экране, так что новая логика не конфликтует со старой, 
доработки в показе общей стоимости на клиенте не требуются.

Я думаю, что лучше всего использовать вариант 1. Обсудила с клиентами, он им удобен и не ломает существующую логику.
api `/routestats` меняется минимально. Удобно передавать разные требования для разных тарифов, с учётом значений эксперимента.

### Включение под экспериментом
Для нового флоу доставки сейчас используется эксперимент `route_additional_information_step`, 
в котором есть флаг `new_delivery_flow`. 
Можно отдавать на клиент стоимость опции, только если значение флага  `"new_delivery_flow": true`.
Также можно расширить эксперимент значениями требований, цены которых нужно передавать на клиент, 
и тарифов, для которых нужно передавать требования, следующим образом:
```
...
"send_requirement_price_to_client": [
    {
      "requirement": "door_to_door",
      "tariff": "express"
    },
    ...
  ],
...
```
Это нужно для того, чтобы удобно конфигурировать, для каких тарифов цена может показываться,
на бэкенде, а не выносить эту логику на клиент.
