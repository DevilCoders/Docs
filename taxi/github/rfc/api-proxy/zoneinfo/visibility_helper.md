## VisibilityHelper
Особенная часть. Нам VisibilityHelper нужен и у нас есть к нему свои требования.

### Относительно проработки https://github.yandex-team.ru/taxi/rfc/pull/254
 * Нам кажется, что мало перенести логику VH в либу, нужно переделать концепцию.
 * Возможно, либа VH не должна сама держать никакие кеши, должна иметь только логику, а все данные получать снаружи.
 * Или сделать толстый клиент с кешированным базовым набором правил. Кеш лежит в либе. Либа над сервисом.

### Насчет geoareas
 * Она нужна только для IsHiddenBySubzone.
 * Суть проверки: для категории можно задать список субзон, и тогда точка А должна попадать в одну из этих субзон. Иначе тариф становится скрытым.
 * Точка А для проверки опциональна, если ее нет, естественно мы не можем проверить ее попадание в субзону. В таком случае мы по умолчанию считаем, как будто попала и скрываем тариф.
 * У zoneinfo точки А нет, поэтому для проверки конкретно из zoneinfo база geoareas не нужна.
 * Соотвественно, мы не хотим включать в сервис либу, в которой всегда будет кеш над geoareas.

 А теперь детали:
  * Проверка видимости тарифа есть и в routestats. И там есть точка А. Поэтому может получиться(и получается), что zoneinfo скрывает тариф, а его потом сразу же возвращает routestats.
  * У нас ровно одна зона, где есть подзоны в категории - комфорт в Пензе. И там в субзонах вся Пенза, так что эта проверка не имеет никакого смысла. 
```
  >>> pprint(db.tariff_settings.find({'s.sz':{'$exists': True}}, ['hz', 's.n', 's.sz']).run().result)
[{u'_id': ObjectId('591ee31c43d523c4a23fd925'),
  u'hz': u'penza',
  u's': [{u'n': u'econom'},
         {u'n': u'business', u'sz': [u'penza']},
         {u'n': u'comfortplus'},
         {u'n': u'child_tariff'},
         {u'n': u'uberx'},
         {u'n': u'uberselect'},
         {u'n': u'uberselectplus'},
         {u'n': u'uberkids'},
         {u'n': u'cargo'},
         {u'n': u'express'},
         {u'n': u'courier'}]}]
```



