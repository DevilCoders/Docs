### Сервисы, участвующие в добавлении коммуникации для публикации

#### `crm-admin`

`crm-admin` (py3) - бэкенд админки запуска маркетинговых кампаний. 
Содержит ручки, отвечающие за всю функциональность CRM кампаний: 
создание и запуск кампании, все её настройки, показ статистики.

Связь с сервисом `promotions`: проверка существования коммуникации.  
Запрос из ручек `/v1/campaigns/groups/item` (`update_groups`), `/v1/process/send` и 
`/v1/regular-campaigns/start` в `/admin/promotions`.

Связь с сервисом `crm-hub`: 
- запрос из ручки `/v1/process/terminate` в `/v1/communication/bulk/sent` - 
проверка, была ли уже успешная рассылка для группы;
- в stq `batch-sending` в `/v1/communication/bulk/new` для создания коммуникаций 
и в `/v1/communication/bulk/status` для получения статуса кампании;
- в stq `user-activation` - в `/v1/communication/bulk/new` для создания коммуникаций.

#### `crm-hub`

`crm-hub` (py3) - сервис, в котором реализована логика коммуникаций CRM.
В нём находятся ручки для всех типов коммуникаций, но нас интересуют только ручки для коммуникаций на пользователей.

Используется бэкендом админки кампаний.

Связь с сервисом `promotions`:
для канала пользовательских кампаний `('promo', 'user')` реализован класс `UserPromotionsCommunicationBulk`, 
в котором находится вся основная логика, связывающая CRM и админку коммуникаций Go.
Использует ручку `/admin/promotions` для проверки существованиия коммуникации, 
`/admin/promotions/publish` для публикации коммуникации и `/admin/promotions/unpublish` 
для снятия коммуникации с публикации.

Ручка публикации коммуникаций `/admin/promotions/publish` принимает на вход эксперимент,
по которому раскатывается публикация, поэтому `crm-hub` создаёт или находит эксперимент и передаёт в неё. 
Сейчас настройки создаваемого эксперимента берутся из конфига `CRM_HUB_FS_EXP3_COMMON_CLAUSE`.

Создание публикаций в `crm-hub` происходит в ручках `/v1/communication/new` и 
`/v1/communication/bulk/new`.

#### `promotions`

`promotions` (py3) - бэкенд админки коммуникаций Go. 
Используется сервисами CRM.

Настройка аудитории YQL запросом происходит в STQ `get_yql_data`.
