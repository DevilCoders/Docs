# Задача

Сейчас для запуска маркетинговых кампаний есть два инструмента: 
CRM маркетинговых кампаний и админка коммуникаций Go. 
Оба инструмента необходимо использовать при запуске новой кампании с коммуникацией.
Запуск кампании включает в себя добавление контента (например, истории или баннера) и настройки его публикации 
(например, аудитории и времени публикации).

Сейчас CRM и админка коммуникаций Go проинтегрированы, но этой интеграции недостаточно для комфортной работы маркетологов.
Основное неудобство в том, что настройку публикации нельзя или почти нельзя сделать через CRM, 
не касаясь экспериментов. 

В рамках задачи требуется доработать оба инструмента. 
Желаемое состояние такое:
- маркетинговая кампания полностью настраивается в CRM. 
Настраивать эксперименты или заходить в админку коммуникаций Go не требуется;
- админка коммуникаций Go используется только для добавления контента.

### Полезные ссылки
[Тестовая админка коммуникаций Go](https://tariff-editor.taxi.tst.yandex-team.ru/promotions)

[Тестовая CRM маркетинговых кампаний](https://cm.taxi.tst.yandex-team.ru/campaigns)

[Документация на запуск маркетинговой кампании в CRM](https://wiki.yandex-team.ru/mlu/crm/platform/campaign-management/)

### Виды коммуникаций в Go

В Go существуют такие коммуникации:
- фуллскрин
- карточка
- нотификация
- история (почти то же, что и фуллскрин)
- объект на карте
- баннер Еды
- диплинк-шорткат
- коллекция 
- витрина
- промо в селекторе тарифов

Все эти типы коммуникаций можно завести через админку коммуникаций Go.
Через CRM частично настраиваются фуллскрины, нотификации и карточки.
Поэтому доработки в CRM сначала будем делать для них, 
а потом перенесём остальные типы коммуникаций в CRM.

## Продуктовые пожелания к интеграции
Пожелания расположены в порядке уменьшения приоритета.

1. Настраивать аудиторию через CRM без редактирования эксперимента. 
Все кварги, которые сейчас задаются в эксперименте, и которые нужны для настройки кампаний, 
надо собрать и перенести в интерфейс CRM. 
Кварги могут отличаться для разных типов коммуникаций.
2. Настраивать период доступности коммуникации только через CRM. 
Сейчас время показа коммуникации управляется через админку коммуникаций Go и эксперимент. 
Управление временем показа из админки надо полностью убрать, а единственной точкой редактирования сделать CRM.
3. Починить тестовую отправку коммуникации. 
Сейчас тестовая публикация реализована в админке коммуникаций Go, говорят, что она не работает корректно. 
Нужно реализовать её в CRM для фуллскринов и пушей, а для остальных типов коммуникаций - починить админку.
4. Настраивать коммуникации на события. Например, пользователь едет Домой - посылаем пуш, 
пользователь возле конкретного магазина - посылаем историю.
Всё это должно настраиваться в CRM.
5. Перенести оставшиеся типы коммуникаций в CRM. Оторвать в админке коммуникаций все настройки публикации.
6. Снимать коммуникацию с публикации для части аудитории. 

Например:
- если пользователь посмотрел коммуникацию/сделал целевое действие;
- если не посмотрел, мы нашли ошибку и хотим остановить кампанию конкретно на тех, кто еще не увидел.

7. Создавать фуллскрин и другие типы коммуникаций прямо из CRM. 
При этом коммуникация должна появиться и в админке коммуникаций. 
Под вопросом, стоит ли это делать.
8. Починить то, что сейчас не работает или неудобно сделано в админке коммуникаций. 
Примеры:
- нельзя завести баннер Еды без заголовка. При этом, стандартные цвета и шрифты, как правило, не подходят, и заливается только картинка.
Прходится делать заголовок из точки `.` и красить её в цвет баннера, чтобы было не видно;
- не работает добавление истории в коллекцию по идентификатору истории, только по тегу. 
Тег приходится добавлять в конфиг и потом прокидывать везде, это очень много действий;
- сложно создать витрину - много экспериментов, навешиваниий тегов, ручных действий. Хорошо бы сложные объекты тоже создавать просто;
- если надо создать два похожих баннера (например, на Плюс и без него), надо сделать дважды почти одно и то же и ещё проследить, 
чтобы аудитория была правильно настроена и там, и там.

## План работы

1. Делаем пункты [1], [2] из списка и [3], если не займёт очень много времени. 
Это, скорее, починка того, что неудобно сделано сейчас, и это можно попробовать сделать быстро. 
Можно сразу проработать все 3, а сделать их параллельно. За это время знакомимся с устройством CRM.
2. Делаем пункт [4] - реализуем запуск кампании по событию. Пробуем разные кампании и смотрим на результат.
3. Анализируем сделанное и возвращаемся к оставшейся части списка, возможно, расставив по-другому приоритеты.
