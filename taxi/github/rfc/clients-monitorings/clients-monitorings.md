**Название сервиса**

сlients-monitorings

**Какую продуктовую проблему решает сервис?**

Хотим добавить в приложение шорткаты с диплинками. Диплинки могут иногда переставать
работать. Нужен механизм, чтобы разработчики могли оперативно узнать, что диплинк сломался.
Сейчас механизма для оперативного репорта мобильного клиента о своих поломках
нет.
Также можно использовать для мониторинга других ошибок в мобильных приложениях.

**Почему нельзя решить эту задачу без разработки нового сервиса существующими решениями?**

Сейчас нет такого инструмента

**Как именно сервис будет решать поставленные перед ним задачи?**

Сервис вычитывает сообщения из топика  metrika-mobile-log в логброкере.
Сервис будет отправлять сообщения об ошибки в juggler и строить графики фэйлов в графане, в будущем, возможно,
отсылать другие виды нотификаций.

**Разрабатывается один сервис или система?**

Один сервис

**Сколько и какие сервисы входят в систему?**

1

**С кем взаимодействует сервис?**

juggler, logbroker, salomon

**Какие базы использует?**

База postgresql, но не сразу

**Какие периодические процессы?**

крон-таска для отправки метрик в саломон и джаглер

**Прикрепите схему того, где этот сервис находится в текущей инфраструктуре**

![](https://jing.yandex-team.ru/files/nekrand/Снимок%20экрана%202020-04-21%20в%2016.09.14.png)

На цикл заказа не влияет.

**Какие данные и по какой схеме сервис будет хранить в базе?**

Правила проверок входящих сообщений и реагирования на них(формат надо продумать).

Статистика по событиям для отправки в саломон:
event name | num_of_events

Но это все не в первой версии

**Какой объем данных будет храниться и какой объем будет изменяться в единицу времени?**

<1 мб будет храниться.
Изменяться только таблица статистики(сотни строчек максимум)

**Какие операции над данными заложены?**

...

**Есть ли какой-то стейт в памяти, как он обновляется и валидируется?**

нет

**Какая нагрузка ожидается?**

Ручек не будет

**Какие фолбеки предусмотрены на сам этот сервис?**

Нет

**Какие фолбеки предусмотрены внутри этого сервиса на взаимодействие с другими сервисами?**

Нет

**Какие возможности масштабируемости закладываются?**

сервис масштабируется горизонтально

**Какие точки отказа есть в сервисе?**

отказ инфраструктуры

**Укажите ключевые продуктовые метрики сервиса, за которыми планируете следить**

...

**Укажите технические метрики**

В голову приходит только количество обработанных сообщений logbroker

**Какая функциональность ожидается в сервисе в будущем?**

На первом этапе сервис будет смотреть только на фэйлы при открытие диплинков.
Потом добавится возможность создавать правила для поиска других ошибок на клиентах.
Возможно, будут добавлены другие способы нотификации кроме juggler.

Этапы разработки:

1. Нотификация в juggler о фэйлах с диплинками -  4(запас на разобраться с  juggler)
Далее в зависимости от того, какие правила захотим добавить.

**Какое изменение нагрузки планируется?**

...

**Активно ли будет изменяться сервис?**

В первое время да, смотри этапы

## Бизнесовая задача

Создать удобный инструмент для мониторинга ошибок в мобильном приложение.

#### Этап 1

Нотификация в juggler и график в графане фэйлов при открытии диплинков.

#### Этап 2

Мниторинг количества крэшей в приложение

#### Этап 3

Обсудить с разработчиками мобильных приложений, какие еще мониторинги им нужны и
думать над дальнейшим развитием функциональности.
