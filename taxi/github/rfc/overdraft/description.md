Описание изменений для овердрафта

текущая логика:
при переходе в статус transporting определяется антифрод-группа пользователя (по количеству оплаченных заказов)
далее в зависимости от группы применяются правила антифрода

fixprice:
newbie:
через 3 минуты поездки снимается 100% стоимости заказа.

fixprice:
loyal/vip:
через 2 часа поездки снимается 100% стоимости заказа.

not-fix:
newbie:
каждые 5 минут запускается задача которая по текущей цене заказа определяет сколько надо снимать денег
снятия производятся с шагом по 300 рублей
(нарисовать красивый график)

not-fix:
loyal/vip:
через 2 часа поездки снимается текущая стоимость заказа и далее как newbie (5 минут и 300 рублей)

настраивается:
2 часа/3 минуты - пауза перед началом списаний
300 рублей - шаг списания


предлагаемая логика:

1) В коммите дергаем ручку антифрода, которая принимая на вход цену говорит может ли пользователь ехать в долг и:
* если может, то коммит возвращает статус, что есть долги, но можно ехать в долг и пользователь должен прокинуть в коммит флаг что едет в долг (надо уточнить)
* если нет, то стандартый ответ "езжай за нал или оплати долги"
* если поездка без точки Б и пользователь должник, то "езжай за нал или плоти"
2) В транспортинге запускается антифрод и идет в ручку внешнего антифрода для получения лимита овердрафта (максимальный оведрафт минус текущие долги):
* если текущая сумма укладывается в размер допустимого овердрафта, то транзакция не запускается, а антифрод засыпает на 5 минут
* если нет, то через 3 минуты пытается захолдить сумму равную лимиту овердрафта и далее каждые 5 минут холдит по дельтам из конфига нуба
3) update_transactions ходит в антифрод, чтобы узнать надо ли списывать деньги с пользователя, если не надо, то помечает заказ долговым и откладывает себя на сутки и потом транзачит (т.е. по факту мы не делаем только первую транзакцию, а дальше работает старая логика)
