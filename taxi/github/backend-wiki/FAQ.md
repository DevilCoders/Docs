# Часто задаваемые вопросы

### Что такое clid?

clid - это число, однозначно идентифицирующее вас как партнера в нашей базе (как ИНН идентифицирует налогоплательщика). Все настройки, заказы и прочие данные привязаны к этому номеру. clid генерируется на нашей стороне и передается вам при подключении к сервису.

Поэтому мы настоятельно просим Вас писать свой clid при обращении в техподдержку нашего сервиса. Без знания clid мы не сможем найти вас в базе и помочь вам решить проблему.

### Почему наши запросы (carstatus, carack, requestconfirm) не получают ответа (отваливаются по таймауту)?

Такое бывает из за неполадок с сетью или других неполадок, напрямую не связанных с самой системой ЯТакси. Мы рекомендуем делать запросы по алгоритму [exponential_backoff][exponential_backoff], чтобы как можно сильнее сократить количество подобных случаев.

### Почему заказ не предложился нашему водителю?

Проверьте соответствие класса заказа с классом водителя. Если в заказе есть требования, убедитесь, что водитель удовлетворяет этим требованиям. Убедитесь, что треки по данному водителю присылаются бесперебойно. Проверьте, что на момент заказа водитель был в статусе free. Если делали заказ с андроида и выставляли опцию дешевле, то убедитесь что цена по данному маршруту не превышает более чем на 10% медиану по ценам на такую же поездку по городу. Если не нашли ничего вышеперечисленного, напишите на [taxitechsupport@yandex-team.ru][mailto].

### Почему мы прислали carack, а нашего водителя не выбрали?

Система в автоматическом режиме выбирает лучшего водителя на заказ. Лучшим считается водитель наивысшей категории, ближайший по расстоянию и по времени по оценкам маршрутизатора. Среди лучших водителей выбирается случайный и именно он получает предложение заказа.

### Почему водители с новыми лицензиями не импортируются?!

Подождите некоторое время (около 1 дня). Зайдите в кабинет в раздел [водители][drivers]. Поищите там водителя с новой лицензией, Если он появился, беспокоиться больше не о чем. Если не появился, проверьте наличие соответствующего номера лицензии на сайте дептранса, а также проверьте что данные на сайте дептранса совпадают с данными о водителе в импортируемом профиле (ФИО, марка-модель машины, госномер). Если данные по лицензии на сайте дептранса не соответствуют водителю, обратитесь в дептранс. Если на сайте дептранса все правильно, прошло некоторое время, а водитель в сервисе до сих пор значится как водитель без лицензии, обратитесь в [taxitechsupport@yandex-team.ru][mailto]. При обращении укажите идентификатор водителя, номер лицензии, госномер водителя.

### Почему наша компания неактивна в приложении и ее нельзя выбрать?
      
Это произошло по причине отсутствия у таксопарка тарифов. Чтобы исправить ошибку, убедитесь, что выполнены все условия:
  * в [в профиле][profile] заполнены поля "URL тарифов" и "URL тарифов 1.0".
  * [на странице импортов][imports] нет сообщений об ошибках импорта. Если у вас возникли какие-либо вопросы по тарифам 1.0, обратитесь к [тарифному FAQ][tariffs-faq].
  * [на странице импортов][imports] совпадает список тарифов в абзацах "Импорт тарифов" (одинаковое количество, идентификаторы и названия тарифов).
  * [на странице импортов][imports] у каждого тарифа прописана категория. Если категорий нет, обратитесь в [taxitechsupport@yandex-team.ru][mailto].

Если всё с новыми тарифами проделано правильно, то таксопарк должен быть активным в приложении Такси. 
 
### Почему при импорте тарифов/водителей/черных списков у нас ошибки?

Проблема в неправильном или некорректном формате Ваших данных. [На странице импортов][imports] по любому импорту (водители, тарифы новые/старые, и т.д.) есть подробная информация, в том числе ссылка на лог ошибок. Посмотрите этот лог и исправьте ошибки. Если у вас возникли какие-либо вопросы по тарифам 1.0, обратитесь к [тарифному FAQ][tariffs-faq].

### Почему при импорте тарифов/водителей у нас ошибки Connection timed out?

Проблема в том, что на стороне ПО таксопарка слишком долго генерируются данные для импорта. Возможны следующие решения: либо оптимизация генерации данных импорта, либо делать предгенерацию данных с сохранением их в какое-либо хранилище(например файл) и, когда таксопарку приходит запрос на импорт, отдавать данные из хранилища, что существенно быстрее чем генерировать их на лету.

### Когда мы сможем работать в продакшене?
      
Для перевода в продакшен необходимо выполнить все [условия выхода в продакшен][predproduction-checklist].

### Отложенные заказы с пожеланиями в тестинге не назначаются на наш таксопарк!
     
Пожалуйста, убедитесь, что [в профиле][profile] поддерживаемые Вами пожелания проставлены. Подождите. Заказы должны начать назначаться. Если в [в профиле][profile] отсутствуют места для галочек с пожеланиями, обратитесь в [taxitechsupport@yandex-team.ru][mailto].

### Почему при тестировании ПО таксопарка N возникает следующая ситуация: делается заказ, где для выбора машин доступен только таксопарк N, заказ предлагается водителям N(requestcar), несколько водителей N присылают готовность взять заказ (carack), заказ закрепляется за определенным водителем (setcar), а через несколько секунд приходит отмена заказа пользователем (cancelrequest), хотя пользователь заказ не отменял?

Посмотрите свои логи ответа на setcar. Скорее всего, вы ответили на этот запрос неуспешно, именно поэтому система прислала Вам отмену по заказу.

### Кто заполняет Профиль Компании? Можем ли таксопарк самостоятельно вносить изменения?

Профиль могут заполнять/изменять все, кто имеют к нему доступ. Например, если у вас техническая реорганизация, вы легко можете поменять все url в профиле на другие.

### Имеют ли возможность клиенты менять оценки в своем кабинете? Ранее обсуждалось, что такая возможность появится в ближайшее время.

Пока у клиентов такой возможности нет. Сейчас полученные водителями оценки в сервисе изменить никак нельзя. 

### Что подразумевает собой «Доля хороших треков»?

Треки считаются хорошими, если они присылаются регулярно и без задержек. Доля - значит процент таких хороших треков по отношению ко всем трекам.

### В «Доле сильных опозданий» у некоторых водителей значится 0 %, у других стоит прочерк «-». В чем состоит разница?

Если у нас достаточно данных по водителю, чтоб посчитать долю опозданий, там стоит число, если недостаточно - прочерк. Например, если водитель выполнил 2 заказа за время работы с нами, у него будет стоять прочерк, а если 122, то процент опозданий.

### Есть водители, у которых в графе «Разрешённые тарифы» ничего не указано. Кто заполняет эту графу?

Тарифы проставляет таксопарк в профиле водителя, который нами импортируется. Если система считает, что водитель не соответствует какому-либо из присвоенных тарифов, этот тариф убирается из профиля водителя. Например, если по мнению таксопарка водитель может ездить по комфорту и эконому, но имеет машину Daewoo Nexia, то в системе такой водитель сможет ездить только по эконому. Именно эконом и отобразится в разрешённых тарифах.

### Как наличие кондиционера в зимнее время влияет на рейтинг водителя, если за неимением кондиционера, водитель имеет другие преимущества: детское кресло, WI-FI и другое?

На рейтинг водителя влияют только оценки пользователей. На подсчет его категории влияет то, что указано в ЛК. Голубым цветом показаны водители высшей категории. Пожелания на рейтинг и на категорию не влияют. Они влияют только если пользователь захочет кондиционер зимой, тогда такой водитель такой водитель не получит такой заказ.

### [Список водителей][drivers] состоит из активных водителей ON-LINE или это все водители, которые когда-либо исполняли заказы Яндекс.Такси? Каким образом уволенные водители исключаются из этого списка? Влияет ли эта таблица на общий рейтинг таксопарка N?

Список состоит из импортированных когда-либо водителей таксопарка. Водители, которые уволены и отсутствуют в новом импорте, помечаются в системе как отсутствующие. В списке такие водители какое-то время еще отображаются. На общий рейтинг таксопарка N влияют только оценки по заказам, выполненным таксопарком за последний месяц.

### Если в профиле водителя какое-либо из требований не упомянуто, какое значение примет это требование при импорте?

По умолчанию значение будет считаться установленным в no.
    
### В документации указано, что возможно использование как HTTP, так и HTTPS для обращения к серверам Яндекс.Такси, однако нет никаких деталей по обращениям Яндекс.Такси к серверам таксопарка. Если наш сервер будет отвечать только по HTTPS, это нормально? Возможно ли использование самоподписанных сертификатов?

Запросы к серверу Яндекс.Такси всегда должны делаться по HTTPS. Запросы к серверу партнера могут делаться как по HTTP, так и по HTTPS (в зависимости от настроек URL в профиле партнера в кабинете). Если в профиле настроено HTTPS, на сервере партнера должен быть валидный корректно подписанный сертификат. Самоподписанные сертификаты не допускаются.

### Если информация, касающаяся тарифов, фактически является публичной, то профили водителей таковыми не являются. Предусмотрены ли какие-то механизмы аутентификации при импорте водителей?

Если вы желаете защитить информацию о профилях водителей, то Вы можете установить импорт по https, либо создать аутентификационный ключ, прописать его в url в кабинете, и проверять его при Get-запросе, либо проверять при импорте список позволенных IP адресов, которые можно получить с помощью reverse dnslookup.

### Почему импорт водителей/тарифов падает с ошибкой urlopen error [Errno 110] Connection timed out?

Потому что система ждет ответа от сервера таксопарка какое-то время, и если ответа нет, то выдает ошибку и прекращает импорт. Проблема: скорее всего профили водителей/тарифы при импорте на сервере таксопарка пытаются генерироваться на лету и это долгий процесс. Решение: оптимизировать генерацию, либо генерировать профили водителей/тарифы заранее (например, генерировать их в файл и хранить его до каких-либо изменений) и отдавать при импорте предварительно рассчитанные результаты.

### Можно ли на 1 водителя зарегистрировать несколько машин?

В системе Яндекс.Такси такое не предусмотрено. Но если сильно хочется, то на стороне таксопарка можно создать несколько профилей 1 водителя с разными машинами (для каждого такого профиля создать разные uuidы водителя).

### Почему машины в личном кабинете отображаются [на карте][map] вокруг точки N, а, когда таксопарк делает в N заказ, в приложении машины не отображаются вокруг данной точки и заказ им не предлагается?
 
Проверьте, что для рассматриваемых водителей присутствует профиль в [списке][drivers] и что для них передается и присутствует актуальный статус. Если с профилями и статусами всё хорошо, то причина скорее всего в том, что водители не соответствуют какой-либо из опций заказа. Часто встречающаяся проблема с опцией Дешевле. Если наша система рассчитывает стоимость поездки для данного водителя (по тарифу заданному таксопарком), и эта стоимость оказывается несоответствующей опции Дешевле, такой водитель не отобразится на карте в приложении и заказ не будет ему предложен.

### Почему не импортируется профиль водителя? Почему не импортируется лицензия водителя?

Перейдите по url, по которому отдается файл с водителями. Проверьте в нем наличие корректного профиля водителя. Проверьте лог ошибок импорта водителей. Исправьте ошибки. Проверьте наличие водителя в [списке][drivers] и его данные. Если не импортировалась лицензия, то подождите 24 часа и проверьте лицензию у водителя еще раз.


[mailto]: mailto:taxitechsupport@yandex-team.ru?subject=%D0%92%D0%BE%D0%BF%D1%80%D0%BE%D1%81%20%D0%BF%D0%BE%20%D1%82%D0%B0%D1%80%D0%B8%D1%84%D0%B0%D0%BC&body=%D0%9A%D0%BE%D0%BC%D0%BF%D0%B0%D0%BD%D0%B8%D1%8F%20NAME%20%28clid%3DCLID%29.%0A%D0%92%D0%BE%D0%BF%D1%80%D0%BE%D1%81 "Написать на taxitechsupport@yandex-team.ru"
[profile]: /profile/ "профиль такоспарка"
[tariffs-faq]: /tariffs/faq/ "faq по тарифам"
[imports]: /imports/ "импорты"
[predproduction-checklist]: /predproduction_checklist/ "чеклист"
[drivers]: /drivers/ "водители"
[map]: /map/ "карта"
[exponential_backoff]: http://en.wikipedia.org/wiki/Exponential_backoff "Exponential_backoff"