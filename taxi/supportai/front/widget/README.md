# Yandex Support AI виджет

### Установка
Добавьте следующий скрипт себе на сайт в элемент head, подставив вместо Х нужные значения параметров

`<sript src="https://supportai.yandex/widget/loader.js?project_id=X&source=X&defaultSetup=X&preset=X&initMessage=X"></script>`

### Описание параметров:
 - `project_id` - (string) Идентификатор проекта, для которого запрашивается виджет. Будет использован при запросах на сервер
 - `source` - (string) Источник (TODO)
 - `defaultSetup` - (boolean) Нужно ли автоматически настроить виджет после его загрузки. Если этот параметр в значении true - то виджет автоматически будет настроен и показан после загрузки с применением темы, указанной в preset (либо с темой по умолчанию). Объект чата будет сохранен в window.SupportAIChat. Если значение параметра false - виджет не будет настроен и показан после загрузки (можно сделать вручную. Об этом ниже, в разделе "Запуск и настройка")
 - `preset` - (string) Идентификатор темы. Тема включает в себя настройки цветов, иконок, шрифтов и прочие настройки. Список доступных тем:
    - default - применяется по умолчанию
    - russian_post_b2b_orders_dialog
    - burger_king - Тема для Burger King
    - burger_king_app - для виджета в приложении
 - `initMessage` - (boolean) Нужно ли отправлять запрос при настройке виджета (смотри описание параметра defaultSetup). Это позволит боту стартовать с приветственной фразы или показать стандартные варианты ответов для пользователя
### Запуск и настройка

Настройка виджета представляет собой указание темы виджета, после чего происходит его отрисовка на странице.

Если параметр `defaultSetup` был выставлен true, то виджет будет настроен и отрисован автоматически. Объект чата будет сохранен в window.SupportAIChat
Если параметр `defaultSetup` был выставлен false, то виджет автоматически не настроится и не будет показан. Настроить его можно вручную следующим образом:

<code>
    const chat = new SupportAIChat(presetName);
</code>

После настройки виджета в глобальный объект window будет выброшено событие "SUPPORT_AI_CHAT_INITIALIZED". Вы можете подписаться на это событие `(window.addEventListener("SUPPORT_AI_CHAT_INITIALIZED", () => { // Do what you want }))` чтобы определить, что виджет готов к использованию.

Список доступных методов у объекта SupportAIChat:
 - `hide` - Сворачивает виджет
 - `show` - Разворачивает виджет

### Для приложений
в папку static положить html который включает виджет

Для добавление фич на старте виджета необходимо в webview добавить window.widgetFeatures = [{key: ..., value: ...}]

На iOS можно делать через userScripts или через evaluateJavascript перед тем как страница будет загружена
На Android можно сделать через evaluateJavascript
