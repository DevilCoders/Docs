# Частые вопросы

## Общие вопросы {#general}

1. **С какого статуса начинается платная отмена?**

   Платная отмена начинается со статуса `SORTING_CENTER_AT_START`.

1. **В какой момент можно отменить заказ?**

   Заказ можно отменить в любой момент до того, как посылки были переданы получателю. Для этого нужно воспользоваться методом [Отмена заявки](https://yandex.ru/dev/logistics/delivery-api/doc/about/intro.html).

1. **Что такое platform_station_id?**

   `platform_station_id` — это уникальный идентификатор склада в системе Яндекс Доставки. Этот идентификатор используется как для вашего склада, так и для ПВЗ и точек самопривоза.

1. **Как я могу доставить заказ до ПВЗ?**

   Чтобы оформить доставку до ПВЗ, необходимо оформить заявку через обычный метод [Создание заказа](https://yandex.ru/dev/logistics/delivery-api/doc/ref/part3/api_b2b_platform_offers_create_post.html). При этом в качестве `destination.platform_station` необходимо передать идентификатор `platform_station_id` ПВЗ, который можно получить, воспользуясь методом [получения списка точек самопривоза и ПВЗ](https://yandex.ru/dev/logistics/delivery-api/doc/ref/part2/api_b2b_platform_pickup-points_list_post.html).

   Для получения списка точек самопривоза и ПВЗ необходимо узнать `geo_id`, воспользовавшись методом [получения geo_id](https://yandex.ru/dev/logistics/delivery-api/doc/ref/part2/api_b2b_platform_location_detect_post.html).

5. **Что такое geo_id?**

   `geo_id` — это уникальный идентификатор населённого пункта.

   В больших городах может быть несколько `geo_id` в зависимости от переданного адреса.

6. **Что такое `places` и `items`?**

   `items` — это товары, которые упакованы в `places` (коробки, которые будут погружены в машину при отгрузке).

1. **Поддерживаете ли вы маркировку «Честный знак»?**

   Да, мы поддерживаем маркировку «Честный знак» версии 1.2. Для этого в поле `marking_code` нужно передать GTIN (14 символов) и серийный номер (13 символов). Мы также поддерживаем передачу криптохвоста.

1. **Можно ли напечатать свой ярлык? Какие требования к ярлыкам?**

   Вы можете размещать на упаковках ярлыки, напечатанные вами самостоятельно. Для этого ярлык должен соответствовать следующим требованиям:

   * Ярлык должен содержать уникальный штрихкод на каждое грузовое место заказа, штрихкод.

   * Ярлык также содержит:

     * номер заказа,

     * название интернет-магазина,

     * адрес получателя,

     * дату и время доставки,

     * контактные данные получателя.

   * Ярлык должен правильно сканироваться и быть адекватных размеров.

   * Ярлык должен быть хорошо виден и читаем, не располагаться на ребрах коробки.

   * При деформации коробки в процессе открытия ярлык должен сохранять целостность.

   Для вашего удобства прилагаем [пример ярлыка](https://yastatic.net/s3/doc-binary/src/dev/logistics/ru/delivery-api/files/bar-codes.jpg) в нужном формате.

 1. **Как узнать интервалы доставки в другой город?**

    Для того чтобы узнать интервалы доставки, необходимо воспользоваться методом [получения интервалов доставки в зависимости от переданного адреса](https://yandex.ru/dev/logistics/delivery-api/doc/ref/part1/api_b2b_platform_offers_info_get.html).

1. **Какое минимально доступное время забора после оформления заказа?**

    Если у вас планируется забор сегодня и вы планируете отгрузить новый заказ, то создавать такой заказ нужно до наступления обозначенного времени забора

1. **Что такое `operator_request_id`?**

   `operator_request_id` — это ключ идемпотентности, который задаётся на стороне клиента и является уникальным значением для каждого подтверждённого заказа.

   Таким образом, после подтверждения заказа с одним `operator_request_id`, необходимо при создании нового заказа воспользоваться другим ключом, чтобы заявка успешно сформировалась.

1. **В каком формате нужно передавать адрес? Какие у вас требования к адресу?**

   Пример корректного адреса: Россия, Москва, улица Пушкина, д. 8.

   При передаче адреса также учитывайте, пожалуйста, следующие требования к нему:

   * Не забывайте про запятые.

   * Разделяйте разные части одного адреса между собой запятыми.

   * В адресе мы не указываем почтовые индексы, чтобы избежать ошибок.

   * Не указывайте номер квартиры. Укажите квартиру в поле `destination.custom_location.details.room`.

1. **Обязательно ли передавать координаты при создании заказа?**

    При создании заказа вы можете передавать на выбор один из параметров: адрес, координаты или `platform_station_id`.

1. **Что делать, если получатель не знает, какой способ оплаты будет использовать при получении?**

    Для этого в процессе создания заявки укажите способ оплаты как `card`, в таком случае, если у получателя не окажется при себе банковская карта или транзакция завершится неудачно, то он сможет всё равно оплатить посылку наличными.

1. **Как сделать оплату при получении? Как работает страховая стоимость и как её включить?**

    Чтобы включить оплату при получении в заказе, необходимо заполнить поле `billing_info` при [создании заказа](https://yandex.ru/dev/logistics/delivery-api/doc/ref/part3/api_b2b_platform_offers_create_post.html).

1. **В каких единицах передавать габариты и стоимость?**

    Объем передается в см³, габариты — в см, вес — в граммах, стоимость в копейках.

    Поле `unit_price` (стоимость) заполняется для единицы товара.

1. **В каком формате передавать номер телефона?**

    Номер телефона необходимо передавать без знака плюс в следующем формате: `79123456789`.

1. **Есть ли у вас тестирующая система? Каким образом мне провести тестирование?**

    Для тестовых запросов используйте следующий хост: [https://b2b.taxi.tst.yandex.net/](https://b2b.taxi.tst.yandex.net/).

    Пример запроса для тестового хоста: [https://b2b.taxi.tst.yandex.net/api/b2b/platform/offers/create](https://b2b.taxi.tst.yandex.net/api/b2b/platform/offers/create).

    Для запроса к нашему API вам необходимо использовать токен. Токен указывается в поле `Authorization` с префиксом `Bearer`.

    Это тестовый токен для запросов на тестовый хост: `AgAAAADzeAQMAAAPeISvM_9LUkxCijQoFXOH5QE`.

    `platform_station_id` — это идентификатор вашего склада в нашей системе (точка А). Для тестовых запросов у нас для вас тоже есть уже заведённый склад. Используйте его: `7c4054cd-d768-4062-8f8d-d0c9b3c8c4e8`.

1. **Сколько у меня времени, чтобы подтвердить заявку?**

    На [подтверждение заявки](https://yandex.ru/dev/logistics/delivery-api/doc/ref/part3/api_b2b_platform_offers_confirm_post.html) у вас есть 10 минут.

    Если ваш сервис подразумевает оформление заказа в течение более продолжительного времени, не создавайте заявку, пока не получили подтверждение от клиента. Чтобы вернуть клиенту доступные интервалы доставки, достаточно воспользоваться методом [получения интервалов доставки](https://yandex.ru/dev/logistics/delivery-api/doc/ref/part1/api_b2b_platform_offers_info_get.html). Для того чтобы предварительно рассчитать стоимость доставки, можно воспользоваться методом [предварительного расчёта стоимости доставки](https://yandex.ru/dev/logistics/delivery-api/doc/ref/part1/api_b2b_platform_pricing-calculator_post.html).

1. **Как завести собственную станцию?**

    Завести собственную станцию вам поможет ваш персональный менеджер.

1. **Как настроить отгрузки на своей станции?**

    Настроить отгрузки на вашей станции вам поможет ваш персональный менеджер, который вместе с вами определит график забора с вашего склада.

1. **Можно ли самостоятельно привозить заказ на сортировочный центр?**

    Такая возможность есть. Чтобы получить точки самопривоза, воспользуйтесь методом [получения точек самопривоза и ПВЗ](https://yandex.ru/dev/logistics/delivery-api/doc/ref/part2/api_b2b_platform_pickup-points_list_post.html).

    Привезти заказ на сортировочный центр можно до 21:00.

    При наличии индивидуальных потребностей передачи заказов на сортировочный центр условия можно согласовать с вашим персональным менеджером.

1. **Какие ограничения по габаритам и весу отправлений?**

   * Вес заказа не должен превышать 30 кг. При необходимости вы можете обсудить особые условия с вашим менеджером.

   * Сумма длин всех сторон товара не должна превышать 300 см. При этом длина одной стороны — не более 110 см.

1. **Какие ограничения по страховой стоимости отправлений?**

    Максимальный размер страховой стоимости товара составляет 250 000 рублей.

1. **В каком часовом поясе вы передаёте время? В каком часовой поясе необходимо передавать время при создании заказа?**

    Время необходимо передавать в GMT\+0 в формате UNIX или UTC. Ответ придёт также в GMT\+0.

1. **Что такое штрихкод, зачем он нужен? Какие у вас требования к штрихкодам?**

    Штрихкод — это уникальный идентификатор товара в заказе. Штрихкод может состоять из следующих знаков: строчные и прописные латинский буквы от a до z, символы `-`, `/`, `\`, `_`, цифры от 0 до 9. В одном заказе может быть несколько товаров с одинаковым штрихкодом.

1. **Какие у вас есть требования к формату телефона?**

    Номер телефона следует указывать без специальных символов в локальном формате. Пример: `7910123456`.

1. **Что такое АПП (акт приёма-передачи)? Для чего он нужен?**

    АПП (акт приёма-передачи) — это документ, подтверждающий факт отгрузки курьером ваших товаров. Для генерации документа воспользуйтесь методом [получения акта приёма-передачи](https://yandex.ru/dev/logistics/delivery-api/doc/ref/part4/api_b2b_platform_request_get-handover-act_get.html). Кроме того, вы можете самостоятельно печатать акты приёма-передачи по тем заказам, которые будут отгружены, используя привычные шаблоны документов вашей компании.

 
## Вопросы, связанные с ошибками методов API {#api}
 
 
1. **Not authorized request**

    Эта ошибка может возникать в случае передачи в заголовке `Authorization` некорректного токена. 

    Как определить, что токен некорректный?

   - Токен требует актуализации после смены пароля в личном кабинете Яндекс Доставки.

   - Убедитесь, что запрос к тестовому хосту осуществляется при помощи тестового токена, а запрос к боевому хосту — при помощи боевого.

   - Проверьте, что заголовок `Authorization` содержит корректное значение в формате `Bearer YOUR_TOKEN`.

1. **Delivery interval in the past**

    Проверьте, что интервал доставки указан в будущем.

1. **Delivery interval is too narrow**

    Эта ошибка может возвращаться в случае, если в регионе доставки нет того интервала, который вы передаёте в запросе. Например, в некоторых регионах доставка может быть осуществлена только с 9 часов до 18 часов. Это значит, что при создании заказа с интервалом с 9 часов до 13 часов вернётся ошибка `Delivery interval is too narrow`.

1. **Cannot deliver**

    Ошибка `Cannot deliver` возникает в случае, если наша система не смогла выстроить маршрут до получателя или ПВЗ по заданным параметрам. 
    
    Чтобы исправить эту ошибку, убедитесь, что:
    
   - вы передали корректный интервал доставки до двери, воспользуясь методом [создания заявки](https://yandex.ru/dev/logistics/delivery-api/doc/ref/part3/api_b2b_platform_offers_create_post.html).

   - в случае доставки до ПВЗ или постамата указали временные интервалы в следующем формате: 

   ```json
    {
       "from": "2022-06-16",
       "to": "2022-06-16"
    }
   ```
    
    Если ошибка сохраняется, обратитесь [в поддержку](https://yandex.ru/dev/logistics/delivery-api/troubleshooting/troubleshooting.md).

1. **Dimensions should not exceed**

    В вашей заявке габариты превышают допустимые. Сверьтесь, пожалуйста, с нашими ограничениями:

   - Вес заказа при доставке до двери или до ПВЗ не должен превышать 30 кг. При необходимости вы можете обсудить особые условия с вашим менеджером.

   - Сумма длин всех сторон товара при доставке до двери или до ПВЗ не должна превышать 300 см. При этом длина одной стороны — не более 110 см.

   - При заказе до постамата ограничения в габаритах — 40×38×40 см. При этом общая длина сторон не должна превышать 118 см.

1. **Inconsistency billing details**

    Это сообщение может возникать из-за ошибки оценки стоимости товаров на стороне Яндекса. Чтобы исправить эту ошибку, проверьте единицы измерения стоимости товаровю

1. **Incorrect station platform ID**

    Вот список причин, по которым может возникать эта ошибка: 

   - Станция, которая передана вами в запросе, не соответствует среде, в которой запрос создаётся. Например, вы передали боевую станцию в тестовом запросе или тестовую в боевом.
    
   - Станция, которая передана вами в запросе, не закреплена за пользователем, от имени которого делается запрос или эта станция не существует в системе.

1. **Incorrect JSON content. Please check the formatting**

    Это техническая ошибка парсинга тела запроса. Проверьте, что данные в формате JSON составлены корректно.

1. **There is place with no items и There are items with no place**

    Такую ошибку можно получить, если создать заказ с пустым грузоместом или товаром без привязанного к нему грузоместа. У каждого грузоместа должен быть хотя бы один товар и у каждого товара должно быть своё одно грузоместо.

1. **Cannot parse ... info**

    Это техническая ошибка парсинга тела запроса. Проверьте, что данные в формате JSON составлены корректно.

1. **There already was request with such code within this employer**
 
    `operator_request_id` — это уникальный параметр для каждого заказа. Если попытаться повторно создать заказ с одинаковым `operator_request_id`, появится ошибка `There already was request with such code within this employer`.
