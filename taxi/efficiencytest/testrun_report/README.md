# testrun_report
Скрипт для создания отчета по прогону testpalm в комментарии тикета на прогон кейсов.

1. Установить requests для python3 (если еще не установлен):
```commandline
python3 -m pip install requests
```
2. Получить OAuth-токен от TestPalm. [Ссылка](https://oauth.yandex-team.ru/authorize?response_type=token&client_id=6d967b191847496a8a7077e2e636142f)
3. Получить OAuth-токен от StarTrack. [Ссылка](https://oauth.yandex-team.ru/authorize?response_type=token&client_id=5f671d781aca402ab7460fde4050267b)
4. Открыть файл настроек `settings.json`
5. Указать в настройках соответствующие токены, полученные выше. Они останутся такими и далее, нужно будет указать только перед первым использованием.
6. Указать в настройках в `run_url` - ссылка на прогон, например, https://testpalm.yandex-team.ru/subv_goals/testrun/6172aaaa26ff7f0022bead3b
7. `ticket_id` в комментарий этого тикета будет опубликован отчет, например "EFFICIENCYTEST-156". Если в настройках рана указан release ticket, то не нужно указывать его в настройках, оставьте поле пустым, тикет подтянется автоматически. Если указать ticket_id в настройках вручную, то release ticket из настроек рана будет проигнорирован.
8. `summonees`- те, кого надо призвать в комментарии с отчетом, например ["dlopteva"]. Сейчас сделано так, что если ticket_id не указан, то в призыв к отчету по прогону будет автоматически добавлен автор эпика на тестирование. Если никого, кроме автора эпика на тестирование, призывать не надо, то оставьте summonees пустым списком. Если указан ticket_id, то будут испозованы только summonees, указанные в settings.
9. Запустить скрипт (из директории, где находится скрипт):
```commandline
python3 make_report.py
```
10. Отчет опубликован.
