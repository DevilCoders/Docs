# Выделить API endpoint для Fleet Tracking System

Цель - уницифировать API для Fleet Tracking System и перевести всех наших
потребителей на него.

Definition of Done формулируются следующим образом:

1. Пройти дизайн ревью и защитить API системы
2. Для 4 затронутых сервисов привести API в согласованный вид, в т.ч:
   2.1 Реализовать (=привести в согласованный вид) следующие компоненты:
     1. Yagr
     2. Yaga
     3. Internal-trackstory
     4. Yaga-metrolog
     1. Control plane - для управления конфигурацией
   2.2 Унифицировать внутренние протоколы данных для обмена между внутренними
   сервисами
4. Все потребители должны использвать заново созданный API.
   3.1 Такси
   3.2 Камера усталости
   3.3 Самокаты
   3.4 Драйв
3. Внутренняя админка для регулирования конфигураций пайплайнов
4. Динамическая работа с пользовательскими логброкерами т.к. опять же нет
   возможности подключать логброкеры динамечески, без рестарта.
6. Примитивный рейт-лимитер
5. Мониторинг
5. Быстрый тайм то маркет (например хороший тестинг)


Дополнительные milestone, которые выполняются если хватает времени

2. Работа с внешними redis pubsub, т.к. сейчас нет возможности подключать их
   динамически.
4. Если позволяют доступные ресурсы, то скрыться за одним endpoint
   fts.yandex.net

## Список что надо сделать

Пока несортированный список
1. В geobus поддежрать protobuf т.к. наружные каналы мы будем отдавать в нем
2. Научить geobus отделять классы от протоколов чтобы не отдавать наружу наши
   внутренние протоколы. Кодеген ?
3. Научится работать с произвольным logbroker
4. Научится работать с произвольным redis
5. Разграничение ресурсов на все-все-все. В т.ч. рейтимитер на геобас, лимиты на
   хранение данных в редисе и т.п.

## Общий endpoint

fts.yandex.net/

nginx proxy : 

/1
/2
/3

yagr.ya.net/1

trackstory.ya.net/2

fts.yandex.net

