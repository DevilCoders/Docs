# Создание нового пользователя

Запрос позволяет создать запись о новом пользователе клиента.

## Синтаксис запроса

```
POST https://business.taxi.yandex.ru/api/1.0/client/{идентификатор клиента}/user/
```

{% include [order-create-headers-p](../_includes/concepts/order-create/id-order-create/headers-p.md) %}


#### Authorization
OAuth-токен. Процесс получения токена описан в разделе [Начало работы](quickstart.md).

Данные о новом пользователе передаются в теле запроса в формате JSON:

#|
|| Поле | Описание | Формат ||
|| `email` | Адрес электронной почты пользователя. | Строка ||
|| `fullname` | Полное имя пользователя. | Строка ||
|| `nickname` | Краткое имя пользователя. | Строка ||
|| `role` | Блок с информацией о роли пользователя. Роль можно указать следующими способами: <br/>- При помощи [идентификатора уже существующей роли](role-create.md#role-id-desc).<br/>- При помощи описания новой роли пользователя. Поля с описанием роли аналогичны полям запроса [Создание новой роли](role-create.md) (кроме поля [name](role-create.md#name-desc)). | Объект ||
|| `department_id` | Идентификационный номер подразделения. | Строка || 
|| `role_id` | Идентификационный номер роли пользователя. | Строка ||
|| `classes` | Список доступных пользователю тарифов. Данное поле следует передавать если не был передан параметр `role_id` в блоке `role`. | Массив ||
|| `limit` | Ограничения на сумму, которую пользователь может потратить на поездки за календарный месяц. | Строка ||
|| `phone` | Телефонный номер пользователя. | Строка ||
|| `is_active` | Признак активности пользователя. Неактивный пользователь не имеет возможности самостоятельного заказа и на его имя нельзя заказать поездку. | Логическое ||
|| `cost_center` | Название [кост-центра клиента](cost-center-create-old.md) по умолчанию. | Строка ||
|| `cost_centers` | Информация о доступных кост-центрах. Необязательное поле.<br/><br/>Является устаревшим: при наличии новых центров затрат включать его не нужно.<br/><br/>Содержит следующие поля: 
```json 
"required": bool, "format": "string", "values": ["cost_center_1", "cost_center_2"]
```
- `required` — признак того, что указание кост-центра обязательно.
- `format` — формат указания центра затрат для сотрудника. Возможные значения:
    - `select` — сотрудник выбирает кост-центр из списка.
    - `text` — сотрудник самостоятельно указывает кост-центр в текстовом поле.
    - `mixed` — сотруднику доступны выбор кост-центра из списка и свободный ввод в текстовом поле.
- `values` — список кост-центров, доступных для сотрудника. Формат списка `"кост_центр1","кост_центр2", ...`.
   Доступен только при значении формата `mixed` и `select`. | Объект ||
|| `cost_centers_id` | id набора [настроек центров затрат](cost-center-settings-list.md) (при наличии у клиента новых центров затрат). Необязательное поле.<br/>Если не включать поле в запрос, пользователю будет назначен основной центр затрат (при наличии у клиента новых центров затрат). | Строка ||
|#

## Описание полей ответа

В ответе могут содержаться следующие поля:

Поле | Описание | Формат
----- | ----- | -----
`_id` | Идентификационный номер пользователя. | Строка


## Примеры запросов

Запрос с указанием существующей роли:

```
POST https://business.taxi.yandex.ru/api/1.0/client/a2d...d09/user/
...
Authorization: <OAuth-токен>

    {
        "email": "example-mail@example-company.ru",
        "fullname": "Иванов Илья",
        "nickname": "ИИлья",
        "department_id": "233e725b0511459da7b38cb24f2d8fd7",
        "role": {
            "role_id": "620d2b39bb154e3ebe5debc8341b3471"
        },
        "phone": "+75551234567",
        "is_active": false,
        "cost_center": "some cost center",
        "cost_centers_id": "123...fef",
        "cost_centers": {
            "required": true,
            "format": "mixed",
            "values": ["центр затрат 1", "центр затрат 2"]
        }
    }
```

Запрос с указанием новой роли:

```
POST https://business.taxi.yandex.ru/api/1.0/client/a2...d09/user/
...
Authorization: <OAuth-токен>

    {
        "email": "example-mail@example-company.ru",
        "fullname": "Иванов Илья",
        "nickname": "ИИлья",
        "department_id": "620d2b39bb154e3ebe5debc8341b3471",
        "role": {
            "limit": 10000,
            "classes": ["econom"],
            "restrictions": [
                {
                    "days": ["mo", "we", "sa"],
                    "start_time": "00:00:00",
                    "end_time": "23:59:00",
                    "type": "weekly_date"
                }
            ],
            "geo_restrictions": [
                {
                    "source": "geo_restriction_id1", 
                    "destination": "geo_restriction_id2";
                },
                {
                    "source": "geo_restriction_id3";
                }
            ]
        },
        "phone": "+75551234567",
        "is_active": false,
        "cost_center": "some cost center",
        "cost_centers": {
            "required": true,
            "format": "mixed",
            "values": ["центр затрат 1", "центр затрат 2"]
        }
    }

```

## Пример ответа

Пример ответа на данный запрос выглядит следующим образом:

```no-highlight
{
        "_id": "3caa3587675b49deb62e3286b753b05e"
}
```

## Возможные коды ответа

Ответ на данный запрос может содержать следующие стандартные HTTP-коды:

- `200` — запрос выполнен успешно.
- `400` — в запросе был передан неизвестный параметр или параметр с недопустимым значением.
- `401` — был передан неверный [OAuth-токен](quickstart.md).
- `403` — у клиента не хватает прав на выполнение данного запроса.
- `406` — запись с указанными параметрами уже существует.

