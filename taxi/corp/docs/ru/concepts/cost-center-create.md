# Создание кост-центров клиента

{% note warning %}

Созданные до 24 июня 2021 года клиенты продолжают работать с [кост-центрами в старом формате](cost-center-create-old.md). Можно перейти на новый формат кост-центров, но вернуться к старому формату уже не получится.

{% endnote %}


Центры затрат позволяют получить от сотрудника информацию о рабочей поездке.

{% note warning %}

Удаление кост-центров не поддерживается. Однако их можно переименовать и изменить их настройки, при этом в реестрах будут уже новые названия полей для старых заказов.

{% endnote %}


## Пример использования кост-центра в приложении
![](../_images/request-form.png)
При заказе приложение попросит заполнить необходимые поля.

Каждому полю и его содержимому соответствует параметр, созданный при помощи запроса. Например, для поля **Цель поездки** указаны параметры **в офис** или **из офиса**.
![](../_images/cost-center.png)
После выбора нужного параметра его значение сохранится и можно будет продолжить выбор других опций.

## Синтаксис запроса

```
POST https://business.taxi.yandex.ru/api/1.0/client/{идентификатор клиента}/cost_centers 
```

{% include [order-create-headers-p](../_includes/concepts/order-create/id-order-create/headers-p.md) %}


#### Authorization
OAuth-токен. Процесс получения токена описан в разделе [Начало работы](quickstart.md).

## Пример запроса

```
POST https://business.taxi.yandex.ru/api/1.0/client/a2...d09/cost_centers

Authorization: <OAuth-токен>

{
    "name": "Основной центр затрат",
    "default": true,
    "field_settings": [
         {
           "title": "Центр затрат",
           "required": true,
           "services": ["taxi"],
           "format": "select",
           "values": ["командировка", "в центральный офис"]
         },
         {
           "title": "Цель поездки",
           "services": ["taxi"],
           "required": true,
           "format": "mixed",
           "values": ["цель 1", "цель 2", "особая цель"]
         },
         {
           "title": "Номер дела",
           "hidden": true,
           "services": ["taxi"],
           "required": true,
           "format": "text",
           "values": []
         }
    ]
}
```

## Описание полей запроса

Поле | Описание | Формат
----- | ----- | -----
`name` | Название набора настроек центра затрат. | Строка
`default` | Является ли набор настроек основным. | Логическое
`field_settings` | Список настроек для каждого поля центров затрат. | Массив
`field_settings.[N].title` | Название поля. | Строка
`field_settings.[N].required` | Обязательно ли заполнять это поле при заказе. | Логическое
`field_settings.[N].hidden` | Не показывать и не использовать это поле при заказе. Необязательное поле. | Логическое
`field_settings.[N].services` | Идентификаторы сервисов, в которых можно использовать это поле при заказе. На данный момент поддерживается только `taxi`. | Массив
`field_settings.[N].format` | Формат указания центра затрат для сотрудника. Возможные значения: <br/>- `select` — сотрудник выбирает кост-центр из списка.<br/>- `text` — сотрудник самостоятельно указывает кост-центр в текстовом поле.<br/>- `mixed` — сотруднику доступны выбор кост-центра из списка и свободный ввод в текстовом поле. | Объект
`field_settings.[N].values` | Cписок кост-центров, доступных для сотрудника. Формат списка `"кост_центр1","кост_центр2", ...`.<br/>Доступен только при значении формата `mixed` и `select`. | Объект


## Пример ответа

```
{
    "id": "1234567890abcdef1234567890abcdef",
    "name": "Основной центр затрат",
    "default": true,
    "field_settings": [
         {
           "id": "0123456789abcdef0123456789abcde0",
           "hidden": false,
           "title": "Центр затрат",
           "required": true,
           "services": ["taxi"],
           "format": "select",
           "values": ["командировка", "в центральный офис"]
         },
         {
           "id": "0123456789abcdef0123456789abcde1",
           "hidden": false,
           "title": "Цель поездки",
           "services": ["taxi"],
           "required": true,
           "format": "mixed",
           "values": ["цель 1", "цель 2", "особая цель"]
         },
         {
           "id": "0123456789abcdef0123456789abcde2",
           "hidden": true,
           "title": "Номер дела",
           "services": ["taxi"],
           "required": true,
           "format": "text",
           "values": []
         }
    ]
}
```

## Описание полей ответа

Поле | Описание | Формат
----- | ----- | -----
`id` | id набора настроек центра затрат. | Строка
`client_id` | id клиента. | Строка
`name` | Название набора настроек центра затрат. | Строка
`default` | Является ли набор настроек основным. | Логическое
`field_settings` | Список настроек для каждого поля центров затрат. | Массив
`field_settings.[N].id` | id поля. | Строка
`field_settings.[N].title` | Название поля. | Строка
`field_settings.[N].required` | Обязательно ли заполнять это поле при заказе. | Логическое
`field_settings.[N].hidden` | Не показывать и не использовать это поле при заказе. Необязательное поле. | Логическое
`field_settings.[N].services` | Идентификаторы сервисов, в которых можно использовать это поле при заказе. На данный момент поддерживается только `taxi`. | Массив
`field_settings.[N].format` | Формат указания центра затрат для сотрудника. Возможные значения: <br/>- `select` — сотрудник выбирает кост-центр из списка.<br/>- `text` — сотрудник самостоятельно указывает кост-центр в текстовом поле.<br/>- `mixed` — сотруднику доступны выбор кост-центра из списка и свободный ввод в текстовом поле. | Объект
`field_settings.[N].values` | Cписок кост-центров, доступных для сотрудника. Формат списка `"кост_центр1","кост_центр2", ...`.<br/>Доступен только при значении формата `mixed` и `select`. | Объект


## Возможные коды ответа

Ответ на данный запрос может содержать следующие стандартные HTTP-коды:

- `200` — запрос выполнен успешно.
- `400` — в запросе был передан неизвестный параметр или параметр с недопустимым значением.
- `401` — был передан неверный [OAuth-токен](quickstart.md).
- `403` — у клиента не хватает прав на выполнение данного запроса.

