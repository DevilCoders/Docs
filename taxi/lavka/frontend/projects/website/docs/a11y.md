# Как писать доступный интерфейс

## Пишите семантическую верстку

Основное правило, которое покроет 80% необходимой вам функциональности для людей с ограниченными возможностями.

## Изображения

1. Добавляйте alt для изображений или иконок, которые несут информативную ценность.

2. **Но** если рядом с изображением или иконкой написан текст, содержащий такой же смысл, то нужно скрывать такие изображения через атрибут `role="presentation"` для img, `aria-hidden="true"` для svg.

3. Скрывайте декоративные изображения или текст с помощью `aria-hidden="true"`.

## Заголовки

1. Располагайте заголовки в иерархическом порядке

*Хорошо*
```html
<h1>Яндекс Лавка</h1>
  <h2>Фестиваль мороженого</h2>
  <h2>Продукты с кешбэком</h2>
```

*Плохо*
```html
<h1>Яндекс Лавка</h1>
  <h3>Фестиваль мороженого</h3>
  <h3>Продукты с кешбэком</h3>
```

2. Уровень заголовка может не коррелировать с визуальным размеров заголовка на странице

На одной странице заголовок первого уровня может быть одного размера, на другой - другого. Это нормально.

3. Заголовок визуально может вообще отсутствовать

[На главной странице](https://lavka.yandex.ru) есть невидимый заголовок первого уровня "Яндекс Лавка"

4. Заголовок может состоять из нескольких блоков

## Формы

1. Описывайте поля ввода с помощью `<label>`

2. Указывайте тип данных у полей ввода

3. Обязательные поля помечайте атрибутом `required` или `aria-required="true"`

4. Группируйте связанные поля с помощью `<fieldset>` и подписывайте группы тегом `<legend>`

5. Выводите уведомления об ошибках или успехе ([live region](#LiveRegions))

## <a name="LiveRegions"></a> Live regions

Помогает донести до пользователя, что в каком-то месте страницы произошло изменение. Это, например, изменение статуса заказа, изменение цены, ошибка при заполнении формы.

### Как создать

```html
<section role="alert">...</section>
<section aria-live="assertive">...</section>
```

Ассертивные технологии (например, скринридеры) отслеживают такие области. При их изменении, происходит озвучивание.

### Assertive vs polite

При использовании `role="alert"`, `aria-live="assertive"` новое содержимое будет озвучено немедленно, даже если в этот момент происходила озвучка чего-то на странице.
Если вы хотите, чтобы озвучивание нового контента было более вежливым, чтобы оно дождалось заверщения озвучивания текущего, пишите `aria-live="polite"`.

### Особенность использования

Такие контейнеры с атрибутом `role="alert"` должны быть статическими, должны быть встроены в разметку до того, как появляется новый контент внутри него.

## <a name="Components"></a> Компоненты

1. Используйте написанные компоненты, в них уже все есть, чтобы компонент считался доступным.

2. Если вы пишите новый общий компонент (например, `breadcrumbs` или `switch`), сходите на [wai-aria-practices](https://www.w3.org/TR/wai-aria-practices-1.2/) и прочитайте, какие требования нужно соблюсти, чтобы ваш компонент был доступным.

## Роли и свойства

### Роли

Роли позволяют классифицировать элемент на странице

* widget roles (button, radio, tab)
* composites roles (tree, menu)

### Состояние

* widget attributes (aria-hidden, aria-disabled)

Помогает сказать, в каком состоянии находится элемент (невидим, заблокирован, раскрыт).
* relationship attributes (aria-labelledby, aria-describedby)

Говорит, что один объект описывает другой.

## Порядок элементов

* Если вы меняете порядок элементов (например, через css-свойство `order`), помните, что в дереве доступности порядок элементов будет такой, какой он описан в html. Скринридеры будут следовать ему.
* Также если между такими элементами можно переключаться табом, то фокус будет прыгать туда-сюда.

## tabindex

1. tabindex = 0

Добавляет элемент в поток, элемент становится доступным для фокуса.

2. tabindex = -1

Элемент не попадает в поток, но может быть сфокусирован программно, например можно написать в js: `elem.focus()` и такой элемент будет сфокусирован.

3. tabindex > 0

Мощный инструмент, но пользоваться опасно.Задает конкретный порядок фокуса.
В 99% случаев это не нужно. Задумайтесь, зачем вам это, перед тем, как писать.

## Outline

**Не пишите `outline: none`**

Плохая практика. Невозможно увидеть, на каком именно элементе стоит фокус. Современные браузеры научились определять с помощью эвристики, что фокус должен быть сделан очевидным для элемента.
Сильно упрощая, звучит это так:
*Если пользователь использует клавиатуру, то обводка будет, если мышку - нет.*
Читай `:focus`, `:focus-visible`
Для старых браузеров без поддержки `:focus-visible` есть полифил.

## Aria-атрибуты

Большинство aria-атрибутов опущено в данном руководстве. Скорей всего они вам понадобятся только тогда, когда вы будете писать новый базовый [компонент](#Components).
