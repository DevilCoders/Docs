# API для интеграции с Lookup

Данный блок api описывает все необходимые ручки для управления процессом "выдачи" кандидта в таксишный Lookup.
После получения маршрутного листа необходимо передать в Диспатч связку этого листа с новым заказом в Такси.

```
POST {{host}}/lookup/order/register
{
    "orders": [
        {
            "route_id" : "add078e9-b929-4dd1-b9c4-16f20b7f1f18",
            "order_id" : "12345"
        }
    ]
}
```

{% note tip %}

Лучше сделать это сразу после создания draft заказа. В таком случае не возникнет ситуации, что Lookup пришел в Диспатч, а последний не знает о заказе.

{% endnote %}

После этого Диспатч сможет отдать данные по выбранному кандидату в Lookup.
```
POST {{host}}/driver-for-order
{
    "ids" : {
        "order_id": "12345"
    },
    "lookup": {
        "wave": 1,
        "generation" : 1,
        "version": 1
    }
}
```
На самом деле Lookup приносит много больше параметров, но все они не интересны Диспатчу.

На текущий момент есть логика "ожидания" регистрации заказа, т.е. Диспатч "тянет время" (1 минуту), пока не ответит окончательно, что кандидата не будет.



