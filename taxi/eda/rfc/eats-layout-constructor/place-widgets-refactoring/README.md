## Рефакторинг place виджетов в Layout constructor

### Summary

Сейчас в Layout constructor (LC) используется несколько похожих типов виджетов для отображения списка заведений. Метаданные этих типов и код реализации почти полностью повторяют друг друга. В рамках данной задачи предлагается провести рефакторинг кода и меты этих виджетов, объединив их в один.

### Задачи

* [EDACAT-905](https://st.yandex-team.ru/EDACAT-905)

### Виджеты

* places\_list
* places\_selection
* places\_carousel

Так же places\_brand\_carousel имеет схожую логику, но отвечает за отображение конкретных брендов и, возможно, объединять его с остальными не стоит.

### Предлагаемая реализация

Вышеупомянутые виджеты сейчас имеют практически идентичные мета поля и основное различие между ними это тип отображения отдаваемый клиенту - вертикальный список или карусель. Предлагается объеденить код и метаданные этих виджетов в один виджет places\_selection. Новый виджет будет объединять в себе большинство мета полей существующих виджетов, а именно:

* display\_type
Отвечает за тип отображения на клиенте - список или карусель.
* low  
Индекс первого ресторана для отображения.
* min\_count  
Минимальное число объектов в виджете для отображения. Если не указан или равен нулю, возможен пустой виджет.
* limit  
Максимальное число объектов в виджете (остальные будут пропущены). Если не указан, то без ограничений.
* place\_filter\_type  
Какие типы ресторанов отображать в виджете. Обязательный.
* selection\_name  
Название подборки (если нужно использовать подборку как источник данных).
* exclude\_brands  
Brand\_id ресторанов, которые не попадут в виджет.
* exclude\_businesses  
Набор типов заведений, которые надо исключить из виджета.
* disable\_filters  
Позволяет отключить фильтрацию карусели быстрыми фильтрами. По-умолчанию фильтрация включена.

В виджете places\_list наполнение списка ограничивалось параметрами low и high. В виджетах places\_selection и places\_carousel за это отвечали параметры min\_count и limit. Предлагается задавать наполнение нового виджета использованием low, min\_count и limit (все три параметра не являются обязательными).

Изменения затронут мету, код и тесты этих виджетов. Так же необходимо будет произвести миграцию данных в БД на новые типы виджетов, с сохранением соответствующей конфигурации.
