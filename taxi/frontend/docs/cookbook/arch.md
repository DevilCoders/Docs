# Архитектура фронтенд сервиса

Наиболее распространенный вид архитектуры фронтенд сервиса:
![img](https://jing.yandex-team.ru/files/twin/arch.png)

Но так же встречаются и просто статичные сервисы (без nodejs и nginx частей)

*Расшифровка*

1. Пользователь попадает на балансер сервиса
2. Балансер перенаправляет трафик на конкретную машинку сервиса в одном из Дата центров. Так же балансер может валидировать запрос через антиробота и блокировать подозрительные запросы.
3. Запрос попадает на nginx сервиса и далее проксируется на nodejs часть сервиса
4. Nodejs часть (BFF) обрабатывает запрос, авторизует пользователя, делает back-to-back запросы в бекенды, как правило, такие запросы подписываются [TVM](https://wiki.yandex-team.ru/passport/tvm2) токенами (_например, список экспериментов или данные для SSR_), и отвечает пользователю html страницей (с указанием необходимых версий статичных файлов)
5. Далее уже браузер делает запросы за статикой (css/js/картинками) в s3 с учетом необходимой версии.

Так же nginx может проксировать часть запросов в сервисы бекенда через себя для избежания кроссдоменных запросов + насыщать запросы необходимой информацией.