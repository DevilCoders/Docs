# Запрос и подтверждение персональной роли

Подробная схема и описание к ней представлена ниже.

![](../image/role-request.svg)

1. Сотрудник формирует и отправляет запрос на получение роли через интерфейс IDM.
1. IDM получает запрос и собирает все подтверждения на выдачу этой роли.
1. IDM проверяет политики, принятые в системе:
    1. Если подтверждение системы на выдачу роли не требуется, IDM переводит роль в состояние «Подтверждена» и отправляет push-уведомление об этом событии в систему. Перейдите к шагу 4.1.
    1. В противном случае IDM отправляет push-уведомление по логину в систему. Система возвращает ответ «Accepted» и IDM переводит роль в состояние «Передана в систему». Перейдите к шагу 4.
    
1. В зависимости от того, требуется ли решение о выдаче подтверждающего, выполняется одно из действий:
    1. Если решение положительное или подтверждение не требуется, IDM переводит роль в состояние «Выдана» и присваивает статус «Активная».
    1. В противном случае IDM переводит роль в состояние «Ошибка» и присваивает статус «Неактивная».
    
1. IDM отправляет сотруднику уведомление о статусе роли.
1. Сотрудник получает уведомление.

