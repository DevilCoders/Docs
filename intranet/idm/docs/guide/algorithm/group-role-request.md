# Запрос и подтверждение групповой роли

Подробная схема и описание к ней представлена ниже.

![](../image/group-role-request.svg)

1. Сотрудник формирует и отправляет запрос на получение групповой роли через интерфейс IDM.
1. IDM получает запрос и собирает все подтверждения на выдачу этой роли.
1. IDM проверяет политики, принятые в системе:
    1. Если подтверждение системы на выдачу роли для группы не требуется, IDM переводит роль в состояние «Выдана». Перейдите к шагу 4.
    1. В противном случае IDM переводит роль в состояние «Подтверждена». Перейдите к шагу 5.
    
1. IDM выдает персональную связанную роль каждому сотруднику из группы: переводит роль в состояние «Выдана» и присваивает статус «Активная».
1. IDM отправляет push-уведомление в систему:
    - Если роль переведена в состояние «Выдана», отправляет уведомление по каждому логину из группы. Перейдите к шагу 7.
    - Если роль переведена в состояние «Подтверждена», отправляет уведомление с названием группы. Перейдите к шагу 6.
    
1. Подтверждающий в системе получает уведомление и принимает решение о выдачи роли по каждому логину:
    1. Если решение положительное, IDM переводит роль для каждого логина в состояние «Выдана» и присваивает статус «Активная».
    1. В противном случае IDM переводит роль для каждого логина в состояние «Ошибка» и присваивает статус «Неактивная».
    
1. IDM отправляет каждому сотруднику уведомление о статусе роли.
1. Сотрудник получает уведомление.

