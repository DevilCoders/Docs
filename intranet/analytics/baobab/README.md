## Что это
Здесь лежат скрипты (yql + python) для формирования отчёта на основе разметки [баобаба](https://wiki.yandex-team.ru/baobab/)

Пример отчёта для Потолочницы: https://datalens.yandex-team.ru/eqssghtsz1lo6-staff-baobab-dashboard

## Исходные данные
Для создания анлагичного отчёта по своему сервису, вам понадобится:
- Размеченный (например, так https://st.yandex-team.ru/CIA-2777 или https://st.yandex-team.ru/STAFF-15412) фронтенд
- Таблицы в yt, куда складываются баобабные логи вашего сервиса (например, [//logs/staff-redir-log/1d](https://yt.yandex-team.ru/hahn/navigation?path=//logs/staff-redir-log/1d)). Они должна появиться после предыдущего пункта.
- Место в yt, куда будут складываться обработанные данные, чтобы их отобразить на дашборде. Если его нет, [нужно получить квоту на сервис](https://yt.yandex-team.ru/docs/gettingstarted#quotas)

## How to
Если всё вышеперечисленное сделано и вы хотите ровно такой же отчёт, то:
1. Запускаете аналогичный расчёт на yql: https://yql.yandex-team.ru/Operations/YlJIXNJwbI4-B5Qv7lyDOOYVyQ0IMlFRbMOQRI8mNlQ=
Это параметризованный запрос, в параметрах нужно указать свои данные: $baobab_table_path - путь к папке с таблицами логов, $output_table - путь к таблице, в которую складывать предобработанные данные
2. Копируете [датасет, график и дашборд](https://datalens.yandex-team.ru/navigation/erqumejgty006-staff), и меняете так, чтобы они смотрели на ваши таблицы.

Важное замечание: в $output_table попадают предобработанные данные в несгруппированном виде, а также дополнительная мета-информация (например, полное дерево показов в виде json).
Это делается потому, что сырые данные баобаба хранятся за довольно непродолжительное время и для построения каких-то новых отчётов может быть полезно иметь эти данные.
Они занимают довольно много место. Если вам они не нужны и место ограничено, то можно поправить yql так, чтобы хранить меньше данных (например, убрать оттуда raw_event_data).
