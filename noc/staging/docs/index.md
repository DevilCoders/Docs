# Staging

{% note info %}

Эта дока автоматически подтягивается из основной [репы](https://noc-gitlab.yandex-team.ru/nocdev/rt-docker)

{% endnote %}


Проект "стейджинга" Racktables.
## CTL-сервисы тестовой среды
### rttestctl != rttctl
* rt**test**ctl - серверная часть;
* rt**t**ctl - клиентская часть;
## Описание проекта
### Назначение
Предоставить среду (далее "staging") тестирования и отладки изменений в проектах [Racktables-upstream](https://noc-gitlab.yandex-team.ru/nocdev/racktables-upstream) и [Racktables-yandex](https://noc-gitlab.yandex-team.ru/nocdev/racktables), для достижения следующих целей:
* Автоматизация процесса сборки и развёртования docker-контейнеров, эмулирующих действующий(основной) сервис Racktables в Яндекс;
* Минимизация рисков связанных с разработкой и изменением состояний рабочих сервисов Racktables;
* Использование повторяемой тестовой среды в процессе Continuous Integration сервиса noc-gitlab;
* Ручное и автоматическое тестирование кандидатных изменений для подготовки к релизу;

### Целевая аудитория
* Инженеры службы сетевой разработки NocDev;
* Пользователи действующего сервиса Racktables (для промежуточной оценки результатов разработки);

### Ограничения
Тестовая среда не покрывает всех функциональных возможностей действующего RT.  
Основным ограничеием является отсутствие возможности использовать функциональности RT, связанные с изменением состояний эксплуатируемой сети Яндекс.

### Допущения
* Процесс CI GitLab предполагает автоматическое создание и обновление staging для [тестовых веток Racktables-yandex](https://noc-gitlab.yandex-team.ru/nocdev/racktables/-/branches);
* Создаваемая копия базы данных mysql предполагает внесение любых изменений без рисков для действующих сервисов RT. В том числе на права локальных пользователей;
* Копия действующей БД снимается единожды при создании staging;

### Описание окружения
Контейнеры, эмулирующие сервис и Racktables и его необходимое окружение:
* rt-fpm
* rt-mysql
* rt-nginx
* rt-csv

Контейнеры, эмулирующие зависимые от Racktables сервисы:
* rt-api
* rt-alexandria
