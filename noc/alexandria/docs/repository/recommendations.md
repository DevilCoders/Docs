## Рекомендации к составлению Matchers
### First Match
Проход по списку осуществляется по принципу **First Match**. 
Необходимо располагать фильтры с большей спецификой в верхней части списка.  
Точно также, как это делается для ACL в сети, условный `permit ip any any` в начале списке не даст сработать другим более специфичным правилам.

### Выбор элементов фильтра при составлении Matcher
#### ModelRE
Первостепенным и достаточным аттрибутом для объединения устройств по группам является **ModelRe**.  
Допускается создание нескольких строк matcher, когда объединяющий regexp чем-то не устраивает автора.

#### Rackcode
Использование выражения из тегов RT(**RackCode**) ожидается **только** для следующих случаев:
* Уточнение роли устройства. 
  * Например, для одной модели устройств необходимо разное ПО из-за разных функциональностей/дизайнов
* Уточнение стадии обновления. 
  * Например, тестовая эксплуатация нового релиза.
* Устройства нужно различать по автотегу из аттрибута, полученного в процессе постановки в наливку.
  * Например, выбор Cumulus vs Switchdev.
* Устройства объединяемые в группу это сервера с недетерминированный составом HW. 
  * Например YANET.

{% note info %}

Если можно обойтись без тегов в матчере, то лучше так и сделать.

{% endnote %}

#### Рекомендации к формату Rackcode
* Следует избегать использования предикатов. 
    * Желаемое состояние сети должно проходить review.
    * Обновлять Александрию ради нового тега в выражении - это нормально и хорошо.
* Следует избегать использования выражений типа `not {tag}`.
* Не допускается замещение ModelRe на теги из "vendor tagtree", типа {Cisco 2960}. Они завязаны на модель из бота. 

## Рекомендации к составлению Softs
* Один yaml-фалй на один экземпляр ПО 
* Редактировать старый файл ПО, если это не исправление ошибки - плохо. Нужно создавать новые экземпляры.
* Якоря и ссылки не тестируются для генератора
* Экземпляр ПО должен содержать непустой список (`Files []SoftFile yaml:"Files"`)
* Экземпляр ПО должен содержать атрибут Type (`Type string yaml:"Type"`) 