# wait_for_issue_status - дождаться статуса startrek-тикета

## Параметры

- `issue` - тикет в Startrek
- `statuses` - список статусов, которые мы ждём; когда startrek-тикет перейдёт в один из указанных
  статусов, Action завершится успешно, и сценарий продолжит выполняться дальше
- `until_status_change` - по-умолчанию `false`, если выставлен в `true`, то при первом замеченном
  изменении статуса startrek-тикета новый статус проверится на соответствие указанному в `statuses`,
  и в зависимости от проверки Action либо тут же перейдёт в состояние с ошибкой, либо завершится
  успешно
- `timeout` - по-умолчанию `3600` (1 час), максимальное время, которое Action будет ждать статуса
  startrek-тикета

## Примеры

Ожидание согласования по NOCRFCS-тикету до первого изменения статуса или до окончания получасового
таймаута:

```yaml
actions:
  # ждём статуса готовности тикета, по которому создали джобу
  - name: Ждём согласования NOCRFCS-тикета
    wait_for_issue_status:
      issue: {{ startrek_issue }}  # тут подставится тот тикет, с которым была создана джоба
      # считаем, что готово, когда тикет перейдёт в "В ожидании" (pending)
      statuses:
        - pending
      # ждём первой смены статуса тикета: если статус сменился на интересующий нас статус pending,
      # то Action считается выполнившимся, иначе (например, NOCRFCS отклонили и перевели тикет в
      # статус "Закрыто"/closed) считаем ожидание проваленным
      until_status_change: true
      # ждём согласования не более получаса, и если не дождались, то падаем с ошибкой
      timeout: 1800  # 1800 секунд
```
