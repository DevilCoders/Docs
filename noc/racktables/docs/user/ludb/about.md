## Описание LocaluserDB

loacaluserdb - это часть RT, которая содержит группы и логины пользователей, роли, а также логику применения правил и раскатку пользователей на оборудование.

ludb оперирует следующими понятиями:
- role - это группировка нескольких пользователей c совершенно одинаковой политикой доступа.
  - Может называться как угодно, лишь бы название описывало, почему они попали в эту группу.
  - Массив lu_roles индексирован по role_name и содержит для каждой роли массив-ACL.
  - Ключом ACL является RackCode, значением - специальный enum privileges:  `sudo`, `ro`, `ignore`, `delete`, `alert`.
  - Поиск идёт до первого совпадения, если ничего не найдено, возвращается 'ignore'
- user - логин пользователя
- lu_users - группировка пользователей по ролям.
  - Пользователь не может иметь более одной роли, скрипт выведет ошибку.
  - Если пользователя нет в массиве, то при встрече его на аппаратуре будет выдаваться alert.
  - Если значение в lu_users - не массив, значит, это пользователь, у которого имя совпадает с ролью (персональные привилегии).

Основным файлом, в котором лежит информация о пользователях и группах, находится в gitlab в проекте Racktables и называется он [lusettings.php](https://noc-gitlab.yandex-team.ru/nocdev/racktables/-/blob/master/scripts/localuser-db/lusettings.php)

Список описания групп и прав доступа представлен в переменной `lu_roles`.

Список принадлежности пользователей к определенной группе хранится в переменной `lu_users`.

{% cat "Описание групп" %}

**суперпользователь**

В эту группу входят пользователи с правами `sudo` везде.

**продвинутый NOC**

Сюда добавляем тех, кто имеет права RW на сетевое оборудование.

**дежурный**

Сюда добавляем дежурных NOC.

**неопытный дежурный**

Сюда добавляем новых дежурных на срок 90 дней.

**новичок**

Сюда добавляем тех, кому требуется доступ RO.

**инженер NOC в Cloud**

Сюда добавляем сотрудников Cloud Network Infrastructure

**traffic team**

Сюда добавляем сотрудников команды TT.

**traffic team ignore**

???

**архитектор**

???

**руководитель**

???

**администратор dwdm**

Сюда добавляем сотрудников эксплуатации сетей DWDM

**бывший сотрудник**

Сюда добавляем наших бывших коллег, которые ушли из Яндекса

**бывший NOC**

Сюда добавляем коллег, которые покинули NOC

**админ БК**

Сюда добавляем сотрудников банерокрутилки (БК)

**неправильный логин**

Сюда добавляем тех, у кого неправильный логин

**unix-робот**

Сюда добавляем роботов

**консольные юзеры**


**ненужное**

**новый nocdev**

Сюда добавляем новых NOCDEV разработчиков на 90 дней.

**почти nocdev**

Сюда добавляем людей, которые похожи на программистов, но менеджеры/руководители/тимлиды

**дежурный nocdev**

Дежурные NOCDEV

**nocdev**

Сюда добавляем пользователей NOCDEV без прав к дежурству

**смежники**

Сюда добавляем сотрудников из других отделов

**разработчик hbf_win**

Спецгруппа для HBF разработчиков

**региональный helpdesk**

Сюда добавляем сотрудников helpdesk

**вендор Juniper**

???

**вендор Cumulus**

???

{% endcat %}



