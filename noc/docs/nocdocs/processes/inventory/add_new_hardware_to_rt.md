## Добавление нового оборудования в Racktables

Тикет на добавление нового железа заводится **строго** через [форму по запросу на заведение нового вида оборудования](https://st.yandex-team.ru/createTicket?queue=NOCDEV&_form=75230) --- если он заведён как-то иначе, надо попросить перезавести через эту форму, либо скопировать чеклист из другого тикета на поддержку.  Это нужно, чтобы не упустить важные шаги типа поддержки в сценарии зачистки свича.

### Алгоритм добавления записи о новой модели в Racktables.

1. Необходимое условие --- чтобы устройство каким-то образом было добавлено в OEBS и видно в Bot, чтобы там были вендор, название модели, хотя бы один экземпляр с  инвентарником.
2. Идём [на страницу справочника моделей, про которые знает RT](https://racktables.yandex-team.ru/index.php?page=chapter&tab=edit&chapter_no=12). 

![Model](./images/1_model.png)
3. Создаём новую запись вида `${vendor}%GPASS%${model}`, где вендора необходимо написать так, как он написан в других записях в этом дикте (включая регистр), модель берётся такой, какой хочется, чтобы она отображалась в Racktables.  Жмём "сохранить", видим зелёное сообщение, сохраняем полученный номерок записи. 

![Successful save is successful](./images/2_success.png)
4. Идём на [страницу редактирования умного отображения айдишников Bot/OEBS в RT](https://racktables.yandex-team.ru/index.php?page=chapter&tab=edit&chapter_no=10013).
5. Идём в Бота и ищем там устройство, например, [вот пример для свича EdgeCore](https://bot.yandex-team.ru/umka/assets/102142393)
6. Создаём новую запись вида `${oebs_model}%GPASS%$attr_2_${model_record_id},${tags}`, где модель по ОЕБС копируется прямо из Бота из поля "Cегмент 1", номер записи берётся из шага 3, а теги --- просто перечень тегов через запятую, которые будут навешиваться на свежесоздаваемые устройства.  Для свичей можно просто вешать `chassis`.  Это можно поменять в любой момент в будущем. 

![OEBS maps](./images/3_map.png)
7. Проверяем --- если кроняка `rt-yandex.git/scripts/importumka.php` отработала без ошибок, всё сделано верно.  Если это самостоятельное сетевое устройство (не карта), то сделается запись-болванка для свежеимпортированного устройства, у которой будет бедный  набор тегов и мало атрибутов (см. картинку).  Если это сможет стать полноценным устройством после наливки. 

![Switch](./images/4_switch.png)
