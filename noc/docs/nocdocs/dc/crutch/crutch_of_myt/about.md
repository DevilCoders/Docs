# Специфика-DC-MYT

## Ограниченный EdgePod

В текущей версии дизайна DC предпологается иметь выделенный EdgePod для стыка фабрики с DCI. Он должен иметь 32-й номер (теоретически 64, 96 т.д. но фактически, везде он только один). EdgePod в MYT не имеет своих S1 и напрямую включен в S2, поскольку размер фабрики не большой и ставить дополниьельное оборудование только для строго соотвествования дизайну смысла нет.

EdgePod представлен четырьмя коммутаторами myt-32z\[1234\], при этом нечетные коммутаторы (myt-32z\[13\]) подключены к myt-x4 не четырьмя 100G портами, а только тремя, поскольку требуется обеcпечить подключение myt-a3a к всем коммутаторам EdgePod для резервирования. Но на Nokia 7750 SR-1s мы столкнулись с недостаточным количеством портов и один из 100G портов используется не для подключения к S2, а для подключения к myt-a3a.

## Двойной слой S2

В MYT-6 установлено два S1 - myt-6d\[12\] - Nexus 9805. В основном туда подключены ToR с аплинками 10G. Проблема в том, что на этих S1 есть только 40G порты и у нас есть ограничения по количеству свободных оптических волокон до КЦ, где расположены S2. 
Что бы решить эту задачу в MYT-6 были дополнительно устновлены свои S2, которые фактически являются прослойкой между S1 MYT-6 и S2 в КЦ - my-6x\[12\]. Это коммутаторы Huawei 8850 на 32 100G порта.

Они установлены в той же стойке, что и myt-6d\[12\] и подключаются к ним через 40G DAC так, что в сумме у каждого S1 аплинк получается 16x40G - 640G. В свою очередь myt-6x\[12\] подключены к S2 к КЦ так, что каждый из них имеет в сумме на аплинках 8x100G = 800G.

Если убрать прослойку в виде myt-6x\[12\] то на каждом из S1 в сумме получится сделать не более 8x40G = 320G, текущая испольуземая полоса около 150G и понемногу растет.

## L2 сегмент

L2 сегмент MYT представлен единственнмы S1 - myt-d1 (Nexus C7718) который подключен к сервисным коммутаторам myt-a1\[abcd\]. Сети в L2 длменах подняты на FW подключенными к этим сервисным коммутаторам. Далее трафик уходит либо на EdgePod или далее в DCI в зависимости от адресов назначения. Эта схема находится на термиральной стадии своего развития, новые проекты туда не заходят, а старые проекты постепенно уносят нагрузку в более современные ДЦ.

Примерная схема текущей фабрики выглядит следующим образом:![https://wiki.yandex-team.ru/users/gslv/specifika-dc-myt/.files/myt-dc-limitation1.png](https://wiki.yandex-team.ru/users/gslv/specifika-dc-myt/.files/myt-dc-limitation1.png)
